"use strict";(self.webpackChunknextcloud_mail=self.webpackChunknextcloud_mail||[]).push([[730],{1366:(e,a,n)=>{n.r(a),n.d(a,{default:()=>fe});var i=n(14398),s=n(85745),o=n(19534),r=n(51849);const l={name:"EditorSettings",props:{account:{type:Object,required:!0}},data(){return{mode:this.account.editorMode}},computed:{...(0,r.n2)(o.A)},watch:{mode(t,e){this.mainStore.patchAccount({account:this.account,data:{editorMode:t}}).then((()=>{s.A.info("editor mode updated")})).catch((t=>{throw s.A.error("could not update editor mode",{error:t}),this.editorMode=e,t}))}}};var c=n(85072),d=n.n(c),A=n(97825),u=n.n(A),m=n(77659),p=n.n(m),v=n(55056),h=n.n(v),f=n(10540),g=n.n(f),b=n(41113),C=n.n(b),_=n(33190),y={};y.styleTagTransform=C(),y.setAttributes=h(),y.insert=p().bind(null,"head"),y.domAPI=u(),y.insertStyleElement=g(),d()(_.A,y),_.A&&_.A.locals&&_.A.locals;var x=n(14486);const S=(0,x.A)(l,(function(){var t=this,e=t._self._c;return e("div",[e("p",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],staticClass:"radio",attrs:{id:"plaintext",type:"radio",value:"plaintext"},domProps:{checked:t._q(t.mode,"plaintext")},on:{change:function(e){t.mode="plaintext"}}}),t._v(" "),e("label",{class:{primary:"plaintext"===t.mode},attrs:{for:"plaintext"}},[t._v("\n\t\t\t"+t._s(t.t("mail","Plain text"))+"\n\t\t")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],staticClass:"radio",attrs:{id:"richtext",type:"radio",value:"richtext"},domProps:{checked:t._q(t.mode,"richtext")},on:{change:function(e){t.mode="richtext"}}}),t._v(" "),e("label",{class:{primary:"richtext"===t.mode},attrs:{for:"richtext"}},[t._v("\n\t\t\t"+t._s(t.t("mail","Rich text"))+"\n\t\t")])])])}),[],!1,null,"74fa0e50",null).exports;var w=n(49123),k=n.n(w),I=(n(18149),n(28290));const D={name:"MailboxInlinePicker",components:{Treeselect:k()},props:{account:{type:Object,required:!0},disabled:{type:Boolean,default:!1},value:{type:Number,default:void 0}},data(){return{selected:this.value}},computed:{...(0,r.n2)(o.A),mailboxes(){return this.getMailboxes()}},watch:{selected(t){t!==this.value&&(this.$emit("input",t),this.selected=t)}},methods:{getMailboxes(t){let e=[];return e=t?this.mainStore.getSubMailboxes(t):this.mainStore.getMailboxes(this.account.accountId),e=e.filter((t=>(0,I.w)(t,"i"))),e.map((t=>({id:t.databaseId,label:t.displayName,children:t.mailboxes.length>0?this.getMailboxes(t.databaseId):""})))}}};var B=n(1545),M={};M.styleTagTransform=C(),M.setAttributes=h(),M.insert=p().bind(null,"head"),M.domAPI=u(),M.insertStyleElement=g(),d()(B.A,M),B.A&&B.A.locals&&B.A.locals;const E=(0,x.A)(D,(function(){var t=this;return(0,t._self._c)("Treeselect",{ref:"Treeselect",attrs:{options:t.mailboxes,multiple:!1,clearable:!1,disabled:t.disabled},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})}),[],!1,null,null,null).exports,N={name:"AccountDefaultsSettings",components:{MailboxInlinePicker:E},props:{account:{type:Object,required:!0}},data:()=>({saving:!1}),computed:{...(0,r.n2)(o.A),draftsMailbox:{get(){const t=this.mainStore.getMailbox(this.account.draftsMailboxId);if(t)return t.databaseId},async set(t){s.A.debug("setting drafts mailbox to "+t),this.saving=!0;try{await this.mainStore.patchAccount({account:this.account,data:{draftsMailboxId:t}})}catch(t){s.A.error("could not set drafts mailbox",{error:t})}finally{this.saving=!1}}},sentMailbox:{get(){const t=this.mainStore.getMailbox(this.account.sentMailboxId);if(t)return t.databaseId},async set(t){s.A.debug("setting sent mailbox to "+t),this.saving=!0;try{await this.mainStore.patchAccount({account:this.account,data:{sentMailboxId:t}})}catch(t){s.A.error("could not set sent mailbox",{error:t})}finally{this.saving=!1}}},trashMailbox:{get(){const t=this.mainStore.getMailbox(this.account.trashMailboxId);if(t)return t.databaseId},async set(t){s.A.debug("setting trash mailbox to "+t),this.saving=!0;try{await this.mainStore.patchAccount({account:this.account,data:{trashMailboxId:t}})}catch(t){s.A.error("could not set trash mailbox",{error:t})}finally{this.saving=!1}}},archiveMailbox:{get(){const t=this.mainStore.getMailbox(this.account.archiveMailboxId);if(t)return t.databaseId},async set(t){s.A.debug("setting archive mailbox to "+t),this.saving=!0;try{await this.mainStore.patchAccount({account:this.account,data:{archiveMailboxId:t}})}catch(t){s.A.error("could not set archive mailbox",{error:t})}finally{this.saving=!1}}},junkMailbox:{get(){const t=this.mainStore.getMailbox(this.account.junkMailboxId);if(t)return t.databaseId},async set(t){s.A.debug("setting junk mailbox to "+t),this.saving=!0;try{await this.mainStore.patchAccount({account:this.account,data:{junkMailboxId:t}})}catch(t){s.A.error("could not set junk mailbox",{error:t})}finally{this.saving=!1}}},snoozeMailbox:{get(){const t=this.mainStore.getMailbox(this.account.snoozeMailboxId);if(t)return t.databaseId},async set(t){s.A.debug("setting snooze mailbox to "+t),this.saving=!0;try{await this.mainStore.patchAccount({account:this.account,data:{snoozeMailboxId:t}})}catch(t){s.A.error("could not set snooze mailbox",{error:t})}finally{this.saving=!1}}}}};var F=n(28558),O={};O.styleTagTransform=C(),O.setAttributes=h(),O.insert=p().bind(null,"head"),O.domAPI=u(),O.insertStyleElement=g(),d()(F.A,O),F.A&&F.A.locals&&F.A.locals;const T=(0,x.A)(N,(function(){var t=this,e=t._self._c;return e("div",[e("p",[t._v("\n\t\t"+t._s(t.t("mail","Drafts are saved in:"))+"\n\t")]),t._v(" "),e("MailboxInlinePicker",{attrs:{account:t.account,disabled:t.saving},model:{value:t.draftsMailbox,callback:function(e){t.draftsMailbox=e},expression:"draftsMailbox"}}),t._v(" "),e("p",[t._v("\n\t\t"+t._s(t.t("mail","Sent messages are saved in:"))+"\n\t")]),t._v(" "),e("MailboxInlinePicker",{attrs:{account:t.account,disabled:t.saving},model:{value:t.sentMailbox,callback:function(e){t.sentMailbox=e},expression:"sentMailbox"}}),t._v(" "),e("p",[t._v("\n\t\t"+t._s(t.t("mail","Deleted messages are moved in:"))+"\n\t")]),t._v(" "),e("MailboxInlinePicker",{attrs:{account:t.account,disabled:t.saving},model:{value:t.trashMailbox,callback:function(e){t.trashMailbox=e},expression:"trashMailbox"}}),t._v(" "),e("p",[t._v("\n\t\t"+t._s(t.t("mail","Archived messages are moved in:"))+"\n\t")]),t._v(" "),e("MailboxInlinePicker",{attrs:{account:t.account,disabled:t.saving},model:{value:t.archiveMailbox,callback:function(e){t.archiveMailbox=e},expression:"archiveMailbox"}}),t._v(" "),e("p",[t._v("\n\t\t"+t._s(t.t("mail","Snoozed messages are moved in:"))+"\n\t")]),t._v(" "),e("MailboxInlinePicker",{attrs:{account:t.account,disabled:t.saving},model:{value:t.snoozeMailbox,callback:function(e){t.snoozeMailbox=e},expression:"snoozeMailbox"}}),t._v(" "),e("p",[t._v("\n\t\t"+t._s(t.t("mail","Junk messages are saved in:"))+"\n\t")]),t._v(" "),e("MailboxInlinePicker",{attrs:{account:t.account,disabled:t.saving},model:{value:t.junkMailbox,callback:function(e){t.junkMailbox=e},expression:"junkMailbox"}})],1)}),[],!1,null,"25f63538",null).exports;var U=n(67568),R=n(18446),P=n(27380),V=n(92516),j=n(54373);const L={name:"SignatureSettings",components:{TextEditor:U.A,NcSelect:V.EQ,ButtonVue:V.x1,IconLoading:V.ne,IconCheck:j.A},props:{account:{type:Object,required:!0}},data(){return{loading:!1,bus:(0,P.A)(),identity:null,signature:"",signatureAboveQuote:this.account.signatureAboveQuote}},computed:{...(0,r.n2)(o.A),identities(){const t=this.account.aliases.map((t=>({id:t.id,label:t.name+" ("+t.alias+")",signature:t.signature})));return t.unshift({id:-1,label:this.account.name+" ("+this.account.emailAddress+")",signature:this.account.signature}),t},isLargeSignature(){return new Blob([this.signature]).size>2097152}},watch:{async signatureAboveQuote(t,e){try{await this.mainStore.patchAccount({account:this.account,data:{signatureAboveQuote:t}}),s.A.debug("signature above quoted updated to "+t)}catch(t){s.A.error("could not update signature above quote",{e:t}),this.signatureAboveQuote=e}}},beforeMount(){this.changeIdentity(this.identities[0])},methods:{changeIdentity(t){s.A.debug("select identity",{identity:t}),this.identity=t,this.signature=t.signature?(0,R.Vw)((0,R.o0)(t.signature)).value:""},async deleteSignature(){this.signature=null,await this.saveSignature()},async saveSignature(){this.loading=!0;const t={account:this.account,signature:this.signature};return this.identity.id>-1?(t.aliasId=this.identity.id,this.mainStore.updateAliasSignature(t).then((()=>{s.A.info("signature updated"),this.loading=!1})).catch((t=>{throw s.A.error("could not update account signature",{error:t}),t}))):this.mainStore.updateAccountSignature(t).then((()=>{s.A.info("signature updated"),this.loading=!1})).catch((t=>{throw s.A.error("could not update account signature",{error:t}),t}))},handleShowToolbar(t){this.$emit("show-toolbar",t)}}};var H=n(14399),z={};z.styleTagTransform=C(),z.setAttributes=h(),z.insert=p().bind(null,"head"),z.domAPI=u(),z.insertStyleElement=g(),d()(H.A,z),H.A&&H.A.locals&&H.A.locals;const G=(0,x.A)(L,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.signatureAboveQuote,expression:"signatureAboveQuote"}],staticClass:"checkbox",attrs:{id:"signature-above-quote-toggle",type:"checkbox"},domProps:{checked:Array.isArray(t.signatureAboveQuote)?t._i(t.signatureAboveQuote,null)>-1:t.signatureAboveQuote},on:{change:function(e){var a=t.signatureAboveQuote,n=e.target,i=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&(t.signatureAboveQuote=a.concat([null])):s>-1&&(t.signatureAboveQuote=a.slice(0,s).concat(a.slice(s+1)))}else t.signatureAboveQuote=i}}}),t._v(" "),e("label",{attrs:{for:"signature-above-quote-toggle"}},[t._v("\n\t\t\t"+t._s(t.t("mail","Place signature above quoted text"))+"\n\t\t")])]),t._v(" "),t.identities.length>1?e("NcSelect",{attrs:{"allow-empty":!1,options:t.identities,"aria-label-combobox":t.t("mail","Select an alias"),searchable:!1,value:t.identity,label:"label","track-by":"id"},on:{"option:selected":t.changeIdentity}}):t._e(),t._v(" "),e("TextEditor",{attrs:{html:!0,placeholder:t.t("mail","Signature â€¦"),bus:t.bus},on:{"show-toolbar":t.handleShowToolbar},model:{value:t.signature,callback:function(e){t.signature=e},expression:"signature"}}),t._v(" "),t.isLargeSignature?e("p",{staticClass:"warning-large-signature"},[t._v("\n\t\t"+t._s(t.t("mail","Your signature is larger than 2 MB. This may affect the performance of your editor."))+"\n\t")]):t._e(),t._v(" "),e("ButtonVue",{attrs:{type:"primary",disabled:t.loading,"aria-label":t.t("mail","Save signature")},on:{click:t.saveSignature},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("IconLoading",{attrs:{size:16,"fill-color":"white"}}):e("IconCheck",{attrs:{size:16}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","Save signature"))+"\n\t")]),t._v(" "),t.signature?e("ButtonVue",{staticClass:"button-text",attrs:{"aria-label":t.t("mail","Delete"),type:"tertiary-no-background"},on:{click:t.deleteSignature}},[t._v("\n\t\t"+t._s(t.t("mail","Delete"))+"\n\t")]):t._e()],1)}),[],!1,null,"12b9bfac",null).exports;var q=n(2413),Q=n(86451);const Y={name:"AliasForm",components:{NcButton:V.x1,IconRename:q.A,IconLoading:V.ne,IconDelete:Q.A,IconCheck:j.A},props:{account:{type:Object,required:!0},alias:{type:Object,required:!0},enableUpdate:{type:Boolean,default:!0},enableDelete:{type:Boolean,default:!0},onUpdateAlias:{type:Function,default:async(t,e)=>{let{alias:a,name:n}=e}},onDelete:{type:Function,default:async t=>{}}},data(){return{changeAlias:this.alias.alias,changeName:this.alias.name,showForm:!1,loading:!1}},computed:{formId(){return`alias-form-${this.alias.id}`}},methods:{async updateAlias(){this.loading=!0,await this.onUpdateAlias(this.alias.id,{alias:this.changeAlias,name:this.changeName}),this.showForm=!1,this.loading=!1},async deleteAlias(){this.loading=!0,await this.onDelete(this.alias.id),this.loading=!1}}};var J=n(43331),K={};K.styleTagTransform=C(),K.setAttributes=h(),K.insert=p().bind(null,"head"),K.domAPI=u(),K.insertStyleElement=g(),d()(J.A,K),J.A&&J.A.locals&&J.A.locals;const $={name:"AliasSettings",components:{AliasForm:(0,x.A)(Y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"alias-form"},[t.showForm?e("form",{staticClass:"alias-form__form",attrs:{id:t.formId},on:{submit:function(e){return e.preventDefault(),t.updateAlias.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.changeName,expression:"changeName"}],staticClass:"alias-form__form__input",attrs:{type:"text",required:""},domProps:{value:t.changeName},on:{input:function(e){e.target.composing||(t.changeName=e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.changeAlias,expression:"changeAlias"}],staticClass:"alias-form__form__input",attrs:{disabled:t.alias.provisioned,type:"email",required:""},domProps:{value:t.changeAlias},on:{input:function(e){e.target.composing||(t.changeAlias=e.target.value)}}})]):e("div",[e("strong",[t._v(t._s(t.alias.name))]),t._v(" <"+t._s(t.alias.alias)+">\n\t")]),t._v(" "),e("div",{staticClass:"alias-form__actions"},[t.showForm?[e("NcButton",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Update alias"),"native-type":"submit",form:t.formId,name:t.t("mail","Update alias")},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("IconLoading",{attrs:{size:16}}):e("IconCheck",{attrs:{size:16}})]},proxy:!0}],null,!1,98289116)})]:[t._t("default"),t._v(" "),t.enableUpdate?e("NcButton",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Rename alias"),name:t.t("mail","Show update alias form")},on:{click:function(e){e.preventDefault(),t.showForm=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconRename",{attrs:{size:16}})]},proxy:!0}],null,!1,3917186806)}):t._e(),t._v(" "),t.enableDelete&&!t.alias.provisioned?e("NcButton",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Delete alias"),name:t.t("mail","Delete alias")},on:{click:function(e){return e.preventDefault(),t.deleteAlias.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("IconLoading",{attrs:{size:16}}):e("IconDelete",{attrs:{size:16}})]},proxy:!0}],null,!1,1007210659)}):t._e()]],2)])}),[],!1,null,"7f7d1aad",null).exports,ButtonVue:V.x1,IconLoading:V.ne,IconCheck:j.A,IconRename:q.A},props:{account:{type:Object,required:!0}},data(){return{newAlias:"",newName:this.account.name,showForm:!1,loading:!1}},computed:{...(0,r.n2)(o.A),aliases(){return this.account.aliases},accountAlias(){return{alias:this.account.emailAddress,name:this.account.name,provisioned:!!this.account.provisioningId,smimeCertificateId:this.account.smimeCertificateId}}},methods:{async createAlias(){this.loading=!0,await this.mainStore.createAlias({account:this.account,alias:this.newAlias,name:this.newName}),s.A.debug("created alias",{accountId:this.account.id,alias:this.newAlias,name:this.newName}),this.resetCreate(),this.loading=!1},resetCreate(){this.newAlias="",this.newName=this.account.name,this.showForm=!1},async updateAlias(t,e){const a=this.aliases.find((e=>e.id===t));await this.mainStore.updateAlias({account:this.account,aliasId:a.id,alias:e.alias,name:e.name,smimeCertificateId:a.smimeCertificateId})},async deleteAlias(t){await this.mainStore.deleteAlias({account:this.account,aliasId:t})}}};var W=n(44123),X={};X.styleTagTransform=C(),X.setAttributes=h(),X.insert=p().bind(null,"head"),X.domAPI=u(),X.insertStyleElement=g(),d()(W.A,X),W.A&&W.A.locals&&W.A.locals;const Z=(0,x.A)($,(function(){var t=this,e=t._self._c;return e("div",[e("ul",{staticClass:"aliases-list"},[e("li",[e("AliasForm",{attrs:{account:t.account,alias:t.accountAlias,"enable-update":!1,"enable-delete":!1}},[t.account.provisioningId?t._e():e("ButtonVue",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Go back"),name:t.t("mail","Change name")},on:{click:function(e){return t.$emit("rename-primary-alias")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconRename",{attrs:{size:16}})]},proxy:!0}],null,!1,3917186806)})],1)],1),t._v(" "),t._l(t.aliases,(function(a){return e("li",{key:a.id},[e("AliasForm",{attrs:{account:t.account,alias:a,"on-update-alias":t.updateAlias,"on-delete":t.deleteAlias}})],1)})),t._v(" "),t.showForm?e("li",[e("form",{attrs:{id:"createAliasForm"},on:{submit:function(e){return e.preventDefault(),t.createAlias.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"}],attrs:{type:"text",placeholder:t.t("mail","Name"),required:""},domProps:{value:t.newName},on:{input:function(e){e.target.composing||(t.newName=e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newAlias,expression:"newAlias"}],attrs:{type:"email",placeholder:t.t("mail","Email address"),required:""},domProps:{value:t.newAlias},on:{input:function(e){e.target.composing||(t.newAlias=e.target.value)}}})])]):t._e()],2),t._v(" "),t.account.provisioningId?t._e():e("div",[t.showForm?t._e():e("ButtonVue",{attrs:{type:"primary","aria-label":t.t("mail","Add alias")},on:{click:function(e){t.showForm=!0}}},[t._v("\n\t\t\t"+t._s(t.t("mail","Add alias"))+"\n\t\t")]),t._v(" "),t.showForm?e("ButtonVue",{attrs:{"native-type":"submit",type:"primary",form:"createAliasForm","aria-label":t.t("mail","Create alias"),disabled:t.loading},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("IconLoading",{attrs:{size:16}}):e("IconCheck",{attrs:{size:16}})]},proxy:!0}],null,!1,98289116)},[t._v("\n\t\t\t"+t._s(t.t("mail","Create alias"))+"\n\t\t")]):t._e(),t._v(" "),t.showForm?e("ButtonVue",{staticClass:"button-text",attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Cancel")},on:{click:t.resetCreate}},[t._v("\n\t\t\t"+t._s(t.t("mail","Cancel"))+"\n\t\t")]):t._e()],1)])}),[],!1,null,"376f3177",null).exports,tt={name:"SieveAccountForm",components:{ButtonVue:V.x1,NcTextField:V.v,NcPasswordField:V.b9,NcCheckboxRadioSwitch:V.AO},props:{account:{type:Object,required:!0}},data(){return{sieveConfig:{sieveEnabled:this.account.sieveEnabled,sieveHost:this.account.sieveHost||this.account.imapHost,sievePort:this.account.sievePort||4190,sieveUser:this.account.sieveUser||"",sievePassword:"",sieveSslMode:this.account.sieveSslMode||"tls"},loading:!1,useImapCredentials:!this.account.sieveUser,errorMessage:""}},computed:{...(0,r.n2)(o.A)},methods:{updateSslMode(t){this.sieveConfig.sieveSslMode=t},updateCredentials(t){this.useImapCredentials=t},async onSubmit(){this.loading=!0,this.errorMessage="",""===this.sieveConfig.sieveUser&&""===this.sieveConfig.sievePassword&&(this.useImapCredentials=!0),this.useImapCredentials&&(this.sieveConfig.sieveUser="",this.sieveConfig.sievePassword="");try{await this.mainStore.updateSieveAccount({account:this.account,data:this.sieveConfig}),this.sieveConfig.sieveEnabled&&await this.mainStore.fetchActiveSieveScript({accountId:this.account.id})}catch(t){this.errorMessage=t.message}this.loading=!1}}};var et=n(51610),at={};at.styleTagTransform=C(),at.setAttributes=h(),at.insert=p().bind(null,"head"),at.domAPI=u(),at.insertStyleElement=g(),d()(et.A,at),et.A&&et.A.locals&&et.A.locals;const nt=(0,x.A)(tt,(function(){var t=this,e=t._self._c;return e("form",{attrs:{id:"sieve-form"}},[e("p",[t._v("\n\t\t"+t._s(t.t("mail","Sieve is a powerful language for writing filters for your mailbox. You can manage the sieve scripts in Mail if your email service supports it. Sieve is also required to use Autoresponder and Filters."))+"\n\t")]),t._v(" "),e("p",[e("NcCheckboxRadioSwitch",{attrs:{checked:t.sieveConfig.sieveEnabled},on:{"update:checked":function(e){return t.$set(t.sieveConfig,"sieveEnabled",e)}}},[t._v("\n\t\t\t"+t._s(t.t("mail","Enable sieve filter"))+"\n\t\t")])],1),t._v(" "),t.sieveConfig.sieveEnabled?e("div",[e("NcTextField",{attrs:{label:t.t("mail","Sieve host"),value:t.sieveConfig.sieveHost},on:{"update:value":function(e){return t.$set(t.sieveConfig,"sieveHost",e)}}}),t._v(" "),e("h4",[t._v(t._s(t.t("mail","Sieve security")))]),t._v(" "),e("div",{staticClass:"flex-row"},[e("ButtonVue",{attrs:{pressed:"none"===t.sieveConfig.sieveSslMode},on:{click:function(e){return t.updateSslMode("none")}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","None"))+"\n\t\t\t")]),t._v(" "),e("ButtonVue",{attrs:{pressed:"ssl"===t.sieveConfig.sieveSslMode},on:{click:function(e){return t.updateSslMode("ssl")}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","SSL/TLS"))+"\n\t\t\t")]),t._v(" "),e("ButtonVue",{attrs:{pressed:"tls"===t.sieveConfig.sieveSslMode},on:{click:function(e){return t.updateSslMode("tls")}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","STARTTLS"))+"\n\t\t\t")])],1),t._v(" "),e("NcTextField",{attrs:{label:t.t("mail","Sieve Port"),value:t.sieveConfig.sievePort},on:{"update:value":function(e){return t.$set(t.sieveConfig,"sievePort",e)}}}),t._v(" "),e("h4",[t._v(t._s(t.t("mail","Sieve credentials")))]),t._v(" "),e("div",{staticClass:"flex-row"},[e("ButtonVue",{attrs:{pressed:t.useImapCredentials},on:{click:function(e){return t.updateCredentials(!0)}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","IMAP credentials"))+"\n\t\t\t")]),t._v(" "),e("ButtonVue",{attrs:{pressed:!t.useImapCredentials},on:{click:function(e){return t.updateCredentials(!1)}}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Custom"))+"\n\t\t\t")])],1),t._v(" "),t.useImapCredentials?t._e():e("p",{staticClass:"custom"},[e("NcTextField",{attrs:{label:t.t("mail","Sieve User"),value:t.sieveConfig.sieveUser},on:{"update:value":function(e){return t.$set(t.sieveConfig,"sieveUser",e)}}}),t._v(" "),e("NcPasswordField",{attrs:{label:t.t("mail","Sieve Password"),value:t.sieveConfig.sievePassword},on:{"update:value":function(e){return t.$set(t.sieveConfig,"sievePassword",e)}}})],1)],1):t._e(),t._v(" "),t._t("feedback"),t._v(" "),t.errorMessage?e("p",[t._v("\n\t\t"+t._s(t.t("mail","Oh snap!"))+"\n\t\t"+t._s(t.errorMessage)+"\n\t")]):t._e(),t._v(" "),e("ButtonVue",{attrs:{type:"primary",disabled:t.loading,"aria-label":t.t("mail","Save sieve settings")},on:{click:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[t._v("\n\t\t"+t._s(t.t("mail","Save sieve settings"))+"\n\t")])],2)}),[],!1,null,"1ea70ac4",null).exports,it={name:"SieveFilterForm",components:{ButtonVue:V.x1,IconLoading:V.ne,IconCheck:j.A},props:{account:{type:Object,required:!0}},data:()=>({script:"",loading:!0,errorMessage:""}),computed:{...(0,r.n2)(o.A),scriptData(){return this.mainStore.getActiveSieveScript(this.account.id)}},watch:{scriptData:{immediate:!0,handler(t){t&&(this.script=t.script,this.loading=!1)}}},methods:{async saveActiveScript(){this.loading=!0,this.errorMessage="";try{await this.mainStore.updateActiveSieveScript({accountId:this.account.id,scriptData:{...this.scriptData,script:this.script}})}catch(e){422===e.response.status?this.errorMessage=t("mail","The syntax seems to be incorrect:")+" "+e.response.data.message:this.errorMessage=e.message}this.loading=!1}}};var st=n(76977),ot={};ot.styleTagTransform=C(),ot.setAttributes=h(),ot.insert=p().bind(null,"head"),ot.domAPI=u(),ot.insertStyleElement=g(),d()(st.A,ot),st.A&&st.A.locals&&st.A.locals;const rt=(0,x.A)(it,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.script,expression:"script"},{name:"shortkey",rawName:"v-shortkey.avoid",modifiers:{avoid:!0}}],attrs:{id:"sieve-text-area",rows:"20",disabled:t.loading},domProps:{value:t.script},on:{input:function(e){e.target.composing||(t.script=e.target.value)}}}),t._v(" "),t.errorMessage?e("p",[t._v("\n\t\t"+t._s(t.t("mail","Oh Snap!"))+"\n\t\t"+t._s(t.errorMessage)+"\n\t")]):t._e(),t._v(" "),e("ButtonVue",{attrs:{type:"primary",disabled:t.loading,"aria-label":t.t("mail","Save sieve script")},on:{click:t.saveActiveScript},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("IconLoading",{attrs:{size:16}}):e("IconCheck",{attrs:{size:16}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","Save sieve script"))+"\n\t")])],1)}),[],!1,null,"734c24f8",null).exports;var lt=n(32981),ct=n(63814),dt=n(98908),At=n(70715);const ut="disabled",mt="enabled",pt="system",vt={name:"OutOfOfficeForm",components:{DatetimePicker:V.t4,TextEditor:U.A,ButtonVue:V.x1,CheckIcon:j.A,OpenInNewIcon:dt.A},props:{account:{type:Object,required:!0}},data(){const t=parseInt(OC.config.version.split(".")[0]),e=(0,lt.C)("mail","enable-system-out-of-office",!1);return{OOO_DISABLED:ut,OOO_ENABLED:mt,OOO_FOLLOW_SYSTEM:pt,initialized:!1,enabled:this.account.outOfOfficeFollowsSystem?pt:ut,enableLastDay:!1,firstDay:new Date,lastDay:null,subject:"",message:"",loading:!1,errorMessage:"",hasPersonalAbsenceSettings:t>=28&&e,personalAbsenceSettingsUrl:(0,ct.Jv)("/settings/user/availability"),textEditorDummyBus:(0,P.A)()}},computed:{...(0,r.n2)(o.A),valid(){return!!this.followingSystem||this.enabled===ut||!!(this.firstDay&&(!this.enableLastDay||this.enableLastDay&&this.lastDay)&&(!this.enableLastDay||this.lastDay>=this.firstDay)&&this.subject&&this.message)},aliases(){return[{name:this.account.name,alias:this.account.emailAddress},...this.account.aliases].map((t=>{let{name:e,alias:a}=t;return`${e} <${a}>`}))},followingSystem(){return this.hasPersonalAbsenceSettings&&this.enabled===pt}},watch:{enableLastDay(t){this.initialized&&(t?(this.lastDay=new Date(this.firstDay),this.lastDay.setDate(this.lastDay.getDate()+6)):this.lastDay=null)},firstDay(t,e){if(!this.initialized)return;if(!this.enableLastDay)return;const a=Math.floor((this.lastDay-e)/864e5);a<0||(this.lastDay=new Date(t),this.lastDay.setDate(t.getDate()+a))}},async mounted(){await this.fetchState(),this.initialized=!0},methods:{async fetchState(){const{state:t}=await async function(t){const e=(0,ct.Jv)("/apps/mail/api/out-of-office/{accountId}",{accountId:t}),{data:a}=await At.Ay.get(e);return a.data}(this.account.id);this.account.outOfOfficeFollowsSystem?this.enabled=pt:this.enabled=t.enabled?mt:ut,t.enabled&&t.start&&(this.firstDay=new Date(t.start)),t.enabled&&t.end&&(this.lastDay=new Date(t.end),this.lastDay.setHours(this.lastDay.getHours()-23,0,0,0),this.enableLastDay=!0),this.subject=t.subject,this.message=(0,R.Vw)((0,R.pj)(t.message)).value},async submit(){this.loading=!0,this.errorMessage="";try{if(this.followingSystem)await async function(t){const e=(0,ct.Jv)("/apps/mail/api/out-of-office/{accountId}/follow-system",{accountId:t}),{data:a}=await At.Ay.post(e);return a.data}(this.account.id),this.mainStore.patchAccountMutation({account:this.account,data:{outOfOfficeFollowsSystem:!0}});else{const t=new Date(this.firstDay);t.setHours(0,0,0,0);let e=null;this.lastDay&&(e=new Date(this.lastDay),e.setHours(24,0,0,0)),await async function(t,e){const a=(0,ct.Jv)("/apps/mail/api/out-of-office/{accountId}",{accountId:t}),{data:n}=await At.Ay.post(a,e);return n.data}(this.account.id,{enabled:this.enabled===mt,start:t.toISOString(),end:e?.toISOString()??null,subject:this.subject,message:(0,R.Ul)((0,R.qy)(this.message)).value,allowedRecipients:this.aliases}),this.mainStore.patchAccountMutation({account:this.account,data:{outOfOfficeFollowsSystem:!1}})}await this.mainStore.fetchActiveSieveScript({accountId:this.account.id})}catch(t){this.errorMessage=t.message}finally{this.loading=!1}}}};var ht=n(45018),ft={};ft.styleTagTransform=C(),ft.setAttributes=h(),ft.insert=p().bind(null,"head"),ft.domAPI=u(),ft.insertStyleElement=g(),d()(ht.A,ft),ht.A&&ht.A.locals&&ht.A.locals;const gt=(0,x.A)(vt,(function(){var t=this,e=t._self._c;return e("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"form__multi-row"},[e("fieldset",{staticClass:"form__fieldset"},[e("input",{staticClass:"radio",attrs:{id:"ooo-disabled",type:"radio",name:"enabled"},domProps:{checked:t.enabled===t.OOO_DISABLED},on:{change:function(e){t.enabled=t.OOO_DISABLED}}}),t._v(" "),e("label",{attrs:{for:"ooo-disabled"}},[t._v(t._s(t.t("mail","Autoresponder off")))])]),t._v(" "),e("fieldset",{staticClass:"form__fieldset"},[e("input",{staticClass:"radio",attrs:{id:"ooo-enabled",type:"radio",name:"enabled"},domProps:{checked:t.enabled===t.OOO_ENABLED},on:{change:function(e){t.enabled=t.OOO_ENABLED}}}),t._v(" "),e("label",{attrs:{for:"ooo-enabled"}},[t._v(t._s(t.t("mail","Autoresponder on")))])]),t._v(" "),t.hasPersonalAbsenceSettings?e("fieldset",{staticClass:"form__fieldset"},[e("input",{staticClass:"radio",attrs:{id:"ooo-follow-system",type:"radio",name:"enabled"},domProps:{checked:t.enabled===t.OOO_FOLLOW_SYSTEM},on:{change:function(e){t.enabled=t.OOO_FOLLOW_SYSTEM}}}),t._v(" "),e("label",{attrs:{for:"ooo-follow-system"}},[t._v(t._s(t.t("mail","Autoresponder follows system settings")))])]):t._e()]),t._v(" "),t.followingSystem?[e("p",[t._v(t._s(t.t("mail","The autoresponder follows your personal absence period settings.")))]),t._v(" "),e("ButtonVue",{attrs:{href:t.personalAbsenceSettingsUrl,target:"_blank",rel:"noopener noreferrer"},scopedSlots:t._u([{key:"icon",fn:function(){return[e("OpenInNewIcon",{attrs:{size:16}})]},proxy:!0}],null,!1,473851369)},[t._v("\n\t\t\t"+t._s(t.t("mail","Edit absence settings"))+"\n\t\t")])]:[e("div",{staticClass:"form__multi-row"},[e("fieldset",{staticClass:"form__fieldset"},[e("label",{attrs:{for:"ooo-first-day"}},[t._v(t._s(t.t("mail","First day")))]),t._v(" "),e("DatetimePicker",{attrs:{id:"ooo-first-day",disabled:!t.enabled},model:{value:t.firstDay,callback:function(e){t.firstDay=e},expression:"firstDay"}})],1),t._v(" "),e("fieldset",{staticClass:"form__fieldset"},[e("div",{staticClass:"form__fieldset__label"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.enableLastDay,expression:"enableLastDay"}],attrs:{id:"ooo-enable-last-day",type:"checkbox",disabled:!t.enabled},domProps:{checked:Array.isArray(t.enableLastDay)?t._i(t.enableLastDay,null)>-1:t.enableLastDay},on:{change:function(e){var a=t.enableLastDay,n=e.target,i=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&(t.enableLastDay=a.concat([null])):s>-1&&(t.enableLastDay=a.slice(0,s).concat(a.slice(s+1)))}else t.enableLastDay=i}}}),t._v(" "),e("label",{attrs:{for:"ooo-enable-last-day"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Last day (optional)"))+"\n\t\t\t\t\t")])]),t._v(" "),e("DatetimePicker",{attrs:{id:"ooo-last-day",disabled:!t.enabled||!t.enableLastDay},model:{value:t.lastDay,callback:function(e){t.lastDay=e},expression:"lastDay"}})],1)]),t._v(" "),e("fieldset",{staticClass:"form__fieldset"},[e("label",{attrs:{for:"ooo-subject"}},[t._v(t._s(t.t("mail","Subject")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.subject,expression:"subject"}],attrs:{id:"ooo-subject",type:"text",disabled:t.followingSystem},domProps:{value:t.subject},on:{input:function(e){e.target.composing||(t.subject=e.target.value)}}}),t._v(" "),e("p",{staticClass:"form__fieldset__description"},[t._v("\n\t\t\t\t"+t._s(t.t("mail","${subject} will be replaced with the subject of the message you are responding to"))+"\n\t\t\t")])]),t._v(" "),e("fieldset",{staticClass:"form__fieldset"},[e("label",{attrs:{for:"ooo-message"}},[t._v(t._s(t.t("mail","Message")))]),t._v(" "),e("TextEditor",{attrs:{id:"ooo-message",html:!1,disabled:t.followingSystem,bus:t.textEditorDummyBus},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1)],t._v(" "),t.errorMessage?e("p",[t._v("\n\t\t"+t._s(t.t("mail","Oh Snap!"))+"\n\t\t"+t._s(t.errorMessage)+"\n\t")]):t._e(),t._v(" "),e("ButtonVue",{attrs:{type:"primary","native-type":"submit","aria-label":t.t("mail","Save autoresponder"),disabled:t.loading||!t.valid},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CheckIcon",{attrs:{size:16}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","Save autoresponder"))+"\n\t")])],2)}),[],!1,null,"458c73c8",null).exports;function bt(t,e){return t.info.notAfter<e.info.notAfter?1:t.info.notAfter>e.info.notAfter?-1:0}var Ct=n(85168),_t=n(51651);const yt={name:"CertificateSettings",components:{NcSelect:V.EQ,NcButton:V.x1,NcNoteCard:V.mQ},props:{account:{type:Object,required:!0}},data:()=>({alias:null,certificate:null}),computed:{...(0,r.n2)(o.A),...(0,r.aH)(o.A,{smimeCertificates:"getSmimeCertificates"}),savedCertificate:{get(){return this.certificate?this.certificate:this.smimeCertOptions.find((t=>this.alias.smimeCertificateId===t.id))||this.noCertificateOption},set(t){this.certificate=t}},accountSmimeCertificate(){return{id:-1,alias:this.account.emailAddress,name:this.account.name,provisioned:!!this.account.provisioningId,smimeCertificateId:this.account.smimeCertificateId}},aliases(){const t=this.account.aliases.map((t=>({id:t.id,alias:t.alias,name:t.name,provisioned:!!t.provisioningId,smimeCertificateId:t.smimeCertificateId,isAccountCertificate:!1})));return t.push({...this.accountSmimeCertificate,isAccountCertificate:!0}),t},smimeCertOptions(){const t=(new Date).getTime()/1e3+86400,e=this.smimeCertificates.filter((e=>e.hasKey&&e.emailAddress===this.alias.alias&&e.info.notAfter>=t&&e.info.purposes.sign&&e.info.purposes.encrypt)).map(this.mapCertificateToOption).sort(bt);return e.push(this.noCertificateOption),e},noCertificateOption(){return{label:this.t("mail","No certificate"),isChainVerified:!0}}},methods:{async updateSmimeCertificate(){this.alias.isAccountCertificate?await this.mainStore.updateAccountSmimeCertificate({account:this.account,smimeCertificateId:this.certificate.id}).then((()=>{(0,Ct.Te)(t("mail","Certificate updated"))})).catch((e=>{s.A.error("could not update account Smime ceritificate",{error:e}),(0,Ct.Qg)(t("mail","Could not update certificate"))})):await this.mainStore.updateAlias({account:this.account,aliasId:this.alias.id,alias:this.alias.alias,name:this.alias.name,smimeCertificateId:this.certificate.id}).then((()=>{(0,Ct.Te)(t("mail","Certificate updated"))})).catch((e=>{s.A.error("could not update alias Smime ceritificate",{error:e}),(0,Ct.Qg)(t("mail","Could not update certificate"))}))},mapCertificateToOption(t){const e=this.t("mail","{commonName} - Valid until {expiryDate}",{commonName:t.info.commonName??t.info.emailAddress,expiryDate:_t.A.unix(t.info.notAfter).format("LL")});return{...t,label:e,isChainVerified:t.info.isChainVerified}}}};var xt=n(7640),St={};St.styleTagTransform=C(),St.setAttributes=h(),St.insert=p().bind(null,"head"),St.domAPI=u(),St.insertStyleElement=g(),d()(xt.A,St),xt.A&&xt.A.locals&&xt.A.locals;const wt=(0,x.A)(yt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"certificate-settings"},[e("NcSelect",{staticClass:"certificate-settings__alias",attrs:{options:t.aliases,searchable:!1,placeholder:t.t("mail","Select an alias"),"aria-label-combobox":t.t("mail","Select an alias"),label:"name"},on:{input:function(e){t.savedCertificate=null}},model:{value:t.alias,callback:function(e){t.alias=e},expression:"alias"}}),t._v(" "),null!==t.alias?e("NcSelect",{staticClass:"certificate-settings__certificate",attrs:{options:t.smimeCertOptions,"aria-label-combobox":t.t("mail","Select certificates"),searchable:!1},model:{value:t.savedCertificate,callback:function(e){t.savedCertificate=e},expression:"savedCertificate"}}):t._e(),t._v(" "),e("NcButton",{staticClass:"certificate-settings__submit",attrs:{type:"primary",disabled:null===t.certificate,"aria-label":t.t("mail","Update Certificate")},on:{click:t.updateSmimeCertificate}},[t._v("\n\t\t"+t._s(t.t("mail","Update Certificate"))+"\n\t")]),t._v(" "),t.alias&&!t.savedCertificate.isChainVerified?e("NcNoteCard",{attrs:{type:"warning"}},[e("p",[t._v(t._s(t.t("mail","The selected certificate is not trusted by the server. Recipients might not be able to verify your signature.")))])]):t._e()],1)}),[],!1,null,"a8709cac",null).exports,kt={name:"SearchSettings",props:{account:{type:Object,required:!0}},data(){return{searchBody:this.account.searchBody}},computed:{...(0,r.n2)(o.A)},watch:{searchBody(t,e){this.mainStore.patchAccount({account:this.account,data:{searchBody:t}}).then((()=>{s.A.info("Body search "+(t?"enabled":"disabled"))})).catch((a=>{throw s.A.error(`could not ${t?"enable":"disable"} body search`,{error:a}),this.searchBody=e,a}))}}};var It=n(89063),Dt={};Dt.styleTagTransform=C(),Dt.setAttributes=h(),Dt.insert=p().bind(null,"head"),Dt.domAPI=u(),Dt.insertStyleElement=g(),d()(It.A,Dt),It.A&&It.A.locals&&It.A.locals;const Bt=(0,x.A)(kt,(function(){var t=this,e=t._self._c;return e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchBody,expression:"searchBody"}],attrs:{id:"searchBody",type:"checkbox"},domProps:{checked:Array.isArray(t.searchBody)?t._i(t.searchBody,null)>-1:t.searchBody},on:{change:function(e){var a=t.searchBody,n=e.target,i=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&(t.searchBody=a.concat([null])):s>-1&&(t.searchBody=a.slice(0,s).concat(a.slice(s+1)))}else t.searchBody=i}}}),t._v(" "),e("label",{attrs:{for:"searchBody"}},[t._v("\n\t\t"+t._s(t.t("mail","Enable mail body search"))+"\n\t")])])}),[],!1,null,"1c06d4ff",null).exports;var Mt=n(12572),Et=n.n(Mt);const Nt={name:"TrashRetentionSettings",props:{account:{type:Object,required:!0}},data(){return{trashRetentionDays:this.account.trashRetentionDays,debouncedSave:Et()(1e3,this.save)}},computed:{...(0,r.n2)(o.A)},methods:{async save(){let t=parseInt(this.trashRetentionDays);isNaN(t)&&(t=0),await this.mainStore.patchAccount({account:this.account,data:{trashRetentionDays:t}})}}},Ft=(0,x.A)(Nt,(function(){var t=this,e=t._self._c;return e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.trashRetentionDays,expression:"trashRetentionDays"}],attrs:{type:"number",min:"0"},domProps:{value:t.trashRetentionDays},on:{input:[function(e){e.target.composing||(t.trashRetentionDays=e.target.value)},function(e){return t.debouncedSave()}]}}),t._v(" "),e("p",[t._v("\n\t\t"+t._s(t.t("mail","Disable trash retention by leaving the field empty or setting it to 0. Only mails deleted after enabling trash retention will be processed."))+"\n\t")])])}),[],!1,null,null,null).exports,Ot={name:"Test",components:{NcButton:V.x1,NcSelect:V.EQ,DeleteIcon:Q.A},props:{test:{type:Object,required:!0}},data:()=>({inputValue:"",localValues:[]}),mounted(){this.localValues=[...this.test.values]},methods:{updateTest(t){this.$emit("update-test",{...this.test,...t})},deleteTest(){this.$emit("delete-test",this.test)}}};var Tt=n(66470),Ut={};Ut.styleTagTransform=C(),Ut.setAttributes=h(),Ut.insert=p().bind(null,"head"),Ut.domAPI=u(),Ut.insertStyleElement=g(),d()(Tt.A,Ut),Tt.A&&Tt.A.locals&&Tt.A.locals;const Rt=(0,x.A)(Ot,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mail-filter-rows"},[e("div",{staticClass:"mail-filter-rows__row"},[e("div",{staticClass:"mail-filter-rows__row__column"},[e("NcSelect",{attrs:{"input-label":"field",value:t.test.field,required:!0,"label-outside":!0,options:["subject","from","to"]},on:{input:function(e){return t.updateTest({field:e})}}})],1),t._v(" "),e("div",{staticClass:"mail-filter-rows__row__column"},[e("NcSelect",{attrs:{"input-label":"operator",value:t.test.operator,required:!0,"label-outside":!0,options:["is","contains","matches"]},on:{input:function(e){return t.updateTest({operator:e})}}})],1),t._v(" "),e("div",{staticClass:"mail-filter-rows__row__column"},[e("NcButton",{attrs:{"aria-label":"Delete action",type:"tertiary-no-background"},on:{click:t.deleteTest},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Delete test"))+"\n\t\t\t")])],1)]),t._v(" "),e("div",{staticClass:"mail-filter-rows__row"},[e("NcSelect",{staticClass:"mail-filter-rows__row__select",attrs:{"input-label":"value",multiple:!0,wrap:!0,"close-on-select":!1,taggable:!0,required:!0},on:{"option:selected":function(e){return t.updateTest({values:t.localValues})},"option:deselected":function(e){return t.updateTest({values:t.localValues})}},model:{value:t.localValues,callback:function(e){t.localValues=e},expression:"localValues"}})],1),t._v(" "),e("hr",{staticClass:"solid"})])}),[],!1,null,"20f43b10",null).exports,Pt={name:"Operator",components:{NcCheckboxRadioSwitch:V.AO},props:{filter:{type:Object,required:!0}},methods:{updateFilter(t){this.$emit("update:operator",t)}}},Vt=(0,x.A)(Pt,(function(){var t=this,e=t._self._c;return e("div",[e("div",[e("h6",[t._v(t._s(t.t("mail","Operator")))])]),t._v(" "),e("div",[e("NcCheckboxRadioSwitch",{attrs:{checked:t.filter.operator,value:"allof",name:"sharing_permission_radio",type:"radio"},on:{"update:checked":function(e){return t.updateFilter("allof")}}},[t._v("\n\t\t\tallof ("+t._s(t.t("mail","If all tests pass, then the actions will be executed"))+")\n\t\t")]),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{checked:t.filter.operator,value:"anyof",name:"sharing_permission_radio",type:"radio"},on:{"update:checked":function(e){return t.updateFilter("anyof")}}},[t._v("\n\t\t\tanyof ("+t._s(t.t("mail","If one test pass, then the actions will be executed"))+")\n\t\t")])],1)])}),[],!1,null,null,null).exports;var jt=n(10362);const Lt={name:"ActionFileinto",components:{MailboxInlinePicker:E},props:{action:{type:Object,required:!0},account:{type:Object,required:!0}},computed:{...(0,r.n2)(o.A),mailbox(){return this.getMailboxDatabaseIdByName(this.action?.mailbox)}},methods:{onInput(t){this.$emit("update-action",{mailbox:this.getMailboxNameByDatabaseId(t)})},getMailboxDatabaseIdByName(t){return this.mainStore.getMailboxesAndSubmailboxesByAccountId(this.account.id).find((e=>e.name===t))?.databaseId},getMailboxNameByDatabaseId(t){return this.mainStore.getMailbox(t)?.name}}},Ht=(0,x.A)(Lt,(function(){var t=this;return(0,t._self._c)("MailboxInlinePicker",{attrs:{account:t.account,value:t.mailbox},on:{input:t.onInput}})}),[],!1,null,null,null).exports,zt={name:"ActionAddflag",components:{NcTextField:V.v},props:{action:{type:Object,required:!0},account:{type:Object,required:!0}},computed:{flag(){return this.action.flag??""}},methods:{onInput(t){this.$emit("update-action",{flag:t})}}};var Gt=n(40620),qt={};qt.styleTagTransform=C(),qt.setAttributes=h(),qt.insert=p().bind(null,"head"),qt.domAPI=u(),qt.insertStyleElement=g(),d()(Gt.A,qt),Gt.A&&Gt.A.locals&&Gt.A.locals;const Qt=(0,x.A)(zt,(function(){var t=this;return(0,t._self._c)("NcTextField",{attrs:{required:!0,label:t.t("mail","Flag"),value:t.flag},on:{"update:value":t.onInput}})}),[],!1,null,"68890c32",null).exports,Yt={name:"ActionStop",props:{action:{type:Object,required:!0},account:{type:Object,required:!0}}},Jt=(0,x.A)(Yt,(function(){var t=this;return(0,t._self._c)("p",[t._v(t._s(t.t("mail","The stop action ends all processing")))])}),[],!1,null,null,null).exports,Kt={name:"Action",components:{NcSelect:V.EQ,NcTextField:V.v,NcButton:V.x1,ActionFileinto:Ht,ActionAddflag:Qt,ActionStop:Jt,DeleteIcon:Q.A},props:{action:{type:Object,required:!0},account:{type:Object,required:!0}},data:()=>({availableTypes:["addflag","fileinto","stop"]}),computed:{componentInstance(){return"fileinto"===this.action.type?Ht:"addflag"===this.action.type?Qt:"stop"===this.action.type?Jt:null}},methods:{updateAction(t){this.$emit("update-action",{...this.action,...t})},deleteAction(){this.$emit("delete-action",this.action)}}};var $t=n(25595),Wt={};Wt.styleTagTransform=C(),Wt.setAttributes=h(),Wt.insert=p().bind(null,"head"),Wt.domAPI=u(),Wt.insertStyleElement=g(),d()($t.A,Wt),$t.A&&$t.A.locals&&$t.A.locals;const Xt=(0,x.A)(Kt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mail-filter-row"},[e("div",{staticClass:"mail-filter-column"},[e("NcSelect",{attrs:{value:t.action.type,required:!0,"label-outside":!0,options:t.availableTypes},on:{input:function(e){return t.updateAction({type:e})}}})],1),t._v(" "),e("div",{staticClass:"mail-filter-column"},[t.componentInstance?e(t.componentInstance,{tag:"component",attrs:{action:t.action,account:t.account},on:{"update-action":t.updateAction}}):t._e()],1),t._v(" "),e("div",{staticClass:"mail-filter-column"},[e("NcButton",{attrs:{"aria-label":"Delete action",type:"tertiary-no-background"},on:{click:t.deleteAction},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("mail","Delete action"))+"\n\t\t\t")])],1)])}),[],!1,null,"11806ba8",null).exports,Zt={name:"UpdateModal",components:{IconCheck:j.A,Action:Xt,Operator:Vt,Test:Rt,NcButton:V.x1,NcCheckboxRadioSwitch:V.AO,NcLoadingIcon:V.ne,NcModal:V.FH,NcTextField:V.v},props:{filter:{type:Object,required:!0},account:{type:Object,required:!0},loading:{type:Boolean,required:!1}},data(){return{clone:structuredClone(this.filter)}},methods:{createTest(){this.clone.tests.push({id:(0,jt.z)(),operator:null,values:[]})},updateTest(t){const e=this.clone.tests.findIndex((e=>e.id===t.id));this.$set(this.clone.tests,e,t)},deleteTest(t){this.clone.tests=this.clone.tests.filter((e=>e.id!==t.id))},createAction(){this.clone.actions.push({id:(0,jt.z)(),type:null})},updateAction(t){const e=this.clone.actions.findIndex((e=>e.id===t.id));this.$set(this.clone.actions,e,t)},updateOperator(t){this.clone.operator=t},deleteAction(t){this.clone.actions=this.clone.actions.filter((e=>e.id!==t.id))},updateFilter(){this.$emit("update-filter",structuredClone(this.clone))},closeModal(){this.$emit("close")}}};var te=n(98448),ee={};ee.styleTagTransform=C(),ee.setAttributes=h(),ee.insert=p().bind(null,"head"),ee.domAPI=u(),ee.insertStyleElement=g(),d()(te.A,ee),te.A&&te.A.locals&&te.A.locals;const ae=(0,x.A)(Zt,(function(){var t=this,e=t._self._c;return e("NcModal",{attrs:{size:"large","close-on-click-outside":!1,name:t.t("mail","Update mail filter")},on:{close:t.closeModal}},[e("form",{staticClass:"modal__content",on:{submit:function(e){return e.preventDefault(),t.updateFilter.apply(null,arguments)}}},[e("div",{staticClass:"filter-name"},[e("NcTextField",{attrs:{value:t.clone.name,label:t.t("mail","Filter name"),required:!0},on:{"update:value":function(e){return t.$set(t.clone,"name",e)}}})],1),t._v(" "),e("div",{staticClass:"filter-operator"},[e("Operator",{attrs:{filter:t.clone},on:{"update:operator":t.updateOperator}})],1),t._v(" "),e("div",{staticClass:"filter-tests"},[e("h6",[t._v(t._s(t.t("mail","Tests")))]),t._v(" "),e("div",{staticClass:"help-text"},[e("p",[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Tests are applied to incoming emails on your mail server, targeting fields such as subject (the email's subject line), from (the sender), and to (the recipient). You can use the following operators to define conditions for these fields:"))+"\n\t\t\t\t")]),t._v(" "),e("p",[e("strong",[t._v("is")]),t._v(": "+t._s(t.t("mail","An exact match. The field must be identical to the provided value."))+"\n\t\t\t\t")]),t._v(" "),e("p",[e("strong",[t._v("contains")]),t._v(": "+t._s(t.t("mail",'A substring match. The field matches if the provided value is contained within it. For example, "report" would match "port".'))+"\n\t\t\t\t")]),t._v(" "),e("p",[e("strong",[t._v("matches")]),t._v(": "+t._s(t.t("mail",'A pattern match using wildcards. The "*" symbol represents any number of characters (including none), while "?" represents exactly one character. For example, "*report*" would match "Business report 2024".'))+"\n\t\t\t\t")])]),t._v(" "),t._l(t.clone.tests,(function(a){return e("Test",{key:a.id,attrs:{test:a},on:{"update-test":t.updateTest,"delete-test":t.deleteTest}})})),t._v(" "),e("NcButton",{staticClass:"app-settings-button",attrs:{type:"secondary","aria-label":t.t("mail","New test")},on:{click:t.createTest}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","New test"))+"\n\t\t\t")])],2),t._v(" "),e("div",{staticClass:"filter-actions"},[e("h6",[t._v(t._s(t.t("mail","Actions")))]),t._v(" "),e("div",{staticClass:"help-text"},[e("p",[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Actions are triggered when the specified tests are true. The following actions are available:"))+"\n\t\t\t\t")]),t._v(" "),e("p",[e("strong",[t._v("fileinto")]),t._v(": "+t._s(t.t("mail","Moves the message into a specified folder."))+"\n\t\t\t\t")]),t._v(" "),e("p",[e("strong",[t._v("addflag")]),t._v(": "+t._s(t.t("mail","Adds a flag to the message."))+"\n\t\t\t\t")]),t._v(" "),e("p",[e("strong",[t._v("stop")]),t._v(": "+t._s(t.t("mail","Halts the execution of the filter script. No further filters with will be processed after this action."))+"\n\t\t\t\t")])]),t._v(" "),t._l(t.clone.actions,(function(a){return e("Action",{key:a.id,attrs:{action:a,account:t.account},on:{"update-action":t.updateAction,"delete-action":t.deleteAction}})})),t._v(" "),e("NcButton",{staticClass:"app-settings-button",attrs:{type:"secondary","aria-label":t.t("mail","New action")},on:{click:t.createAction}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","New action"))+"\n\t\t\t")])],2),t._v(" "),e("NcTextField",{attrs:{value:t.clone.priority,type:"number",label:t.t("mail","Priority"),required:!0},on:{"update:value":function(e){return t.$set(t.clone,"priority",e)}}}),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{checked:t.clone.enable,type:"switch"},on:{"update:checked":function(e){return t.$set(t.clone,"enable",e)}}},[t._v("\n\t\t\t"+t._s(t.t("mail","Enable filter"))+"\n\t\t")]),t._v(" "),e("NcButton",{attrs:{type:"primary","native-type":"submit"},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("NcLoadingIcon",{attrs:{size:16}}):e("IconCheck",{attrs:{size:16}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("mail","Save filter"))+"\n\t\t")])],1)])}),[],!1,null,"50a60fae",null).exports,ne=(0,r.nY)("mailFilter",{state:()=>({filters:[]}),actions:{async fetch(t){await this.$patch((async e=>{const a=await async function(t){const e=(0,ct.Jv)("/apps/mail/api/filter/{accountId}",{accountId:t}),{data:a}=await At.Ay.get(e);return a}(t);e.filters=a.map((t=>(t.id=(0,jt.z)(),t.tests.map((t=>(t.id=(0,jt.z)(),t))),t.actions.map((t=>(t.id=(0,jt.z)(),t))),t)))}))},async update(t){let e=structuredClone(this.filters);e=e.map((t=>(delete t.id,t.tests.map((t=>(delete t.id,t))),t.actions.map((t=>(delete t.id,t))),t))),await async function(t,e){const a=(0,ct.Jv)("/apps/mail/api/filter/{accountId}",{accountId:t}),{data:n}=await At.Ay.put(a,{filters:e});return n}(t,e)}}});var ie=n(3372),se=n.n(ie),oe=n(63668),re=n.n(oe);const le={name:"DeleteModal",components:{NcDialog:V.i$},props:{filter:{type:Object,required:!0},open:{type:Boolean,required:!0}},data(){return{buttons:[{label:t("mail","Cancel"),icon:se(),callback:()=>{this.closeModal()}},{label:t("mail","Delete filter"),type:"error",icon:re(),callback:()=>{this.deleteFilter()}}]}},methods:{deleteFilter(){this.$emit("delete-filter",this.filter)},closeModal(){this.$emit("close")}}},ce=(0,x.A)(le,(function(){var t=this;return(0,t._self._c)("NcDialog",{attrs:{name:t.t("mail","Delete mail filter {filterName}?",{filterName:t.filter.name}),open:t.open,message:t.t("mail","Are you sure to delete the mail filter?"),buttons:t.buttons},on:{closing:function(e){return t.closeModal()}}})}),[],!1,null,null,null).exports,de={name:"MailFilters",components:{NcButton:V.x1,NcListItem:V.l,NcActionButton:V.Ko,UpdateModal:ae,DeleteIcon:Q.A,DeleteModal:ce},props:{account:{type:Object,required:!0}},data:()=>({showUpdateModal:!1,showDeleteModal:!1,script:"",loading:!0,errorMessage:"",currentFilter:null}),computed:{...(0,r.n2)(ne,o.A),filters(){return this.mailFilterStore.filters},scriptData(){return this.mainStore.getActiveSieveScript(this.account.id)}},watch:{scriptData:{immediate:!0,handler(t){t&&(this.script=t.script,this.loading=!1)}}},async mounted(){await this.mailFilterStore.fetch(this.account.id)},methods:{createFilter(){const e=Math.max(0,...this.filters.map((t=>t.priority??0)))+10;this.currentFilter={id:(0,jt.z)(),name:t("mail","New filter"),enable:!0,operator:"allof",tests:[],actions:[],priority:e},this.showUpdateModal=!0,this.loading=!1},openUpdateModal(t){this.currentFilter=t,this.showUpdateModal=!0},openDeleteModal(t){this.currentFilter=t,this.showDeleteModal=!0},async updateFilter(e){this.loading=!0,this.mailFilterStore.$patch((t=>{const a=t.filters.findIndex((t=>t.id===e.id));s.A.debug("update filter",{filter:e,index:a}),-1===a?t.filters.push(e):t.filters[a]=e,t.filters.sort(((t,e)=>t.priority-e.priority))}));try{await this.mailFilterStore.update(this.account.id).then((()=>{(0,Ct.Te)(t("mail","Filter saved"))})),await this.mainStore.fetchActiveSieveScript({accountId:this.account.id})}catch(e){s.A.error(e),(0,Ct.Qg)(t("mail","Could not save filter"))}finally{this.loading=!1}},async deleteFilter(e){this.loading=!0,this.mailFilterStore.$patch((t=>{const a=t.filters.findIndex((t=>t.id===e.id));s.A.debug("delete filter",{filter:e,index:a}),-1!==a&&t.filters.splice(a,1)}));try{await this.mailFilterStore.update(this.account.id).then((()=>{(0,Ct.Te)(t("mail","Filter deleted"))}))}catch(e){s.A.error(e),(0,Ct.Qg)(t("mail","Could not delete filter"))}finally{this.loading=!1}await this.mainStore.fetchActiveSieveScript({accountId:this.account.id})},closeModal(){this.currentFilter=null,this.showUpdateModal=!1,this.showDeleteModal=!1}}};var Ae=n(88154),ue={};ue.styleTagTransform=C(),ue.setAttributes=h(),ue.insert=p().bind(null,"head"),ue.domAPI=u(),ue.insertStyleElement=g(),d()(Ae.A,ue),Ae.A&&Ae.A.locals&&Ae.A.locals;const me=(0,x.A)(de,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("p",[t._v(t._s(t.t("mail","Take control of your email chaos. Filters help you to prioritize what matters and eliminate clutter.")))]),t._v(" "),e("ul",t._l(t.filters,(function(a){return e("NcListItem",{key:a.id,attrs:{name:a.name,compact:!0},on:{click:function(e){return t.openUpdateModal(a)}},scopedSlots:t._u([{key:"subname",fn:function(){return[a.enable?e("span",[t._v(t._s(t.t("mail","Filter is active")))]):e("span",[t._v(t._s(t.t("mail","Filter is not active")))])]},proxy:!0},{key:"actions",fn:function(){return[e("NcActionButton",{on:{click:function(e){return t.openDeleteModal(a)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Delete filter"))+"\n\t\t\t\t")])]},proxy:!0}],null,!0)})})),1),t._v(" "),e("NcButton",{staticClass:"app-settings-button",attrs:{type:"primary","aria-label":t.t("mail","New filter")},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.createFilter.apply(null,arguments)}}},[t._v("\n\t\t"+t._s(t.t("mail","New filter"))+"\n\t")]),t._v(" "),t.showUpdateModal&&t.currentFilter?e("UpdateModal",{attrs:{filter:t.currentFilter,account:t.account,loading:t.loading},on:{"update-filter":t.updateFilter,close:t.closeModal}}):t._e(),t._v(" "),t.showDeleteModal&&t.currentFilter?e("DeleteModal",{attrs:{filter:t.currentFilter,open:t.showDeleteModal,loading:t.loading},on:{"delete-filter":t.deleteFilter,close:t.closeModal}}):t._e()],1)}),[],!1,null,"59a0beb4",null).exports,pe={name:"AccountSettings",components:{SieveAccountForm:nt,SieveFilterForm:rt,AccountForm:i.A,AliasSettings:Z,EditorSettings:S,SignatureSettings:G,AppSettingsDialog:V.q4,AppSettingsSection:V.Te,AccountDefaultsSettings:T,OutOfOfficeForm:gt,CertificateSettings:wt,TrashRetentionSettings:Ft,SearchSettings:Bt,MailFilters:me,NcButton:V.x1},props:{account:{required:!0,type:Object},open:{type:Boolean,default:!1}},data(){return{trapElements:[],fetchActiveSieveScript:this.account.sieveEnabled}},computed:{...(0,r.n2)(o.A),displayName(){return this.account.name},email(){return this.account.emailAddress}},watch:{open(t,e){!0===t&&!0===this.fetchActiveSieveScript&&(s.A.debug(`Load active sieve script for account ${this.account.accountId}`),this.fetchActiveSieveScript=!1,this.mainStore.fetchActiveSieveScript({accountId:this.account.id}))}},methods:{scrollToAccountSettings(){this.$refs.accountForm.$el.scrollIntoView({behavior:"smooth"})},updateOpen(){this.$emit("update:open")},handleShowToolbar(t){this.trapElements.push(t)}}};var ve=n(83986),he={};he.styleTagTransform=C(),he.setAttributes=h(),he.insert=p().bind(null,"head"),he.domAPI=u(),he.insertStyleElement=g(),d()(ve.A,he),ve.A&&ve.A.locals&&ve.A.locals;const fe=(0,x.A)(pe,(function(){var t=this,e=t._self._c;return e("AppSettingsDialog",{attrs:{id:"app-settings-dialog",open:t.open,"show-navigation":!0,"additional-trap-elements":t.trapElements,name:t.t("mail","Account settings")},on:{"update:open":t.updateOpen}},[e("AppSettingsSection",{attrs:{id:"alias-settings",name:t.t("mail","Aliases")}},[e("AliasSettings",{attrs:{account:t.account},on:{"rename-primary-alias":t.scrollToAccountSettings}})],1),t._v(" "),e("AppSettingsSection",{attrs:{id:"certificate-settings",name:t.t("mail","Alias to S/MIME certificate mapping")}},[e("CertificateSettings",{attrs:{account:t.account}})],1),t._v(" "),e("AppSettingsSection",{attrs:{id:"signature",name:t.t("mail","Signature")}},[e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t"+t._s(t.t("mail","A signature is added to the text of new messages and replies."))+"\n\t\t")]),t._v(" "),e("SignatureSettings",{attrs:{account:t.account},on:{"show-toolbar":t.handleShowToolbar}})],1),t._v(" "),e("AppSettingsSection",{attrs:{id:"writing-mode",name:t.t("mail","Writing mode")}},[e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t"+t._s(t.t("mail","Preferred writing mode for new messages and replies."))+"\n\t\t")]),t._v(" "),e("EditorSettings",{attrs:{account:t.account}})],1),t._v(" "),e("AppSettingsSection",{attrs:{id:"default-folders",name:t.t("mail","Default folders")}},[e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t"+t._s(t.t("mail","The folders to use for drafts, sent messages, deleted messages, archived messages and junk messages."))+"\n\t\t")]),t._v(" "),e("AccountDefaultsSettings",{attrs:{account:t.account}})],1),t._v(" "),e("AppSettingsSection",{attrs:{id:"trash-retention",name:t.t("mail","Automatic trash deletion")}},[e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t"+t._s(t.t("mail","Days after which messages in Trash will automatically be deleted:"))+"\n\t\t")]),t._v(" "),e("TrashRetentionSettings",{attrs:{account:t.account}})],1),t._v(" "),t.account?e("AppSettingsSection",{attrs:{id:"out-of-office-replies",name:t.t("mail","Autoresponder")}},[e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t"+t._s(t.t("mail","Automated reply to incoming messages. If someone sends you several messages, this automated reply will be sent at most once every 4 days."))+"\n\t\t")]),t._v(" "),t.account.sieveEnabled?e("OutOfOfficeForm",{attrs:{account:t.account}}):e("div",[e("p",[t._v(t._s(t.t("mail","The autoresponder uses Sieve, a scripting language supported by many email providers. If you're unsure whether yours does, check with your provider. If Sieve is available, click the button to go to the settings and enable it.")))]),t._v(" "),e("NcButton",{attrs:{type:"secondary","aria-label":t.t("mail","Go to Sieve settings"),href:"#sieve-form"}},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Go to Sieve settings"))+"\n\t\t\t")])],1)],1):t._e(),t._v(" "),t.account&&t.account.sieveEnabled?e("AppSettingsSection",{attrs:{id:"mail-filters",name:t.t("mail","Filters")}},[e("div",{attrs:{id:"mail-filters"}},[e("MailFilters",{key:t.account.accountId,ref:"mailFilters",attrs:{account:t.account}})],1)]):t._e(),t._v(" "),t.account&&t.account.sieveEnabled?e("AppSettingsSection",{attrs:{id:"sieve-filter",name:t.t("mail","Sieve script editor")}},[e("div",{attrs:{id:"sieve-filter"}},[e("SieveFilterForm",{key:t.account.accountId,ref:"sieveFilterForm",attrs:{account:t.account}})],1)]):t._e(),t._v(" "),t.account&&!t.account.provisioningId?e("AppSettingsSection",{attrs:{id:"mail-server",name:t.t("mail","Mail server")}},[e("div",{attrs:{id:"mail-settings"}},[e("AccountForm",{key:t.account.accountId,ref:"accountForm",attrs:{"display-name":t.displayName,email:t.email,account:t.account}})],1)]):t._e(),t._v(" "),t.account&&!t.account.provisioningId?e("AppSettingsSection",{attrs:{id:"sieve-settings",name:t.t("mail","Sieve server")}},[e("div",{attrs:{id:"sieve-settings"}},[e("SieveAccountForm",{key:t.account.accountId,ref:"sieveAccountForm",attrs:{account:t.account}})],1)]):t._e(),t._v(" "),e("AppSettingsSection",{attrs:{id:"mailbox_search",name:t.t("mail","Mailbox search")}},[e("SearchSettings",{attrs:{account:t.account}})],1)],1)}),[],!1,null,"210fd01f",null).exports},1545:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,"\n.vue-treeselect__control {\n\tpadding: 0;\n\tborder: 0;\n\twidth: 250px;\n}\n.vue-treeselect__control-arrow-container {\n\tdisplay: none;\n}\n.vue-treeselect--searchable .vue-treeselect__input-container {\n\tpadding-left: 0;\n\tbackground-color: var(--color-main-background)\n}\ninput.vue-treeselect__input {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 1px solid var(--color-border-maxcontrast) !important;\n}\n.vue-treeselect__menu {\n\tbackground: var(--color-main-background);\n}\n.vue-treeselect--single .vue-treeselect__option--selected {\n\tbackground: var(--color-primary-element-light);\n\tborder-radius: var(--border-radius-large);\n}\n.vue-treeselect__option.vue-treeselect__option--highlight,\n.vue-treeselect__option:hover,\n.vue-treeselect__option:focus {\n\tborder-radius: var(--border-radius-large);\n}\n.vue-treeselect__placeholder, .vue-treeselect__single-value {\n\tline-height: 34px;\n\tcolor: var(--color-main-text);\n}\n\n","",{version:3,sources:["webpack://./src/components/MailboxInlinePicker.vue"],names:[],mappings:";AA+EA;CACA,UAAA;CACA,SAAA;CACA,YAAA;AACA;AACA;CACA,aAAA;AACA;AACA;CACA,eAAA;CACA;AACA;AACA;CACA,SAAA;CACA,UAAA;CACA,4DAAA;AACA;AACA;CACA,wCAAA;AACA;AACA;CACA,8CAAA;CACA,yCAAA;AACA;AACA;;;CAGA,yCAAA;AACA;AACA;CACA,iBAAA;CACA,6BAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t<Treeselect ref=\"Treeselect\"\n\t\tv-model=\"selected\"\n\t\t:options=\"mailboxes\"\n\t\t:multiple=\"false\"\n\t\t:clearable=\"false\"\n\t\t:disabled=\"disabled\" />\n</template>\n<script>\nimport Treeselect from '@riophae/vue-treeselect'\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\nimport { mailboxHasRights } from '../util/acl.js'\n\nimport { mapStores } from 'pinia'\nimport useMainStore from '../store/mainStore.js'\n\nexport default {\n\tname: 'MailboxInlinePicker',\n\tcomponents: {\n\t\tTreeselect,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Number,\n\t\t\tdefault: undefined,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tselected: this.value,\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapStores(useMainStore),\n\t\tmailboxes() {\n\t\t\treturn this.getMailboxes()\n\t\t},\n\t},\n\twatch: {\n\t\tselected(val) {\n\t\t\tif (val !== this.value) {\n\t\t\t\tthis.$emit('input', val)\n\t\t\t\tthis.selected = val\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\tgetMailboxes(mailboxId) {\n\t\t\tlet mailboxes = []\n\t\t\tif (!mailboxId) {\n\t\t\t\tmailboxes = this.mainStore.getMailboxes(this.account.accountId)\n\t\t\t} else {\n\t\t\t\tmailboxes = this.mainStore.getSubMailboxes(mailboxId)\n\t\t\t}\n\t\t\tmailboxes = mailboxes.filter(mailbox => mailboxHasRights(mailbox, 'i'))\n\t\t\treturn mailboxes.map((mailbox) => {\n\t\t\t\t return {\n\t\t\t\t\tid: mailbox.databaseId,\n\t\t\t\t\tlabel: mailbox.displayName,\n\t\t\t\t\tchildren: mailbox.mailboxes.length > 0 ? this.getMailboxes(mailbox.databaseId) : '',\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t},\n}\n<\/script>\n<style>\n.vue-treeselect__control {\n\tpadding: 0;\n\tborder: 0;\n\twidth: 250px;\n}\n.vue-treeselect__control-arrow-container {\n\tdisplay: none;\n}\n.vue-treeselect--searchable .vue-treeselect__input-container {\n\tpadding-left: 0;\n\tbackground-color: var(--color-main-background)\n}\ninput.vue-treeselect__input {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 1px solid var(--color-border-maxcontrast) !important;\n}\n.vue-treeselect__menu {\n\tbackground: var(--color-main-background);\n}\n.vue-treeselect--single .vue-treeselect__option--selected {\n\tbackground: var(--color-primary-element-light);\n\tborder-radius: var(--border-radius-large);\n}\n.vue-treeselect__option.vue-treeselect__option--highlight,\n.vue-treeselect__option:hover,\n.vue-treeselect__option:focus {\n\tborder-radius: var(--border-radius-large);\n\t}\n.vue-treeselect__placeholder, .vue-treeselect__single-value {\n\tline-height: 34px;\n\tcolor: var(--color-main-text);\n}\n\n</style>\n"],sourceRoot:""}]);const r=o},4872:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAAD1BMVEUAAAD///////////////+PQt5oAAAABHRSTlMAy2EFIuWxUgAAACRJREFUGNNjGBBgJOICBY7KDCoucODEAJSAS6FwUJShGjAQAADBPRGrK2/FhgAAAABJRU5ErkJggg=="},6791:(t,e,a)=>{a.d(e,{LG:()=>r,Np:()=>s,Zd:()=>l,bq:()=>o});var n=a(70715),i=a(63814);const s=t=>{const e=(0,i.Jv)("/apps/mail/api/contactIntegration/match/{mail}",{mail:t});return n.Ay.get(e).then((t=>t.data))},o=(t,e)=>{const a=(0,i.Jv)("/apps/mail/api/contactIntegration/add");return n.Ay.put(a,{uid:t,mail:e}).then((t=>t.data))},r=(t,e)=>{const a=(0,i.Jv)("/apps/mail/api/contactIntegration/new");return n.Ay.put(a,{contactName:t,mail:e}).then((t=>t.data))},l=t=>{const e=(0,i.Jv)("/apps/mail/api/contactIntegration/autoComplete/{term}",{term:t});return n.Ay.get(e).then((t=>t.data))}},7640:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".certificate-settings__alias[data-v-a8709cac],.certificate-settings__certificate[data-v-a8709cac]{width:100%}.certificate-settings__alias+.certificate-settings__certificate[data-v-a8709cac]{margin-top:5px}.certificate-settings__submit[data-v-a8709cac]{margin-top:1rem}","",{version:3,sources:["webpack://./src/components/CertificateSettings.vue"],names:[],mappings:"AAEC,kGAEC,UAAA,CAGD,iFACC,cAAA,CAGD,+CACC,eAAA",sourcesContent:["\n.certificate-settings {\n\t&__alias,\n\t&__certificate {\n\t\twidth: 100%;\n\t}\n\n\t&__alias + &__certificate {\n\t\tmargin-top: 5px\n\t}\n\n\t&__submit {\n\t\tmargin-top: 1rem;\n\t}\n}\n"],sourceRoot:""}]);const r=o},8663:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAIAgMAAAC5YVYYAAAACVBMVEUAAAD///////9zeKVjAAAAAnRSTlMAuLMp9oYAAAAPSURBVAjXY4CDrJUgBAMAGaECJ9dz3BAAAAAASUVORK5CYII="},10362:(t,e,a)=>{function n(){return Math.random().toString(16).slice(2)}a.d(e,{z:()=>n})},14399:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".ck.ck-editor__editable_inline[data-v-12b9bfac]{width:100%;max-width:78vw;height:100%;min-height:100px;border-radius:var(--border-radius) !important;border:1px solid var(--color-border) !important;box-shadow:none !important}.primary[data-v-12b9bfac]{padding-left:26px;background-position:6px;color:var(--color-main-background)}.primary[data-v-12b9bfac]:after{left:14px}.button-text[data-v-12b9bfac]{background-color:rgba(0,0,0,0);border:none;color:var(--color-text-maxcontrast);font-weight:normal}.button-text[data-v-12b9bfac]:hover,.button-text[data-v-12b9bfac]:focus{color:var(--color-main-text)}.section[data-v-12b9bfac]{display:block;padding:0;margin-bottom:23px}.ck-balloon-panel[data-v-12b9bfac]{z-index:10000 !important}.button-vue[data-v-12b9bfac] {display:inline-block !important;margin-top:4px !important}.warning-large-signature[data-v-12b9bfac]{color:#ff8c00}","",{version:3,sources:["webpack://./src/components/SignatureSettings.vue"],names:[],mappings:"AACA,gDACE,UAAA,CACA,cAAA,CACA,WAAA,CACA,gBAAA,CACA,6CAAA,CACA,+CAAA,CACA,0BAAA,CAGF,0BACE,iBAAA,CACA,uBAAA,CACA,kCAAA,CAEA,gCACE,SAAA,CAIJ,8BACE,8BAAA,CACA,WAAA,CACA,mCAAA,CACA,kBAAA,CAEA,wEAEE,4BAAA,CAGJ,0BACE,aAAA,CACA,SAAA,CACA,kBAAA,CAEF,mCACE,wBAAA,CAEF,8BACC,+BAAA,CACA,yBAAA,CAED,0CACC,aAAA",sourcesContent:["\n.ck.ck-editor__editable_inline {\n  width: 100%;\n  max-width: 78vw;\n  height: 100%;\n  min-height: 100px;\n  border-radius: var(--border-radius) !important;\n  border: 1px solid var(--color-border) !important;\n  box-shadow: none !important;\n}\n\n.primary {\n  padding-left: 26px;\n  background-position: 6px;\n  color: var(--color-main-background);\n\n  &:after {\n    left: 14px;\n  }\n}\n\n.button-text {\n  background-color: transparent;\n  border: none;\n  color: var(--color-text-maxcontrast);\n  font-weight: normal;\n\n  &:hover,\n  &:focus {\n    color: var(--color-main-text);\n  }\n}\n.section {\n  display: block;\n  padding: 0;\n  margin-bottom: 23px;\n}\n.ck-balloon-panel {\n\t z-index: 10000 !important;\n }\n.button-vue:deep() {\n\tdisplay: inline-block !important;\n\tmargin-top: 4px !important;\n}\n.warning-large-signature {\n\tcolor: darkorange;\n}\n"],sourceRoot:""}]);const r=o},18467:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAUVBMVEUAAADh4eHh4eHh4eHh4eHi4uLi4uLh4eHh4eHh4eHf39/j4+Ph4eHh4eHh4eHg4ODi4uLh4eHh4eHi4uLh4eHh4eHh4eHh4eHh4eH////h4eF3FMFTAAAAGnRSTlMA+/eJhGhfSHE9JBzz5KaQf3pXT0Xbz0I5AYDw8F0AAAB+SURBVCjPrdHbDoMgEEVRKAii1dZe9fz/hxplTiKIT7qfYCWTEEZdUvOwbckNAD2WHeh3brHW5f5EzGQ+iN+b1Gt6KPvtv16Dn6JX9M9ya3/A1yfu5dlyduL6Hec7mXY6ddXLPP2lpABGZ8PWXfYLTJxZekVhhl7eTX24zZPNKXoRC7zQLjUAAAAASUVORK5CYII="},25595:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".mail-filter-row[data-v-11806ba8]{display:flex;gap:5px}","",{version:3,sources:["webpack://./src/components/mailFilter/Action.vue"],names:[],mappings:"AACA,kCACC,YAAA,CACA,OAAA",sourcesContent:["\n.mail-filter-row {\n\tdisplay: flex;\n\tgap: 5px;\n}\n"],sourceRoot:""}]);const r=o},28558:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".button.icon-rename[data-v-25f63538]{background-color:rgba(0,0,0,0);border:none;opacity:.3}.button.icon-rename[data-v-25f63538]:hover,.button.icon-rename[data-v-25f63538]:focus{opacity:1}","",{version:3,sources:["webpack://./src/components/AccountDefaultsSettings.vue"],names:[],mappings:"AACA,qCACC,8BAAA,CACA,WAAA,CACA,UAAA,CAEA,sFAEC,SAAA",sourcesContent:["\n.button.icon-rename {\n\tbackground-color: transparent;\n\tborder: none;\n\topacity: 0.3;\n\n\t&:hover,\n\t&:focus {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]);const r=o},33190:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,"label[data-v-74fa0e50]{padding-right:12px}","",{version:3,sources:["webpack://./src/components/EditorSettings.vue"],names:[],mappings:"AAEA,uBACC,kBAAA",sourcesContent:["\n\nlabel {\n\tpadding-right: 12px;\n}\n"],sourceRoot:""}]);const r=o},34867:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAIAgMAAAC5YVYYAAAACVBMVEUAAADi4uLh4eHOxeSRAAAAAnRSTlMAuLMp9oYAAAAPSURBVAjXY4CDrJUgBAMAGaECJ9dz3BAAAAAASUVORK5CYII="},35121:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAADFBMVEUAAADi4uLi4uLh4eE5RQaIAAAAA3RSTlMAyTzPIdReAAAAGUlEQVQI12PAD+b///+Nof7//79gAsLFCwAx/w4blADeeQAAAABJRU5ErkJggg=="},40136:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAYFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////98JRy6AAAAH3RSTlMAzu4sDenl38fBvo1OMyIdEQrj1cSihX5hYFpHNycIcQOASAAAAF9JREFUGNN9zEcOgDAMRFHTS0LvNfe/JRmHKAIJ/mqeLJn+k9uDtaeUeFnFziGsBucUTirrprfe81RqZ3Bb6hPWeuZwDFOHyf+ig9CCzQ7INBn7bG5kF+QSt13BHNJnF7AaCT4Y+CW7AAAAAElFTkSuQmCC"},40620:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".input-field[data-v-68890c32]{min-width:260px}","",{version:3,sources:["webpack://./src/components/mailFilter/ActionAddflag.vue"],names:[],mappings:"AACA,8BACC,eAAA",sourcesContent:["\n.input-field {\n\tmin-width: 260px;\n}\n"],sourceRoot:""}]);const r=o},41387:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAAD1BMVEUAAADh4eHg4ODNzc3h4eEYfw2wAAAABHRSTlMAy2EFIuWxUgAAACRJREFUGNNjGBBgJOICBY7KDCoucODEAJSAS6FwUJShGjAQAADBPRGrK2/FhgAAAABJRU5ErkJggg=="},43331:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".alias-form[data-v-7f7d1aad]{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;width:100%}.alias-form__form[data-v-7f7d1aad]{display:flex;flex:1 auto;gap:10px}.alias-form__form--expand[data-v-7f7d1aad]{flex-basis:calc(100% - 44px - 10px)}.alias-form__form__input[data-v-7f7d1aad]{flex:1 auto}.alias-form__actions[data-v-7f7d1aad]{display:flex}","",{version:3,sources:["webpack://./src/components/AliasForm.vue"],names:[],mappings:"AAGA,6BACC,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,QANU,CAOV,cAAA,CACA,UAAA,CAEA,mCACC,YAAA,CACA,WAAA,CACA,QAAA,CAEA,2CAEC,mCAAA,CAGD,0CACC,WAAA,CAIF,sCACC,YAAA",sourcesContent:["\n$form-gap: 10px;\n\n.alias-form {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tgap: $form-gap;\n\tflex-wrap: wrap;\n\twidth: 100%;\n\n\t&__form {\n\t\tdisplay: flex;\n\t\tflex: 1 auto;\n\t\tgap: 10px; // Gap between inputs\n\n\t\t&--expand {\n\t\t\t// Prevent the submit button from being wrapped to the next line on normal sized screens\n\t\t\tflex-basis: calc(100% - 44px - $form-gap);\n\t\t}\n\n\t\t&__input {\n\t\t\tflex: 1 auto;\n\t\t}\n\t}\n\n\t&__actions {\n\t\tdisplay: flex;\n\t}\n}\n"],sourceRoot:""}]);const r=o},44123:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".primary[data-v-376f3177]{padding-left:26px;background-position:6px;color:var(--color-main-background)}.primary[data-v-376f3177]:after{left:14px}.button-text[data-v-376f3177]{background-color:rgba(0,0,0,0);border:none;color:var(--color-text-maxcontrast);font-weight:normal}.button-text[data-v-376f3177]:hover,.button-text[data-v-376f3177]:focus{color:var(--color-main-text)}input[data-v-376f3177]{width:195px}.button-vue[data-v-376f3177] {display:inline-block !important;margin-top:4px !important}","",{version:3,sources:["webpack://./src/components/AliasSettings.vue"],names:[],mappings:"AACA,0BACC,iBAAA,CACA,uBAAA,CACA,kCAAA,CAEA,gCACC,SAAA,CAIF,8BACC,8BAAA,CACA,WAAA,CACA,mCAAA,CACA,kBAAA,CAEA,wEAEC,4BAAA,CAIF,uBACC,WAAA,CAED,8BACC,+BAAA,CACA,yBAAA",sourcesContent:["\n.primary {\n\tpadding-left: 26px;\n\tbackground-position: 6px;\n\tcolor: var(--color-main-background);\n\n\t&:after {\n\t\tleft: 14px;\n\t}\n}\n\n.button-text {\n\tbackground-color: transparent;\n\tborder: none;\n\tcolor: var(--color-text-maxcontrast);\n\tfont-weight: normal;\n\n\t&:hover,\n\t&:focus {\n\t\tcolor: var(--color-main-text);\n\t}\n}\n\ninput {\n\twidth: 195px;\n}\n.button-vue:deep() {\n\tdisplay: inline-block !important;\n\tmargin-top: 4px !important;\n}\n"],sourceRoot:""}]);const r=o},45018:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".form[data-v-458c73c8]{display:flex;flex-direction:column;gap:15px}.form__fieldset[data-v-458c73c8]{display:flex;flex-direction:column}.form__fieldset__label[data-v-458c73c8]{display:flex;align-items:center;gap:5px}.form__fieldset__input[data-v-458c73c8]{flex:1 auto}.form__fieldset__description[data-v-458c73c8]{color:var(--color-text-maxcontrast)}.form__multi-row[data-v-458c73c8]{display:flex;align-items:end;gap:15px}.form #ooo-enable-last-day[data-v-458c73c8]{cursor:pointer;min-height:unset}.form #ooo-subject[data-v-458c73c8]{width:100%}.form #ooo-message[data-v-458c73c8]{width:100%;min-height:100px;border:1px solid var(--color-border)}.form #ooo-message[data-v-458c73c8]:active,.form #ooo-message[data-v-458c73c8]:focus,.form #ooo-message[data-v-458c73c8]:hover{border-color:var(--color-primary-element) !important}","",{version:3,sources:["webpack://./src/components/OutOfOfficeForm.vue"],names:[],mappings:"AACA,uBACC,YAAA,CACA,qBAAA,CACA,QAAA,CAEA,iCACC,YAAA,CACA,qBAAA,CAEA,wCACC,YAAA,CACA,kBAAA,CACA,OAAA,CAGD,wCACC,WAAA,CAGD,8CACC,mCAAA,CAIF,kCACC,YAAA,CACA,eAAA,CACA,QAAA,CAGD,4CACC,cAAA,CACA,gBAAA,CAGD,oCACC,UAAA,CAGD,oCACC,UAAA,CACA,gBAAA,CACA,oCAAA,CAEA,+HAGC,oDAAA",sourcesContent:["\n.form {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 15px;\n\n\t&__fieldset {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t&__label {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tgap: 5px;\n\t\t}\n\n\t\t&__input {\n\t\t\tflex: 1 auto;\n\t\t}\n\n\t\t&__description {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n\n\t&__multi-row {\n\t\tdisplay: flex;\n\t\talign-items: end;\n\t\tgap: 15px;\n\t}\n\n\t#ooo-enable-last-day {\n\t\tcursor: pointer;\n\t\tmin-height: unset;\n\t}\n\n\t#ooo-subject {\n\t\twidth: 100%;\n\t}\n\n\t#ooo-message {\n\t\twidth: 100%;\n\t\tmin-height: 100px;\n\t\tborder: 1px solid var(--color-border);\n\n\t\t&:active,\n\t\t&:focus,\n\t\t&:hover {\n\t\t\tborder-color: var(--color-primary-element) !important;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const r=o},51610:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,"\nform[data-v-1ea70ac4] {\n\twidth: 300px\n}\nlabel[data-v-1ea70ac4] {\n\tdisplay: inline-block;\n}\ninput[data-v-1ea70ac4] {\n\twidth: 100%;\n}\n.flex-row[data-v-1ea70ac4] {\n\tdisplay: flex;\n\tgap: var(--default-grid-baseline);\n\tmargin-bottom: calc(var(--default-grid-baseline) * 4);\n}\n.custom[data-v-1ea70ac4] {\n\tmargin-bottom: calc(var(--default-grid-baseline) * 4);\n}\ninput[type='radio'][data-v-1ea70ac4] {\n\tdisplay: none;\n}\n","",{version:3,sources:["webpack://./src/components/SieveAccountForm.vue"],names:[],mappings:";AA8IA;CACA;AACA;AAEA;CACA,qBAAA;AACA;AAEA;CACA,WAAA;AACA;AAEA;CACA,aAAA;CACA,iCAAA;CACA,qDAAA;AACA;AAEA;CACA,qDAAA;AACA;AAEA;CACA,aAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t<form id=\"sieve-form\">\n\t\t<p>\n\t\t\t{{ t('mail', 'Sieve is a powerful language for writing filters for your mailbox. You can manage the sieve scripts in Mail if your email service supports it. Sieve is also required to use Autoresponder and Filters.') }}\n\t\t</p>\n\t\t<p>\n\t\t\t<NcCheckboxRadioSwitch :checked.sync=\"sieveConfig.sieveEnabled\">\n\t\t\t\t{{ t('mail', 'Enable sieve filter') }}\n\t\t\t</NcCheckboxRadioSwitch>\n\t\t</p>\n\t\t<div v-if=\"sieveConfig.sieveEnabled\">\n\t\t\t<NcTextField :label=\"t('mail', 'Sieve host')\" :value.sync=\"sieveConfig.sieveHost\" />\n\t\t\t<h4>{{ t('mail', 'Sieve security') }}</h4>\n\t\t\t<div class=\"flex-row\">\n\t\t\t\t<ButtonVue :pressed=\"sieveConfig.sieveSslMode === 'none'\"\n\t\t\t\t\t@click=\"updateSslMode('none')\">\n\t\t\t\t\t{{ t('mail', 'None') }}\n\t\t\t\t</ButtonVue>\n\t\t\t\t<ButtonVue :pressed=\"sieveConfig.sieveSslMode === 'ssl'\"\n\t\t\t\t\t@click=\"updateSslMode('ssl')\">\n\t\t\t\t\t{{ t('mail', 'SSL/TLS') }}\n\t\t\t\t</ButtonVue>\n\t\t\t\t<ButtonVue :pressed=\"sieveConfig.sieveSslMode === 'tls'\"\n\t\t\t\t\t@click=\"updateSslMode('tls')\">\n\t\t\t\t\t{{ t('mail', 'STARTTLS') }}\n\t\t\t\t</ButtonVue>\n\t\t\t</div>\n\t\t\t<NcTextField :label=\"t('mail', 'Sieve Port')\" :value.sync=\"sieveConfig.sievePort\" />\n\t\t\t<h4>{{ t('mail', 'Sieve credentials') }}</h4>\n\t\t\t<div class=\"flex-row\">\n\t\t\t\t<ButtonVue :pressed=\"useImapCredentials\"\n\t\t\t\t\t@click=\"updateCredentials(true)\">\n\t\t\t\t\t{{ t('mail', 'IMAP credentials') }}\n\t\t\t\t</ButtonVue>\n\t\t\t\t<ButtonVue :pressed=\"!useImapCredentials\"\n\t\t\t\t\t@click=\"updateCredentials(false)\">\n\t\t\t\t\t{{ t('mail', 'Custom') }}\n\t\t\t\t</ButtonVue>\n\t\t\t</div>\n\t\t\t<p v-if=\"!useImapCredentials\" class=\"custom\">\n\t\t\t\t<NcTextField :label=\"t('mail', 'Sieve User')\" :value.sync=\"sieveConfig.sieveUser\" />\n\t\t\t\t<NcPasswordField :label=\"t('mail', 'Sieve Password')\" :value.sync=\"sieveConfig.sievePassword\" />\n\t\t\t</p>\n\t\t</div>\n\t\t<slot name=\"feedback\" />\n\t\t<p v-if=\"errorMessage\">\n\t\t\t{{ t('mail', 'Oh snap!') }}\n\t\t\t{{ errorMessage }}\n\t\t</p>\n\t\t<ButtonVue type=\"primary\"\n\t\t\t:disabled=\"loading\"\n\t\t\t:aria-label=\"t('mail', 'Save sieve settings')\"\n\t\t\t@click.prevent=\"onSubmit\">\n\t\t\t{{ t('mail', 'Save sieve settings') }}\n\t\t</ButtonVue>\n\t</form>\n</template>\n\n<script>\nimport { NcButton as ButtonVue, NcTextField, NcPasswordField, NcCheckboxRadioSwitch } from '@nextcloud/vue'\nimport useMainStore from '../store/mainStore.js'\nimport { mapStores } from 'pinia'\n\nexport default {\n\tname: 'SieveAccountForm',\n\tcomponents: {\n\t\tButtonVue,\n\t\tNcTextField,\n\t\tNcPasswordField,\n\t\tNcCheckboxRadioSwitch,\n\t},\n\tprops: {\n\t\taccount: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsieveConfig: {\n\t\t\t\tsieveEnabled: this.account.sieveEnabled,\n\t\t\t\tsieveHost: this.account.sieveHost || this.account.imapHost,\n\t\t\t\tsievePort: this.account.sievePort || 4190,\n\t\t\t\tsieveUser: this.account.sieveUser || '',\n\t\t\t\tsievePassword: '',\n\t\t\t\tsieveSslMode: this.account.sieveSslMode || 'tls',\n\t\t\t},\n\t\t\tloading: false,\n\t\t\tuseImapCredentials: !this.account.sieveUser,\n\t\t\terrorMessage: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapStores(useMainStore),\n\t},\n\tmethods: {\n\t\tupdateSslMode(value) {\n\t\t\tthis.sieveConfig.sieveSslMode = value\n\t\t},\n\t\tupdateCredentials(value) {\n\t\t\tthis.useImapCredentials = value\n\t\t},\n\t\tasync onSubmit() {\n\t\t\tthis.loading = true\n\t\t\tthis.errorMessage = ''\n\n\t\t\t// empty user and password => use imap credentials\n\t\t\tif (this.sieveConfig.sieveUser === '' && this.sieveConfig.sievePassword === '') {\n\t\t\t\tthis.useImapCredentials = true\n\t\t\t}\n\n\t\t\t// clear user and password if imap credentials are used\n\t\t\tif (this.useImapCredentials) {\n\t\t\t\tthis.sieveConfig.sieveUser = ''\n\t\t\t\tthis.sieveConfig.sievePassword = ''\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait this.mainStore.updateSieveAccount({\n\t\t\t\t\taccount: this.account,\n\t\t\t\t\tdata: this.sieveConfig,\n\t\t\t\t})\n\t\t\t\tif (this.sieveConfig.sieveEnabled) {\n\t\t\t\t\tawait this.mainStore.fetchActiveSieveScript({\n\t\t\t\t\t\taccountId: this.account.id,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis.errorMessage = error.message\n\t\t\t}\n\n\t\t\tthis.loading = false\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\nform {\n\twidth: 300px\n}\n\nlabel {\n\tdisplay: inline-block;\n}\n\ninput {\n\twidth: 100%;\n}\n\n.flex-row {\n\tdisplay: flex;\n\tgap: var(--default-grid-baseline);\n\tmargin-bottom: calc(var(--default-grid-baseline) * 4);\n}\n\n.custom {\n\tmargin-bottom: calc(var(--default-grid-baseline) * 4);\n}\n\ninput[type='radio'] {\n\tdisplay: none;\n}\n</style>\n"],sourceRoot:""}]);const r=o},63679:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAADFBMVEUAAAD///////////84wDuoAAAAA3RSTlMAyTzPIdReAAAAGUlEQVQI12PAD+b///+Nof7//79gAsLFCwAx/w4blADeeQAAAABJRU5ErkJggg=="},66470:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".solid[data-v-20f43b10]{margin:calc(var(--default-grid-baseline)*4) 0 0 0}.mail-filter-rows[data-v-20f43b10]{margin-bottom:calc(var(--default-grid-baseline)*4)}.mail-filter-rows__row[data-v-20f43b10]{display:flex;gap:var(--default-grid-baseline);align-items:baseline}.mail-filter-rows__row__column[data-v-20f43b10]{display:block;flex-grow:1}.mail-filter-rows__row__column *[data-v-20f43b10]{width:100%}.mail-filter-rows__row__select[data-v-20f43b10]{max-width:100% !important;width:100%}.values-list[data-v-20f43b10]{display:flex;gap:var(--default-grid-baseline);flex-wrap:wrap}.values-list__item[data-v-20f43b10]{display:flex;gap:var(--default-grid-baseline)}","",{version:3,sources:["webpack://./src/components/mailFilter/Test.vue"],names:[],mappings:"AACA,wBACC,iDAAA,CAED,mCACC,kDAAA,CACA,wCACC,YAAA,CACA,gCAAA,CACA,oBAAA,CACA,gDACC,aAAA,CACA,WAAA,CAED,kDACC,UAAA,CAED,gDACC,yBAAA,CACA,UAAA,CAMH,8BACC,YAAA,CACA,gCAAA,CACA,cAAA,CACA,oCACC,YAAA,CACA,gCAAA",sourcesContent:["\n.solid {\n\tmargin: calc(var(--default-grid-baseline) * 4) 0 0 0;\n}\n.mail-filter-rows {\n\tmargin-bottom: calc(var(--default-grid-baseline) * 4);\n\t&__row {\n\t\tdisplay: flex;\n\t\tgap: var(--default-grid-baseline);\n\t\talign-items: baseline;\n\t\t&__column {\n\t\t\tdisplay: block;\n\t\t\tflex-grow: 1;\n\t\t}\n\t\t&__column *{\n\t\t\twidth: 100%;\n\t\t}\n\t\t&__select {\n\t\t\tmax-width: 100% !important;\n\t\t\twidth: 100%;\n\t\t}\n\n\t}\n}\n\n.values-list {\n\tdisplay: flex;\n\tgap: var(--default-grid-baseline);\n\tflex-wrap: wrap;\n\t&__item {\n\t\tdisplay: flex;\n\t\tgap: var(--default-grid-baseline);\n\t}\n}\n"],sourceRoot:""}]);const r=o},76977:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".section[data-v-734c24f8]{display:block;padding:0;margin-bottom:23px}textarea[data-v-734c24f8]{width:100%;resize:vertical}.primary[data-v-734c24f8]{padding-left:26px;background-position:6px;color:var(--color-main-background)}.primary[data-v-734c24f8]:after{left:14px}","",{version:3,sources:["webpack://./src/components/SieveFilterForm.vue"],names:[],mappings:"AACA,0BACC,aAAA,CACA,SAAA,CACA,kBAAA,CAGD,0BACC,UAAA,CACA,eAAA,CAGD,0BACC,iBAAA,CACA,uBAAA,CACA,kCAAA,CAEA,gCACE,SAAA",sourcesContent:["\n.section {\n\tdisplay: block;\n\tpadding: 0;\n\tmargin-bottom: 23px;\n}\n\ntextarea {\n\twidth: 100%;\n\tresize: vertical;\n}\n\n.primary {\n\tpadding-left: 26px;\n\tbackground-position: 6px;\n\tcolor: var(--color-main-background);\n\n\t&:after {\n\t\t left: 14px;\n\t }\n}\n"],sourceRoot:""}]);const r=o},77905:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAP1BMVEUAAADj4+Pf39/h4eHh4eHh4eHk5OTh4eHg4ODi4uLh4eHh4eHg4ODh4eHh4eHg4ODh4eHh4eHp6en////h4eFqcyvUAAAAFHRSTlMAOQfy7bgS5NrBvqOIfXNHMSELAgQ/iFsAAAA2SURBVAjXY4AANjYIzcjMAaVFuBkY+RkEWERYmRjYRXjANAOfiIgIFxNIAa8IpxBEi6AwiAQAK2MBd7xY8csAAAAASUVORK5CYII="},83986:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".alias-item[data-v-210fd01f]{display:flex;justify-content:space-between}.button.icon-rename[data-v-210fd01f]{background-image:var(--icon-rename-000);background-color:var(--color-main-background);border:none;opacity:.7}.button.icon-rename[data-v-210fd01f]:hover,.button.icon-rename[data-v-210fd01f]:focus{opacity:1}.settings-hint[data-v-210fd01f]{margin-top:calc(var(--default-grid-baseline)*-3);margin-bottom:calc(var(--default-grid-baseline)*2);color:var(--color-text-maxcontrast)}h2[data-v-210fd01f]{font-weight:bold;font-size:20px;margin-bottom:calc(var(--default-grid-baseline)*3);margin-left:calc(var(--default-grid-baseline)*-7);line-height:calc(var(--default-grid-baseline)*7);color:var(--color-text-light)}.app-settings-section[data-v-210fd01f]{margin-bottom:calc(var(--default-grid-baseline)*12)}","",{version:3,sources:["webpack://./src/components/AccountSettings.vue"],names:[],mappings:"AACA,6BACC,YAAA,CACA,6BAAA,CAGD,qCACC,uCAAA,CACA,6CAAA,CACA,WAAA,CACA,UAAA,CACA,sFAEC,SAAA,CAGF,gCACC,gDAAA,CACA,kDAAA,CACA,mCAAA,CAED,oBACC,gBAAA,CACA,cAAA,CACA,kDAAA,CACA,iDAAA,CACA,gDAAA,CACA,6BAAA,CAED,uCACC,mDAAA",sourcesContent:["\n.alias-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n\n.button.icon-rename {\n\tbackground-image: var(--icon-rename-000);\n\tbackground-color: var(--color-main-background);\n\tborder: none;\n\topacity: 0.7;\n\t&:hover,\n\t&:focus {\n\t\topacity: 1;\n\t}\n}\n.settings-hint {\n\tmargin-top: calc(var(--default-grid-baseline) * -3);\n\tmargin-bottom: calc(var(--default-grid-baseline) * 2);\n\tcolor: var(--color-text-maxcontrast);\n}\nh2 {\n\tfont-weight: bold;\n\tfont-size: 20px;\n\tmargin-bottom: calc(var(--default-grid-baseline) * 3);\n\tmargin-left: calc(var(--default-grid-baseline) * -7);\n\tline-height: calc(var(--default-grid-baseline) * 7);\n\tcolor: var(--color-text-light);\n}\n.app-settings-section {\n\tmargin-bottom: calc(var(--default-grid-baseline) * 12);\n}\n"],sourceRoot:""}]);const r=o},85752:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAWlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////9ZMre9AAAAHXRSTlMA/PiJhGNI9XlEHJB/b2ldV08+Oibk49vPp6QhAYgGBuwAAACCSURBVCjPrdHdDoIwDAXgTWAqCigo/+f9X5OwnoUwtis4V92XNWladUl+rzQPeQJAN2EHxoOnsPn7/oYk8fxBv08Rr/deOH/aZ2Nm8ZJ+s573QGfWKnNuZGzWm3+lv2V3pcU1XQ385/yjmBoM3Z+dXvlbYLLD3ujhTaOM3KaIXvNkFkuSEvYy1LqOAAAAAElFTkSuQmCC"},88154:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".section[data-v-59a0beb4]{display:block;padding:0;margin-bottom:23px}textarea[data-v-59a0beb4]{width:100%}.primary[data-v-59a0beb4]{padding-left:26px;background-position:6px;color:var(--color-main-background)}.primary[data-v-59a0beb4]:after{left:14px}","",{version:3,sources:["webpack://./src/components/mailFilter/MailFilters.vue"],names:[],mappings:"AACA,0BACC,aAAA,CACA,SAAA,CACA,kBAAA,CAGD,0BACC,UAAA,CAGD,0BACC,iBAAA,CACA,uBAAA,CACA,kCAAA,CAEA,gCACE,SAAA",sourcesContent:["\n.section {\n\tdisplay: block;\n\tpadding: 0;\n\tmargin-bottom: 23px;\n}\n\ntextarea {\n\twidth: 100%;\n}\n\n.primary {\n\tpadding-left: 26px;\n\tbackground-position: 6px;\n\tcolor: var(--color-main-background);\n\n\t&:after {\n\t\t left: 14px;\n\t }\n}\n"],sourceRoot:""}]);const r=o},89063:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,"label[data-v-1c06d4ff]{padding-right:12px}div[data-v-1c06d4ff]{display:flex;align-items:center}","",{version:3,sources:["webpack://./src/components/SearchSettings.vue"],names:[],mappings:"AAEA,uBACC,kBAAA,CAGD,qBACC,YAAA,CACA,kBAAA",sourcesContent:["\n\nlabel {\n\tpadding-right: 12px;\n}\n\ndiv{\n\tdisplay: flex;\n\talign-items: center;\n}\n"],sourceRoot:""}]);const r=o},95773:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAXVBMVEUAAADh4eHh4eHh4eHi4uLb29vh4eHh4eHh4eHh4eHh4eHh4eHh4eHi4uLi4uLj4+Pi4uLk5OTo6Ojh4eHh4eHi4uLg4ODg4ODh4eHg4ODh4eHf39/g4OD////h4eEzIk+wAAAAHnRSTlMAzu6/LA3p5eLZx8ONTjYiHRIKooV+YWBaRzEnCANnm5rnAAAAZElEQVQY033P2wqAIAyA4VWaaWrnc/n+j5mbhBjUf7WPoTD47TJb4i5zTr/sRDRHuyFaoWX7uK/RlbctlPEuyI1f4WY9yQINEkf6rzzo8YIzmUFoCs7J1EjeIaa9bXIEmzl8dgOZEAj/+2IvzAAAAABJRU5ErkJggg=="},96443:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAQlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////8IX9KGAAAAFXRSTlMA8u24NxILB+Tawb6jiH1zRz0xIQIIP3GUAAAAMklEQVQI1y3FtQEAMQDDQD+EGbz/qkEVOpyEOP6PudKjZNSXn4Jm2CKRdBKzSLsFWl8fMG0Bl6Jk1rMAAAAASUVORK5CYII="},98448:(t,e,a)=>{a.d(e,{A:()=>r});var n=a(71354),i=a.n(n),s=a(76314),o=a.n(s)()(i());o.push([t.id,".modal__content[data-v-50a60fae]{margin:50px}.modal__content h2[data-v-50a60fae]{text-align:center}.filter-name[data-v-50a60fae],.filter-operator[data-v-50a60fae],.filter-tests[data-v-50a60fae],.filter-actions[data-v-50a60fae]{margin-bottom:8px}.form-group[data-v-50a60fae]{margin:calc(var(--default-grid-baseline)*4) 0;display:flex;flex-direction:column;align-items:flex-start}.external-label[data-v-50a60fae]{display:flex;width:100%;margin-top:1rem}.external-label label[data-v-50a60fae]{padding-top:7px;padding-right:14px;white-space:nowrap}.help-text p[data-v-50a60fae]{margin-bottom:.2em}.help-text[data-v-50a60fae]{margin-bottom:calc(var(--default-grid-baseline)*2)}","",{version:3,sources:["webpack://./src/components/mailFilter/UpdateModal.vue"],names:[],mappings:"AACA,iCACC,WAAA,CAGD,oCACC,iBAAA,CAGD,gIACC,iBAAA,CAGD,6BACC,6CAAA,CACA,YAAA,CACA,qBAAA,CACA,sBAAA,CAGD,iCACC,YAAA,CACA,UAAA,CACA,eAAA,CAGD,uCACC,eAAA,CACA,kBAAA,CACA,kBAAA,CAGD,8BACC,kBAAA,CAGD,4BACC,kDAAA",sourcesContent:["\n.modal__content {\n\tmargin: 50px;\n}\n\n.modal__content h2 {\n\ttext-align: center;\n}\n\n.filter-name, .filter-operator, .filter-tests, .filter-actions {\n\tmargin-bottom: 8px;\n}\n\n.form-group {\n\tmargin: calc(var(--default-grid-baseline) * 4) 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n}\n\n.external-label {\n\tdisplay: flex;\n\twidth: 100%;\n\tmargin-top: 1rem;\n}\n\n.external-label label {\n\tpadding-top: 7px;\n\tpadding-right: 14px;\n\twhite-space: nowrap;\n}\n\n.help-text p {\n\tmargin-bottom: 0.2em;\n}\n\n.help-text {\n\tmargin-bottom: calc(var(--default-grid-baseline) * 2);\n}\n"],sourceRoot:""}]);const r=o}}]);
//# sourceMappingURL=mail.account-settings.cf41833fa873f5fd029a.js.map