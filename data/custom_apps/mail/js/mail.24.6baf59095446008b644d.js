(self.webpackChunknextcloud_mail=self.webpackChunknextcloud_mail||[]).push([[24,471],{608:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,".navigation-outbox__unread-counter[data-v-3df17d20]{margin-right:calc(var(--default-grid-baseline)*2)}.outbox-opacity-icon[data-v-3df17d20]{opacity:.7}.outbox-opacity-icon[data-v-3df17d20]:hover{opacity:1}","",{version:3,sources:["webpack://./src/components/NavigationOutbox.vue"],names:[],mappings:"AAEC,oDACC,iDAAA,CAIF,sCACC,UAAA,CACA,4CACC,SAAA",sourcesContent:["\n.navigation-outbox {\n\t&__unread-counter {\n\t\tmargin-right: calc(var(--default-grid-baseline)*2);\n\t}\n}\n\n.outbox-opacity-icon {\n\topacity: .7;\n\t&:hover {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]);const r=s},7943:(t,e,a)=>{"use strict";a.d(e,{A:()=>n});const i={name:"ImportantIcon",props:{title:{type:String,default:""},size:{type:Number,default:20},fillColor:{type:String,default:"currentColor"}}},n=(0,a(14486).A)(i,(function(t,e){return t("span",e._g(e._b({staticClass:"material-design-icon important-icon",class:[e.data.class,e.data.staticClass],attrs:{"aria-hidden":!e.props.title,"aria-label":e.props.title,role:"img"}},"span",e.data.attrs,!1),e.listeners),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.props.fillColor,width:e.props.size,height:e.props.size,viewBox:"0 0 16 16"}},[t("path",{attrs:{d:"M0 0h24v24H0V0z",fill:"none"}}),e._v(" "),t("path",{attrs:{d:"M2 13h7.8a1.4 1.4 0 001.1-.6L14 8l-3.1-4.4A1.4 1.4 0 009.8 3H2l3.4 5z"}})])])}),[],!0,null,null,null).exports},14045:(e,a,i)=>{"use strict";i.d(a,{A:()=>be});var n=i(92516),o=i(26335),s=i(89283),r=i(63814),l=i(54914),c=i(85745),d=i(97627),u=i(83241),p=i(35527),m=i(25866),A=i(45476),b=i(42764),h=i(86451),g=i(85168),v=i(51849),f=i(19534);const x={name:"NavigationAccount",components:{NcAppNavigationCaption:n.dL,Fragment:l.F,ActionButton:n.Ko,ActionCheckbox:n.RI,ActionInput:n.Az,ActionText:n.HO,AccountSettings:()=>Promise.all([i.e(607),i.e(103),i.e(165),i.e(975),i.e(398),i.e(568),i.e(730)]).then(i.bind(i,1366)),IconInfo:u.A,IconSettings:p.A,IconFolderAdd:m.A,MenuDown:A.A,MenuUp:b.A,IconDelete:h.A,IconLoading:n.ne},props:{account:{type:Object,required:!0},firstMailbox:{type:Object,default:()=>{}},isFirst:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1}},data:()=>({menuOpen:!1,loading:{delete:!1},savingShowOnlySubscribed:!1,quota:void 0,editing:!1,showSaving:!1,createMailboxName:"",showMailboxes:!1,nameInput:!1,nameLabel:!0}),computed:{...(0,v.n2)(f.A),showSettings(){return this.mainStore.showSettingsForAccount(this.account.id)},visible(){return!0!==this.account.isUnified&&!1!==this.account.visible},id(){return"account-"+this.account.id},quotaText(){return void 0===this.quota?t("mail","Loading …"):!1===this.quota?t("mail","Not supported by the server"):t("mail","{usage} of {limit} used",{usage:(0,s.v7)(this.quota.usage),limit:(0,s.v7)(this.quota.limit)})}},methods:{async createMailbox(e){this.nameInput=!1,this.showSaving=!0;const a=this.createMailboxName;c.A.info("creating mailbox "+a),this.menuOpen=!1;try{await this.mainStore.createMailbox({account:this.account,name:a})}catch(e){throw(0,g.Qg)(t("mail","Unable to create mailbox. The name likely contains invalid characters. Please try another name.")),c.A.error("could not create mailbox",{error:e}),e}finally{this.showSaving=!1,this.nameInput=!1,this.editing=!1,this.createMailboxName=""}c.A.info(`mailbox ${a} created`)},openCreateMailbox(){this.editing=!0,this.nameInput=!0,this.showSaving=!1},async removeAccount(){const e=this.account.id;c.A.info("delete account",{account:this.account});const a=(new g.ik).setName(t("mail","Remove account")).setText(t("mail","The account for {email} and cached email data will be removed from Nextcloud, but not from your email provider.",{email:this.account.emailAddress})).setButtons([{label:t("mail","Cancel")},{label:t("mail","Remove {email}",{email:this.account.emailAddress}),type:"error",callback:async()=>{this.loading.delete=!0;try{await this.mainStore.deleteAccount(this.account),c.A.info(`account ${e} deleted, redirecting …`),location.href=(0,r.Jv)("/apps/mail")}catch(t){c.A.error("could not delete account",{error:t})}finally{this.loading.delete=!1}}}]).build();await a.show()},changeAccountOrderUp(){this.mainStore.moveAccount({account:this.account,up:!0}).catch((t=>c.A.error("could not move account up",{error:t})))},changeAccountOrderDown(){this.mainStore.moveAccount({account:this.account}).catch((t=>c.A.error("could not move account down",{error:t})))},changeShowSubscribedOnly(t){this.savingShowOnlySubscribed=!0,this.mainStore.patchAccount({account:this.account,data:{showSubscribedOnly:t}}).then((()=>{this.savingShowOnlySubscribed=!1,c.A.info("show only subscribed mailboxes updated to "+t)})).catch((t=>{throw c.A.error("could not update subscription mode",{error:t}),this.savingShowOnlySubscribed=!1,t}))},onMenuToggle(t){t&&(console.debug("accounts menu opened, fetching quota"),this.fetchQuota())},async fetchQuota(){const t=await(0,d.FY)(this.account.id);console.debug("quota fetched",{quota:t}),this.quota=void 0!==t&&t},showAccountSettings(t){t?this.mainStore.showSettingsForAccountMutation(this.account.id):this.mainStore.showSettingsForAccountMutation(null)}}};var C=i(85072),_=i.n(C),y=i(97825),w=i.n(y),S=i(77659),I=i.n(S),k=i(55056),M=i.n(k),D=i(10540),T=i.n(D),B=i(41113),N=i.n(B),E=i(94144),P={};P.styleTagTransform=N(),P.setAttributes=M(),P.insert=I().bind(null,"head"),P.domAPI=w(),P.insertStyleElement=T(),_()(E.A,P),E.A&&E.A.locals&&E.A.locals;var z=i(14486);const R=(0,z.A)(x,(function(){var t=this,e=t._self._c;return e("Fragment",[t.visible?e("NcAppNavigationCaption",{key:t.id,attrs:{id:t.id,name:t.account.emailAddress},on:{"update:open":t.onMenuToggle},scopedSlots:t._u([{key:"actions",fn:function(){return[t.isDisabled?[e("ActionText",{attrs:{name:t.t("mail","Provisioned account is disabled")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{size:16}})]},proxy:!0}],null,!1,3625221864)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Please login using a password to enable this account. The current session is using passwordless authentication, e.g. SSO or WebAuthn."))+"\n\t\t\t\t")])]:[t.account.isUnified?t._e():e("ActionText",{attrs:{name:t.t("mail","Quota")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{size:16}})]},proxy:!0}],null,!1,3625221864)},[t._v("\n\t\t\t\t\t"+t._s(t.quotaText)+"\n\t\t\t\t")]),t._v(" "),e("ActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){return t.showAccountSettings(!0)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconSettings",{attrs:{size:16}})]},proxy:!0}],null,!1,2580691459)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Account settings"))+"\n\t\t\t\t")]),t._v(" "),e("ActionCheckbox",{attrs:{checked:t.account.showSubscribedOnly,disabled:t.savingShowOnlySubscribed},on:{"update:checked":t.changeShowSubscribedOnly}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Show only subscribed mailboxes"))+"\n\t\t\t\t")]),t._v(" "),!t.editing&&t.nameLabel?e("ActionButton",{on:{click:t.openCreateMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:16}})]},proxy:!0}],null,!1,1502609841)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Add mailbox"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.editing&&t.nameInput?e("ActionInput",{attrs:{value:t.createMailboxName},on:{"update:value":function(e){t.createMailboxName=e},submit:function(e){return e.preventDefault(),e.stopPropagation(),t.createMailbox.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:16}})]},proxy:!0}],null,!1,1502609841)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Mailbox name"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.showSaving?e("ActionText",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLoading",{attrs:{size:16}})]},proxy:!0}],null,!1,4291381056)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Saving"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.isFirst?t._e():e("ActionButton",{on:{click:t.changeAccountOrderUp},scopedSlots:t._u([{key:"icon",fn:function(){return[e("MenuUp",{attrs:{size:16}})]},proxy:!0}],null,!1,882525435)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Move up"))+"\n\t\t\t\t")]),t._v(" "),t.isLast?t._e():e("ActionButton",{on:{click:t.changeAccountOrderDown},scopedSlots:t._u([{key:"icon",fn:function(){return[e("MenuDown",{attrs:{size:16}})]},proxy:!0}],null,!1,2631425228)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Move down"))+"\n\t\t\t\t")]),t._v(" "),t.account.provisioningId?t._e():e("ActionButton",{on:{click:t.removeAccount},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDelete",{attrs:{size:16}})]},proxy:!0}],null,!1,3099325823)},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Remove account"))+"\n\t\t\t\t")])]]},proxy:!0}],null,!1,3816268409)}):t._e(),t._v(" "),e("AccountSettings",{attrs:{open:t.showSettings,account:t.account},on:{"update:open":function(e){return t.showAccountSettings(e)}}})],1)}),[],!1,null,null,null).exports,O={name:"NavigationAccountExpandCollapse",components:{AppNavigationItem:n.G_},props:{account:{type:Object,required:!0}},computed:{...(0,v.n2)(f.A),id(){return"collapse-"+this.account.id},title(){return this.account.collapsed&&this.account.showSubscribedOnly?t("mail","Show all subscribed mailboxes"):this.account.collapsed&&!this.account.showSubscribedOnly?t("mail","Show all mailboxes"):t("mail","Collapse mailboxes")}},methods:{async toggleCollapse(){c.A.debug("toggling collapsed mailboxes for account "+this.account.id);try{await this.mainStore.toggleAccountCollapsedMutation(this.account.id),await this.mainStore.setAccountSetting({accountId:this.account.id,key:"collapsed",value:this.account.collapsed})}catch(t){c.A.error("could not update account settings",{error:t})}}}};var F=i(65517),U={};U.styleTagTransform=N(),U.setAttributes=M(),U.insert=I().bind(null,"head"),U.domAPI=w(),U.insertStyleElement=T(),_()(F.A,U),F.A&&F.A.locals&&F.A.locals;const L=(0,z.A)(O,(function(){var t=this;return(0,t._self._c)("AppNavigationItem",{attrs:{name:t.title},on:{click:t.toggleCollapse}})}),[],!1,null,"13e744b3",null).exports;var $=i(75380),q=i(98908),G=i(11719),Y=i(1426),H=i(24422),V=i(15843),K=i(14412),j=i(2413),Q=i(2656),W=i(62366),X=i(56612),J=i(65472),Z=i(69185),tt=i(7943),et=i(27715),at=i(92463);const it={name:"MoveMailboxModal",components:{MailboxPicker:i(41752).A},props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0}},data:()=>({moving:!1,destMailboxId:void 0}),computed:{...(0,v.n2)(f.A)},methods:{onClose(){this.$emit("close")},async onMove(){if(this.moving=!0,this.mailbox.id!==this.destMailboxId)try{if(this.destMailboxId){const t=this.mainStore.getMailbox(this.destMailboxId).name+this.mailbox.delimiter+this.mailbox.displayName;await this.mainStore.renameMailbox({account:this.account,mailbox:this.mailbox,newName:t})}else{const t=this.mailbox.displayName;await this.mainStore.renameMailbox({account:this.account,mailbox:this.mailbox,newName:t})}}catch(t){c.A.error("could not move mailbox",{error:t})}finally{this.moving=!1,this.$emit("close")}},genId:t=>"mailbox-"+t.databaseId}},nt=(0,z.A)(it,(function(){var t=this;return(0,t._self._c)("MailboxPicker",{attrs:{account:t.account,selected:t.destMailboxId,loading:t.moving,"picked-mailbox":t.mailbox,"allow-root":!0,"label-select":t.t("mail","Move"),"label-select-loading":t.t("mail","Moving")},on:{"update:selected":function(e){t.destMailboxId=e},select:t.onMove,close:t.onClose}})}),[],!1,null,null,null).exports;var ot=i(87314),st=i(28290),rt=i(1468),lt=i(50966),ct=i(53334),dt=i(51648),ut=i(35630);(0,v.oO)((0,v.Ey)());const pt=(0,f.A)();class mt{constructor(t,e,a){this.el=t,this.options=a,this.registerListeners.bind(this)(t),this.setInitialAttributes()}setInitialAttributes(){this.draggableInfo={},this.setStatus("enabled")}update(t,e){this.setInitialAttributes(),this.options=e.options}registerListeners(t){ut.A.on("drag-start",this.onDragStart.bind(this)),ut.A.on("drag-end",this.onDragEnd.bind(this)),t.firstChild.addEventListener("dragover",this.onDragOver.bind(this)),t.firstChild.addEventListener("dragleave",this.onDragLeave.bind(this)),t.firstChild.addEventListener("drop",this.onDrop.bind(this))}removeListeners(t){ut.A.off("drag-start",this.onDragStart),ut.A.off("drag-end",this.onDragEnd),t.firstChild.removeEventListener("dragover",this.onDragOver),t.firstChild.removeEventListener("dragleave",this.onDragLeave),t.firstChild.removeEventListener("drop",this.onDrop)}setStatus(t){this.el.setAttribute("droppable-mailbox",t)}onDragStart(t){this.draggableInfo=t,this.canBeDropped()||this.setStatus("disabled")}canBeDropped(){return this.isSameAccount()&&this.options.isValidDropTarget}isSameAccount(){return this.draggableInfo.accountId===this.options.accountId}get isCurrentlyDragging(){return Object.keys(this.draggableInfo).length>0}onDragEnd(){this.setInitialAttributes()}onDragOver(t){this.isCurrentlyDragging&&(t.preventDefault(),this.draggableInfo.mailboxId!==this.options.mailboxId&&(this.options.isValidDropTarget&&this.setStatus("dragover"),t.dataTransfer.dropEffect="move"))}onDragLeave(t){this.isCurrentlyDragging&&(t.preventDefault(),this.setStatus("enabled"))}async onDrop(t){if(!this.isCurrentlyDragging)return;if(t.preventDefault(),this.draggableInfo.mailboxId===this.options.mailboxId)return;this.setInitialAttributes();const e=JSON.parse(t.dataTransfer.getData("text"));ut.A.emit("envelopes-dropped",{envelopes:e});try{const t=e.map((async t=>await this.processDroppedItem(t)));await Promise.all(t)}catch(t){c.A.error("could not process dropped messages",t)}finally{ut.A.emit("envelopes-moved",{mailboxId:this.options.mailboxId,movedEnvelopes:e})}}async processDroppedItem(t){const e=document.querySelector(`[data-envelope-id="${t.databaseId}"]`);e.setAttribute("draggable-envelope","pending");try{await pt.moveThread({envelope:t,destMailboxId:this.options.mailboxId})}catch(t){e.removeAttribute("draggable-envelope"),c.A.error("could not move messages",t)}}}let At;const bt={bind(t,e,a){At=new mt(t,a.context,e.value)},componentUpdated(t,e){At.options=e.value,At.update(t,At)}};var ht=i(4711);const gt={name:"NavigationMailbox",components:{AppNavigationItem:n.G_,CounterBubble:n.E7,ActionText:n.HO,ActionButton:n.Ko,ActionCheckbox:n.RI,ActionInput:n.Az,IconSend:et.A,IconDelete:h.A,IconEmailCheck:$.A,IconExternal:q.A,IconFolderAdd:Y.A,IconFolderRename:V.A,IconFolderSync:K.A,IconInfo:u.A,IconAllInboxes:J.A,IconFavorite:H.A,IconFolder:m.A,IconFolderShared:G.A,IconDraft:j.A,IconArchive:Q.A,IconJunk:X.A,IconInbox:W.A,IconWrench:at.A,EraserVariant:Z.A,ImportantIcon:tt.A,IconLoading:n.ne,MoveMailboxModal:nt,AlarmIcon:ht.A},directives:{droppableMailbox:bt},props:{account:{type:Object,required:!0},mailbox:{type:Object,required:!0},filter:{type:String,default:"",required:!1}},data(){return{debug:window?.OC?.debug||!1,mailboxStats:void 0,loadingMarkAsRead:!1,clearingCache:!1,showSaving:!1,changeSubscription:!1,changingSyncInBackground:!1,editing:!1,showSubMailboxes:!1,menuOpen:!1,renameLabel:!0,renameInput:!1,mailboxName:this.mailbox.displayName,showMoveModal:!1,hasDelimiter:!!this.mailbox.delimiter,UNIFIED_INBOX_ID:ot.mH,createMailboxName:"",repairing:!1}},computed:{...(0,v.n2)(f.A),visible(){return(!1===this.account.showSubscribedOnly||this.mailbox.attributes&&this.mailbox.attributes.includes("\\subscribed"))&&this.isUnifiedButOnlyInbox},notInbox(){return"inbox"!==this.mailbox.name.toLowerCase()},notVirtual(){return!this.account.isUnified&&"flagged"!==this.mailbox.specialRole&&!this.filter},title(){return"starred"===this.filter?(0,dt.T)({...this.mailbox,specialUse:["flagged"]}):(0,dt.T)(this.mailbox)},to(){return{name:"mailbox",params:{mailboxId:this.mailbox.databaseId,filter:this.filter?this.filter:void 0}}},hasSubMailboxes(){return this.subMailboxes.length>0},subMailboxes(){return this.mainStore.getSubMailboxes(this.mailbox.databaseId)},statsText(){return this.mailboxStats&&"total"in this.mailboxStats&&"unread"in this.mailboxStats?0===this.mailboxStats.unread?(0,ct.zw)("mail","{total} message","{total} messages",this.mailboxStats.total,{total:this.mailboxStats.total}):(0,ct.zw)("mail","{unread} unread of {total}","{unread} unread of {total}",this.mailboxStats.unread,{total:this.mailboxStats.total,unread:this.mailboxStats.unread}):t("mail","Loading …")},isSubscribed(){return this.mailbox.attributes&&this.mailbox.attributes.includes("\\subscribed")},isDroppableSpecialMailbox(){return"starred"!==this.filter&&![this.account.draftsMailboxId,this.account.sentMailboxId].includes(this.mailbox.databaseId)},isActive(){return this.$route.params.mailboxId===this.mailbox.databaseId},isValidDropTarget(){return!(this.isActive||!this.hasInsertAcl)&&(this.isDroppableSpecialMailbox||!this.mailbox.specialRole&&!this.account.isUnified)},isUnifiedButOnlyInbox(){return!this.mailbox.isUnified||this.mailbox.specialUse.includes("inbox")&&this.mainStore.getAccounts.length>2},showUnreadCounter(){return"starred"!==this.filter&&"trash"!==this.mailbox.specialRole&&(this.mailbox.unread>0||this.subCounter>0)},subCounter(){return this.subMailboxes.reduce(((t,e)=>t+e.unread),0)},hasRenameAcl(){if(!this.mailbox.myAcls)return!0;const t=this.mainStore.getParentMailbox(this.mailbox.databaseId);return t&&t.myAcls?(0,st.w)(this.mailbox,"x")&&(0,st.w)(t,"k"):(0,st.w)(this.mailbox,"x")},hasInsertAcl(){return(0,st.w)(this.mailbox,"i")},hasSeenAcl(){return(0,st.w)(this.mailbox,"s")},hasSubmailboxActionAcl(){return(0,st.w)(this.mailbox,"k")},hasDeleteAcl(){return(0,st.w)(this.mailbox,"x")},hasClearMailboxAcl(){return(0,st.w)(this.mailbox,"te")}},mounted(){ut.A.on("drag-start",this.onDragStart),ut.A.on("drag-end",this.onDragEnd),ut.A.on("envelopes-moved",this.onEnvelopesMoved)},beforeDestroy(){ut.A.off("drag-start",this.onDragStart),ut.A.off("drag-end",this.onDragEnd),ut.A.off("envelopes-moved",this.onEnvelopesMoved)},methods:{genId:t=>"mailbox-"+t.databaseId,onMenuToggle(t){t&&this.fetchMailboxStats()},async fetchMailboxStats(){if(this.mailboxStats=null,!this.account.isUnified&&"flagged"!==this.mailbox.specialRole)try{const t=await(0,lt.Np)(this.mailbox.databaseId);c.A.debug(`loaded mailbox stats for ${this.mailbox.databaseId}`,{stats:t}),this.mailboxStats=t}catch(t){this.mailboxStats={error:!0},c.A.error(`could not load mailbox stats for ${this.mailbox.databaseId}`,t)}},async createMailbox(t){this.editing=!0;const e=this.createMailboxName,a=this.mailbox.name+this.mailbox.delimiter+e;c.A.info(`creating mailbox ${a} as submailbox of ${this.mailbox.databaseId}`),this.menuOpen=!1;try{await this.mainStore.createMailbox({account:this.account,name:a})}catch(t){throw c.A.error(`could not create mailbox ${a}`,{error:t}),t}finally{this.editing=!1,this.showSaving=!1}c.A.info(`mailbox ${a} created`),this.showSubMailboxes=!0},openCreateMailbox(){this.editing=!0,this.showSaving=!1},markAsRead(){this.loadingMarkAsRead=!0,this.mainStore.markMailboxRead({accountId:this.account.id,mailboxId:this.mailbox.databaseId}).then((()=>c.A.info(`mailbox ${this.mailbox.databaseId} marked as read`))).catch((t=>c.A.error(`could not mark mailbox ${this.mailbox.databaseId} as read`,{error:t}))).then((()=>this.loadingMarkAsRead=!1))},async changeFolderSubscription(t){try{this.changeSubscription=!0,await this.mainStore.changeMailboxSubscription({mailbox:this.mailbox,subscribed:t})}catch(t){throw c.A.error(`could not update subscription of mailbox ${this.mailbox.databaseId}`,{error:t}),t}finally{this.changeSubscription=!1}},async changeSyncInBackground(t){try{this.changingSyncInBackground=!0,await this.mainStore.patchMailbox({mailbox:this.mailbox,attributes:{syncInBackground:t}})}catch(t){throw c.A.error(`could not update background sync flag of mailbox ${this.mailbox.databaseId}`,{error:t}),t}finally{this.changingSyncInBackground=!1}},async clearCache(){try{this.clearingCache=!0,c.A.debug("clearing message cache",{accountId:this.account.id,mailboxId:this.mailbox.databaseId}),await(0,rt.IL)(this.account.id,this.mailbox.databaseId),window.location.reload(!1)}finally{this.clearCache=!1}},clearMailbox(){const e=this.mailbox.databaseId;OC.dialogs.confirmDestructive(t("mail","All messages in mailbox will be deleted."),t("mail","Clear mailbox {name}",{name:this.mailbox.displayName}),{type:OC.dialogs.YES_NO_BUTTONS,confirm:t("mail","Clear mailbox"),confirmClasses:"error",cancel:t("mail","Cancel")},(t=>{if(t)return this.mainStore.clearMailbox({mailbox:this.mailbox}).then((()=>{c.A.info(`mailbox ${e} cleared`)})).catch((t=>c.A.error("could not clear mailbox",{error:t})))}))},deleteMailbox(){const e=this.mailbox.databaseId;c.A.info("delete mailbox",{mailbox:this.mailbox}),OC.dialogs.confirmDestructive(t("mail","The mailbox and all messages in it will be deleted."),t("mail","Delete mailbox"),{type:OC.dialogs.YES_NO_BUTTONS,confirm:t("mail","Delete mailbox {name}",{name:this.mailbox.displayName}),confirmClasses:"error",cancel:t("mail","Cancel")},(t=>{if(t)return this.mainStore.deleteMailbox({mailbox:this.mailbox}).then((()=>{c.A.info(`mailbox ${e} deleted`),parseInt(this.$route.params.mailboxId,10)===this.mailbox.databaseId&&this.$router.push({name:"mailbox",params:{mailboxId:ot.U8}})})).catch((t=>c.A.error("could not delete mailbox",{error:t})))}))},async renameMailbox(){this.renameInput=!1,this.showSaving=!0;try{let t=this.mailboxName;this.mailbox.path&&(t=this.mailbox.path+this.mailbox.delimiter+t),await this.mainStore.renameMailbox({account:this.account,mailbox:this.mailbox,newName:t}),this.renameLabel=!0,this.renameInput=!1}catch(e){(0,g.cf)(t("mail","An error occurred, unable to rename the mailbox.")),console.error(e)}finally{this.showSaving=!1}},openRenameInput(){this.renameLabel=!1,this.renameInput=!0,this.showSaving=!1},onOpenMoveModal(){this.showMoveModal=!0},onCloseMoveModal(){this.showMoveModal=!1},onDragStart(t){let{accountId:e}=t;e===this.mailbox.accountId&&(this.mainStore.expandAccountMutation(e),this.showSubMailboxes=!0)},onDragEnd(t){let{accountId:e}=t;e===this.mailbox.accountId&&(this.showSubMailboxes=!1)},onEnvelopesMoved(t){let{mailboxId:e,movedEnvelopes:a}=t;if(this.mailbox.databaseId!==e)return;const i=a.find((t=>t.envelopeId===this.$route.params.threadId));"message"===this.$route.name&&i&&this.$router.push({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId,filter:this.$route.params?.filter}})},async repair(){this.repairing=!0;const e=this.mailbox.databaseId;try{await(0,lt.AF)(e),await this.$router.push({name:"mailbox",params:{mailboxId:this.$route.params.mailboxId}}),window.location.reload()}catch(e){if(this.repairing=!1,429!==e.response?.status)throw e;(0,g.Qg)(t("mail","Please wait 10 minutes before repairing again"))}}}};var vt=i(30159),ft={};ft.styleTagTransform=N(),ft.setAttributes=M(),ft.insert=I().bind(null,"head"),ft.domAPI=w(),ft.insertStyleElement=T(),_()(vt.A,ft),vt.A&&vt.A.locals&&vt.A.locals;const xt=(0,z.A)(gt,(function(){var t=this,e=t._self._c;return t.visible?e("AppNavigationItem",{directives:[{name:"droppable-mailbox",rawName:"v-droppable-mailbox",value:{mailboxId:t.mailbox.databaseId,accountId:t.mailbox.accountId,isValidDropTarget:t.isValidDropTarget},expression:"{\n\t\tmailboxId: mailbox.databaseId,\n\t\taccountId: mailbox.accountId,\n\t\tisValidDropTarget,\n\t}"}],key:t.genId(t.mailbox),attrs:{id:t.genId(t.mailbox),"allow-collapse":t.hasSubMailboxes,"menu-open":t.menuOpen,"force-menu":!0,name:t.title,to:t.to,open:t.showSubMailboxes},on:{"update:menuOpen":[function(e){t.menuOpen=e},t.onMenuToggle],"update:menu-open":function(e){t.menuOpen=e},"update:open":function(e){t.showSubMailboxes=e}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("div",[t.mailbox.isPriorityInbox?e("ImportantIcon",{attrs:{size:16}}):t.mailbox.id===t.UNIFIED_INBOX_ID?e("IconAllInboxes",{attrs:{size:16}}):"inbox"!==t.mailbox.specialRole||t.mailbox.isPriorityInbox||"starred"===t.filter?"starred"===t.filter?e("IconFavorite",{attrs:{size:16}}):t.mailbox.databaseId===t.account.draftsMailboxId?e("IconDraft",{attrs:{size:16}}):t.mailbox.databaseId===t.account.sentMailboxId?e("IconSend",{attrs:{size:16}}):t.mailbox.databaseId===t.account.archiveMailboxId?e("IconArchive",{attrs:{size:16}}):t.mailbox.databaseId===t.account.trashMailboxId?e("IconDelete",{attrs:{size:16}}):t.mailbox.databaseId===t.account.junkMailboxId?e("IconJunk",{attrs:{size:16}}):t.mailbox.databaseId===t.account.snoozeMailboxId?e("AlarmIcon",{attrs:{size:16}}):t.mailbox.shared?e("IconFolderShared",{attrs:{size:16}}):e("IconFolder",{attrs:{size:16}}):e("IconInbox",{attrs:{size:16}})],1)]},proxy:!0},{key:"actions",fn:function(){return[t.account.isUnified||"flagged"===t.mailbox.specialRole?t._e():e("ActionText",{attrs:{name:t.mailbox.name},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconInfo",{attrs:{title:t.statsText,size:16}})]},proxy:!0}],null,!1,2435065698)},[t._v("\n\t\t\t"+t._s(t.statsText)+"\n\t\t")]),t._v(" "),"flagged"!==t.mailbox.specialRole&&!t.account.isUnified&&t.hasSeenAcl?e("ActionButton",{attrs:{name:t.t("mail","Mark all as read"),disabled:t.loadingMarkAsRead},on:{click:t.markAsRead},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconEmailCheck",{attrs:{size:16}})]},proxy:!0}],null,!1,598907980)},[t._v("\n\t\t\t"+t._s(t.t("mail","Mark all messages of this mailbox as read"))+"\n\t\t")]):t._e(),t._v(" "),!t.editing&&!t.account.isUnified&&t.hasDelimiter&&"flagged"!==t.mailbox.specialRole&&t.hasSubmailboxActionAcl?e("ActionButton",{on:{click:t.openCreateMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:16}})]},proxy:!0}],null,!1,1502609841)},[t._v("\n\t\t\t"+t._s(t.t("mail","Add submailbox"))+"\n\t\t")]):t._e(),t._v(" "),t.editing?e("ActionInput",{attrs:{value:t.createMailboxName},on:{"update:value":function(e){t.createMailboxName=e},submit:function(e){return e.preventDefault(),e.stopPropagation(),t.createMailbox.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderAdd",{attrs:{size:16}})]},proxy:!0}],null,!1,1502609841)}):t._e(),t._v(" "),t.renameLabel&&!t.hasSubMailboxes&&!t.account.isUnified&&t.hasRenameAcl?e("ActionButton",{on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.openRenameInput.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderRename",{attrs:{size:16}})]},proxy:!0}],null,!1,3513914528)},[t._v("\n\t\t\t"+t._s(t.t("mail","Rename"))+"\n\t\t")]):t._e(),t._v(" "),t.renameInput?e("ActionInput",{attrs:{value:t.mailboxName},on:{"update:value":function(e){t.mailboxName=e},submit:function(e){return e.preventDefault(),e.stopPropagation(),t.renameMailbox.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderRename",{attrs:{title:t.t("mail","Rename"),size:16}})]},proxy:!0}],null,!1,2300758806)}):t._e(),t._v(" "),t.showSaving?e("ActionText",{scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLoading",{attrs:{size:16}})]},proxy:!0}],null,!1,4291381056)},[t._v("\n\t\t\t"+t._s(t.t("mail","Saving"))+"\n\t\t")]):t._e(),t._v(" "),t.account.isUnified||!t.hasDelimiter||t.mailbox.specialRole||t.hasSubMailboxes||!t.hasDeleteAcl?t._e():e("ActionButton",{attrs:{id:t.genId(t.mailbox),"close-after-click":!0},on:{click:function(e){return e.preventDefault(),t.onOpenMoveModal.apply(null,arguments)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconExternal",{attrs:{size:16}})]},proxy:!0}],null,!1,553833851)},[t._v("\n\t\t\t"+t._s(t.t("mail","Move mailbox"))+"\n\t\t")]),t._v(" "),t.account.isUnified||"flagged"===t.mailbox.specialRole?t._e():e("ActionButton",{attrs:{disabled:t.repairing},on:{click:t.repair},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconWrench",{attrs:{size:16}})]},proxy:!0}],null,!1,2197471619)},[t._v("\n\t\t\t"+t._s(t.t("mail","Repair mailbox"))+"\n\t\t")]),t._v(" "),t.debug&&!t.account.isUnified&&"flagged"!==t.mailbox.specialRole?e("ActionButton",{attrs:{name:t.t("mail","Clear cache"),disabled:t.clearingCache},on:{click:t.clearCache},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconFolderSync",{attrs:{size:16}})]},proxy:!0}],null,!1,3002918039)},[t._v("\n\t\t\t"+t._s(t.t("mail","Clear locally cached data, in case there are issues with synchronization."))+"\n\t\t")]):t._e(),t._v(" "),t.notVirtual?e("ActionCheckbox",{attrs:{checked:t.isSubscribed,disabled:t.changeSubscription},on:{"update:checked":t.changeFolderSubscription}},[t._v("\n\t\t\t"+t._s(t.t("mail","Subscribed"))+"\n\t\t")]):t._e(),t._v(" "),t.notVirtual&&t.notInbox?e("ActionCheckbox",{attrs:{checked:t.mailbox.syncInBackground,disabled:t.changingSyncInBackground},on:{"update:checked":t.changeSyncInBackground}},[t._v("\n\t\t\t"+t._s(t.t("mail","Sync in background"))+"\n\t\t")]):t._e(),t._v(" "),"flagged"!==t.mailbox.specialRole&&!t.account.isUnified&&t.hasClearMailboxAcl?e("ActionButton",{attrs:{"close-after-click":!0},on:{click:t.clearMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("EraserVariant",{attrs:{size:16}})]},proxy:!0}],null,!1,3179343720)},[t._v("\n\t\t\t"+t._s(t.t("mail","Clear mailbox"))+"\n\t\t")]):t._e(),t._v(" "),t.account.isUnified||t.mailbox.specialRole||t.hasSubMailboxes||!t.hasDeleteAcl?t._e():e("ActionButton",{on:{click:t.deleteMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconDelete",{attrs:{size:16}})]},proxy:!0}],null,!1,3099325823)},[t._v("\n\t\t\t"+t._s(t.t("mail","Delete mailbox"))+"\n\t\t")])]},proxy:!0},{key:"counter",fn:function(){return[t.showUnreadCounter&&t.subCounter?e("CounterBubble",[t._v("\n\t\t\t"+t._s(t.mailbox.unread)+" ("+t._s(t.subCounter)+")\n\t\t")]):t.showUnreadCounter?e("CounterBubble",[t._v("\n\t\t\t"+t._s(t.mailbox.unread)+"\n\t\t")]):t._e()]},proxy:!0},{key:"extra",fn:function(){return[t.showMoveModal?e("MoveMailboxModal",{attrs:{account:t.account,mailbox:t.mailbox},on:{close:t.onCloseMoveModal}}):t._e()]},proxy:!0}],null,!1,467124025)},[t._v(" "),t._v(" "),t._v(" "),t._v(" "),t._l(t.subMailboxes,(function(a){return e("NavigationMailbox",{key:t.genId(a),attrs:{account:t.account,mailbox:a}})}))],2):t._e()}),[],!1,null,"573bab89",null).exports;var Ct=i(42390),_t=i(56872);const yt={name:"NavigationOutbox",components:{AppNavigationItem:n.G_,CounterBubble:n.E7,IconOutbox:Ct.A},computed:{...(0,v.n2)(_t.A),count(){return this.outboxStore.getAllMessages.length},to:()=>({name:"outbox"})}};var wt=i(608),St={};St.styleTagTransform=N(),St.setAttributes=M(),St.insert=I().bind(null,"head"),St.domAPI=w(),St.insertStyleElement=T(),_()(wt.A,St),wt.A&&wt.A.locals&&wt.A.locals;const It=(0,z.A)(yt,(function(){var t=this,e=t._self._c;return e("AppNavigationItem",{key:"navigation-outbox",attrs:{id:"navigation-outbox",name:t.t("mail","Outbox"),to:t.to},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconOutbox",{staticClass:"outbox-opacity-icon",attrs:{size:16}})]},proxy:!0},{key:"counter",fn:function(){return[t.count?e("CounterBubble",{staticClass:"navigation-outbox__unread-counter"},[t._v("\n\t\t\t"+t._s(t.count)+"\n\t\t")]):t._e()]},proxy:!0}])})}),[],!1,null,"3df17d20",null).exports;var kt=i(1010),Mt=i(49954),Dt=i(54573),Tt=i(68403),Bt=i(50558),Nt=i(27131),Et=i(51651),Pt=i(39547),zt=i.n(Pt);class Rt extends Error{constructor(){super(),this.name=Rt.name}}const Ot="pkcs12",Ft={name:"SmimeCertificateModal",components:{NcModal:n.FH,NcButton:n.x1,NcPasswordField:n.b9,NcEmptyContent:n.yI,DeleteIcon:h.A},data:()=>({TYPE_PKCS12:Ot,TYPE_PEM:"pem",moment:Et.A,showImportScreen:!1,loading:!1,certificateType:Ot,certificate:void 0,privateKey:void 0,password:""}),computed:{...(0,v.n2)(f.A),...(0,v.aH)(f.A,{certificates:"getSmimeCertificates"}),inputFormIsValid(){return!!this.certificate}},async mounted(){await this.mainStore.fetchSmimeCertificates()},methods:{async deleteCertificate(t){await this.mainStore.deleteSmimeCertificate(t)},async uploadCertificate(){let e,a=this.$refs.certificate.files[0];if(this.certificateType===Ot)try{const t=function(t,e){const a=new(zt().util.ByteBuffer)(t),i=zt().asn1.fromDer(a),n=zt().pkcs12.pkcs12FromAsn1(i,e),o=t=>n.getBags({bagType:t})[t],s=o(zt().pki.oids.certBag),r=o(zt().pki.oids.pkcs8ShroudedKeyBag);if(0===s.length)throw new Rt("The PKCS #12 certificate must contain at least one certificate");if(1!==r.length)throw new Rt("The PKCS #12 certificate must contain a single key");return{certificate:s.map((t=>zt().pki.certificateToPem(t.cert))).join("\r\n"),privateKey:zt().pki.privateKeyToPem(r[0].key)}}(await a.arrayBuffer(),this.password);a=new Blob([t.certificate]),e=new Blob([t.privateKey])}catch(e){return void(e.name===Rt.name?(c.A.error("PKCS #12 certificate contains multiple certs or keys",{error:e}),(0,g.Qg)(t("mail","The provided PKCS #12 certificate must contain at least one certificate and exactly one private key."))):(c.A.debug("Is probably not a PKCS #12 certificate or the password is wrong",{error:e}),(0,g.Qg)(t("mail","Failed to import the certificate. Please check the password."))))}else{if("pem"!==this.certificateType)return;e=this.$refs.privateKey.files[0]}this.loading=!0;try{await this.mainStore.createSmimeCertificate({certificate:a,privateKey:e}),(0,g.Te)(t("mail","Certificate imported successfully")),this.resetImportForm()}catch(a){c.A.error(`Failed to import a S/MIME certificate: ${a.response?.data?.data}`,{error:a}),e?(0,g.Qg)(t("mail","Failed to import the certificate. Please make sure that the private key matches the certificate and is not protected by a passphrase.")):(0,g.Qg)(t("mail","Failed to import the certificate"))}finally{this.loading=!1}},resetImportForm(){this.certificateType=Ot,this.showImportScreen=!1,this.certificate=void 0,this.privateKey=void 0,this.password=""}}};var Ut=i(61431),Lt={};Lt.styleTagTransform=N(),Lt.setAttributes=M(),Lt.insert=I().bind(null,"head"),Lt.domAPI=w(),Lt.insertStyleElement=T(),_()(Ut.A,Lt),Ut.A&&Ut.A.locals&&Ut.A.locals;const $t=(0,z.A)(Ft,(function(){var t=this,e=t._self._c;return e("NcModal",{on:{close:function(e){return t.$emit("close")}}},[e("div",{staticClass:"certificate-modal"},[t.showImportScreen?e("form",{staticClass:"certificate-modal__import",on:{submit:function(e){return e.preventDefault(),t.uploadCertificate.apply(null,arguments)}}},[e("h2",[t._v(t._s(t.t("mail","Import S/MIME certificate")))]),t._v(" "),e("fieldset",{staticClass:"certificate-modal__import__type"},[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.certificateType,expression:"certificateType"}],attrs:{id:"certificate-type-pkcs12",name:"certificate-type",type:"radio"},domProps:{value:t.TYPE_PKCS12,checked:t._q(t.certificateType,t.TYPE_PKCS12)},on:{change:function(e){t.certificateType=t.TYPE_PKCS12}}}),t._v(" "),e("label",{attrs:{for:"certificate-type-pkcs12"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","PKCS #12 Certificate"))+"\n\t\t\t\t\t")])]),t._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.certificateType,expression:"certificateType"}],attrs:{id:"certificate-type-pem",name:"certificate-type",type:"radio"},domProps:{value:t.TYPE_PEM,checked:t._q(t.certificateType,t.TYPE_PEM)},on:{change:function(e){t.certificateType=t.TYPE_PEM}}}),t._v(" "),e("label",{attrs:{for:"certificate-type-pem"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","PEM Certificate"))+"\n\t\t\t\t\t")])])]),t._v(" "),e("fieldset",[e("label",{attrs:{for:"certificate"}},[t._v(t._s(t.t("mail","Certificate")))]),t._v(" "),e("input",{ref:"certificate",attrs:{id:"certificate",type:"file",required:""},on:{change:function(e){t.certificate=e.target.files[0]}}})]),t._v(" "),t.certificateType===t.TYPE_PEM?e("fieldset",[e("label",{attrs:{for:"private-key"}},[t._v(t._s(t.t("mail","Private key (optional)")))]),t._v(" "),e("input",{ref:"privateKey",attrs:{id:"private-key",type:"file"},on:{change:function(e){t.privateKey=e.target.files[0]}}})]):t._e(),t._v(" "),t.certificateType===t.TYPE_PKCS12?e("fieldset",[e("label",{attrs:{for:"password"}},[t._v(t._s(t.t("mail","Password")))]),t._v(" "),e("NcPasswordField",{attrs:{value:t.password,label:t.t("mail","Password")},on:{"update:value":function(e){t.password=e}}})],1):t._e(),t._v(" "),e("div",{staticClass:"certificate-modal__import__hints"},[t.certificateType===t.TYPE_PEM?e("p",[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","The private key is only required if you intend to send signed and encrypted emails using this certificate."))+"\n\t\t\t\t")]):t._e()]),t._v(" "),e("div",{staticClass:"certificate-modal__import__actions"},[e("NcButton",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Back")},on:{click:t.resetImportForm}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Back"))+"\n\t\t\t\t")]),t._v(" "),e("NcButton",{attrs:{type:"primary","aria-label":t.t("mail","Submit"),"native-type":"submit",disabled:t.loading||!t.inputFormIsValid}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Submit"))+"\n\t\t\t\t")])],1)]):e("div",{staticClass:"certificate-modal__list"},[e("h2",[t._v(t._s(t.t("mail","S/MIME certificates")))]),t._v(" "),e("table",{staticClass:"certificate-modal__list__table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.t("mail","Certificate name")))]),t._v(" "),e("th",[t._v(t._s(t.t("mail","E-mail address")))]),t._v(" "),e("th",[t._v(t._s(t.t("mail","Valid until")))]),t._v(" "),e("th")])]),t._v(" "),e("tbody",t._l(t.certificates,(function(a){return e("tr",{key:a.id},[e("td",{attrs:{title:a.info.commonName}},[t._v("\n\t\t\t\t\t\t\t"+t._s(a.info.commonName)+"\n\t\t\t\t\t\t")]),t._v(" "),e("td",{attrs:{title:a.info.emailAddress}},[t._v("\n\t\t\t\t\t\t\t"+t._s(a.info.emailAddress)+"\n\t\t\t\t\t\t")]),t._v(" "),e("td",{attrs:{title:t.moment.unix(a.info.notAfter).format("LL")}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.moment.unix(a.info.notAfter).format("LL"))+"\n\t\t\t\t\t\t")]),t._v(" "),e("td",[e("NcButton",{attrs:{type:"tertiary-no-background","aria-label":t.t("mail","Delete certificate")},on:{click:function(e){return t.deleteCertificate(a.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{title:t.t("mail","Delete certificate"),size:16}})]},proxy:!0}],null,!0)})],1)])})),0)]),t._v(" "),0===t.certificates.length?e("NcEmptyContent",{staticClass:"certificate__empty",attrs:{name:t.t("mail","No certificate imported yet")}}):t._e(),t._v(" "),e("div",{staticClass:"certificate-modal__list__actions"},[e("NcButton",{attrs:{type:"primary","aria-label":t.t("mail","Import certificate")},on:{click:function(e){t.showImportScreen=!0}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Import certificate"))+"\n\t\t\t\t")])],1)],1)])])}),[],!1,null,"491f7784",null).exports;var qt=i(37528),Gt=i(27742),Yt=i.n(Gt),Ht=i(10854),Vt=i.n(Ht);const Kt=Vt()(Yt()("email")),jt={name:"TrustedSenders",components:{ButtonVue:n.x1},data:()=>({list:[]}),computed:{sortedSenders(){return Kt(this.list)}},async mounted(){this.list=await(0,qt.E)()},methods:{async removeSender(e){this.list=this.list.filter((t=>t.id!==e.id));try{await(0,qt.I)(e.email,e.type,!1)}catch(a){c.A.error(`Could not remove trusted sender ${e.email}`,{error:a}),(0,g.Qg)(t("mail","Could not remove trusted sender {sender}",{sender:e.email})),this.list.push(e)}},senderType(e){switch(e){case"individual":return t("mail","individual");case"domain":return t("mail","domain")}return e}}};var Qt=i(23256),Wt={};Wt.styleTagTransform=N(),Wt.setAttributes=M(),Wt.insert=I().bind(null,"head"),Wt.domAPI=w(),Wt.insertStyleElement=T(),_()(Qt.A,Wt),Qt.A&&Qt.A.locals&&Qt.A.locals;const Xt=(0,z.A)(jt,(function(){var t=this,e=t._self._c;return e("div",[t._l(t.sortedSenders,(function(a){return e("div",{key:a.email},[t._v("\n\t\t"+t._s(a.email)+"\n\t\t"+t._s(t.senderType(a.type))+"\n\t\t"),e("ButtonVue",{staticClass:"button",attrs:{type:"tertiary","aria-label":t.t("mail","Remove")},on:{click:function(e){return t.removeSender(a)}}},[t._v("\n\t\t\t"+t._s(t.t("mail","Remove"))+"\n\t\t")])],1)})),t._v(" "),t.sortedSenders.length?t._e():e("span",[t._v(" "+t._s(t.t("mail","No senders are trusted at the moment.")))])],2)}),[],!1,null,"0cf1c097",null).exports;var Jt=i(67123),Zt=i.n(Jt),te=i(81131),ee=i.n(te);const ae=Vt()(Yt()("address")),ie={name:"InternalAddress",components:{ButtonVue:n.x1,NcDialog:n.i$,NcTextField:n.v,IconAdd:Mt.A},data(){return{openDialog:!1,newAddress:"",buttons:[{label:"Cancel",icon:Zt(),callback:()=>{this.openDialog=!1}},{label:"Ok",type:"primary",icon:ee(),callback:()=>{this.addInternalAddress()}}]}},computed:{...(0,v.n2)(f.A),list(){return this.mainStore.getInternalAddresses},sortedDomains(){return ae(this.list.filter((t=>"domain"===t.type)))},sortedEmails(){return ae(this.list.filter((t=>"individual"===t.type)))}},methods:{async removeInternalAddress(e){try{await this.mainStore.removeInternalAddress({id:e.id,address:e.address,type:e.type})}catch(a){c.A.error(`Could not remove internal address ${e.email}`,{error:a}),(0,g.Qg)(t("mail","Could not remove internal address {sender}",{sender:e.address}))}},async addInternalAddress(){const e=this.checkType();try{await this.mainStore.addInternalAddress({address:this.newAddress,type:e}).then((async()=>{this.newAddress="",this.openDialog=!1}))}catch(e){c.A.error(`Could not add internal address ${this.newAddress}`,{error:e}),(0,g.Qg)(t("mail","Could not add internal address {address}",{address:this.newAddress}))}},checkType(){const t=this.newAddress.split("@");return 2!==t.length?"domain":0===t[0].length?(this.newAddress=t[1],"domain"):"individual"},senderType(e){switch(e){case"individual":return t("mail","individual");case"domain":return t("mail","domain")}return e}}};var ne=i(23296),oe={};oe.styleTagTransform=N(),oe.setAttributes=M(),oe.insert=I().bind(null,"head"),oe.domAPI=w(),oe.insertStyleElement=T(),_()(ne.A,oe),ne.A&&ne.A.locals&&ne.A.locals;const se=(0,z.A)(ie,(function(){var t=this,e=t._self._c;return e("div",[t._l(t.sortedDomains,(function(a){return e("div",{key:a.address,staticClass:"address"},[t._v("\n\t\t"+t._s(a.address)+"\n\t\t"),e("p",{staticClass:"address__type"},[t._v("\n\t\t\t("+t._s(t.t("mail","domain"))+")\n\t\t")]),t._v(" "),e("ButtonVue",{staticClass:"button",attrs:{type:"tertiary","aria-label":t.t("mail","Remove")},on:{click:function(e){return t.removeInternalAddress(a)}}},[t._v("\n\t\t\t"+t._s(t.t("mail","Remove"))+"\n\t\t")])],1)})),t._v(" "),t._l(t.sortedEmails,(function(a){return e("div",{key:a.address,staticClass:"address"},[t._v("\n\t\t"+t._s(a.address)+"\n\t\t"),e("p",{staticClass:"address__type"},[t._v("\n\t\t\t("+t._s(t.t("mail","email"))+")\n\t\t")]),t._v(" "),e("ButtonVue",{staticClass:"button",attrs:{type:"tertiary","aria-label":t.t("mail","Remove")},on:{click:function(e){return t.removeInternalAddress(a)}}},[t._v("\n\t\t\t"+t._s(t.t("mail","Remove"))+"\n\t\t")])],1)})),t._v(" "),e("ButtonVue",{attrs:{type:"primary"},on:{click:function(e){t.openDialog=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconAdd",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","Add internal address"))+"\n\t")]),t._v(" "),e("NcDialog",{attrs:{open:t.openDialog,buttons:t.buttons,name:t.t("mail","Add internal address")},on:{"update:open":function(e){t.openDialog=e},close:function(e){t.openDialog=!1}}},[e("NcTextField",{staticClass:"input",attrs:{label:t.t("mail","Add internal email or domain"),value:t.newAddress},on:{"update:value":function(e){t.newAddress=e}}})],1)],2)}),[],!1,null,"39d85f9a",null).exports;var re=i(16406);const le={name:"AppSettingsMenu",components:{TrustedSenders:Xt,InternalAddress:se,NcButton:n.x1,IconEmail:Dt.A,IconAdd:Mt.A,IconLoading:n.ne,IconLock:Tt.A,SmimeCertificateModal:$t,NcCheckboxRadioSwitch:n.AO,NcAppSettingsDialog:n.q4,NcAppSettingsSection:n.Te,CompactMode:kt.A,VerticalSplit:Bt.A,HorizontalSplit:Nt.A},mixins:[re.A],props:{open:{required:!0,type:Boolean}},data:()=>({loadingAvatarSettings:!1,prioritySettingsText:t("mail","Search in the body of messages in priority Inbox"),loadingPrioritySettings:!1,optOutSettingsText:t("mail","Activate"),loadingOptOutSettings:!1,replySettingsText:t("mail","Put my text to the bottom of a reply instead of on top of it."),loadingReplySettings:!1,autoTaggingText:t("mail","Mark as important"),followUpReminderText:t("mail","Remind about messages that require a reply but received none"),internalAddressText:t("mail","Use internal addresses"),toggleAutoTagging:!1,displaySmimeCertificateModal:!1,sortOrder:"newest",showSettings:!1,showAccountSettings:!1,showMailSettings:!0,selectedAccount:null,mailvelopeIsAvailable:!1}),computed:{...(0,v.n2)(f.A),...(0,v.aH)(f.A,["getAccounts","followUpFeatureAvailable"]),searchPriorityBody(){return"true"===this.mainStore.getPreference("search-priority-body","false")},useBottomReplies(){return"bottom"===this.mainStore.getPreference("reply-mode","top")},useExternalAvatars(){return"true"===this.mainStore.getPreference("external-avatars","true")},useDataCollection(){return"true"===this.mainStore.getPreference("collect-data","true")},useAutoTagging(){return"true"===this.mainStore.getPreference("tag-classified-messages","true")},useInternalAddresses(){return"true"===this.mainStore.getPreference("internal-addresses","false")},useFollowUpReminders(){return"true"===this.mainStore.getPreference("follow-up-reminders","true")},allowNewMailAccounts(){return this.mainStore.getPreference("allow-new-accounts",!0)},layoutMode(){return this.mainStore.getPreference("layout-mode","vertical-split")}},watch:{showSettings(t){t||this.$emit("update:open",t)},async open(t){t&&await this.onOpen()}},mounted(){this.sortOrder=this.mainStore.getPreference("sort-order","newest"),document.addEventListener.call(window,"mailvelope",(()=>this.checkMailvelope()))},updated(){this.checkMailvelope()},methods:{closeAccountSettings(){this.showAccountSettings=!1},openAccountSettings(t){this.mainStore.showSettingsForAccountMutation(t),this.showSettings=!1},checkMailvelope(){this.mailvelopeIsAvailable=!!window.mailvelope},async setLayout(t){try{await this.mainStore.savePreference({key:"layout-mode",value:t})}catch(t){c.A.error("Could not save preferences",{error:t})}},async onOpen(){this.showSettings=!0},onToggleButtonReplies(t){this.loadingReplySettings=!0,this.mainStore.savePreference({key:"reply-mode",value:t.target.checked?"bottom":"top"}).catch((t=>c.A.error("could not save preferences",{error:t}))).then((()=>{this.loadingReplySettings=!1}))},onToggleExternalAvatars(t){this.loadingAvatarSettings=!0,this.mainStore.savePreference({key:"external-avatars",value:t.target.checked?"true":"false"}).catch((t=>c.A.error("could not save preferences",{error:t}))).then((()=>{this.loadingAvatarSettings=!1}))},async onToggleSearchPriorityBody(t){this.loadingPrioritySettings=!0;try{await this.mainStore.savePreference({key:"search-priority-body",value:t.target.checked?"true":"false"})}catch(t){c.A.error("could not save preferences",{error:t})}finally{this.loadingPrioritySettings=!1}},onToggleCollectData(t){this.loadingOptOutSettings=!0,this.mainStore.savePreference({key:"collect-data",value:t.target.checked?"true":"false"}).catch((t=>c.A.error("could not save preferences",{error:t}))).then((()=>{this.loadingOptOutSettings=!1}))},async onSortByDate(e){const a=this.sortOrder;try{this.sortOrder=e,await this.mainStore.savePreference({key:"sort-order",value:e}),this.mainStore.removeAllEnvelopesMutation()}catch(e){c.A.error("could not save preferences",{error:e}),this.sortOrder=a,(0,g.Qg)(t("mail","Could not update preference"))}},async onToggleAutoTagging(e){this.toggleAutoTagging=!0;try{await this.mainStore.savePreference({key:"tag-classified-messages",value:e.target.checked?"true":"false"})}catch(e){c.A.error("could not save preferences",{error:e}),(0,g.Qg)(t("mail","Could not update preference"))}finally{this.toggleAutoTagging=!1}},async onToggleFollowUpReminders(e){try{await this.mainStore.savePreference({key:"follow-up-reminders",value:e.target.checked?"true":"false"})}catch(e){c.A.error("Could not save preferences",{error:e}),(0,g.Qg)(t("mail","Could not update preference"))}},async onToggleInternalAddress(e){try{await this.mainStore.savePreference({key:"internal-addresses",value:e.target.checked?"true":"false"})}catch(e){c.A.error("Could not save preferences",{error:e}),(0,g.Qg)(t("mail","Could not update preference"))}},registerProtocolHandler(){if(window.navigator.registerProtocolHandler){const t=window.location.protocol+"//"+window.location.host+(0,r.Jv)("apps/mail/compose?uri=%s");try{window.navigator.registerProtocolHandler("mailto",t,OC.theme.name+" Mail")}catch(t){c.A.error("could not register protocol handler",{err:t})}}},mailvelopeAuthorizeDomain(){const t=document.createElement("iframe");t.style="display: none",t.src="https://api.mailvelope.com/authorize-domain/?api=true",document.body.append(t)}}};var ce=i(52480),de={};de.styleTagTransform=N(),de.setAttributes=M(),de.insert=I().bind(null,"head"),de.domAPI=w(),de.insertStyleElement=T(),_()(ce.A,de),ce.A&&ce.A.locals&&ce.A.locals;const ue=(0,z.A)(le,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-settings"},[e("NcAppSettingsDialog",{attrs:{id:"app-settings-dialog",name:t.t("mail","Mail settings"),"show-navigation":!0,open:t.showSettings},on:{"update:open":function(e){t.showSettings=e}}},[e("NcAppSettingsSection",{attrs:{id:"account-creation",name:t.t("mail","Accounts")}},[t.allowNewMailAccounts?e("NcButton",{staticClass:"app-settings-button",attrs:{type:"primary",to:"/setup","aria-label":t.t("mail","Add mail account")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconAdd",{attrs:{size:16}})]},proxy:!0}],null,!1,2399017255)},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Add mail account"))+"\n\t\t\t")]):t._e(),t._v(" "),e("h6",[t._v(t._s(t.t("mail","Account settings")))]),t._v(" "),e("p",[t._v(t._s(t.t("mail","Settings for:")))]),t._v(" "),t._l(t.getAccounts,(function(a){return e("li",{key:a.id},[a&&a.emailAddress?e("NcButton",{staticClass:"app-settings-button",attrs:{type:"secondary","aria-label":t.t("mail","Account settings")},on:{click:function(e){return t.openAccountSettings(a.id)}}},[t._v("\n\t\t\t\t\t"+t._s(a.emailAddress)+"\n\t\t\t\t")]):t._e()],1)}))],2),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"appearance-and-accessibility",name:t.t("mail","General")}},[e("h6",[t._v(t._s(t.t("mail","Layout")))]),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{value:"no-split","button-variant":!0,name:"mail-layout",type:"radio",checked:t.layoutMode,"button-variant-grouped":"vertical"},on:{"update:checked":function(e){return t.setLayout("no-split")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CompactMode",{attrs:{size:16}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("mail","List"))+"\n\t\t\t")]),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{value:"vertical-split","button-variant":!0,name:"mail-layout",type:"radio",checked:t.layoutMode,"button-variant-grouped":"vertical"},on:{"update:checked":function(e){return t.setLayout("vertical-split")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("VerticalSplit",{attrs:{size:16}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Vertical split"))+"\n\t\t\t")]),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{value:"horizontal-split","button-variant":!0,name:"mail-layout",type:"radio",checked:t.layoutMode,"button-variant-grouped":"vertical"},on:{"update:checked":function(e){return t.setLayout("horizontal-split")}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("HorizontalSplit",{attrs:{size:16}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Horizontal split"))+"\n\t\t\t")]),t._v(" "),e("h6",[t._v(t._s(t.t("mail","Sorting")))]),t._v(" "),e("div",{staticClass:"sorting"},[e("NcCheckboxRadioSwitch",{staticClass:"sorting__switch",attrs:{checked:t.sortOrder,value:"newest",name:"order_radio",type:"radio"},on:{"update:checked":t.onSortByDate}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Newest"))+"\n\t\t\t\t")]),t._v(" "),e("NcCheckboxRadioSwitch",{staticClass:"sorting__switch",attrs:{checked:t.sortOrder,value:"oldest",name:"order_radio",type:"radio"},on:{"update:checked":t.onSortByDate}},[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Oldest"))+"\n\t\t\t\t")])],1),t._v(" "),e("h6",[t._v(t._s(t.t("mail","Search in body")))]),t._v(" "),t.loadingPrioritySettings?e("p",{staticClass:"app-settings"},[t._v("\n\t\t\t\t"+t._s(t.prioritySettingsText)+"\n\t\t\t")]):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"priority-inbox-toggle",type:"checkbox"},domProps:{checked:t.searchPriorityBody},on:{change:t.onToggleSearchPriorityBody}}),t._v(" "),e("label",{attrs:{for:"priority-inbox-toggle"}},[t._v(t._s(t.prioritySettingsText))])]),t._v(" "),e("h6",[t._v(t._s(t.t("mail","Reply text position")))]),t._v(" "),t.loadingReplySettings?e("p",{staticClass:"app-settings reply-settings"},[e("IconLoading",{attrs:{size:16}}),t._v("\n\t\t\t\t"+t._s(t.replySettingsText)+"\n\t\t\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"bottom-reply-enabled",type:"checkbox"},domProps:{checked:t.useBottomReplies},on:{change:t.onToggleButtonReplies}}),t._v(" "),e("label",{attrs:{for:"bottom-reply-enabled"}},[t._v(t._s(t.replySettingsText))])]),t._v(" "),e("h6",[t._v(t._s(t.t("mail","Gravatar settings")))]),t._v(" "),t.loadingAvatarSettings?e("p",{staticClass:"app-settings avatar-settings"},[e("IconLoading",{attrs:{size:16}}),t._v("\n\t\t\t\t"+t._s(t.t("mail","Use Gravatar and favicon avatars"))+"\n\t\t\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"gravatar-enabled",type:"checkbox"},domProps:{checked:t.useExternalAvatars},on:{change:t.onToggleExternalAvatars}}),t._v(" "),e("label",{attrs:{for:"gravatar-enabled"}},[t._v(t._s(t.t("mail","Use Gravatar and favicon avatars")))])]),t._v(" "),e("h6",[t._v(t._s(t.t("mail","Mailto")))]),t._v(" "),e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Register as application for mail links"))+"\n\t\t\t")]),t._v(" "),e("NcButton",{staticClass:"app-settings-button",attrs:{type:"secondary","aria-label":t.t("mail","Register as application for mail links")},on:{click:t.registerProtocolHandler},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconEmail",{attrs:{size:16}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Register"))+"\n\t\t\t")])],1),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"privacy-and-security",name:t.t("mail","Privacy and security")}},[e("h6",[t._v(t._s(t.t("mail","Data collection consent")))]),t._v(" "),e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Allow the app to collect data about your interactions. Based on this data, the app will adapt to your preferences. The data will only be stored locally."))+"\n\t\t\t")]),t._v(" "),t.loadingOptOutSettings?e("p",{staticClass:"app-settings"},[e("IconLoading",{attrs:{size:16}}),t._v("\n\t\t\t\t"+t._s(t.optOutSettingsText)+"\n\t\t\t")],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"data-collection-toggle",type:"checkbox"},domProps:{checked:t.useDataCollection},on:{change:t.onToggleCollectData}}),t._v(" "),e("label",{attrs:{for:"data-collection-toggle"}},[t._v(t._s(t.optOutSettingsText))])]),t._v(" "),e("h6",[t._v(t._s(t.t("mail","Trusted senders")))]),t._v(" "),e("TrustedSenders"),t._v(" "),e("h6",[t._v(t._s(t.t("mail","Internal addresses")))]),t._v(" "),e("p",{staticClass:"settings-hint"},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Highlight external email addresses by enabling this feature, manage your internal addresses and domains to ensure recognized contacts stay unmarked."))+"\n\t\t\t")]),t._v(" "),e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"internal-address-toggle",type:"checkbox"},domProps:{checked:t.useInternalAddresses},on:{change:t.onToggleInternalAddress}}),t._v(" "),e("label",{attrs:{for:"internal-address-toggle"}},[t._v(t._s(t.internalAddressText))])]),t._v(" "),e("InternalAddress"),t._v(" "),e("h6",[t._v(t._s(t.t("mail","S/MIME")))]),t._v(" "),e("NcButton",{staticClass:"app-settings-button",attrs:{type:"secondary","aria-label":t.t("mail","Manage S/MIME certificates")},on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.displaySmimeCertificateModal=!0}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconLock",{attrs:{size:16}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("mail","Manage S/MIME certificates"))+"\n\t\t\t")]),t._v(" "),t.displaySmimeCertificateModal?e("SmimeCertificateModal",{on:{close:function(e){t.displaySmimeCertificateModal=!1}}}):t._e(),t._v(" "),e("h6",[t._v(t._s(t.t("mail","Mailvelope")))]),t._v(" "),e("div",{staticClass:"mailvelope-section"},[t.mailvelopeIsAvailable?e("div",[t._v("\n\t\t\t\t\t"+t._s(t.t("mail","Mailvelope is enabled for the current domain!"))+"\n\t\t\t\t")]):e("div",[e("p",[t._v("\n\t\t\t\t\t\t"+t._s(t.t("mail","Looking for a way to encrypt your emails?"))+"\n\t\t\t\t\t")]),t._v(" "),e("p",[e("a",{staticClass:"button",attrs:{href:"https://www.mailvelope.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("mail","Install Mailvelope browser extension by clicking here"))+"\n\t\t\t\t\t\t")])]),t._v(" "),e("p",[e("a",{staticClass:"button",on:{click:t.mailvelopeAuthorizeDomain}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("mail","Enable Mailvelope for the current domain"))+"\n\t\t\t\t\t\t")])])])])],1),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"autotagging-settings",name:t.t("mail","Assistance features")}},[t.toggleAutoTagging?e("p",{staticClass:"app-settings"},[e("IconLoading",{attrs:{size:16}})],1):e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"auto-tagging-toggle",type:"checkbox"},domProps:{checked:t.useAutoTagging},on:{change:t.onToggleAutoTagging}}),t._v(" "),e("label",{attrs:{for:"auto-tagging-toggle"}},[t._v(t._s(t.autoTaggingText))])]),t._v(" "),t.followUpFeatureAvailable?e("p",{staticClass:"app-settings"},[e("input",{staticClass:"checkbox",attrs:{id:"follow-up-reminder-toggle",type:"checkbox"},domProps:{checked:t.useFollowUpReminders},on:{change:t.onToggleFollowUpReminders}}),t._v(" "),e("label",{attrs:{for:"follow-up-reminder-toggle"}},[t._v(t._s(t.followUpReminderText))])]):t._e()]),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"about-settings",name:t.t("mail","About")}},[e("p",[t._v(t._s(t.t("mail","This application includes CKEditor, an open-source editor. Copyright © CKEditor contributors. Licensed under GPLv2.")))])]),t._v(" "),e("NcAppSettingsSection",{attrs:{id:"keyboard-shortcut-settings",name:t.t("mail","Keyboard shortcuts")}},[e("dl",[e("div",[e("dt",[e("kbd",[t._v("C")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Compose new message")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("←")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Newer message")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("→")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Older message")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("S")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Toggle star")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("U")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Toggle unread")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("A")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Archive")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("Del")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Delete")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("Ctrl")]),t._v(" + "),e("kbd",[t._v("F")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Search")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("Ctrl")]),t._v(" + "),e("kbd",[t._v("Enter")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Send")))])]),t._v(" "),e("div",[e("dt",[e("kbd",[t._v("R")])]),t._v(" "),e("dd",[t._v(t._s(t.t("mail","Refresh")))])])])])],1)],1)}),[],!1,null,"442b0fb5",null).exports,pe={name:"Navigation",components:{AppNavigation:n.hN,AppSettingsMenu:ue,NavigationAccount:R,NavigationAccountExpandCollapse:L,NavigationMailbox:xt,NavigationOutbox:It,NewMessageButtonHeader:o.A,IconSetting:p.A,AppNavigationItem:n.G_},data:()=>({refreshing:!1,showSettings:!1}),computed:{...(0,v.n2)(_t.A,f.A),menu(){return this.mainStore.getAccounts.filter((t=>t.id!==ot.Hc)).map((t=>{const e=this.mainStore.getMailboxes(t.id),a=e.filter((e=>this.isCollapsed(t,e))).length>1;return{id:t.id,account:t,mailboxes:e,isCollapsible:a}}))},unifiedAccount(){return this.mainStore.getAccount(ot.Hc)},unifiedMailboxes(){return this.mainStore.getMailboxes(ot.Hc)},passwordIsUnavailable(){return this.mainStore.getPreference("password-is-unavailable",!1)},outboxMessages(){return this.outboxStore.getAllMessages}},methods:{showMailSettings(){this.showSettings=!0},isCollapsed:(t,e)=>"inbox"!==e.specialRole&&e.databaseId!==t.draftsMailboxId&&e.databaseId!==t.sentMailboxId&&e.databaseId!==t.trashMailboxId,isFirst(t){return t===this.mainStore.getAccounts[1]},isLast(t){const e=this.mainStore.getAccounts;return t===e[e.length-1]},isDisabled(t){return this.passwordIsUnavailable&&!!t.provisioningId&&!!this.mainStore.masterPasswordEnabled}}};var me=i(74573),Ae={};Ae.styleTagTransform=N(),Ae.setAttributes=M(),Ae.insert=I().bind(null,"head"),Ae.domAPI=w(),Ae.insertStyleElement=T(),_()(me.A,Ae),me.A&&me.A.locals&&me.A.locals;const be=(0,z.A)(pe,(function(){var t=this,e=t._self._c;return e("AppNavigation",{scopedSlots:t._u([{key:"search",fn:function(){return[e("NewMessageButtonHeader")]},proxy:!0},{key:"list",fn:function(){return[t._l(t.unifiedMailboxes,(function(a){return e("NavigationMailbox",{key:"mailbox-"+a.databaseId,attrs:{account:t.unifiedAccount,mailbox:a}})})),t._v(" "),t._l(t.menu,(function(a){return[a.account?e("NavigationAccount",{key:a.account.id,attrs:{account:a.account,"first-mailbox":a.mailboxes[0],"is-first":t.isFirst(a.account),"is-last":t.isLast(a.account),"is-disabled":t.isDisabled(a.account)}}):t._e(),t._v(" "),t.isDisabled(a.account)?t._e():[t._l(a.mailboxes,(function(i){return[e("NavigationMailbox",{directives:[{name:"show",rawName:"v-show",value:!a.isCollapsible||!a.account.collapsed||!t.isCollapsed(a.account,i),expression:"\n\t\t\t\t\t\t\t!group.isCollapsible ||\n\t\t\t\t\t\t\t\t!group.account.collapsed ||\n\t\t\t\t\t\t\t\t!isCollapsed(group.account, item)\n\t\t\t\t\t\t"}],key:"mailbox-"+i.databaseId,attrs:{account:a.account,mailbox:i}}),t._v(" "),a.account.isUnified||"inbox"!==i.specialRole?t._e():e("NavigationMailbox",{key:i.databaseId+"-starred",attrs:{account:a.account,mailbox:i,filter:"starred"}})]})),t._v(" "),!a.account.isUnified&&a.isCollapsible?e("NavigationAccountExpandCollapse",{key:"collapse-"+a.account.id,attrs:{account:a.account}}):t._e()]]}))]},proxy:!0},{key:"footer",fn:function(){return[0!==t.outboxMessages.length?e("div",{staticClass:"outbox__border"},[e("NavigationOutbox",{staticClass:"outbox"})],1):t._e(),t._v(" "),e("div",{staticClass:"mail-settings"},[e("AppNavigationItem",{staticClass:"mail-settings__button",attrs:{"close-after-click":!0,name:t.t("mail","Mail settings")},on:{click:t.showMailSettings},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconSetting",{attrs:{size:16}})]},proxy:!0}])})],1)]},proxy:!0}])},[t._v(" "),t._v(" "),t._v(" "),e("AppSettingsMenu",{attrs:{open:t.showSettings},on:{"update:open":function(e){t.showSettings=e}}})],1)}),[],!1,null,"6762f534",null).exports},23256:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,".button-vue[data-v-0cf1c097] {display:inline-block !important}","",{version:3,sources:["webpack://./src/components/TrustedSenders.vue"],names:[],mappings:"AACA,8BACC,+BAAA",sourcesContent:["\n.button-vue:deep() {\n\tdisplay: inline-block !important;\n}\n"],sourceRoot:""}]);const r=s},23296:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,".address[data-v-39d85f9a]{display:flex;align-items:center}.address__type[data-v-39d85f9a]{color:var(--color-text-maxcontrast)}","",{version:3,sources:["webpack://./src/components/InternalAddress.vue"],names:[],mappings:"AACA,0BACC,YAAA,CACA,kBAAA,CACA,gCACC,mCAAA",sourcesContent:["\n.address {\n\tdisplay: flex;\n\talign-items: center;\n\t&__type{\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n}\n\n"],sourceRoot:""}]);const r=s},26335:(t,e,a)=>{"use strict";a.d(e,{A:()=>S});var i=a(92516),n=a(49954),o=a(83239),s=a(59892),r=a(85745),l=a(51849),c=a(19534);const d={name:"NewMessageButtonHeader",components:{ButtonVue:i.x1,IconAdd:n.A,IconRefresh:o.A,IconLoading:s.A},data:()=>({refreshing:!1}),computed:{...(0,l.n2)(c.A),currentMailbox(){if("message"===this.$route.name||"mailbox"===this.$route.name)return this.mainStore.getMailbox(this.$route.params.mailboxId)}},methods:{async refreshMailbox(){if(!0!==this.refreshing){this.refreshing=!0;try{await this.mainStore.syncEnvelopes({mailboxId:this.currentMailbox.databaseId}),r.A.debug("Current mailbox is sync'ing ")}catch(t){r.A.error("could not sync current mailbox",{error:t})}finally{this.refreshing=!1}}else r.A.debug("already sync'ing mailbox.. aborting")},async onNewMessage(){await this.mainStore.startComposerSession({isBlankMessage:!0})}}};var u=a(85072),p=a.n(u),m=a(97825),A=a.n(m),b=a(77659),h=a.n(b),g=a(55056),v=a.n(g),f=a(10540),x=a.n(f),C=a(41113),_=a.n(C),y=a(82747),w={};w.styleTagTransform=_(),w.setAttributes=v(),w.insert=h().bind(null,"head"),w.domAPI=A(),w.insertStyleElement=x(),p()(y.A,w),y.A&&y.A.locals&&y.A.locals;const S=(0,a(14486).A)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("ButtonVue",{attrs:{"aria-label":t.t("mail","New message"),type:"secondary","button-id":"mail_new_message",role:"complementary",wide:!0},on:{click:t.onNewMessage},scopedSlots:t._u([{key:"icon",fn:function(){return[e("IconAdd",{attrs:{size:16}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("mail","New message"))+"\n\t")]),t._v(" "),t.currentMailbox?e("ButtonVue",{staticClass:"refresh__button",attrs:{"aria-label":t.t("mail","Refresh"),type:"tertiary-no-background",disabled:t.refreshing},on:{click:t.refreshMailbox},scopedSlots:t._u([{key:"icon",fn:function(){return[t.refreshing?t._e():e("IconRefresh",{attrs:{size:16}}),t._v(" "),t.refreshing?e("IconLoading",{attrs:{size:16}}):t._e()]},proxy:!0}],null,!1,2775302732)}):t._e()],1)}),[],!1,null,"682ee4b3",null).exports},27514:t=>{"use strict";t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M18.4%207.4L17%206l-6%206%206%206%201.4-1.4-4.6-4.6%204.6-4.6m-6%200L11%206l-6%206%206%206%201.4-1.4L7.8%2012l4.6-4.6z%27/%3e%3c/svg%3e"},27518:t=>{"use strict";t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M15.4%2016.6L10.8%2012l4.6-4.6L14%206l-6%206%206%206%201.4-1.4z%27/%3e%3c/svg%3e"},28290:(t,e,a)=>{"use strict";function i(t,e){if(!t.myAcls)return!0;const a=[...t.myAcls];for(const t of[...e])if(!a.includes(t))return!1;return!0}a.d(e,{w:()=>i})},30159:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,".counter-bubble__counter[data-v-573bab89]{max-width:initial}","",{version:3,sources:["webpack://./src/components/NavigationMailbox.vue"],names:[],mappings:"AACA,0CACC,iBAAA",sourcesContent:["\n.counter-bubble__counter {\n\tmax-width: initial;\n}\n"],sourceRoot:""}]);const r=s},35630:(t,e,a)=>{"use strict";a.d(e,{A:()=>i});const i=(0,a(27380).A)()},37528:(t,e,a)=>{"use strict";a.d(e,{E:()=>s,I:()=>o});var i=a(63814),n=a(70715);async function o(t,e,a){const o=(0,i.Jv)("/apps/mail/api/trustedsenders/{email}?type={type}",{email:t,type:e});a?await n.Ay.put(o):await n.Ay.delete(o)}async function s(){const t=(0,i.Jv)("/apps/mail/api/trustedsenders");return(await n.Ay.get(t)).data.data}},41752:(t,e,a)=>{"use strict";a.d(e,{A:()=>B});var i=a(92516),n=a(82407),o=a(62366),s=a(2413),r=a(27715),l=a(2656),c=a(86451),d=a(25866),u=a(53334),p=a(51648),m=a(28290),A=a(51849),b=a(19534);const h={name:"MailboxPicker",components:{ButtonVue:i.x1,Modal:i.FH,IconInbox:o.A,IconDraft:s.A,IconSent:r.A,IconArchive:l.A,IconTrash:c.A,IconFolder:d.A,IconBreadcrumb:n.A,IconLoading:i.ne},props:{account:{type:Object,required:!0},selected:{type:Number,required:!1,default:void 0},loading:{type:Boolean,required:!1,default:!1},labelSelect:{type:String,default:(0,u.Tl)("mail","Choose")},labelSelectLoading:{type:String,default:(0,u.Tl)("mail","Choose")},pickedMailbox:{type:Object,required:!1,default:()=>{}},allowRoot:{type:Boolean,default:!1}},data:()=>({selectedMailboxId:void 0,mailboxCrumbs:[]}),computed:{...(0,A.n2)(b.A),mailboxes(){return this.selectedMailboxId?this.mainStore.getSubMailboxes(this.selectedMailboxId):this.mainStore.getMailboxes(this.account.accountId)},filteredMailboxes(){return this.pickedMailbox?this.mailboxes.filter((t=>t.databaseId!==this.pickedMailbox.databaseId&&(0,m.w)(t,"k"))):this.mailboxes.filter((t=>(0,m.w)(t,"i")))}},methods:{getMailboxIcon:t=>t.specialRole?"icon-"+t.specialRole:"icon-folder",getMailboxTitle:t=>(0,p.T)(t),onClickHome(){this.selectedMailboxId=void 0,this.$emit("update:selected",void 0),this.mailboxCrumbs=[]},onClickCrumb(t){this.selectedMailboxId=this.mailboxCrumbs[t].databaseId,this.$emit("update:selected",this.selectedMailboxId),this.mailboxCrumbs=this.mailboxCrumbs.slice(0,t+1)},onClickMailbox(t){this.selectedMailboxId=t.databaseId,this.$emit("update:selected",this.selectedMailboxId),this.mailboxCrumbs.push(t)},onSelect(){this.$emit("select",this.selectedMailboxId)},onClose(){this.$emit("close")}}};var g=a(85072),v=a.n(g),f=a(97825),x=a.n(f),C=a(77659),_=a.n(C),y=a(55056),w=a.n(y),S=a(10540),I=a.n(S),k=a(41113),M=a.n(k),D=a(95610),T={};T.styleTagTransform=M(),T.setAttributes=w(),T.insert=_().bind(null,"head"),T.domAPI=x(),T.insertStyleElement=I(),v()(D.A,T),D.A&&D.A.locals&&D.A.locals;const B=(0,a(14486).A)(h,(function(){var t=this,e=t._self._c;return e("Modal",{on:{close:t.onClose}},[e("div",{ref:"content",staticClass:"modal-content"},[e("h2",{staticClass:"oc-dialog-title"},[t._v("\n\t\t\t"+t._s(t.t("mail","Choose target mailbox"))+"\n\t\t")]),t._v(" "),e("span",{staticClass:"crumbs"},[e("div",{on:{click:function(e){return e.preventDefault(),t.onClickHome.apply(null,arguments)}}},[e("IconInbox",{attrs:{size:16}})],1),t._v(" "),t._l(t.mailboxCrumbs,(function(a,i){return e("div",{key:a.databaseId,staticClass:"level"},[e("IconBreadcrumb",{attrs:{size:16}}),t._v(" "),e("a",{on:{click:function(e){return e.preventDefault(),t.onClickCrumb(i)}}},[t._v("\n\t\t\t\t\t"+t._s(t.getMailboxTitle(a))+"\n\t\t\t\t")])],1)}))],2),t._v(" "),e("div",{staticClass:"mailbox-list"},[t.filteredMailboxes.length>0?e("ul",t._l(t.filteredMailboxes,(function(a){return e("li",{key:a.databaseId,on:{click:function(e){return e.preventDefault(),t.onClickMailbox(a)}}},["inbox"===a.specialRole?e("IconInbox",{attrs:{size:16}}):"drafts"===a.specialRole?e("IconDraft",{attrs:{size:16}}):"sent"===a.specialRole?e("IconSent",{attrs:{size:16}}):"archive"===a.specialRole?e("IconArchive",{attrs:{size:16}}):"trash"===a.specialRole?e("IconTrash",{attrs:{size:16}}):e("IconFolder",{attrs:{size:16}}),t._v(" "),e("div",{staticClass:"mailbox-title"},[t._v("\n\t\t\t\t\t\t"+t._s(t.getMailboxTitle(a))+"\n\t\t\t\t\t")])],1)})),0):e("IconFolder",{attrs:{size:65}}),t._v(" "),e("div",{staticClass:"empty-icon empty"}),t._v(" "),e("h2",[t._v(t._s(t.t("mail","No more submailboxes in here")))])],1),t._v(" "),e("div",{staticClass:"buttons"},[e("ButtonVue",{attrs:{type:"primary",disabled:t.loading||!t.allowRoot&&!t.selectedMailboxId,"aria-label":t.loading?t.labelSelectLoading:t.labelSelect},on:{click:t.onSelect},scopedSlots:t._u([{key:"icon",fn:function(){return[t.loading?e("IconLoading",{attrs:{size:16}}):t._e()]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.loading?t.labelSelectLoading:t.labelSelect)+"\n\t\t\t")])],1)])])}),[],!1,null,"947a7176",null).exports},50310:()=>{},51648:(t,e,a)=>{"use strict";a.d(e,{T:()=>n});var i=a(53334);const n=t=>{if(t.specialUse.length>0)try{return(t=>{if(t.specialUse.includes("all"))return(0,i.Tl)("mail","All");if(t.specialUse.includes("archive"))return(0,i.Tl)("mail","Archive");if(t.specialUse.includes("drafts"))return(0,i.Tl)("mail","Drafts");if(t.specialUse.includes("flagged"))return(0,i.Tl)("mail","Favorites");if(t.specialUse.includes("inbox"))return t.isPriorityInbox?(0,i.Tl)("mail","Priority inbox"):t.isUnified?(0,i.Tl)("mail","All inboxes"):(0,i.Tl)("mail","Inbox");if(t.specialUse.includes("junk"))return(0,i.Tl)("mail","Junk");if(t.specialUse.includes("sent"))return(0,i.Tl)("mail","Sent");if(t.specialUse.includes("trash"))return(0,i.Tl)("mail","Trash");throw new Error(`unknown special use ${t.specialUse}`)})(t)}catch(t){console.error("could not translate special mailbox",t)}return t.displayName}},52480:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,"p.app-settings span.loading-icon[data-v-442b0fb5]{display:inline-block;vertical-align:middle;padding:var(--default-grid-baseline) 0}p.app-settings[data-v-442b0fb5]{padding:calc(var(--default-grid-baseline)*2) 0}.app-settings-button[data-v-442b0fb5]{display:inline-flex;background-position:10px center;text-align:left;margin-top:calc(var(--default-grid-baseline)*2)}.app-settings-button.button.primary.new-button[data-v-442b0fb5]{color:var(--color-primary-element-text);padding-left:34px;gap:var(--default-grid-baseline);width:fit-content}.app-settings-link[data-v-442b0fb5]{text-decoration:underline}[data-v-442b0fb5] .button-vue__text{text-overflow:clip;white-space:normal}[data-v-442b0fb5] .button-vue__wrapper{justify-content:flex-start}.mailvelope-section[data-v-442b0fb5]{padding-top:calc(var(--default-grid-baseline)*4)}.mailvelope-section a.button[data-v-442b0fb5]{display:flex;align-items:center;line-height:normal;min-height:calc(var(--default-grid-baseline)*11);font-size:unset}.mailvelope-section a.button[data-v-442b0fb5]:focus-visible,.mailvelope-section a.button[data-v-442b0fb5]:hover{box-shadow:0 0 0 1px var(--color-primary-element)}.material-design-icon.lock-icon[data-v-442b0fb5]{margin-right:calc(var(--default-grid-baseline)*2)}.section-title[data-v-442b0fb5]{margin-top:calc(var(--default-grid-baseline)*5);margin-bottom:calc(var(--default-grid-baseline)*2)}.sorting[data-v-442b0fb5]{display:flex;width:100%}.sorting__switch[data-v-442b0fb5]{width:50%}.mail-creation-button[data-v-442b0fb5]{width:100%}.settings-hint[data-v-442b0fb5]{margin-top:calc(var(--default-grid-baseline)*-3);margin-bottom:calc(var(--default-grid-baseline)*2);color:var(--color-text-maxcontrast)}.app-settings-section[data-v-442b0fb5]{list-style:none}.internal_address[data-v-442b0fb5]{margin-left:3px}","",{version:3,sources:["webpack://./src/components/AppSettingsMenu.vue"],names:[],mappings:"AACA,kDACC,oBAAA,CACA,qBAAA,CACA,sCAAA,CAED,gCACC,8CAAA,CAED,sCACC,mBAAA,CACA,+BAAA,CACA,eAAA,CACA,+CAAA,CAED,gEACC,uCAAA,CAEA,iBAAA,CACA,gCAAA,CACA,iBAAA,CAED,oCACC,yBAAA,CAED,oCACC,kBAAA,CACA,kBAAA,CAED,uCACC,0BAAA,CAED,qCACC,gDAAA,CAEA,8CACC,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,gDAAA,CACA,eAAA,CAEA,gHAEC,iDAAA,CAKF,iDACC,iDAAA,CAIF,gCACC,+CAAA,CACA,kDAAA,CAED,0BACC,YAAA,CACA,UAAA,CACA,kCACC,SAAA,CAGF,uCACC,UAAA,CAED,gCACC,gDAAA,CACA,kDAAA,CACA,mCAAA,CAED,uCACC,eAAA,CAGD,mCACC,eAAA",sourcesContent:["\np.app-settings span.loading-icon {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tpadding: var(--default-grid-baseline) 0;\n}\np.app-settings {\n\tpadding: calc(var(--default-grid-baseline) * 2) 0;\n}\n.app-settings-button {\n\tdisplay: inline-flex;\n\tbackground-position: 10px center;\n\ttext-align: left;\n\tmargin-top: calc(var(--default-grid-baseline) * 2);\n}\n.app-settings-button.button.primary.new-button {\n\tcolor: var(--color-primary-element-text);\n\t//this style will be removed after we migrate also the  'add mail account' to material design\n\tpadding-left: 34px;\n\tgap: var(--default-grid-baseline);\n\twidth: fit-content;\n}\n.app-settings-link {\n\ttext-decoration: underline;\n}\n:deep(.button-vue__text) {\n\ttext-overflow: clip;\n\twhite-space: normal;\n}\n:deep(.button-vue__wrapper) {\n\tjustify-content: flex-start;\n}\n.mailvelope-section {\n\tpadding-top: calc(var(--default-grid-baseline) * 4);\n\n\ta.button {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tline-height: normal;\n\t\tmin-height: calc(var(--default-grid-baseline) * 11);\n\t\tfont-size: unset;\n\n\t\t&:focus-visible,\n\t\t&:hover {\n\t\t\tbox-shadow: 0 0 0 1px var(--color-primary-element);\n\t\t}\n\t}\n}\n.material-design-icon {\n\t&.lock-icon {\n\t\tmargin-right: calc(var(--default-grid-baseline) * 2);\n\t}\n\n}\n.section-title {\n\tmargin-top: calc(var(--default-grid-baseline) * 5);\n\tmargin-bottom: calc(var(--default-grid-baseline) * 2);\n}\n.sorting {\n\tdisplay: flex;\n\twidth: 100%;\n\t&__switch{\n\t\twidth: 50%;\n\t}\n}\n.mail-creation-button {\n\twidth: 100%;\n}\n.settings-hint {\n\tmargin-top: calc(var(--default-grid-baseline) * -3);\n\tmargin-bottom: calc(var(--default-grid-baseline) * 2);\n\tcolor: var(--color-text-maxcontrast);\n}\n.app-settings-section {\n\tlist-style: none;\n}\n// align it with the checkbox\n.internal_address{\n\tmargin-left: 3px;\n}\n"],sourceRoot:""}]);const r=s},61431:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,".empty-content[data-v-491f7784]{height:100%;display:flex}.certificate-modal[data-v-491f7784]{padding:calc(var(--default-grid-baseline)*5)}.certificate-modal__list table[data-v-491f7784]{table-layout:fixed;width:100%}.certificate-modal__list table th[data-v-491f7784]{color:var(--color-text-maxcontrast)}.certificate-modal__list table th[data-v-491f7784],.certificate-modal__list table td[data-v-491f7784]{padding:calc(var(--default-grid-baseline)*.5);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:5 1 0px}.certificate-modal__list table th[data-v-491f7784]:last-child,.certificate-modal__list table td[data-v-491f7784]:last-child{flex:1 1 0px}.certificate-modal__list table span[data-v-491f7784]{text-overflow:ellipsis}.certificate-modal__list table tr[data-v-491f7784]{display:flex;flex-direction:row;align-items:center}.certificate-modal__list table tr[data-v-491f7784]:hover{background-color:unset}.certificate-modal__list__actions[data-v-491f7784]{margin:calc(var(--default-grid-baseline)*3);float:right}.certificate-modal__import[data-v-491f7784]{display:flex;flex-direction:column;gap:calc(var(--default-grid-baseline)*2)}.certificate-modal__import input[type=file][data-v-491f7784]{display:flex;width:100%}.certificate-modal__import__type[data-v-491f7784]{display:flex;gap:0 calc(var(--default-grid-baseline)*5);flex-wrap:wrap}.certificate-modal__import__type>div[data-v-491f7784]{display:flex;gap:var(--default-grid-baseline);align-items:center}.certificate-modal__import__hints[data-v-491f7784]{color:var(--color-text-maxcontrast)}.certificate-modal__import__actions[data-v-491f7784]{display:flex;justify-content:space-between;gap:calc(var(--default-grid-baseline)*4)}","",{version:3,sources:["webpack://./src/components/smime/SmimeCertificateModal.vue"],names:[],mappings:"AACA,gCACC,WAAA,CACA,YAAA,CAED,oCACC,4CAAA,CAGC,gDACC,kBAAA,CACA,UAAA,CAEA,mDACC,mCAAA,CAGD,sGACC,6CAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CACA,YAAA,CAGD,4HACC,YAAA,CAGD,qDACC,sBAAA,CAGD,mDACC,YAAA,CACA,kBAAA,CACA,kBAAA,CAID,yDACC,sBAAA,CAIF,mDACC,2CAAA,CACA,WAAA,CAIF,4CACC,YAAA,CACA,qBAAA,CACA,wCAAA,CAEA,6DACC,YAAA,CACA,UAAA,CAGD,kDACC,YAAA,CACA,0CAAA,CACA,cAAA,CAEA,sDACC,YAAA,CACA,gCAAA,CACA,kBAAA,CAIF,mDACC,mCAAA,CAGD,qDACC,YAAA,CACA,6BAAA,CACA,wCAAA",sourcesContent:["\n.empty-content{\n\theight: 100%;\n\tdisplay: flex;\n}\n.certificate-modal {\n\tpadding: calc(var(--default-grid-baseline) * 5);\n\n\t&__list {\n\t\ttable {\n\t\t\ttable-layout: fixed;\n\t\t\twidth: 100%;\n\n\t\t\tth {\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t}\n\n\t\t\tth, td {\n\t\t\t\tpadding: calc(var(--default-grid-baseline) * 0.5);\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\toverflow: hidden;\n\t\t\t\tflex: 5 1 0px;\n\t\t\t}\n\n\t\t\tth:last-child, td:last-child {\n\t\t\t\tflex: 1 1 0px;\n\t\t\t}\n\n\t\t\tspan {\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t}\n\n\t\t\ttr {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row;\n\t\t\t\talign-items: center;\n\t\t\t}\n\n\t\t\t// Disable default hover style\n\t\t\ttr:hover {\n\t\t\t\tbackground-color: unset;\n\t\t\t}\n\t\t}\n\n\t\t&__actions {\n\t\t\tmargin: calc(var(--default-grid-baseline) * 3);\n\t\t\tfloat: right;\n\t\t}\n\t}\n\n\t&__import {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: calc(var(--default-grid-baseline) * 2);\n\n\t\tinput[type=file] {\n\t\t\tdisplay: flex;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\t&__type {\n\t\t\tdisplay: flex;\n\t\t\tgap: 0 calc(var(--default-grid-baseline) * 5);\n\t\t\tflex-wrap: wrap;\n\n\t\t\t> div {\n\t\t\t\tdisplay: flex;\n\t\t\t\tgap: var(--default-grid-baseline);\n\t\t\t\talign-items: center;\n\t\t\t}\n\t\t}\n\n\t\t&__hints {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\n\t\t&__actions {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\tgap: calc(var(--default-grid-baseline) * 4);\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const r=s},65517:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,"[data-v-13e744b3] .app-navigation-entry__title{color:var(--color-text-maxcontrast)}","",{version:3,sources:["webpack://./src/components/NavigationAccountExpandCollapse.vue"],names:[],mappings:"AACA,+CACC,mCAAA",sourcesContent:["\n:deep(.app-navigation-entry__title) {\n\tcolor: var(--color-text-maxcontrast);\n}\n"],sourceRoot:""}]);const r=s},74573:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,"@keyframes rotation-6762f534{from{transform:rotate(0deg)}to{transform:rotate(-360deg)}}.outbox[data-v-6762f534]{padding:calc(var(--default-grid-baseline, 4px)*2);padding-bottom:0;width:auto}.outbox__border[data-v-6762f534]{border-top:1px solid var(--color-background-darker)}.mail-settings[data-v-6762f534]{padding:calc(var(--default-grid-baseline, 4px)*2);padding-top:0}.mail-settings__button[data-v-6762f534]{display:flex;width:100% !important;justify-content:start !important}.v-popper__inner[data-v-6762f534]{height:unset !important}","",{version:3,sources:["webpack://./src/components/Navigation.vue"],names:[],mappings:"AACA,6BACA,KACC,sBAAA,CAED,GACE,yBAAA,CAAA,CAGF,yBACC,iDAAA,CACA,gBAAA,CAEA,UAAA,CACA,iCACC,mDAAA,CAGF,gCACC,iDAAA,CACA,aAAA,CAEA,wCACC,YAAA,CACA,qBAAA,CACA,gCAAA,CAIF,kCACC,uBAAA",sourcesContent:["\n@keyframes rotation {\nfrom {\n\ttransform: rotate(-0deg);\n}\nto {\n\t\ttransform: rotate(-360deg);\n\t}\n}\n.outbox {\n\tpadding: calc(var(--default-grid-baseline, 4px) * 2);\n\tpadding-bottom: 0;\n\n\twidth: auto;\n\t&__border {\n\t\tborder-top: 1px solid var(--color-background-darker);\n\t}\n}\n.mail-settings {\n\tpadding: calc(var(--default-grid-baseline, 4px) * 2);\n\tpadding-top: 0;\n\n\t&__button {\n\t\tdisplay: flex;\n\t\twidth: 100% !important;\n\t\tjustify-content: start !important;\n\t}\n}\n\n.v-popper__inner {\n\theight: unset !important;\n}\n\n"],sourceRoot:""}]);const r=s},79722:t=>{"use strict";t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M5.6%207.4L7%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6m6%200L13%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6z%27/%3e%3c/svg%3e"},82747:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,".header[data-v-682ee4b3]{display:flex;align-items:center;justify-content:space-between;padding:calc(var(--default-grid-baseline, 4px)*2);gap:var(--default-grid-baseline)}.refresh__button[data-v-682ee4b3]{background-color:rgba(0,0,0,0)}","",{version:3,sources:["webpack://./src/components/NewMessageButtonHeader.vue"],names:[],mappings:"AACA,yBACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,iDAAA,CACA,gCAAA,CAED,kCACC,8BAAA",sourcesContent:["\n.header {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: calc(var(--default-grid-baseline, 4px) * 2);\n\tgap: var(--default-grid-baseline);\n}\n.refresh__button {\n\tbackground-color: transparent;\n}\n"],sourceRoot:""}]);const r=s},86886:t=>{"use strict";t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M8.6%2016.6l4.6-4.6-4.6-4.6L10%206l6%206-6%206-1.4-1.4z%27/%3e%3c/svg%3e"},94144:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,".dialog__actions{flex-wrap:wrap}.dialog__actions>button{flex:1 auto}","",{version:3,sources:["webpack://./src/components/NavigationAccount.vue"],names:[],mappings:"AAGC,iBACC,cAAA,CAEA,wBACC,WAAA",sourcesContent:["\n// Fix very long button labels overflowing the modal\n.dialog {\n\t&__actions {\n\t\tflex-wrap: wrap;\n\n\t\t> button {\n\t\t\tflex: 1 auto;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const r=s},95610:(t,e,a)=>{"use strict";a.d(e,{A:()=>r});var i=a(71354),n=a.n(i),o=a(76314),s=a.n(o)()(n());s.push([t.id,"[data-v-947a7176] .modal-container{width:calc(100vw - 120px) !important;height:calc(100vh - 120px) !important;max-width:600px !important;max-height:500px !important}.modal-content[data-v-947a7176]{display:flex;box-sizing:border-box;width:100%;height:100%;flex-direction:column;padding:calc(var(--default-grid-baseline)*4)}.crumbs[data-v-947a7176]{display:inline-flex;padding-right:0;flex-wrap:wrap}.crumbs .level[data-v-947a7176]{display:inline-flex;height:44px;min-width:0px;flex:0 0 auto;order:1;padding-right:calc(var(--default-grid-baseline)*2);background-position:right center;background-size:auto 24px;margin-top:calc(var(--default-grid-baseline)*-2.5)}.crumbs a[data-v-947a7176]{position:relative;padding:calc(var(--default-grid-baseline)*3);opacity:.5;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:0 0 auto;min-width:0px;max-width:200px}.crumbs a[data-v-947a7176]:hover{opacity:.7}.crumbs a.icon-home[data-v-947a7176]{width:0px;background-position:left center}.mailbox-list[data-v-947a7176]{display:inline-block;width:100%;height:100%;overflow-y:auto;flex:1}.mailbox-list li[data-v-947a7176]{display:flex;cursor:pointer}.mailbox-list li[data-v-947a7176]:hover{background-color:var(--color-background-hover)}.mailbox-list li[data-v-947a7176]:not(:last-child){border-bottom:var(--border-width-input) solid var(--color-border)}.mailbox-list h2[data-v-947a7176]{width:100%;color:var(--color-text-maxcontrast);text-align:center;margin-top:80px;opacity:.4;background-size:64px;height:64px}.mailbox-list .mailbox-icon[data-v-947a7176]{width:24px;height:24px;padding:calc(var(--default-grid-baseline)*3);opacity:.9;background-size:24px}.mailbox-list .mailbox-title[data-v-947a7176]{padding:calc(var(--default-grid-baseline)*3) calc(var(--default-grid-baseline)*3) calc(var(--default-grid-baseline)*3) 0;flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.buttons[data-v-947a7176]{display:flex;justify-content:flex-end;padding-top:calc(var(--default-grid-baseline)*2)}.buttons .spinner[data-v-947a7176]{margin-right:var(--default-grid-baseline)}.material-design-icon[data-v-947a7176]{opacity:.7;margin-right:calc(var(--default-grid-baseline)*1.5)}","",{version:3,sources:["webpack://./src/components/MailboxPicker.vue"],names:[],mappings:"AACA,mCACC,oCAAA,CACA,qCAAA,CACA,0BAAA,CACA,2BAAA,CAGD,gCACC,YAAA,CACA,qBAAA,CACA,UAAA,CACA,WAAA,CACA,qBAAA,CACA,4CAAA,CAGD,yBACC,mBAAA,CACA,eAAA,CACA,cAAA,CAEA,gCACC,mBAAA,CACA,WAAA,CACA,aAAA,CACA,aAAA,CACA,OAAA,CACA,kDAAA,CACA,gCAAA,CACA,yBAAA,CACA,kDAAA,CAGD,2BACC,iBAAA,CACA,4CAAA,CACA,UAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CACA,aAAA,CACA,aAAA,CACA,eAAA,CAEA,iCACC,UAAA,CAIF,qCACC,SAAA,CACA,+BAAA,CAIF,+BACC,oBAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,MAAA,CAEA,kCACC,YAAA,CACA,cAAA,CAEA,wCACC,8CAAA,CAGD,mDACC,iEAAA,CAIF,kCACC,UAAA,CACA,mCAAA,CACA,iBAAA,CACA,eAAA,CACA,UAAA,CACA,oBAAA,CACA,WAAA,CAGD,6CACC,UAAA,CACA,WAAA,CACA,4CAAA,CACA,UAAA,CACA,oBAAA,CAGD,8CACC,wHAAA,CACA,MAAA,CACA,eAAA,CACA,kBAAA,CACA,sBAAA,CAIF,0BACC,YAAA,CACA,wBAAA,CACA,gDAAA,CAEA,mCACC,yCAAA,CAGF,uCACC,UAAA,CACA,mDAAA",sourcesContent:["\n:deep(.modal-container) {\n\twidth: calc(100vw - 120px) !important;\n\theight: calc(100vh - 120px) !important;\n\tmax-width: 600px !important;\n\tmax-height: 500px !important;\n}\n\n.modal-content {\n\tdisplay: flex;\n\tbox-sizing: border-box;\n\twidth: 100%;\n\theight: 100%;\n\tflex-direction: column;\n\tpadding: calc(var(--default-grid-baseline) * 4);\n}\n\n.crumbs {\n\tdisplay: inline-flex;\n\tpadding-right: 0;\n\tflex-wrap: wrap;\n\n\t.level {\n\t\tdisplay: inline-flex;\n\t\theight: 44px;\n\t\tmin-width: 0px;\n\t\tflex: 0 0 auto;\n\t\torder: 1;\n\t\tpadding-right: calc(var(--default-grid-baseline) * 2);\n\t\tbackground-position: right center;\n\t\tbackground-size: auto 24px;\n\t\tmargin-top: calc(var(--default-grid-baseline) * -2.5);\n\t}\n\n\ta {\n\t\tposition: relative;\n\t\tpadding: calc(var(--default-grid-baseline) * 3);\n\t\topacity: 0.5;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\tflex: 0 0 auto;\n\t\tmin-width: 0px;\n\t\tmax-width: 200px;\n\n\t\t&:hover {\n\t\t\topacity: 0.7;\n\t\t}\n\t}\n\n\ta.icon-home {\n\t\twidth: 0px;\n\t\tbackground-position: left center;\n\t}\n}\n\n.mailbox-list {\n\tdisplay: inline-block;\n\twidth: 100%;\n\theight: 100%;\n\toverflow-y: auto;\n\tflex: 1;\n\n\tli {\n\t\tdisplay: flex;\n\t\tcursor: pointer;\n\n\t\t&:hover {\n\t\t\tbackground-color: var(--color-background-hover);\n\t\t}\n\n\t\t&:not(:last-child) {\n\t\t\tborder-bottom: var(--border-width-input) solid var(--color-border);\n\t\t}\n\t}\n\n\th2 {\n\t\twidth: 100%;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\ttext-align: center;\n\t\tmargin-top: 80px;\n\t\topacity: 0.4;\n\t\tbackground-size: 64px;\n\t\theight: 64px;\n\t}\n\n\t.mailbox-icon {\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tpadding: calc(var(--default-grid-baseline) * 3);\n\t\topacity: 0.9;\n\t\tbackground-size: 24px;\n\t}\n\n\t.mailbox-title {\n\t\tpadding: calc(var(--default-grid-baseline) * 3) calc(var(--default-grid-baseline) * 3) calc(var(--default-grid-baseline) * 3) 0;\n\t\tflex: 1;\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t}\n}\n\n.buttons {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tpadding-top: calc(var(--default-grid-baseline) * 2);\n\n\t.spinner {\n\t\tmargin-right: var(--default-grid-baseline);\n\t}\n}\n.material-design-icon {\n\topacity: .7;\n\tmargin-right: calc(var(--default-grid-baseline) * 1.5);\n}\n"],sourceRoot:""}]);const r=s}}]);
//# sourceMappingURL=mail.24.6baf59095446008b644d.js.map