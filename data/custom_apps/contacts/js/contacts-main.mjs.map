{"version":3,"mappings":";;6oCAAA,IAAAA,GAAe,SAAUC,EAAOC,EAAQC,EAAS,CAC/C,IAAIC,GAAcD,GAAW,CAAE,GAAE,YAAc,QAE/CF,EAAM,eAAeG,EAAY,CAC/B,WAAY,GACZ,MAAOC,GAAWH,EAAO,YAAY,EACrC,UAAW,CACT,cAAiB,SAAwBI,EAAOC,EAAY,CAC1DN,EAAM,MAAMG,CAAU,EAAIC,GAAWE,EAAW,GAAIA,EAAW,IAAI,CACpE,CACF,CACL,CAAG,EAED,IAAIC,EAAkB,GAClBC,EAGAC,EAAeT,EAAM,MACvB,SAAUK,EAAO,CAAE,OAAOA,EAAMF,CAAU,CAAI,EAC9C,SAAUO,EAAO,CACf,IAAIC,EAAWD,EAAM,SACjBC,IAAaH,IAGbA,GAAe,OACjBD,EAAkB,GAClBN,EAAO,KAAKS,CAAK,GAEnBF,EAAcG,EACf,EACD,CAAE,KAAM,EAAM,CACf,EAGGC,EAAkBX,EAAO,UAAU,SAAUY,EAAIC,EAAM,CACzD,GAAIP,EAAiB,CACnBA,EAAkB,GAClB,MACD,CACDC,EAAcK,EAAG,SACjBb,EAAM,OAAOG,EAAa,iBAAkB,CAAE,GAAIU,EAAI,KAAMC,EAAM,CACtE,CAAG,EAED,OAAO,UAAmB,CAGtBF,IAAiB,EAKjBH,IAAc,EAIhBT,EAAM,iBAAiBG,CAAU,CAClC,CACH,EAEA,SAASC,GAAYS,EAAIC,EAAM,CAC7B,IAAIC,EAAQ,CACV,KAAMF,EAAG,KACT,KAAMA,EAAG,KACT,KAAMA,EAAG,KACT,MAAOA,EAAG,MACV,OAAQA,EAAG,OACX,SAAUA,EAAG,SACb,KAAMA,EAAG,IACV,EACD,OAAIC,IACFC,EAAM,KAAOX,GAAWU,CAAI,GAEvB,OAAO,OAAOC,CAAK,CAC5B,CC/DA,MAAAC,GAAA,CACA,mBACA,2HCVMA,GAAY,CAChB,KAAM,mBACR,EACA,IAAIC,GAAc,UAAkB,CAClC,IAAIC,EAAM,KAAMC,EAAKD,EAAI,MAAM,GAC/B,OAAOC,EAAG,KAAM,CAAE,YAAa,2CAA4C,MAAO,CAAE,KAAQ,WAAa,EAAE,CAC7G,EACIC,GAAuB,GACvBC,GAAgCC,GAClCN,GACAC,GACAG,GACA,GACA,KACA,UACF,EACA,MAAMG,GAAoBF,GAAc,QCjBlCL,GAAY,CAChB,KAAM,qBACR,EACA,IAAIC,GAAc,UAAkB,CAClC,IAAIC,EAAM,KAAMC,EAAKD,EAAI,MAAM,GAC/B,OAAOC,EAAG,MAAO,CAAE,YAAa,qBAAuB,EAAE,CAACD,EAAI,GAAG,SAAS,CAAC,EAAG,CAAC,CACjF,EACIE,GAAuB,GACvBC,GAAgCC,GAClCN,GACAC,GACAG,GACA,GACA,KACA,IACF,EACA,MAAMI,GAAsBH,GAAc,QChBpCL,GAAY,CAChB,KAAM,mBACN,MAAO,CACL,UAAW,CACT,KAAM,QACN,QAAS,EACV,EACD,YAAa,CACX,KAAM,QACN,QAAS,EACV,CACF,CACH,EACA,IAAIC,GAAc,UAAkB,CAClC,IAAIC,EAAM,KAAMC,EAAKD,EAAI,MAAM,GAC/B,OAAOC,EAAG,MAAO,CAAE,YAAa,mBAAoB,MAAO,CAAE,UAAWD,EAAI,UAAW,YAAaA,EAAI,WAAa,GAAI,CAACA,EAAI,GAAG,SAAS,CAAC,EAAG,CAAC,CACjJ,EACIE,GAAuB,GACvBC,GAAgCC,GAClCN,GACAC,GACAG,GACA,GACA,KACA,IACF,EACA,MAAMK,GAAmBJ,GAAc,QCzBjCL,GAAY,CAChB,KAAM,qBACR,EACA,IAAIC,GAAc,UAAkB,CAClC,IAAIC,EAAM,KAAMC,EAAKD,EAAI,MAAM,GAC/B,OAAOC,EAAG,KAAM,CAAE,YAAa,qBAAuB,EAAE,CAACD,EAAI,GAAG,SAAS,CAAC,EAAG,CAAC,CAChF,EACIE,GAAuB,GACvBC,GAAgCC,GAClCN,GACAC,GACAG,GACA,GACA,KACA,UACF,EACA,MAAMM,GAAsBL,GAAc,QCNpCL,GAAY,CAChB,KAAM,kBACN,WAAY,CACV,oBAAAU,GACA,sBAAAC,EACD,EAED,OAAQ,CACN,oBAAqB,CACnB,QAAS,IAAM,IAAMC,GAAI,KAAK,KAAK,6EAA6E,EAChH,KAAM,+BACP,CACF,EACD,MAAO,CAIL,UAAW,CACT,KAAM,OACN,QAAS,EACV,EAID,eAAgB,CACd,KAAM,OACN,QAAS,EACV,CACF,EACD,OAAQ,CACN,MAAO,CACL,SAAUC,GAAa,CAC7B,CACG,EACD,MAAO,CACL,MAAO,CACL,KAAM,CAAC,KAAK,SACZ,UAAW,IACjB,CACG,EACD,MAAO,CACL,UAAW,CACT,KAAK,KAAO,CAAC,KAAK,SAClB,KAAK,gBAAe,CACrB,EACD,MAAO,CACL,KAAK,gBAAe,CACrB,CACF,EACD,SAAU,CACR,KAAK,oBAAoB,EAAI,EAC7BC,GAAU,oBAAqB,KAAK,0BAA0B,EAC9DC,GAAK,qBAAsB,CACzB,KAAM,KAAK,IACjB,CAAK,EACD,KAAK,UAAYC,GAAgB,KAAK,MAAM,uBAAwB,CAClE,kBAAmB,GACnB,cAAe,KAAK,MAAM,uBAC1B,UAAWC,GAAc,EACzB,kBAAmB,EACzB,CAAK,EACD,KAAK,gBAAe,EACpBC,GAAU,IAAK,KAAK,UAAW,CAC7B,QAAS,GACT,KAAM,EACZ,CAAK,CACF,EACD,WAAY,CACV,KAAK,oBAAoB,EAAK,EAC9BC,GAAY,oBAAqB,KAAK,0BAA0B,EAChE,KAAK,UAAU,YAChB,EACD,QAAS,CAMP,MAAM,iBAAiB9B,EAAO,CAC5B,GAAI,KAAK,OAASA,EAAO,CACvB0B,GAAK,qBAAsB,CACzB,KAAM,KAAK,IACrB,CAAS,EACD,MACD,CACD,KAAK,KAAO,OAAO1B,EAAU,IAAc,CAAC,KAAK,KAAOA,EACxD,MAAM+B,EAAa,iBAAiB,SAAS,IAAI,EAC3CC,EAAkB,SAASD,EAAW,iBAAiB,mBAAmB,CAAC,GAAK,IAClF,KAAK,OACP,MAAM,KAAK,YACX,KAAK,kBAAiB,GAExB,WAAW,IAAM,CACfL,GAAK,qBAAsB,CACzB,KAAM,KAAK,IACrB,CAAS,CACT,EAAS,IAAMM,CAAe,CACzB,EACD,2BAA2B,CAAE,KAAAC,GAAQ,CACnC,KAAK,iBAAiBA,CAAI,CAC3B,EAID,iBAAkB,CACZ,KAAK,UAAY,KAAK,KACxB,KAAK,UAAU,WAEf,KAAK,UAAU,YAElB,EACD,WAAY,CACN,KAAK,UAAY,KAAK,MACxB,KAAK,iBAAiB,EAAK,CAE9B,EACD,mBAAoB,CAClB,MAAMC,EAAUC,GAAS,KAAK,MAAM,sBAAsB,EAAE,CAAC,EACzDD,IACFA,EAAQ,MAAK,EACbE,GAAO,MAAM,2CAA4C,CAAE,QAAAF,CAAS,GAEvE,EACD,UAAUG,EAAO,CACf,GAAIA,EAAM,MAAQ,IAAK,CACrB,GAAI,CAAC,KAAK,KAAM,CACd,KAAK,iBAAiB,EAAI,EAC1B,MACD,CACG,KAAK,2BACP,KAAK,iBAAiB,EAAK,CAE9B,CACF,EACD,yBAA0B,CACxB,MAAMC,EAAgB,SAAS,cAC/B,OAAO,KAAK,MAAM,wBAAwB,SAASA,CAAa,CACjE,CACF,CACH,EACA,IAAI1B,GAAc,UAAkB,CAClC,IAAIC,EAAM,KAAMC,EAAKD,EAAI,MAAM,GAC/B,OAAOC,EAAG,MAAO,CAAE,IAAK,yBAA0B,YAAa,iBAAkB,MAAO,CAAE,wBAAyB,CAACD,EAAI,KAAQ,EAAE,CAACC,EAAG,MAAO,CAAE,YAAa,0BAA2B,MAAO,CAAE,GAAM,qBAAsB,cAAeD,EAAI,KAAO,QAAU,OAAQ,aAAcA,EAAI,WAAa,OAAQ,kBAAmBA,EAAI,gBAAkB,OAAQ,MAAS,CAACA,EAAI,MAAQ,MAAQ,EAAE,GAAI,CAAE,QAAW,SAAS0B,EAAQ,CACha,MAAI,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAK1B,EAAI,GAAG0B,EAAO,QAAS,MAAO,GAAIA,EAAO,IAAK,CAAC,MAAO,QAAQ,CAAC,EAAU,KACrG1B,EAAI,UAAU,MAAM,KAAM,SAAS,CAC9C,CAAK,GAAI,CAACC,EAAG,MAAO,CAAE,YAAa,0BAA4B,CAACD,EAAI,GAAG,QAAQ,CAAC,EAAG,CAAC,EAAGC,EAAG,MAAO,CAAE,YAAa,uBAAwB,MAAO,CAAE,gCAAiC,CAACD,EAAI,aAAa,KAAQ,EAAE,CAACA,EAAI,GAAG,SAAS,CAAC,EAAG,CAAC,EAAGA,EAAI,aAAa,KAAOC,EAAG,sBAAuB,CAAE,YAAa,sBAAwB,EAAE,CAACD,EAAI,GAAG,MAAM,CAAC,EAAG,CAAC,EAAIA,EAAI,GAAE,EAAIA,EAAI,GAAG,QAAQ,CAAC,EAAG,CAAC,EAAGC,EAAG,wBAAyB,CAAE,MAAO,CAAE,KAAQD,EAAI,IAAI,EAAI,GAAI,CAAE,cAAeA,EAAI,gBAAkB,EAAE,CAAC,EAAG,CAAC,CACve,EACIE,GAAuB,GACvBC,GAAgCC,GAClCN,GACAC,GACAG,GACA,GACA,KACA,UACF,EACA,MAAMyB,GAAkBxB,GAAc,QCrKhCL,GAAY,CAChB,KAAM,yBACN,WAAY,CACV,UAAA8B,EACD,EACD,aAAc,GACd,MAAO,CACL,KAAM,CACJ,KAAM,OACN,SAAU,EACX,EAKD,UAAW,CACT,KAAM,OACN,QAAS,IACV,EAKD,UAAW,CACT,KAAM,QACN,QAAS,EACV,EAID,aAAc,CACZ,KAAM,OACN,QAAS,CACV,EAMD,IAAK,CAAE,CACR,EACD,SAAU,CACR,YAAa,CACX,OAAO,KAAK,UAAY,MAAQ,IACjC,EACD,YAAa,CACX,MAAMC,EAAe,KAAK,IAAI,EAAG,KAAK,YAAY,EAClD,OAAO,KAAK,UAAY,IAAIA,CAAY,GAAK,MAC9C,EAED,YAAa,CACX,MAAO,CAAC,CAAC,KAAK,OAAO,OACtB,CACF,CACH,EACA,IAAI9B,GAAc,UAAkB,CAClC,IAAIC,EAAM,KAAMC,EAAKD,EAAI,MAAM,GAC/B,OAAOC,EAAGD,EAAI,WAAY,CAAE,IAAK,YAAa,YAAa,yBAA0B,MAAO,CAAE,kCAAmCA,EAAI,SAAW,GAAI,CAACC,EAAGD,EAAI,WAAY,CAAE,IAAK,YAAa,YAAa,+BAAgC,MAAO,CAAE,GAAMA,EAAI,SAAS,CAAI,EAAE,CAACA,EAAI,GAAG,IAAMA,EAAI,GAAGA,EAAI,IAAI,EAAI,GAAG,CAAC,CAAC,EAAGA,EAAI,WAAaC,EAAG,MAAO,CAAE,YAAa,iCAAiC,EAAI,CAACA,EAAG,YAAaD,EAAI,GAAGA,EAAI,GAAG,CAAE,YAAaA,EAAI,GAAG,CAAC,CAAE,IAAK,OAAQ,GAAI,UAAW,CACrd,MAAO,CAACA,EAAI,GAAG,oBAAoB,CAAC,CACrC,EAAE,MAAO,GAAM,EAAG,KAAM,EAAI,GAAK,YAAaA,EAAI,OAAQ,EAAK,EAAGA,EAAI,UAAU,EAAG,CAACA,EAAI,GAAG,SAAS,CAAC,EAAG,CAAC,CAAC,EAAG,CAAC,EAAIA,EAAI,IAAI,EAAG,CAAC,CACjI,EACIE,GAAuB,GACvBC,GAAgCC,GAClCN,GACAC,GACAG,GACA,GACA,KACA,UACF,EACA,MAAM4B,GAAyB3B,GAAc,QCvEvCL,GAAY,CAChB,KAAM,uBACN,OAAQ,CAAC,kBAAmB,mBAAmB,EAC/C,MAAO,CACL,KAAM,CACJ,KAAM,OACN,SAAU,EACX,EACD,GAAI,CACF,KAAM,OACN,SAAU,GACV,UAAUiC,EAAI,CACZ,MAAO,iBAAiB,KAAKA,CAAE,CAChC,CACF,CACF,EACD,SAAU,CAER,QAAS,CACP,MAAO,oBAAsB,KAAK,EACnC,CACF,EAED,MAAO,CACL,GAAGC,EAAOC,EAAO,CACf,KAAK,kBAAkBA,CAAK,EAC5B,KAAK,gBAAgBD,EAAO,KAAK,KAAM,KAAK,QAAQ,IAAI,CACzD,EACD,KAAKE,EAAS,CACZ,KAAK,kBAAkB,KAAK,EAAE,EAC9B,KAAK,gBAAgB,KAAK,GAAIA,EAAS,KAAK,QAAQ,IAAI,CACzD,CACF,EACD,SAAU,CACR,KAAK,gBAAgB,KAAK,GAAI,KAAK,KAAM,KAAK,QAAQ,IAAI,CAC3D,EACD,eAAgB,CACd,KAAK,kBAAkB,KAAK,EAAE,CAC/B,CACH,EACA,IAAInC,GAAc,UAAkB,CAClC,IAAIC,EAAM,KAAMC,EAAKD,EAAI,MAAM,GAC/B,OAAOC,EAAG,UAAW,CAAE,YAAa,uBAAwB,MAAO,CAAE,GAAMD,EAAI,OAAQ,kBAAmB,GAAGA,EAAI,MAAM,SAAW,GAAI,CAACC,EAAG,KAAM,CAAE,YAAa,6BAA8B,MAAO,CAAE,GAAM,GAAGD,EAAI,MAAM,SAAS,GAAM,CAACA,EAAI,GAAG,IAAMA,EAAI,GAAGA,EAAI,IAAI,EAAI,GAAG,CAAC,CAAC,EAAGA,EAAI,GAAG,SAAS,EAAGA,EAAI,IAAI,EAAG,CAAC,CAClT,EACIE,GAAuB,GACvBC,GAAgCC,GAClCN,GACAC,GACAG,GACA,GACA,KACA,UACF,EACA,MAAMiC,GAAuBhC,GAAc,QCpDrCL,GAAY,CAChB,KAAM,kBACN,MAAO,CACL,KAAM,CACJ,KAAM,OACN,QAAS,GACT,UAAUsC,EAAO,CACf,MAAO,CAAC,cAAe,WAAY,EAAE,EAAE,SAASA,CAAK,CACtD,CACF,EAMD,OAAQ,CACN,KAAM,QACN,QAAS,EACV,EAKD,MAAO,CACL,KAAM,OACN,SAAU,GACV,QAAS,MACV,EAID,IAAK,CACH,KAAM,QACN,SAAU,GACV,QAAS,EACV,CACF,EACD,SAAU,CACR,oBAAqB,CACnB,MAAO,CACL,uCAAwC,KAAK,OAAS,cACtD,oCAAqC,KAAK,OAAS,WACnD,OAAQ,KAAK,MACrB,CACK,EACD,gBAAiB,CACf,OAAO,KAAK,cAAc,KAAK,KAAK,CACrC,CACF,EACD,QAAS,CACP,cAAcC,EAAO,CACnB,OAAI,KAAK,IACAA,EAAM,WAEG,IAAI,KAAK,aAAaC,GAAkB,EAAI,CAC5D,SAAU,UACV,eAAgB,OACxB,CAAO,EACgB,OAAOD,CAAK,CAC9B,EAKD,mBAAoB,CAClB,GAAI,KAAK,QAAU,OACjB,MAAO,CACL,UAAW,KAAK,eAChB,SAAU,KAAK,MAAM,SAAU,CACzC,EAEM,GAAI,CAAK,UAGL,KAAK,OAAO,SAAS,SAAW,EAAG,CACrC,MAAME,EAAc,KAAK,OAAO,QAAQ,CAAC,EAAE,MAAM,OACjD,GAAIA,GAAe,QAAQ,KAAKA,CAAW,EAAG,CAC5C,MAAMF,EAAQ,SAASE,EAAa,EAAE,EACtC,MAAO,CACL,UAAW,KAAK,cAAcF,CAAK,EACnC,SAAUE,CACtB,CACS,CACF,CACF,CACF,EACD,OAAOC,EAAG,CACR,MAAMH,EAAQ,KAAK,oBACnB,OAAOG,EAAE,MAAO,CACd,YAAa,0BACb,MAAO,KAAK,mBACZ,MAAO,CAEL,MAAOH,GAASA,EAAM,WAAaA,EAAM,UAAYA,EAAM,SAAW,MACvE,CACP,EAAO,CAACA,GAAO,WAAa,KAAK,OAAO,OAAO,CAAC,CAC7C,CACH,EACMtC,GAAc,KACdG,GAAuB,KAC7B,IAAIC,GAAgCC,GAClCN,GACAC,GACAG,GACA,GACA,KACA,UACF,EACA,MAAMuC,GAAkBtC,GAAc,QC1GhCL,GAAY,CAChB,KAAM,aACN,WAAY,CACV,UAAA8B,GACA,gBAAAa,GACA,SAAAC,EACD,EACD,MAAO,CAIL,QAAS,CACP,KAAM,OACN,QAAS,EACV,EAID,KAAM,CACJ,KAAM,OACN,QAAS,MACV,EAKD,MAAO,CACL,KAAM,QACN,QAAS,EACV,EAID,GAAI,CACF,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,IACV,EAID,KAAM,CACJ,KAAM,OACN,QAAS,GACV,EACD,OAAQ,CACN,KAAM,OACN,QAAS,EACV,EAID,SAAU,CACR,KAAM,OACN,QAAS,EACV,EAID,KAAM,CACJ,KAAM,QACN,QAAS,EACV,EAID,QAAS,CACP,KAAM,QACN,QAAS,EACV,EAID,OAAQ,CACN,KAAM,QACN,QAAS,EACV,EAID,cAAe,CACb,KAAM,OACN,QAAS,EACV,EAID,iBAAkB,CAChB,KAAM,OACN,QAAS,MACV,EAKD,cAAe,CACb,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,CACV,EAID,YAAa,CACX,KAAM,OACN,QAAS,GACT,UAAUN,EAAO,CACf,MAAO,CAAC,cAAe,WAAY,EAAE,EAAE,QAAQA,CAAK,IAAM,EAC3D,CACF,EAID,oBAAqB,CACnB,KAAM,QACN,QAAS,EACV,EAID,UAAW,CACT,KAAM,QACN,QAAS,EACV,EAID,QAAS,CACP,KAAM,QACN,QAAS,EACV,CACF,EACD,MAAO,CACL,QACA,iBACD,EACD,OAAQ,CACN,KAAM,CAACO,CAAK,EAAI,OAAO,YAAY,QAAQ,MAAM,IAAK,CAAC,GAAK,GAE5D,MAAO,CACL,SAFeA,GAAS,OAAO,SAASA,CAAK,EAAI,EAGvD,CACG,EACD,MAAO,CACL,MAAO,CACL,QAAS,GACT,WAAY,GACZ,WAAY,GACZ,2BAA4B,GAC5B,SAAU,GACV,aAAc,GACd,WAAY,EAClB,CACG,EACD,SAAU,CACR,wBAAyB,CACvB,MAAO,CAAC,KAAK,4BAA8B,KAAK,mBACjD,EACD,aAAc,CACZ,OAAQ,KAAK,UAAY,IAAM,KAAK,cAAgB,CAAC,KAAK,4BAA8B,KAAK,oBAC9F,CACF,EACD,MAAO,CACL,SAASC,EAAU,CACb,CAACA,GAAY,CAAC,KAAK,UACrB,KAAK,2BAA6B,GAErC,CACF,EACD,SAAU,CACR,KAAK,WAAU,CAChB,EACD,SAAU,CACR,KAAK,WAAU,CAChB,EACD,QAAS,CAQP,QAAQpB,EAAOqB,EAAUC,EAAgB,CACvC,KAAK,MAAM,QAAStB,CAAK,EACrB,EAAAA,EAAM,SAAWA,EAAM,QAAUA,EAAM,SAAWA,EAAM,WAGxDsB,IACFD,IAAWrB,CAAK,EAChBA,EAAM,eAAc,EAEvB,EACD,aAAc,CACR,KAAK,aACP,KAAK,2BAA6B,IAEpC,KAAK,QAAU,EAChB,EACD,aAAc,CACZ,KAAK,2BAA6B,EACnC,EAID,WAAWA,EAAO,CACZ,KAAK,UAGL,KAAK,MAAM,WAAW,EAAE,SAASA,EAAM,aAAa,GAGxD,KAAK,YAAW,CACjB,EAID,kBAAmB,CACZ,KAAK,WACR,KAAK,2BAA6B,IAEpC,KAAK,QAAU,EAChB,EACD,iBAAkB,CAChB,KAAK,YAAW,EAChB,KAAK,QAAU,EAChB,EACD,wBAAwBuB,EAAG,CACzB,KAAK,SAAWA,EAChB,KAAK,MAAM,kBAAmBA,CAAC,CAChC,EAED,YAAa,CACP,KAAK,aAAe,CAAC,CAAC,KAAK,OAAO,UACpC,KAAK,WAAa,CAAC,CAAC,KAAK,OAAO,SAE9B,KAAK,aAAe,CAAC,CAAC,KAAK,OAAO,UACpC,KAAK,WAAa,CAAC,CAAC,KAAK,OAAO,SAE9B,KAAK,eAAiB,CAAC,CAAC,KAAK,OAAO,YACtC,KAAK,aAAe,CAAC,CAAC,KAAK,OAAO,WAEhC,KAAK,aAAe,CAAC,CAAC,KAAK,OAAO,UACpC,KAAK,WAAa,CAAC,CAAC,KAAK,OAAO,QAEnC,CACF,CACH,EACA,IAAIhD,GAAc,UAAkB,CAClC,IAAIC,EAAM,KAAMC,EAAKD,EAAI,MAAM,GAC/B,OAAOC,EAAGD,EAAI,GAAK,cAAgB,WAAY,CAAE,IAAK,YAAa,MAAO,CAAE,OAAUA,EAAI,GAAK,GAAO,KAAM,GAAMA,EAAI,GAAI,MAASA,EAAI,GAAKA,EAAI,MAAQ,IAAI,EAAI,YAAaA,EAAI,GAAG,CAAC,CAAE,IAAK,UAAW,GAAI,SAAS,CAAE,KAAM8C,EAAgB,SAAAD,EAAU,SAAAG,GAAY,CAChQ,MAAO,CAAC/C,EAAG,KAAM,CAAE,YAAa,qBAAsB,MAAO,CAAE,6BAA8B+C,GAAYhD,EAAI,OAAU,EAAE,CAACC,EAAG,MAAO,CAAE,IAAK,YAAa,YAAa,YAAa,MAAO,CACvL,qBAAsBD,EAAI,QAC1B,oBAAqBA,EAAI,SACzB,sBAAuBA,EAAI,OAC5B,EAAE,GAAI,CAAE,UAAaA,EAAI,gBAAiB,WAAcA,EAAI,gBAAgB,CAAI,EAAE,CAACC,EAAG,IAAK,CAAE,YAAa,oBAAqB,MAAO,CAAE,GAAMD,EAAI,UAAY,OAAQ,aAAcA,EAAI,cAAe,KAAQ8C,GAAkB9C,EAAI,KAAM,OAAUA,EAAI,SAAWA,EAAI,OAAS,IAAM,OAAS,UAAW,IAAOA,EAAI,OAAS,IAAM,OAAS,qBAAuB,EAAE,GAAI,CAAE,MAASA,EAAI,YAAa,SAAYA,EAAI,WAAY,MAAS,SAAS0B,EAAQ,CAC5b,OAAO1B,EAAI,QAAQ0B,EAAQmB,EAAUC,CAAc,CACzD,EAAO,QAAW,SAASpB,EAAQ,CAC7B,MAAI,CAACA,EAAO,KAAK,QAAQ,KAAK,GAAK1B,EAAI,GAAG0B,EAAO,QAAS,MAAO,GAAIA,EAAO,IAAK,CAAC,MAAO,QAAQ,CAAC,EAAU,KACrG1B,EAAI,YAAY,MAAM,KAAM,SAAS,CAC7C,IAAM,CAACA,EAAI,GAAG,MAAM,EAAGC,EAAG,MAAO,CAAE,YAAa,mBAAqB,EAAE,CAACA,EAAG,MAAO,CAAE,YAAa,yBAAyB,EAAI,CAACA,EAAG,MAAO,CAAE,YAAa,yBAA2B,EAAE,CAACD,EAAI,GAAG,OAAQ,UAAW,CAC/M,MAAO,CAACA,EAAI,GAAGA,EAAI,GAAGA,EAAI,IAAI,CAAC,CAAC,CACtC,CAAK,CAAC,EAAG,CAAC,EAAGA,EAAI,WAAaC,EAAG,MAAO,CAAE,YAAa,6BAA8B,MAAO,CAAE,mCAAoCD,EAAI,IAAM,GAAI,CAACA,EAAI,GAAG,SAAS,CAAC,EAAG,CAAC,EAAIA,EAAI,GAAI,EAAC,EAAGC,EAAG,MAAO,CAAE,YAAa,4BAA4B,EAAI,CAACD,EAAI,YAAcC,EAAG,MAAO,CAAE,YAAa,4BAA8B,EAAE,CAACD,EAAI,GAAG,UAAW,UAAW,CACnV,MAAO,CAACA,EAAI,GAAGA,EAAI,GAAGA,EAAI,OAAO,CAAC,CAAC,CACzC,CAAK,CAAC,EAAG,CAAC,EAAIA,EAAI,KAAMA,EAAI,eAAiBA,EAAI,aAAeC,EAAG,MAAO,CAAE,WAAY,CAAC,CAAE,KAAM,OAAQ,QAAS,SAAU,MAAOD,EAAI,uBAAwB,WAAY,wBAA0B,GAAG,YAAa,0BAA0B,EAAI,CAACA,EAAI,cAAgBC,EAAG,kBAAmB,CAAE,YAAa,6BAA8B,MAAO,CAAE,OAAU+C,GAAYhD,EAAI,OAAQ,KAAQA,EAAI,WAAW,CAAI,EAAE,CAACA,EAAI,GAAG,IAAMA,EAAI,GAAGA,EAAI,aAAa,EAAI,GAAG,CAAC,CAAC,EAAIA,EAAI,GAAE,EAAIA,EAAI,aAAeC,EAAG,OAAQ,CAAE,YAAa,8BAA8B,EAAI,CAACD,EAAI,GAAG,WAAW,CAAC,EAAG,CAAC,EAAIA,EAAI,GAAI,GAAG,CAAC,EAAIA,EAAI,IAAI,CAAC,CAAC,CAAC,CAAC,EAAG,CAAC,EAAGA,EAAI,OAAO,eAAe,EAAIC,EAAG,MAAO,CAAE,YAAa,kCAAoC,EAAE,CAACD,EAAI,GAAG,eAAe,CAAC,EAAG,CAAC,EAAIA,EAAI,GAAI,EAAEC,EAAG,MAAO,CAAE,WAAY,CAAC,CAAE,KAAM,OAAQ,QAAS,SAAU,MAAOD,EAAI,qBAAuBA,EAAI,2BAA4B,WAAY,mDAAqD,GAAG,YAAa,6BAA8B,GAAI,CAAE,SAAYA,EAAI,UAAU,CAAI,EAAE,CAACC,EAAG,YAAa,CAAE,IAAK,UAAW,MAAO,CAAE,QAAW+C,GAAYhD,EAAI,OAAQ,aAAcA,EAAI,UAAW,aAAcA,EAAI,gBAAkB,EAAE,GAAI,CAAE,cAAeA,EAAI,uBAAyB,EAAE,YAAaA,EAAI,GAAG,CAACA,EAAI,OAAO,cAAc,EAAI,CAAE,IAAK,OAAQ,GAAI,UAAW,CACxwC,MAAO,CAACA,EAAI,GAAG,cAAc,CAAC,CACpC,EAAO,MAAO,IAAS,IAAI,EAAG,KAAM,EAAI,GAAK,CAACA,EAAI,GAAG,SAAS,CAAC,EAAG,CAAC,CAAC,EAAG,CAAC,EAAGA,EAAI,OAAO,MAAQC,EAAG,MAAO,CAAE,YAAa,kBAAoB,EAAE,CAACD,EAAI,GAAG,OAAO,CAAC,EAAG,CAAC,EAAIA,EAAI,GAAE,CAAE,CAAC,CAAC,CAAC,CAAC,CAC9K,EAAE,EAAG,KAAM,EAAI,CAAG,EACrB,EACIE,GAAuB,GACvBC,GAAgCC,GAClCN,GACAC,GACAG,GACA,GACA,KACA,UACF,EACA,MAAM+C,GAAa9C,GAAc,QCnR3B+C,GAAc,CAClB,KAAM,iBACR,EACA,IAAIC,GAAgB,UAAkB,CACpC,IAAInD,EAAM,KAAMC,EAAKD,EAAI,MAAM,GAC/B,OAAOC,EAAG,MAAO,CAACD,EAAI,GAAG,SAAS,CAAC,EAAG,CAAC,CACzC,EACIoD,GAAyB,GACzBC,GAAkCjD,GACpC8C,GACAC,GACAC,GACA,GACA,KACA,IACF,EACA,MAAME,GAAkBD,GAAgB,QAClCvD,GAAY,CAChB,KAAM,eACN,WAAY,CACV,SAAAyD,GACA,UAAAC,GACA,gBAAAF,EACD,EACD,MAAO,CAIL,YAAa,CACX,KAAM,OACN,QAAS,MACV,EAID,KAAM,CACJ,KAAM,OACN,QAAS,MACV,EAID,YAAa,CACX,KAAM,OACN,QAAS,MACV,EAID,eAAgB,CACd,KAAM,QACN,QAAS,EACV,EAID,IAAK,CACH,KAAM,OACN,QAAS,OACT,UAAYG,GAAQ,CAClB,GAAI,CACF,OAAAA,EAAM,IAAI,IAAIA,EAAKA,GAAK,aAAa,GAAG,EAAI,OAAO,SAAS,KAAO,MAAM,EAClE,EACR,MAAe,CACd,MAAO,EACR,CACF,CACF,EAID,GAAI,CACF,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,MACV,EAKD,KAAM,CACJ,KAAM,QACN,QAAS,EACV,EAID,QAAS,CACP,KAAM,QACN,QAAS,EACV,EAID,KAAM,CACJ,KAAM,OACN,QAAS,EACV,EAID,OAAQ,CACN,KAAM,OACN,QAAS,CACV,CACF,EACD,MAAO,CACL,QACA,aACD,EACD,SAAU,CASR,oBAAqB,CACnB,OAAQ,KAAK,aAA6B,kBAAd,WAC7B,EAMD,aAAc,CACZ,GAAI,CAAC,KAAK,YACR,MAAO,GAET,GAAI,CAEF,MAAO,CAAC,CADI,IAAI,IAAI,KAAK,WAAW,CAErC,MAAe,CACd,MAAO,EACR,CACF,EAMD,gBAAiB,CACf,MAAO,CAAC,CAAC,KAAK,WACf,EACD,QAAS,CACP,OAAO,KAAK,KAAO,KAAK,IAAI,KAAM,IAAK,EACxC,EACD,iBAAkB,CAChB,OAAI,KAAK,OACA,IACE,KAAK,GACPC,GAEA,KAEV,EACD,cAAe,CACb,MAAI,cAAa,KAAK,OAIvB,EACD,QAAS,CACP,MAAO,CACL,QAAS,CACP,OAAQ,KAAK,KAAO,KACpB,WAAY,KAAK,KAAO,KACxB,aAAc,KAAK,KAAO,EAAI,IAC/B,EACD,OAAQ,CACN,kBAAmB,KAAK,OAAS,IAClC,CACT,CACK,CACF,EACD,SAAU,CACJ,CAAC,KAAK,aAAe,CAAC,KAAK,MAC7BhD,GAAI,KAAK,KAAK,yEAAyE,CAE1F,EACD,QAAS,CACP,aAAavB,EAAO,CAClB,KAAK,MAAM,cAAeA,CAAK,CAChC,EAMD,QAAQqC,EAAO,CACb,KAAK,MAAM,QAASA,CAAK,CAC1B,CACF,CACH,EACA,IAAIzB,GAAc,UAAmB,CACnC,IAAIC,EAAM,KAAMC,EAAKD,EAAI,MAAM,GAC/B,OAAOC,EAAGD,EAAI,mBAAoB,CAAE,IAAK,YAAa,YAAa,uBAAwB,MAAO,CAAE,QAAW,cAAe,MAASA,EAAI,IAAI,EAAI,GAAI,CAAE,cAAeA,EAAI,YAAc,EAAE,YAAaA,EAAI,GAAG,CAAC,CAAE,IAAK,UAAW,GAAI,SAAS,CAAE,MAAA2D,CAAK,EAAI,CACzP,MAAO,CAAC1D,EAAGD,EAAI,gBAAiBA,EAAI,GAAG,CAAE,IAAK,YAAa,YAAa,uBAAwB,MAAO,CAAE,gCAAiCA,EAAI,OAAS,EAAE,MAAOA,EAAI,OAAO,QAAS,MAAO,CAAE,GAAMA,EAAI,GAAI,KAAQA,EAAI,OAASA,EAAI,IAAM,IAAM,EAAE,GAAI,CAAE,MAASA,EAAI,OAAO,CAAI,EAAE,YAAa2D,EAAO,EAAK,EAAG,CAAC1D,EAAG,WAAY,CAAE,YAAa,sBAAuB,MAAOD,EAAI,OAAO,OAAQ,MAAO,CAAE,IAAOA,EAAI,gBAAkBA,EAAI,YAAcA,EAAI,YAAc,OAAQ,aAAcA,EAAI,gBAAkB,CAACA,EAAI,YAAcA,EAAI,YAAc,OAAQ,KAAQA,EAAI,KAAM,eAAgBA,EAAI,YAAa,KAAQA,EAAI,KAAOA,EAAI,OAAS,EAAG,kBAAmB,GAAM,eAAgB,GAAM,mBAAoBA,EAAI,cAAc,CAAI,GAAGC,EAAG,OAAQ,CAAE,YAAa,mBAAmB,EAAI,CAACD,EAAI,GAAG,IAAMA,EAAI,GAAGA,EAAI,aAAeA,EAAI,IAAI,EAAI,GAAG,CAAC,CAAC,EAAGA,EAAI,OAAO,KAAOC,EAAG,OAAQ,CAAE,YAAa,wBAAwB,EAAI,CAACD,EAAI,GAAG,MAAM,CAAC,EAAG,CAAC,EAAIA,EAAI,GAAI,GAAG,CAAC,CAAC,CAC76B,EAAE,EAAG,KAAM,EAAI,GAAK,CAACA,EAAI,GAAG,SAAS,CAAC,EAAG,CAAC,CAC7C,EACIE,GAAuB,GACvBC,GAAgCC,GAClCN,GACAC,GACAG,GACA,GACA,KACA,UACF,EACA,MAAM0D,GAAezD,GAAc,QClN7B0D,GAAc,CAACC,EAAQC,EAAOC,EAAU,IAAM,CACpD,IAAM,CACJ,MAAMC,EAAK,SAAS,cAAc,KAAK,GACrB,SAAS,cAAuCF,GAAM,SAAS,GAAK,SAAS,MACrF,YAAYE,CAAE,EACxB,MAAMC,EAAM,IAAIxD,GAAI,CAClB,GAAAuD,EACA,KAAM,kBACN,OAASE,GAAOA,EAAGL,EAAQ,CACzB,MAAAC,EACA,GAAI,CACF,MAAO,IAAIK,IAAS,CAClBJ,EAAQ,GAAGI,EAAK,IAAKC,GAAMC,GAAMD,CAAC,CAAC,CAAC,EACpCH,EAAI,SAAQ,CACb,CACF,CACP,CAAK,CACL,CAAG,EACD,OAAOA,CACT,EACMK,GAAW,8NACXC,GAAW,sOACjB,IAAIC,GAAY,OAAO,eACnBC,GAAkB,CAACC,EAAKC,EAAKxC,IAAUwC,KAAOD,EAAMF,GAAUE,EAAKC,EAAK,CAAE,WAAY,GAAM,aAAc,GAAM,SAAU,GAAM,MAAAxC,CAAO,GAAIuC,EAAIC,CAAG,EAAIxC,EACtJyC,GAAgB,CAACF,EAAKC,EAAKxC,IAAUsC,GAAgBC,EAAK,OAAOC,GAAQ,SAAWA,EAAM,GAAKA,EAAKxC,CAAK,EAS7G,MAAM0C,WAAyB,KAAM,CACrC,CACA,MAAMC,EAAW,CACf,YAAYC,EAAOC,EAAaC,EAAgBC,EAAoBC,EAASC,EAAMC,EAAQC,EAAWC,EAAqB,GAAO,CAChIX,GAAc,KAAM,OAAO,EAC3BA,GAAc,KAAM,aAAa,EACjCA,GAAc,KAAM,gBAAgB,EACpCA,GAAc,KAAM,oBAAoB,EACxCA,GAAc,KAAM,SAAS,EAC7BA,GAAc,KAAM,MAAM,EAC1BA,GAAc,KAAM,QAAQ,EAC5BA,GAAc,KAAM,WAAW,EAC/BA,GAAc,KAAM,oBAAoB,EACxC,KAAK,MAAQG,EACb,KAAK,YAAcC,EACnB,KAAK,eAAiBC,EACtB,KAAK,mBAAqBC,EAC1B,KAAK,KAAOE,EACZ,KAAK,OAASC,EACd,KAAK,QAAUF,EACf,KAAK,UAAYG,EACjB,KAAK,mBAAqBC,CAC3B,CAMD,MAAM,MAAO,CACX,KAAM,CAAE,cAAAC,CAAe,EAAG,MAAMC,GAAA,8BAAAD,GAAA,KAAO,6CAA6B,2EACpE,OAAO,IAAI,QAAQ,CAACE,EAASC,IAAW,CACtC/B,GAAY4B,EAAe,CACzB,mBAAoB,KAAK,mBACzB,QAAS,KAAK,QACd,UAAW,KAAK,UAChB,KAAM,KAAK,MACX,KAAM,KAAK,KACX,eAAgB,KAAK,eACrB,YAAa,KAAK,YAClB,SAAU,KAAK,OACf,mBAAoB,KAAK,kBACjC,EAAS,IAAIrB,IAAS,CACd,IAAIyB,EACJ,KAAM,CAACC,CAAK,EAAI1B,EACZ,CAAC,MAAM,QAAQ0B,CAAK,GAAKA,EAAM,SAAW,EAC5CF,EAAO,IAAId,GAAiB,+BAA+B,CAAC,EAExD,KAAK,YACPa,EAAQG,EAAM,IAAKC,GAASA,EAAK,IAAI,CAAC,EAEtCJ,IAAUE,EAAKC,EAAM,CAAC,IAAM,KAAO,OAASD,EAAG,OAAS,GAAG,CAGvE,CAAO,CACP,CAAK,CACF,CACH,CACA,MAAMG,EAAkB,CAMtB,YAAYhB,EAAO,CACjBH,GAAc,KAAM,OAAO,EAC3BA,GAAc,KAAM,cAAe,EAAK,EACxCA,GAAc,KAAM,iBAAkB,EAAE,EACxCA,GAAc,KAAM,qBAAsB,EAAK,EAC/CA,GAAc,KAAM,MAAM,EAC1BA,GAAc,KAAM,QAAQ,EAC5BA,GAAc,KAAM,UAAW,EAAE,EACjCA,GAAc,KAAM,WAAW,EAC/BA,GAAc,KAAM,qBAAsB,EAAK,EAC/C,KAAK,MAAQG,CACd,CAOD,aAAaO,EAAW,CACtB,OAAK,eAAYA,EACV,IACR,CAMD,eAAeU,EAAI,CACjB,YAAK,YAAcA,EACZ,IACR,CAMD,kBAAkBX,EAAQ,CACxB,OAAK,oBAAe,KAAKA,CAAM,EACxB,IACR,CAMD,kBAAkBA,EAAQ,CACxB,YAAK,eAAiBA,EACf,IACR,CAOD,UAAUY,EAAQ,CAChB,OAAI,OAAO,KAAK,SAAY,aAC1B,QAAQ,KAAK,6EAA6E,EAC1F,KAAK,QAAU,IAEjB,KAAK,QAAQ,KAAKA,CAAM,EACjB,IACR,CAOD,iBAAiBC,EAAS,CACxB,YAAK,QAAUA,EACR,IACR,CAMD,QAAQC,EAAM,CACZ,OAAK,aAAU,CAACN,EAAOT,IAAS,CAC9B,IAAIQ,EAAIQ,EAAIpG,EACZ,MAAMmF,EAAU,GACVW,IAASM,GAAMR,EAA8BC,IAAM,CAAC,IAAM,KAAO,OAASD,EAAG,aAAe,KAAO,OAASQ,EAAG,gBAAkBpG,EAA8B6F,IAAM,CAAC,IAAM,KAAO,OAAS7F,EAAG,UAC/LqG,EAASP,GAAQQ,GAAQ,SAAClB,CAAI,EACpC,GAAIe,IAAS,EAAG,CACd,IAAII,EAAQC,GAAE,QAAQ,EAClBX,EAAM,SAAW,EACnBU,EAAQC,GAAE,gBAAiB,CAAE,KAAMV,CAAM,GAChC,KAAK,cACdS,EAAQE,GAAE,iBAAkB,kBAAmBZ,EAAM,MAAM,GAE7DV,EAAQ,KAAK,CACX,SAAU,IAAM,CACf,EACD,KAAM,UACN,MAAAoB,CACV,CAAS,CACF,CACD,OAAIJ,IAAS,GAAKA,IAAS,IACzBhB,EAAQ,KAAK,CACX,SAAU,IAAM,CACf,EACD,MAAOkB,EAASG,GAAE,mBAAoB,CAAE,OAAAH,EAAQ,EAAIG,GAAE,MAAM,EAC5D,KAAM,UACN,KAAMjC,EAChB,CAAS,GAEC4B,IAAS,GAAKA,IAAS,IACzBhB,EAAQ,KAAK,CACX,SAAU,IAAM,CACf,EACD,MAAOkB,EAASG,GAAE,mBAAoB,CAAE,OAAAH,EAAQ,EAAIG,GAAE,MAAM,EAC5D,KAAML,IAAS,EAAI,UAAY,YAC/B,KAAM7B,EAChB,CAAS,EAEIa,CACb,EACW,IACR,CAMD,iBAAiBuB,EAAQ,GAAM,CAC7B,YAAK,mBAAqBA,EACnB,IACR,CAMD,QAAQtB,EAAM,CACZ,OAAK,UAAOA,EACL,IACR,CAMD,UAAUC,EAAQ,CAChB,YAAK,OAASA,EACP,IACR,CAMD,mBAAoB,CAClB,YAAK,mBAAqB,GACnB,IACR,CAID,OAAQ,CACN,OAAO,IAAIP,GACT,KAAK,MACL,KAAK,YACL,KAAK,eACL,KAAK,mBACL,KAAK,QACL,KAAK,KACL,KAAK,OACL,KAAK,UACL,KAAK,kBACX,CACG,CACH,CACA,SAAS6B,GAAqB5B,EAAO,CACnC,OAAO,IAAIgB,GAAkBhB,CAAK,CACpC,CCjQA,MAAAlF,GAAA,CACA,wBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,2kCChBAA,GAAA,CACA,eACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,44CChBAA,GAAA,CACA,iBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,koBChBAA,GAAA,CACA,kBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,4nBC7Be+G,GAAA,CACd,MAAO,CACN,MAAO,CACN,OAAQ,GACR,YAAa,GACb,YAAa,EACb,CACD,EACD,SAAU,CACT,cAAe,CACd,OAAI,KAAK,YACD,iBAEJ,KAAK,YACD,qBAED,aACP,CACD,EAED,QAAS,CACR,MAAM,gBAAgBpD,EAAK,CAE1B,KAAK,YAAc,GAGnB,GAAI,C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A,CACA,mCAAAD,CAAA,cAAAC,CAAA,IAEA,aAAAD,EACA,MAAAE,EAAA,mBACAD,EAEAD,EAAAE,EAAAF,EAGAA,EAAAE,EAAA,CAAAF,EAGA,IACA,MAAAG,EAAA,MAAAC,GAAA,eAAAC,GAAA,OAAAL,CAAA,EAEA,mBAAAG,EAAA,MAEA,OAAAX,EAAA,CACA,6CAAAU,EAAAF,EAAAR,CAAA,EACAL,GAAA,2DACA,SACA,eACA,CACA,CACA,CACA,imBC5EAjH,GAAA,CACA,iBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,0jBChBAA,GAAA,CACA,iBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,gnBChBAA,GAAA,CACA,qBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,+rBChBAA,GAAA,CACA,uBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,ioBChCeoI,GAAA,CACd,SAAU,CAET,iBAAkB,CACjB,OAAO,KAAK,OAAO,OAAO,eAC1B,EACD,eAAgB,CACf,OAAO,KAAK,OAAO,OAAO,aAC1B,EACD,gBAAiB,CAChB,OAAO,KAAK,OAAO,OAAO,cAC1B,CACD,CACF,ECmFApI,GAAA,CACA,sBAEA,YACA,UAAAqI,GACA,UAAAC,GACA,WAAAC,GACA,cAAAC,GACA,gBAAAC,GACA,WAAAtF,GACA,eAAAuF,GACA,kBAAAnI,GACA,aAAAoI,GACA,SAAAlF,EACA,EAEA,QAAA2E,EAAA,EAEA,OACA,QACA,YACA,WACA,CACA,EAEA,OACA,OACA,UACA,CACA,EAEA,UAMA,SACA,yDACA,EAOA,YACA,2BAAAQ,GAAA,KACA,wBAGAC,GAAA,oBACAA,GAAAD,GAAA,OACA,EAOA,mBACA,sCAAAA,GAAA,MACA,EAOA,gBACA,uCACA,EAOA,wBACA,MAAAE,EAAA,YAAAD,EAAA,EAE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,CAEHL,EAAS3M,EAAEkL,GAAM,CACf,MAASoC,GACT,MAAOC,GACP,MAAO,CACL,IAAKF,GACL,MAAOlC,GAAW,KAClB,UAAWC,GAAU,MACtB,CACT,EAASuB,CAAM,EAAI,KAEb3M,EAAEkN,GAAS,CACT,MAASC,GACT,MAAO,CACL,KAAM,OACP,EACD,MAAOS,EACf,EAAS,KAAK,eAAe5N,CAAC,CAAC,EAEzB4M,EAAS5M,EAAEkL,GAAM,CACf,MAASuC,GACT,MAAOC,GACP,MAAO,CACL,IAAKF,GACL,MAAOrC,GAAW,KAClB,UAAWC,GAAU,MACtB,CACT,EAASwB,CAAM,EAAI,KAEb5M,EAAE,MAAO,CACP,IAAK,WACL,MAAO,CACL,MAAOuM,EAAe,MAAQ,OAC9B,OAAQA,EAAe,OAAS,KACjC,CACF,EAAC,CAAC,CACJ,CACL,CAAG,EAED,OAAOlB,CAET,2CCr/BA/N,GAAA,CACA,mBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,swBCfAA,GAAA,CACA,oBAEA,YACA,WAAAuQ,EACA,EAEA,OAIA,IACA,YACA,WACA,EAKA,OACA,YACA,WACA,EAKA,MACA,YACA,WACA,CACA,EAEA,SACA,WAKA,qBACA,WACA,cACA,EACA,CACA,CACA,ibCtCAvQ,GAAA,CACA,0BAEA,YACA,WAAAuQ,EACA,EAEA,OACA,QACA,YACA,UACA,QACA,CACA,EACA,SACA,cACA,WACA,EACA,WACA,YACA,gBACA,CACA,EAEA,UACA,aACA,uCACA,CACA,CACA,ksBCkCAvQ,GAAA,CACA,oBAEA,YACA,aAAAwQ,GACA,aAAAC,GACA,WAAAC,GACA,YAAAC,GACA,MAAAC,GACA,YAAA7C,EACA,EAEA,OACA,SACA,aACA,UACA,EAMA,WACA,WACA,YACA,UAAA8C,GAAA,CACA,MAAAC,EAAAD,EAAA,OAAAvK,GAAA,CAAAA,EAAA,KAAAA,EAAA,OACA,OAAAwK,EAAA,UACA,wEAAAA,CAAA,EACA,IAEA,EACA,CACA,EAKA,SACA,WACA,YACA,UAAAC,IA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GAAO,SAASwK,CAAI,EAC5FA,EAAK,SAAS,QAAQ,EACtBkB,GAAO,eAAe,IAAI,WAAWlB,CAAI,CAAC,CAAC,GACjD,MAAQ,iBACOC,EAAY,IAAOM,CAAE,aACpBL,EAAa,IAAOK,CAAE,iBACnBU,CAAW,QACpBV,EAAK,EAAMN,EAAY,IAAOM,EAAM,CAAC,QACrCA,EAAK,EAAML,EAAa,IAAOK,EAAM,CAAC,YAEpD,CC3BA,MAAAz2C,GAAA,CACA,oBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,+iBChBAA,GAAA,CACA,kBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,6uBChBAA,GAAA,CACA,gBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,q6BChBAA,GAAA,CACA,qBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,2qCChBAA,GAAA,CACA,+BACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,krBChBAA,GAAA,CACA,uBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,ukBChBAA,GAAA,CACA,0BACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,2tBC2CAA,GAAA,CACA,gCAEA,YACA,QAAAkT,GACA,kBAAAmkC,GACA,QAAA3vC,GACA,aAAA4vC,GACA,YAAAC,GACA,mBAAAC,EACA,EAEA,QACAC,EACA,EAEA,OACA,SACA,KAAAC,GACA,YACA,EACA,KACA,YACA,WACA,CACA,EACA,OACA,OACA,kBACA,CACA,EACA,UAMA,aACA,OAAAC,GAAA,UACA,EAOA,kBACA,OAAAA,GAAA,UACA,EAOA,iBACA,gCAAAC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A,cAAAC,GACA,uBAAAC,GACA,cAAAn6C,GACA,aAAAjE,GACA,YAAAyC,GACA,SAAA47C,GACA,YAAAC,GACA,SAAAC,GACA,YAAAC,GACA,aAAA/D,GACA,WAAA1iD,GACA,OAAA0mD,GACA,SAAAC,GACA,SAAAxqD,GACA,YAAAiM,GACA,WAAAw+C,GACA,UAAAC,GACA,MAAAx+C,GACA,SAAAi5B,GACA,eAAAwlB,GACA,YAAAC,GACA,eAAAC,GACA,SAAAn8C,GACA,wBAAAo8C,GACA,eAAAn8C,GACA,oBAAAo8C,EACA,EAEA,QAAAl8C,EAAA,EACA,UACA,OACA,4BACA,CACA,EAEA,OACA,YACA,YACA,cACA,EACA,UACA,WACA,cACA,EACA,WACA,YACA,WACA,EACA,MACA,YACA,YACA,UACA,CACA,EAEA,OACA,OAEA,SAOA,oBACA,eACA,iBACA,UACA,4BACA,uBACA,YACA,kBACA,oBACA,0CACA,6DAGA,IAAAm8C,GAAA,EACA,mBACA,eAAAlB,GACA,cAAAD,GACA,qBACA,oBACA,wBACA,oBACA,qBACA,sBACA,qBACA,yBACA,YAAA3tD,GAAA,2BAEA,CACA,EAEA,UACA,sBACA,sGACA,EAMA,wBACA,yCACA,EAOA,aACA,iDACA,EAEA,cACA,kCACA,EAOA,UACA,kCACA,CACA,KAAA+uD,GACA,WACA,uGACA,EAEA,EACA,EAOA,WACA,6BACA,2IAEA,EACA,EAOA,mBACA,oCACA,SACA,MAAAr9C,EAAAC,IAAA,CACA,MAAAq9C,EAAAt9C,EAAA,sBACAu9C,EAAAt9C,EAAA,sBACA,OAAAolC,GAAA,mBAAAiY,CAAA,EAAAjY,GAAA,mBAAAkY,CAAA,CACA,EACA,EAOA,oBACA,6BACA,QAAAp8C,EAAAskC,IAEA,gBAAAA,CAAA,EAKAA,EAAA,eAAAA,EAAA,oBAAAA,EAAA,sBACAtkC,EAAA,aACAA,EAAA,eAEAA,EAAA,gBAAAskC,CAAA,EACAtkC,IAIAA,EAAAskC,EAAA,QACAtkC,EAAAskC,EAAA,UAGAtkC,EAAAskC,EAAA,WAAAA,CAAA,EACAtkC,GAlBAA,EAmBA,GACA,EAOA,mBACA,OACA,0CACA,yBACA,gCACA,CACA,EAOA,cACA,kCACA,EAOA,cACA,OACA,4CACA,yBACA,CACA,EAQA,sBACA,yBACA,OAAAi3B,KAAA,SACA,IAAAA,IACA,CACA,GAAAA,EAAA,GACA,KAAAA,EAAA,YACA,SAAAA,EAAA,QACA,EACA,CACA,EAQA,8BACA,gCACA,OAAAolB,GAAA,CAAAA,EAAA,UACA,OAAAA,KAAA,kCACA,IAAAplB,IACA,CACA,GAAAA,EAAA,GACA,KAAAA,EAAA,IACA,EACA,CACA,EAGA,eACA,0CACA,EACA,UACA,sDACA,EAEA,2BACA,wEACA,iDACA,sDACA,EAEA,gCACA,6DACA,wBACA,EAOA,oBACA,MAAAxlC,EAAA,mBACA6qD,EAAA,iBAEA,OAAA7qD,GAAA6qD,EACA,0CACA,MAAA7qD,EACA,aAAA6qD,CACA,GACA7qD,GAEA6qD,GAIA,EACA,EACA,kBACA,2CACA,EACA,yBACA,yCAAAhY,KAAA,eACA,EACA,eACA,mDACA,EACA,wBACA,yCAAAA,KAAA,aACA,EACA,kBACA,wCAAAH,KAAA,wBAAAoY,GAAA,EAAAA,CAAA,CACA,EACA,mBACA,0CAAApY,KAAA,wBAAAqY,GAAA,EAAAA,CAAA,CACA,EACA,UACA,OAAAxD,GAAA,sDACA,EACA,wBACA,iEACA,EACA,4BACA,2DACA,CACA,EAEA,OACA,QAAAyD,EAAAC,EAAA,CACA,iBAAAD,IAAAC,GACA,mCAEA,CACA,EAEA,cAEA,iBACA,oCAIA,oDACA,EAEA,gBAEA,uDACA,EAEA,SACA,aAAA7tD,EAAA,CACA,oBAAAA,CACA,EACA,kBAAAA,EAAA,CACA,oBAAAA,CACA,EAIA,sBACA,cACA,sBACA,IACA,6DACA,SACA,qBACA,CAIA,2BACA,0EAEA,MAAAuoC,EAAA,sDACA,8BAAAA,CAAA,CACA,CACA,EAKA,mBACA,MAAAulB,EAAA,2BAEAA,EAAA,GAAAA,EAAA,UAAAnsD,KAAA,cAEA,MAAA8M,EAAAinC,GAAA,UAAAoY,CAAA,EACA,GAAAr/C,EAAA,UACA,MAAAs/C,EAAA,MAAAta,GAAAhlC,CAAA,EACAu/C,EAAA,yBAAAD,CAAA,EACA,iBAAAC,CAAA,CACA,CACA,EAEA,0CACA,iEAGA,oEAFA,6EAKA,0BACA,EAKA,cACA,uEACA,4BAEA,EASA,oBAAAxrD,EAAA,CACA,oBACA,iBAGA,MAAA+lC,EAAA,+BAAA/lC,CAAA,EAEA,GAAA+lC,EAEA,GAAAA,EAAA,IACA,IACA,uDAAAA,CAAA,GAEA,8BAAAA,CAAA,CACA,OAAAvjC,EAAA,CACAA,EAAA,qBACAL,GAAA,wDACAK,GAAA,aACAL,GAAA,mEAEAA,GAAA,uGAEA,cAAAK,CAAA,EAEA,mEACA,MAGA,8BAAAujC,CAAA,EAGA,iBAIA,mBACA,EAKA,gBACA,4DACA,EAOA,+BAAA0lB,EAAA,CACA,MAAA7lB,EAAA,uBAAAh5B,KAAA,KAAA6+C,CAAA,EAEA,GADA,sBACA7lB,EACA,IACA,MAAAG,EAAA,uDAGA,qBACA,YAAAH,CACA,GAEA,mBACA,eACA,QACA,+CACA,gBAAAG,EAAA,GACA,CACA,EACA,OAAAvjC,EAAA,CACA,cAAAA,CAAA,EACAL,GAAA,mEACA,SACA,qBACA,CAEA,EAOA,+BAAAspD,EAAA,CACA,MAAA7lB,EAAA,uBAAAh5B,KAAA,KAAA6+C,CAAA,EAEA,GADA,sBACA7lB,EACA,IACA,MAAAG,EAAA,uDAGA,qBACA,YAAAH,CACA,GAEA,mBACA,eACA,QACA,+CACA,gBAAAG,EAAA,GACA,CACA,EACA,OAAAvjC,EAAA,CACA,cAAAA,CAAA,EACAL,GAAA,mEACA,SACA,qBACA,CAEA,EAKA,iBACA,mFACA,UACA,wBACA,EACA,EAGA,eACA,cACA,EAOA,yBAAA4jC,EAAA,CAEA,MAAA2lB,EAAA,cACA,oCAAA3lB,CAAA,GACAA,CACA,EAEA,WAAA4lB,GAAAD,CAAA,EAEA,kBAAAA,EACA,iDACA,EAEA,WAAAvtD,EAAA,CACA,eAIAA,EAAA,+CAAAA,EAAA,QAAAA,EAAA,WACAA,EAAA,iBACA,cAEA,EAKA,qBAEA,+CAAAynC,KAAA,iCACA,2EACA,+DACA,kCACA,qCACA,gFACA,qEAEA,gCAEA,EAEA,4BACA,iCACA,2BACA,EAQA,WAAAqN,EAAA,CAEA,MAAA2Y,EAAA/Y,GAAA,WAAAI,EAAA,uBAEA4Y,EAAAD,KAAA,MACAA,EAAA,MACA3Y,EAAA,iBAEA,OAAA2Y,GAAAC,IAAA,SACA,EAKA,eACA,IACA,kDACA,kDACA,+BACA,oBACA,GACA,2BACA,yEACA,mDACA,0BAEA,gBACA,OACA1pD,GAAA,yCACA,CACA,CACA,CACA;;;;;;;;;;;kpNC3gCAjH,GAAA,CACA,wBAEA,YACA,SAAA0U,GACA,WAAAk8C,EACA,EAEA,OACA,OACA,YACA,WACA,EACA,QACA,YACA,WACA,EACA,WACA,YACA,WACA,CACA,EACA,OACA,OACA,gBACA,CACA,EAEA,UACA,gBACA,uCACA,EACA,kBACA,yCACA,EAEA,cACA,kFACA,EAEA,KACA,+CACA,EACA,SACA,mCAAA7Y,KAAA,8BACA,CACA,EAEA,UACA,wDACA,oDACA,EACA,YACA,yDACA,qDACA,EACA,gBACA,0BACA,EACA,SACA,UAAAvpC,EAAAoE,EAAA,CACApE,EAAA,+BACAA,EAAA,kCACAA,EAAA,4CACA,cAAAoE,EAAA,eACA,YAAAA,EAAA,YACA,OAAAA,EAAA,OACA,IAAAA,EAAA,IACA,IAAAA,EAAA,GACA,GACA,EAQA,gBAAA9N,EAAA,CACAA,IAAA,iBACA,oBAEA,EAQA,aAAAA,EAAA,CACAA,IAAA,kBACA,sBAEA,EAEA,sBAEA,GADA,sBACA,mBACA,MAAAunD,EAAA,gCACA,IAAAA,EAAA,CACA,6CAEA,MACA,CACA,eAAAA,CACA,8CACA,0CAEA,EAKA,gBAEA,mBACA,eACA,yEACA,EACA,CACA,CACA,82BCpIArsD,GAAA,CACA,oBAEA,YACA,eAAA6wD,GACA,YAAA9iD,EACA,EAEA,OACA,MACA,WACA,WACA,EACA,UACA,YACA,WACA,EACA,aACA,YACA,UACA,EACA,WACA,YACA,WACA,CACA,EAEA,OACA,OACA,iBAAA+iD,GACA,QACA,CACA,EAEA,UACA,kBACA,yCACA,EACA,gBACA,uCACA,EACA,eACA,iBACA,OAAAl+C,GAAA,+BAAAA,EAAA,OACA,IAAAA,GAAA,cAAAA,EAAA,KACA,CACA,EAEA,OACA,gBAAA9N,EAAA,CACA,oBACA,qBAAAA,CAAA,CACA,EACA,EACA,KAAAiH,EAAAglD,EAAA,CAIAhlD,EAAA,YAAAglD,EAAA,kCACA,oBACA,0CACA,EAEA,CACA,EAEA,UACA,2BACA,EAEA,SAEA,cAAAC,EAAA,CACA,uBAAAA,EAAA,kBAEA,MAAAd,EAAAc,IAAA,YAAAA,EAAA,aAAAA,EAAA,GACAd,GACA,2FAAAA,EAAA,MAEA,CACA,EAOA,gBAAAprD,EAAA,CACA,MAAA8N,EAAA,gCAAA9N,CAAA,eAGA,KAAA8N,KAAA,+BACA,MAAApG,EAAA,oBAAAq+B,KAAA,MAAA/lC,CAAA,EACA0H,EAAA,IACA,kCAAAA,CAAA,CAEA,CAGA,GAAAoG,EAAA,CACA,MAAAq+C,EAAAr+C,EAAA,qEACA,GAAAq+C,EAAA,GACA,MAAAC,EAAA,wBACAA,EAAA,eAAAA,EAAA,UAAAD,CAAA,CACA,CACA,CACA,EAQA,YAAApmB,EAAA,CACA,8BACAA,EAAA,iFAEA,EACA,CACA,CACA,utBC7EA7qC,GAAA,CACA,uBAEA,YACA,WAAA+V,GACA,OAAA1B,GACA,eAAA88C,GACA,aAAAC,GACA,aAAA5gD,GACA,YAAAyC,GACA,YAAAtC,EACA,EAEA,QAAAvI,EAAA,EAEA,OACA,SACA,aACA,UACA,EAEA,cACA,WACA,WACA,CACA,EAEA,OACA,OACA,eAEA,UAAAsnD,GAAA,CACA,CACA,EAEA,UAEA,WACA,sCACA,EACA,SACA,oCACA,EACA,iBACA,4CACA,EAEA,kBACA,yCACA,EAQA,cACA,6BAAAl3C,KAAA,6BACA,EAMA,eACA,mCACA,EAEA,cACA,4BACA,CACA,EAEA,SAMA,mBAAA64C,EAAA,CACAtwD,GAAA,wBAAAswD,CAAA,CACA,EAKA,aACA,yBACA,EAKA,cAEA,mBACA,aACA,QACA,gCACA,CACA,EACA,CACA,CACA,oyDCzJArxD,GAAA,CACA,wBAEA,YACA,aAAAwQ,GACA,YAAAyC,EACA,EAEA,OACA,OACA,YACA,WACA,EACA,UACA,YACA,WACA,EACA,MACA,YACA,WACA,EACA,OACA,YACA,WACA,CACA,CACA,6bCxBAjT,GAAA,CACA,sBAEA,YACA,iBAAAsxD,GACA,OAAAj9C,EACA,EAEA,OACA,QACA,YACA,SACA,EACA,UACA,YACA,SACA,EACA,SACA,YACA,SACA,EACA,OACA,YACA,SACA,EACA,MACA,YACA,UACA,CACA,EAEA,UACA,iBACA,oBACA,oCACA,qCACA,aACA,qCACA,CACA,EAEA,iBACA,oBACA,qCACA,sCACA,aACA,qCACA,CACA,EAEA,gBACA,oBACA,gBACA,iBACA,YACA,mBACA,CACA,CACA,EAEA,SACA,UACA,mBACA,CACA,CACA,6cC7EMk9C,GAAuB,eAAe1mB,EAASwmB,EAAW,CAC/D,MAAMj5C,EAASyyB,EAAQ,OACvB,OAAAzyB,EAAO,KAAKi5C,CAAS,EAEdz/C,GAAM,MAAMi5B,EAAQ,IAAK,GAAI,CACnC,QAAS,CACR,aAAc,aACd,qBAAsBzyB,EAAO,IAAIi5C,GAAa,mBAAmBA,CAAS,CAAC,EAAE,KAAK,GAAG,CACrF,CACH,CAAE,CACF,ECUArxD,GAAA,CACA,sBAEA,YACA,eAAAwxD,GACA,aAAAx+C,GACA,MAAApC,EAEA,EAEA,OACA,OAEA,cACA,oBACA,cACA,cACA,aACA,8BACA,GAGA,gBACA,iBACA,eACA,SACA,WACA,UACA,QACA,OACA,EACA,kBACA,CACA,EACA,UACA,WACA,sCACA,EACA,SACA,oCACA,EACA,iBACA,4CACA,CACA,EAEA,UAEA9P,GAAA,gDACA,EAEA,SAEA,mBAAA0X,EAAA,CAKA,GAJA,iDAAAA,CAAA,EAEA,qBAAAA,EAAA,KAAAA,EAAA,KAAAA,EAEA,OAAAA,GAAA,WACAA,EAAA,iBAAAlG,KAAA,OAAAkG,CAAA,EACA,CAAAA,GAAA,CACA,yDAAAA,CAAA,EACA,MACA,CAIA,oCACA,UAAA1T,KAAA,CACA,MAAA+lC,EAAA,cAAA/lC,CAAA,EACA,OACA,GAAA+lC,EAAA,IACA,MAAAA,EAAA,YACA,eACA,SAAAA,EAAA,qBACA,OAAAA,EAAA,MACA,CACA,GAEA,OAAAA,GAAA,CAAAA,EAAA,UAEA,OAAAA,KAAA,eAAAryB,EAAA,YAEA,mBACA,oBAAAA,CACA,EAEA,uBACA,mBACA,kBACA,EAEA,oBAAAvH,EAAA,CACA,uBAAAA,EAAA,gCACA,MAAAogD,EAAA,yBAEA,qBACA,mBAEA,yBAAApgD,EAAA,OACA,iDACA,8BACA,4BAGA,MAAAwgD,EAAAC,GAAA,GACAC,EAAA,GAGA1gD,EAAA,UAAAC,GAAA,CACA,IAEA,MAAA25B,EAAA,cAAA35B,EAAA,IAGAygD,EAAA,KAAAF,EAAA,IAAAF,GAAA1mB,EAAAwmB,CAAA,EACA,UACA,kDAAAxmB,EAAA,UAAAwmB,EAAA,EACA,8BACA,4BACA,GACA,MAAA/pD,GAAA,CACA,8BACA,2BACA,cAAAA,CAAA,CACA,EACA,EACA,OAAArE,EAAA,CACA,cAAAA,CAAA,CACA,CACA,GAEA,YAAA0uD,CAAA,YACA,sBACA,mBAGA,mBACA,aACA,QACA,kGACA,CACA,GAGA,+BACA,iCAEA,EACA,EAEA,eACA,yBACA,qBACA,sBAGA,4BACA,8BACA,6BACA,2BAEA,6DAIA,mBACA,aACA,QACA,kGACA,CACA,EACA,CACA,CACA,0jBCtLA3xD,GAAA,CACA,kBAEA,YACA,iBAAAsxD,GACA,OAAAj9C,EACA,EAEA,UACA,cACA,yCACA,EACA,cACA,mCACA,EACA,QACA,6BACA,EACA,WACA,gCACA,EACA,SACA,8BACA,EACA,WACA,gCACA,EAEA,kBACA,oBACA,0CACA,2CACA,WACA,CACA,4BACA,CACA,CACA,EAEA,iBACA,oBACA,+CACA,gDACA,WACA,CACA,4BACA,CACA,CACA,EAEA,eACA,oBACA,gBACA,iBACA,YACA,mBACA,CACA,CACA,EAEA,SACA,UACA,mBACA,CACA,CACA,6cCrEArU,GAAA,CACA,yBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,6mBChBAA,GAAA,CACA,uBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,gvBChBAA,GAAA,CACA,+BACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,69CC4DAA,GAAA,CACA,4BAEA,YACA,aAAAs3C,GACA,WAAAyT,GACA,WAAA6G,GACA,gBAAAjvD,GACA,kBAAAkvD,GACA,UAAAC,GACA,QAAAC,GACA,WAAAxpD,GACA,cAAAypD,GACA,YAAAC,GACA,aAAAh8C,GACA,oBAAAi8C,GACA,YAAAvhD,EACA,EAEA,QAAAzJ,EAAA,EAEA,OACA,QACA,KAAAC,GACA,WACA,CACA,EAEA,UACA,cACA,MAAA5E,EAAA,6CAGA,OAAAA,IAAA,4BACA,uBAGAA,CACA,CACA,CACA,4+DCpHAvC,GAAA,CACA,+BACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,mxBChBAA,GAAA,CACA,wBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,q8BC7BMmyD,GAAwBrH,GAAU,WAAY,wBAAyB,EAAK,ECyClF9qD,GAAA,CACA,iCACA,YACA,OAAAqU,GACA,WAAA9L,GACA,UAAA6pD,GACA,YAAAzhD,GACA,SAAA0hD,EACA,EAEA,OACA,aACA,YACA,WACA,EACA,QACA,YACA,WACA,CACA,EAEA,OACA,OACA,UACA,CACA,EAEA,UACA,YACA,4BACA,EAEA,MACA,uEACA,CACA,EAEA,SACA,qBACA,gBACA,SAGA,gBACA,IACA,2CACA,6BACA,mBACA,EACA,OAAA/qD,EAAA,CACA,cAAAA,CAAA,EACAL,GAAA,2CACA,SACA,eACA,CACA,EACA,mBACA,gBACA,SAGA,gBACA,IACA,mDACA,6BACA,oBACA,gCACA,EACA,OAAAK,EAAA,CACA,cAAAA,CAAA,EACAL,GAAA,6CACA,SACA,eACA,CACA,CACA,CACA,89BChHO,SAASqrD,GAAU3uD,EAAK,CAC9B,OAAO,mBAAmBA,EAAI,QAAQ,MAAO,GAAG,CAAC,CAClD,CC0BA,MAAA3D,GAAA,CACA,gCAEA,YACA,SAAA6pC,GACA,kBAAA0oB,EACA,EAEA,OACA,aACA,YACA,UACA,QACA,CACA,CACA,EACA,OACA,OACA,aACA,cACA,gBACA,CACA,EACA,UACA,cACA,OAAAJ,GACA,2CAEA,gCAEA,EACA,WACA,yCACA,CACA,EACA,UAEA,sDACA,EACA,SAUA,uBAAAK,EAAA,YAAAC,EAAA,IAAA76C,EAAA,QAAA86C,CAAA,GACA,2EAAAF,EAAA,YAAAC,EAAA,IAAA76C,EAAA,QAAA86C,CAAA,EACA,EAOA,WAAArhD,GAAA,eAAAshD,EAAA,CAGA,GAFA,kBACA,sBACAA,EAAA,UACA,MAAA7+C,EAAA,MAAA8+C,GAAA,qCAAAD,CAAA,EACA,mBAAA7+C,EACA,OAAA3B,GAAA,CACA,MAAA0gD,EAAA,eACA,OAAAV,IACAU,EAAA,cAEAA,EAAA,SAAA1gD,EAAA,mBACA,8BAAAC,KAAA,MAAAD,EAAA,gBACA,GACA,IAAAA,GAAA,CACA,MAAAugD,EAAAvgD,EAAA,2BACA,OACA,KAAAmgD,GAAAngD,EAAAugD,EAAA,qBACA,YAAAvgD,EAAA,YACA,KAAAugD,EAAA,yBACA,IAAAJ,GAAAngD,EAAA,iBACA,QAAAugD,CACA,CACA,GACA,kBACA,kBACA,MACA,mBACA,iBAEA,MACA,CACA,kuBCKA1yD,GAAA,CACA,2BAEA,YACA,aAAAs3C,GACA,eAAAwb,GACA,YAAAC,GACA,WAAAhI,GACA,QAAArjD,GACA,OAAA2M,GACA,WAAA9L,GACA,aAAA0iD,GACA,WAAA+H,GACA,gBAAAC,GACA,UAAAC,GACA,YAAAviD,GACA,iBAAAwiD,EACA,EAEA,QAAApsD,EAAA,EAEA,OACA,aACA,YACA,UACA,QACA,CACA,CACA,EAEA,OACA,OACA,4BACA,eACA,YACA,iBACA,aACA,uBACA,CACA,EAEA,UACA,UACA,+BACA,EACA,YACA,uCACA,EACA,eACA,0CACA,EACA,0BACA,iCACA,EAGA,oBACA,sBACA,aACA,2BACA,6BACA,gCACA,kCACA,GACA,EACA,EAEA,iBACA,mBACA,iBACA,uBACA,4BAEA,yBACA,EAEA,iBACA,kDACA,EAEA,WACA,+CACA,EAEA,SACA,MAAAqsD,EAAA,cACA,QAAAvoB,KAAA,yCAAA+M,KAAA,kBAEA,kBAAAwb,CAAA,EACA,EAEA,gBACA,2BACA,EAEA,cACA,yBACA,EACA,eAEA,OADAC,GAAA,EACA,iCACA,CACA,EACA,OACA,WACA,qBACA,oBAEA,CACA,EACA,UAEA,uBACA,EACA,SACA,YACA,gBACA,EACA,aACA,4BACA,EACA,cACA,8BACA,EACA,iCAEA,6BACA,IACA,uEACA,OAAAC,EAAA,CAEA,cAAAA,CAAA,EACArsD,GAAA,4DACA,SAEA,4BACA,CACA,EACA,kBACA,0BACA,+EACA,iFACA,uBACA,EACA,CACA,EACA,iBACA,0BACA,gFACA,kFACA,uBACA,EACA,CACA,EACA,wBAAAG,EAAA,CACA,GAAAA,EAAA,CAEA,iCACA,IACA,gEACA,OAAAksD,EAAA,CAEA,cAAAA,CAAA,EACArsD,GAAA,6DACA,SAEA,gCACA,CACA,CACA,EACA,oBACA,mBACA,EACA,8BACA,MAAAyjC,EAAA,iBAEAtoC,EAAA,qEAEA,sBACA,IACA,4DAAAsoC,EAAA,QAAAtoC,EAAA,CACA,OAAAkxD,EAAA,CAEA,cAAAA,CAAA,EACArsD,GAAA,6DACA,SACA,oBAEA,sBAEA,gBACA,CACA,CACA,CACA,06HCrTAjH,GAAA,CACA,mBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,+iBCJAA,GAAA,CACA,8BACA,YACA,YAAAuzD,GACA,QAAArgD,GACA,YAAAvC,EACA,EACA,OACA,OACA,WACA,eAGA,4BACA,CACA,EACA,SAIA,iBACA,wBAIA,gBACA,yEACA,UACA,oBACA,eACA,GACA,MAAArJ,GAAA,CACA,cAAAA,CAAA,EACAL,GAAA,sEACA,eACA,GACA,CACA,CACA,sqBClDAjH,GAAA,CACA,uBACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,mnBCwDAwzD,GAAA5hD,GAAA,YAEA6hD,GAAA3sD,GAAA,+CACA,mBACA,WACA,qBACA,gCACA,QAEA9G,GAAA,CACA,8BAEA,YACA,OAAAqU,GACA,MAAAzD,GACA,SAAAi5B,GACA,WAAAqhB,GACA,UAAAwI,GACA,WAAAvI,GACA,YAAAx6C,EACA,EAEA,OACA,OACA,qBACA,qBACA,YACA,UACA,CACA,EAEA,UAEA,eACA,0CACA,EAEA,wBACA,yBACA,OAAA+5B,GAAA,CAAAA,EAAA,UAAAA,EAAA,QACA,EAGA,UACA,kCACA,IAAAA,IACA,CACA,GAAAA,EAAA,GACA,YAAAA,EAAA,WACA,EACA,CACA,EACA,qBACA,MACA,8BACA,gCAAAA,KAAA,gCAGA,6BACA,EACA,IAAApoC,EAAA,CACA,uBAAAA,CACA,CACA,EAMA,2BACA,MACA,yBAAAwtD,KAAA,iCACA,EACA,IAAAxtD,EAAA,CACA,oDACA,KAAAooC,KAAA,KAAApoC,EAAA,GACA,CACA,EAGA,sBACA,8BACA,EACA,2BACA,4BACA,EAGA,cACA,yCACA,EAEA,cACA,yCACA,CACA,EAEA,gBAEA,gCACA,MAAAiD,EAAA,uBACA,4BAAAA,CAAA,EAEA,mBACA,aACA,mDACA,EACA,CACA,EAEA,SAMA,YAAA7D,EAAA,CACA,gBACA,8CAEA,MAAAqqD,EAAArqD,EAAA,gBACAqmC,EAAA,eAEA2C,EAAA,yBACA,sCAAAA,EAAA,aAEA3C,EAAA,YACA,iBACA,0DAAAA,EAAA,mBAAA2C,EAAA,EAGAhpC,EAAA,gBACA,iBACA,EACAqmC,EAAA,WAAAgkB,CAAA,CACA,EAEA,uBAAAxmD,EAAA,CACA,0BAAAA,CAAA,EACA,IACA,qBAGA,MAAAuE,EAAA0pD,GAAA,SACA,mBAAA1pD,EAAA,OAEA,MAAAiiD,EAAA,MAAAn6C,GAAA,IAAA05C,GAAA,aAAAC,GAAA,SAAAoI,GAAApuD,CAAA,GACA,YAAAuE,EAAA,KACA,GAEA4gC,EAAA,yBACA,8CACA,sCAAAA,EAAA,aAEAqhB,EAAA,MACA,gEAAAA,EAAA,iBAAArhB,EAAA,CAEA,OAAApjC,EAAA,CACA,qEAAAA,CAAA,CACA,CACA,EAEA,cACA,6BAEA,eACA,oBAEA,EAEA,mBACA,0CACA,EAKA,mBACA,IAEA,qBAGA,MAAA/B,EAAA,MAAAkuD,GAAA,OACAluD,IACA,gBACA,4BAAAA,CAAA,GAEA,iBAEA,OAAA+B,EAAA,CACA,gBACA,8DAAAA,CAAA,CACA,CACA,EAKA,aACA,0BACA,0BACA,iBACA,eACA,CACA,CACA,ulFCtRAtH,GAAA,CACA,oCACA,gBACA,OACA,OACA,WACA,EACA,WACA,YACA,sBACA,EACA,MACA,YACA,UACA,CACA,CACA,gnBCZAA,GAAA,CACA,4BAEA,YACA,SAAA6pC,GACA,SAAA+pB,EACA,EAEA,UAEA,UACA,OACA,CACA,iCACA,eACA,EACA,CACA,gCACA,cACA,EACA,CACA,0CACA,uBACA,EACA,CACA,yCACA,sBACA,EACA,CACA,mCACA,iBACA,EACA,CACA,oCACA,SACA,CACA,CACA,EAEA,WACA,sCACA,EACA,iBACA,2BAAA9D,KAAA,uBACA,CACA,EACA,SACA,aAAA+D,EAAA,CACA,MAAA/uD,EAAA+uD,KAAA,IAAAA,EAAA,kBACA,8BAAA/uD,CAAA,EACA,mCACA,gCAAAA,CAAA,CACA,EACA,kBAAAgrD,EAAA,CACA,iDAAAA,EAAA,OACA,CACA,CACA,sZC3BA9vD,GAAA,CACA,wBACA,YACA,kBAAA8zD,GACA,mBAAAC,GACA,oBAAAC,GACA,uBAAAC,GACA,uBAAAC,GACA,qBAAAC,GACA,oBAAAxsD,EACA,EACA,OACA,MACA,YACA,YACA,CACA,EACA,OACA,OACA,kBAAAysD,GACA,gBAAAtJ,GAAA,qCACA,iBAAAA,GAAA,sCACA,2BACA,eACA,CACA,EACA,UAEA,eACA,0CACA,CACA,EACA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A,6BACA,+BACA,8BACA,CACA,EAEA,SACA,qBACA,gDACA,EACA,eAAA34E,EAAA,CAEA,MAAAouD,EADApuD,EAAA,yCACA,aACA,GAAAouD,EAAA,YACApqD,GAAA,4CACA,MACA,CAIA,GAHA,kDAAAoqD,CAAA,GAGA,iBAAA74C,KAAA,OAAA64C,CAAA,GACA,gEACAtwD,GAAA,yCAAAyX,KAAA,OAAA64C,CAAA,QACA,MACA,CAEA,2BACA,uDAAAA,CAAA,GAEA,IACA,gCAAAA,CAAA,EACA,2BACAtwD,GAAA,wBAAAswD,CAAA,CACA,OACApqD,GAAA,2DACA,CACA,EAGA,iBACA,0CACA,EACA,kBACA,4CACA,EAEA,uBACA,4BACA,EACA,sBAAA+0E,EAAAC,EAAAtO,EAAA,CAMA,GALA,kDAAAqO,CAAA,GAEA,4BAGA,kBAAAE,KAAA,OAAAF,CAAA,GACA,gEACA,MACA,CACA,4BAEA,IACA,MAAAE,EAAA,sDAAAF,EAAA,WAAAC,EAAA,QAAAtO,EAAA,EACA,2BAGA,mBACA,cACA,QACA,eAAAuO,EAAA,EACA,CACA,EACA,OACAj1E,GAAA,kEACA,SACA,2BACA,CACA,EACA,sBACA,4BACA,EAKA,uBACA,oBACA,CACA,CACA,qxJC3XAjH,GAAA,CACA,gBAEA,YACA,OAAAqU,GACA,cAAA8nE,GACA,aAAAC,GACA,gBAAAC,GACA,eAAAC,GACA,QAAAC,GACA,WAAAC,GACA,QAAAtpE,GACA,MAAAtC,GACA,eAAA6rE,GACA,uBAAAvoB,EACA,EAEA,QACA3gD,EACA,EAGA,OACA,gBACA,YACA,cACA,EACA,eACA,YACA,cACA,EACA,iBACA,YACA,cACA,EACA,eACA,YACA,cACA,CACA,EAEA,OACA,OAGA,QAAAmpE,GAGA,eAAAb,GACA,kBACA,CACA,EAEA,UAEA,eACA,0CACA,EACA,WACA,sCACA,EACA,iBACA,4CACA,EACA,SACA,oCACA,EACA,UACA,qCACA,EACA,WACA,sCACA,EACA,cACA,yCACA,EACA,eACA,mCACA,EACA,cACA,0BACA,EAMA,cACA,yCACA,EA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","names":["sync","store","router","options","moduleName","cloneRoute","state","transition","isTimeTraveling","currentPath","storeUnwatch","route","fullPath","afterEachUnHook","to","from","clone","_sfc_main","_sfc_render","_vm","_c","_sfc_staticRenderFns","__component__","normalizeComponent","NcActionSeparator","NcAppContentDetails","NcAppContentList","NcAppNavigationList","NcAppNavigationToggle","Vue","useIsMobile","subscribe","emit","createFocusTrap","getTrapStack","useHotKey","unsubscribe","bodyStyles","animationLength","open","element","tabbable","logger","event","activeElement","$event","NcAppNavigation","NcActions","headingLevel","NcAppNavigationCaption","id","newId","oldId","newName","NcAppSettingsSection","value","count","getCanonicalLocale","slotContent","h","NcCounterBubble","NcVNodes","major","newValue","navigate","routerLinkHref","e","isActive","NcListItem","_sfc_main$1","_sfc_render$1","_sfc_staticRenderFns$1","__component__$1","NcUserBubbleDiv","NcAvatar","NcPopover","url","RouterLink","attrs","NcUserBubble","spawnDialog","dialog","props","onClose","el","vue","h2","rest","v","toRaw","IconMove","IconCopy","__defProp","__defNormalProp","obj","key","__publicField","FilePickerClosed","FilePicker","title","multiSelect","mimeTypeFilter","directoriesAllowed","buttons","path","filter","container","disabledNavigation","FilePickerVue","__vitePreload","resolve","reject","_a","nodes","node","FilePickerBuilder","ms","button","factory","type","_b","target","basename","label","t","n","allow","getFilePickerBuilder","CopyToClipboardMixin","showSuccess","showError","CircleActionsMixin","Circle","confirm","member","error","initiator","joinCircle","Member","Actions","CheckboxRadioSwitch","ContentHeading","PUBLIC_CIRCLE_CONFIG","config","checked","prevConfig","circleData","editCircle","CircleEdit","RouterMixin","IconCheck","IconClose","IconDelete","IconExitToApp","IconShieldCheck","NcActionButton","NcActionText","MemberLevels","CIRCLES_MEMBER_LEVELS","levels","level","MemberStatus","changeMemberLevel","global","module","require$$0","this","ownKeys","object","enumerableOnly","keys","symbols","sym","_objectSpread2","i","source","_defineProperty","_classCallCheck","instance","Constructor","_defineProperties","descriptor","_createClass","protoProps","staticProps","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_arrayLikeToArray","iter","o","minLen","len","arr2","DIRECTION_TYPE","CALC_TYPE","LEADING_BUFFER","Virtual","param","callUpdate","range","start","_this","size","acc","val","offset","overs","low","middle","middleOffset","high","givenIndex","indexSize","index","end","keeps","total","theoryEnd","truelyEnd","lastIndex","VirtualProps","ItemProps","SlotProps","Wrapper","Item","tag","component","_this$extraProps","extraProps","_this$scopedSlots","scopedSlots","uniqueKey","slotComponent","Slot","EVENT_TYPE","SLOT_TYPE","VirtualList","root","shepherd","rect","defaultView","offsetFront","dataKey","dataSource","hasInit","evt","clientSize","scrollSize","slots","_this$range","dataSources","itemClass","itemTag","itemStyle","isHorizontal","dataComponent","itemScopedSlots","_this$$slots","header","footer","_this$range2","padFront","padBehind","pageMode","rootTag","wrapTag","wrapClass","wrapStyle","headerTag","headerClass","headerStyle","footerTag","footerClass","footerStyle","paddingStyle","wrapperStyle","UserBubble","EmptyContent","EntityBubble","IconSearch","IconLoading","Modal","types","invalidTypes","data","EntitySearchResult","selection","entity","dataSet","dataList","debounce","shareType","SHARES_TYPES_MEMBER_MAP","maxAutocompleteResults","getSuggestions","search","request","axios","generateOcsUrl","exact","rawExactSuggestions","elem","rawSuggestions","exactSuggestions","result","share","formatResults","a","b","suggestions","allSuggestions","nameCounts","finalResults","item","getRecommendations","_sfc_main$P","defineComponent","EntityPicker","IconContact","IconAdd","MemberListGroup","NcButton","NcEmptyContent","NcLoadingIcon","isMobile","CIRCLES_MEMBER_GROUPING","list","userType","labelStandalone","members","circleId","results","term","entry","showWarning","ENFORCE_PASSWORD_PROTECTION","USE_UNIQUE_PASSWORD","UNIQUE_PASSWORD","Button","Avatar","CircleConfigs","CirclePasswordSettings","DetailsHeader","ListItem","Cog","IconAccountGroup","Login","Logout","MemberList","RichContenteditable","avatarList","ref","width","useElementSize","avatarWidth","maxMembers","res","p","providerId","response","callback","args","description","name","AppContent","CircleDetails","AccountGroup","newCircle","cumsum","values","valueof","sum","max","min","noop","dispatch","_","Dispatch","parseTypenames","typenames","typename","T","get","set","copy","that","c","xhtml","namespaces","namespace","prefix","creatorInherit","document","uri","creatorFixed","fullname","creator","none","selector","selection_select","select","groups","m","subgroups","j","group","subgroup","subnode","Selection","array","x","empty","selectorAll","arrayAll","selection_selectAll","parents","matcher","childMatcher","find","childFind","match","childFirst","selection_selectChild","children","childrenFilter","selection_selectChildren","selection_filter","sparse","update","selection_enter","EnterNode","parent","datum","child","next","constant$3","bindIndex","enter","exit","groupLength","dataLength","bindKey","nodeByKeyValue","keyValues","keyValue","selection_data","bind","constant","arraylike","enterGroup","updateGroup","exitGroup","i0","i1","previous","selection_exit","selection_join","onenter","onupdate","onexit","selection_merge","context","groups0","groups1","m0","m1","merges","group0","group1","merge","selection_order","selection_sort","compare","ascending","compareNode","sortgroups","sortgroup","selection_call","selection_nodes","selection_node","selection_size","selection_empty","selection_each","attrRemove","attrRemoveNS","attrConstant","attrConstantNS","attrFunction","attrFunctionNS","selection_attr","styleRemove","styleConstant","priority","styleFunction","selection_style","styleValue","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","string","classList","ClassList","classedAdd","names","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textConstant","textFunction","selection_text","htmlRemove","htmlConstant","htmlFunction","selection_html","raise","selection_raise","lower","selection_lower","selection_append","create","constantNull","selection_insert","before","remove","selection_remove","selection_cloneShallow","selection_cloneDeep","selection_clone","deep","selection_datum","contextListener","listener","onRemove","on","onAdd","selection_on","dispatchEvent","params","window","dispatchConstant","dispatchFunction","selection_dispatch","selection_iterator","selection_selection","sourceEvent","pointer","svg","point","nonpassivecapture","noevent$1","dragDisable","view","noevent","yesdrag","noclick","define","constructor","prototype","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","color","channels","color_formatHex","color_formatHex8","color_formatHsl","color_formatRgb","hslConvert","format","l","rgbn","Rgb","rgba","hsla","r","g","rgbConvert","rgb","opacity","k","clampi","clampa","rgb_formatHex","rgb_formatHex8","rgb_formatRgb","hex","s","Hsl","hsl","m2","hsl2rgb","clamph","clampt","constant$2","linear","d","exponential","y","gamma","nogamma","interpolateRgb","rgbGamma","colorRgb","interpolateNumber","reA","reB","zero","one","interpolateString","bi","am","bm","bs","q","number","degrees","identity","decompose","f","scaleX","scaleY","skewX","svgNode","parseCss","parseSvg","interpolateTransform","parse","pxComma","pxParen","degParen","pop","translate","xa","ya","xb","yb","rotate","scale","interpolateTransformCss","interpolateTransformSvg","epsilon2","cosh","sinh","tanh","interpolateZoom","zoomRho","rho","rho2","rho4","zoom","p0","p1","ux0","uy0","w0","ux1","uy1","w1","dx","dy","d2","S","d1","b0","b1","r0","r1","coshr0","u","_1","_2","_4","frame","timeout","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","now","clearNow","Timer","timer","delay","time","sleep","timerFlush","wake","nap","poke","t0","t1","t2","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","timing","schedules","init","self","tween","stop","tick","interrupt","active","selection_interrupt","tweenRemove","tween0","tween1","tweenFunction","transition_tween","tweenValue","interpolate","value1","string00","string1","interpolate0","string0","string10","transition_attr","attrInterpolate","attrInterpolateNS","attrTweenNS","attrTween","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","easeVarying","transition_easeVarying","transition_filter","Transition","transition_merge","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","inherit","transition_selection","styleNull","style","styleMaybeRemove","listener0","transition_style","styleInterpolate","styleTween","transition_styleTween","transition_text","textInterpolate","textTween","transition_textTween","transition_transition","id0","id1","transition_end","cancel","selection_prototype","cubicInOut","defaultTiming","easeCubicInOut","selection_transition","pi","tau","epsilon","tauEpsilon","Path","x1","y1","x2","y2","x0","y0","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","t01","t21","a0","a1","ccw","cw","da","w","node_count$1","node_each$1","node_eachBefore$1","node_eachAfter$1","node_find","node_sum$1","node_sort$1","node_path$1","ancestor","leastCommonAncestor","aNodes","bNodes","node_ancestors$1","node_descendants$1","node_leaves$1","leaves","node_links$1","links","node_iterator","current","hierarchy","mapChildren","objectChildren","Node","childs","computeHeight","node_copy","copyData","height","node_count","node_each","node_eachAfter","node_eachBefore","node_sum","node_sort","node_path","node_ancestors","node_descendants","node_leaves","node_links","optional","required","preroot","ambiguous","imputed","defaultId","defaultParentId","stratify","parentId","currentId","currentParentId","nodeId","nodeKey","nodeByKey","I","normalize","P","parentof","slash","defaultSeparation","nextLeft","nextRight","moveSubtree","wm","wp","shift","change","executeShifts","nextAncestor","vim","TreeNode","treeRoot","tree","separation","nodeSize","firstWalk","secondWalk","sizeNode","left","right","bottom","tx","kx","ky","siblings","midpoint","apportion","vip","vop","vom","sip","sop","sim","som","constant$1","slice","Bump","bumpX","linkSource","linkTarget","link","curve","pointX","pointY","output","buffer","argv","linkHorizontal","ZoomEvent","transform","Transform","location","nopropagation","defaultFilter","defaultExtent","defaultTransform","defaultWheelDelta","defaultTouchable","defaultConstrain","extent","translateExtent","dx0","dx1","dy0","dy1","constrain","wheelDelta","touchable","scaleExtent","duration","listeners","touchstarting","touchfirst","touchending","touchDelay","wheelDelay","clickDistance2","tapDistance","wheeled","mousedowned","dblclicked","touchstarted","touchmoved","touchended","collection","gesture","k0","k1","centroid","clean","Gesture","wheelidled","currentTarget","mousemoved","mouseupped","dragEnable","touches","started","l0","l1","dp","dl","valued","defaultChildren","version","packageInfo","defaults","flextree","opts","accessor","opt","layout","wtree","wrap","getWrapper","getFlexNode","spacing","FlexNode","oNode","ancs","kid","e0","e1","layoutChildren","resolveX","FlexClass","treeData","_wrap","kidsData","kd","hl","arg","kids","_dump","i2","kdumps","lastLows","lowY","separate","lows","updateLows","shiftChange","positionRoot","prevSum","parentX","lastShiftSum","lastChangeSum","shiftSum","changeSum","lSib","curSubtree","rContour","rSumMods","lContour","lSumMods","isFirst","dist","distributeExtra","rightBottom","leftBottom","nextRContour","nextLContour","setLThr","setRThr","subtree","distance","curSubtreeI","leftSibI","delta","firstChild","lExt","diff","rExt","kf","prelim","d3","zoomIdentity","OrgChart$1","d3Node","n1","n2","step","currentIndex","ex","ey","mx","my","xrvs","yrvs","rdef","offsets","visibleConnections","conn","labelWidth","rootMargin","centerY","centerX","siblingsMargin","childrenMargin","compactViewIndex","chartHeight","chartWidth","elementTag","_children","nodeStore","zoomLevel","containerRect","calc","behaviors","nodeA","nodeB","chart","descendants","nodeFound","aggegator","grouped","compactChildren","evenMaxColumnDimension","oddMaxColumnDimension","columnSize","rowsMapNew","reducedGroup","rowSize","fch","offsetX","cumSum","connections","allNodesMap","visibleNodesMap","connection","defsString","existingString","linkSelection","linkUpdate","xo","yo","connectionsSel","connUpdate","xs","ys","xt","yt","nodesSelection","nodeEnter","xj","yj","nodeUpdate","nodeButtonGroups","nodeExitTransition","maxDepthNode","centeredNode","centeredNodes","spread","flag","ch","expandNodesFirst","descendantsBefore","hiddenNodesMap","localNode","_hierarchyHeight","centerG","zoomBehavior","lastTransform","scaleVal","animate","onCompleted","minX","maxX","minY","maxY","newPagingIndex","expandedFlag","xhr","reader","full","onLoad","save","backgroundColor","svgImg","exportImage","dataUrl","imageName","allNodes","isSvg","onAlreadySerialized","saveAs","filename","serializeString","xmlns","xlinkns","svgns","fragment","walker","attr","quality","image","canvas","dt","text","fontSize","fontWeight","defaultFont","ctx","NcSelect","head","getLocale","inputProps","OrgChart","containerHTMLElement","ComponentClass","ChartTemplate","uid","d3.select","dRect","contactsByUid","contacts","addressbook","headManagers","tempContacts","contact","prev","transformNode","manager","charts","managerNode","getChart","enc","dec","encode","inData","parse_url","str","Buffer","encode_numeric","encode_alphanum","encode_url","encode_8bit","pushBits","bit","bits","ALPHANUM","path_res","calculateEC","msg","ec_len","poly","generatorPolynomial","log_k","log","exp","GF256_BASE","EXP_TABLE","LOG_TABLE","POLYNOMIALS","num","N","matrix","zeros","fillFinders","pixel","fillAlignAndTiming","fillStub","fillReserved","FORMATS","VERSIONS","gf15","gf18","formats_mask","EC_LEVELS","ec_level","mask","F","V","fillData","MASK_FUNCTIONS","row","col","dir","mask_fn","put","byte","calculatePenalty","penalty","J","numDark","getMatrix","bestMask","cell","getTemplate","message","mappedVersions","deepCopy","fillTemplate","template","blocks","messageUpdated","pad","QR","versions","length","num_template","block","colorName","isArrayish","concat","swizzle","simpleSwizzleModule","fn","colorNames","require$$1","hasOwnProperty","reverseNames","cs","colorStringModule","model","abbr","per","keyword","hexAlpha","clamp","alpha","hwb","hexDouble","hwba","getOptions","inOptions","BITMAP_OPTIONS","VECTOR_OPTIONS","colorToHex","colorString","getSVGPath","margin","borderRadius","rectangles","column","leftX","rightX","topY","bottomY","rectangle","commonOptions","VERSION","_hasBuffer","_TD","_TE","b64ch","b64chs","b64tab","tab","b64re","_fromCC","_U8Afrom","it","_mkUriSafe","src","_tidyB64","btoaPolyfill","bin","u32","c0","c1","c2","asc","_btoa","_fromUint8Array","u8a","strs","fromUint8Array","urlsafe","cb_utob","cc","re_utob","utob","_encode","encodeURI","re_btou","cb_btou","cccc","cp","btou","atobPolyfill","u24","r2","_atob","_toUint8Array","toUint8Array","_unURI","_decode","decode","isValid","_noEnum","extendString","_add","body","extendUint8Array","extendBuiltins","gBase64","getSVG","createSVG","te","logo","logoWidth","logoHeight","bgColor","imageWidth","imageHeight","actualSize","XY","imageWidthStr","imageHeightStr","xmlTag","svgOpeningTag","svgBody","getSVGBody","svgEndTag","logoImage","getLogoImage","imageBase64","Base64","PropertyTitleIcon","ActionButton","ChevronLeft","DotsHorizontalIcon","OrgChartsMixin","Contact","rfcProps","prop","others","defaultjCal","property","ICAL","defaultData","defaultValue","_typeof","IS_BROWSER","WINDOW","IS_TOUCH_DEVICE","HAS_POINTER_EVENT","NAMESPACE","ACTION_ALL","ACTION_CROP","ACTION_MOVE","ACTION_ZOOM","ACTION_EAST","ACTION_WEST","ACTION_SOUTH","ACTION_NORTH","ACTION_NORTH_EAST","ACTION_NORTH_WEST","ACTION_SOUTH_EAST","ACTION_SOUTH_WEST","CLASS_CROP","CLASS_DISABLED","CLASS_HIDDEN","CLASS_HIDE","CLASS_INVISIBLE","CLASS_MODAL","CLASS_MOVE","DATA_ACTION","DATA_PREVIEW","DRAG_MODE_CROP","DRAG_MODE_MOVE","DRAG_MODE_NONE","EVENT_CROP","EVENT_CROP_END","EVENT_CROP_MOVE","EVENT_CROP_START","EVENT_DBLCLICK","EVENT_TOUCH_START","EVENT_TOUCH_MOVE","EVENT_TOUCH_END","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_READY","EVENT_RESIZE","EVENT_WHEEL","EVENT_ZOOM","MIME_TYPE_JPEG","REGEXP_ACTIONS","REGEXP_DATA_URL","REGEXP_DATA_URL_JPEG","REGEXP_TAG_NAME","MIN_CONTAINER_WIDTH","MIN_CONTAINER_HEIGHT","DEFAULTS","TEMPLATE","isNaN","isNumber","isPositiveNumber","isUndefined","isObject","isPlainObject","_constructor","isFunction","toArray","forEach","assign","_len","_key","REGEXP_DECIMALS","normalizeDecimalNumber","times","REGEXP_SUFFIX","setStyle","styles","hasClass","addClass","className","removeClass","toggleClass","added","REGEXP_CAMEL_CASE","toParamCase","getData","setData","removeData","REGEXP_SPACES","onceSupported","supported","once","removeListener","handler","addListener","_handler","_element$listeners","_len2","_key2","getOffset","box","REGEXP_ORIGINS","isCrossOriginURL","parts","addTimestamp","timestamp","getTransforms","_ref","translateX","translateY","getMaxZoomRatio","pointers","pointers2","maxRatio","pointerId","pointer2","z1","z2","ratio","getPointer","_ref2","endOnly","pageX","pageY","getPointersCenter","_ref3","startX","startY","getAdjustedSizes","_ref4","aspectRatio","isValidWidth","isValidHeight","adjustedWidth","getRotatedSizes","_ref5","degree","arc","sinArc","cosArc","newWidth","newHeight","getSourceCanvas","_ref6","_ref7","_ref8","imageAspectRatio","imageNaturalWidth","imageNaturalHeight","_ref6$rotate","_ref6$scaleX","_ref6$scaleY","naturalWidth","naturalHeight","_ref8$fillColor","fillColor","_ref8$imageSmoothingE","imageSmoothingEnabled","_ref8$imageSmoothingQ","imageSmoothingQuality","_ref8$maxWidth","maxWidth","_ref8$maxHeight","maxHeight","_ref8$minWidth","minWidth","_ref8$minHeight","minHeight","maxSizes","minSizes","destMaxSizes","destMinSizes","destWidth","destHeight","fromCharCode","getStringFromCharCode","dataView","REGEXP_DATA_URL_HEAD","dataURLToArrayBuffer","dataURL","base64","binary","arrayBuffer","uint8","arrayBufferToDataURL","mimeType","chunks","chunkSize","resetAndGetOrientation","orientation","littleEndian","app1Start","ifdStart","exifIDCode","tiffOffset","endianness","firstIFDOffset","_length","_offset","parseOrientation","render","cropper","containerData","imageData","viewMode","rotated","canvasWidth","canvasHeight","canvasData","sizeLimited","positionLimited","cropBoxData","cropped","minCanvasWidth","minCanvasHeight","_getAdjustedSizes","newCanvasLeft","newCanvasTop","changed","transformed","_getRotatedSizes","autoCropArea","limited","minCropBoxWidth","minCropBoxHeight","maxCropBoxWidth","maxCropBoxHeight","preview","crossOrigin","alt","previews","img","cropBoxWidth","cropBoxHeight","top","originalWidth","originalHeight","events","handlers","ratioX","ratioY","action","touch","minLeft","minTop","renderable","check","side","methods","hasSameSize","offsetY","_this$canvasData","_originalEvent","pivot","center","_scaleX","_scaleY","rounded","widthChanged","heightChanged","_this$getData","initialX","initialY","initialWidth","initialHeight","_options$imageSmoothi","sourceWidth","sourceHeight","srcX","srcY","srcWidth","srcHeight","dstX","dstY","dstWidth","dstHeight","mode","dragBox","face","croppable","movable","AnotherCropper","Cropper","tagName","_parseOrientation","crossOriginUrl","_this2","isIOSWebKit","done","sizingImage","cropBox","parentNode","VueCropper","_cropperjs","_cropperjs2","_interopRequireDefault","_objectWithoutProperties","previewPropType","_default","crossorigin","_$options$props","onlyColorChanged","supportedNetworks","loadState","ActionLink","IconCloudDownload","IconDownload","IconUpload","IconFolder","IconImage","NcModal","generateRemoteUrl","getCurrentUser","emails","availableSocial","availableMessenger","available","imageSvg","sanitizeSVG","ccc","file","word","uint","bytes","nextcloudMajorVersion","photo","photoUrl","blob","base64data","network","generateUrl","showInfo","defaultAlphabetIndexMap","isNumberCode","code","naturalCompare","lengthA","lengthB","indexA","indexB","alphabetIndexMap","firstDifferenceInLeadingZeros","buildAlphabetIndexMap","charCodeA","charCodeB","numStartA","numStartB","numEndA","numEndB","difference","alphabetIndexMapCache","alphabet","existingMap","indexMap","maxCharCode","maxCode","char","naturalCompare_1","PropertyTitle","moment","isTalkEnabled","profileEnabled","AddNewProp","AppContentDetails","ContactAvatar","ContactDetailsProperty","IconMail","IconMessage","IconCall","IconAccount","IconQr","CakeIcon","PencilIcon","CheckIcon","PropertyGroups","PropertyRev","PropertySelect","NcRelatedResourcesPanel","FolderMultipleImage","mitt","EyeCircleIcon","nameA","nameB","option","organization","tel","address","newContact","oldContact","jCal","svgBytes","svgString","addressbookId","localContact","validate","propModel","propType","BaseAvatar","AppContentList","ContactsListItem","old","oldIndex","pos","scroller","ContactDetails","ContactsList","groupName","ProcessingScreen","appendContactToGroup","AddToGroupView","limit","pLimit","requests","ActionText","AppNavigationItem","ExitToApp","IconCog","LocationEnter","AccountStar","AccountGroupOutline","isGroupSharingEnabled","IconGroup","IconUser","urldecode","addressBookSharee","user","displayName","isGroup","query","client","allowedCalendarUserTypes","ActionCheckbox","ActionInput","IconRename","IconContactPlus","IconShare","ShareAddressBook","allGroups","usePrincipalsStore","err","NcTextField","CancelToken","picker","IconError","encodePath","IconList","orderKey","AppSettingsDialog","AppSettingsSection","SettingsAddressbook","SettingsNewAddressbook","SettingsImportContacts","SettingsSortContacts","CONTACTS_SETTINGS","setting","download","strFileName","strMimeType","defaultMime","payload","anchor","toString","myBlob","fileName","ajax","dataUrlToBlob","saver","tempUiArr","strUrl","decoder","binData","uiArr","winMode","hookCallback","hooks","setHookCallback","isArray","input","hasOwnProp","isObjectEmpty","isDate","map","arrLen","createUTC","locale","strict","createLocalOrUTC","defaultParsingFlags","getParsingFlags","some","fun","flags","parsedParts","isNowValid","createInvalid","momentProperties","updateInProgress","copyConfig","momentPropertiesLen","Moment","isMoment","warn","deprecate","firstTime","argLen","deprecations","deprecateSimple","mergeConfigs","parentConfig","childConfig","Locale","defaultCalendar","calendar","mom","zeroFill","targetLength","forceSign","absNumber","zerosToFill","sign","formattingTokens","localFormattingTokens","formatFunctions","formatTokenFunctions","addFormatToken","token","padded","ordinal","func","removeFormattingTokens","makeFormatFunction","formatMoment","expandFormat","replaceLongDateFormatTokens","defaultLongDateFormat","longDateFormat","formatUpper","tok","defaultInvalidDate","invalidDate","defaultOrdinal","defaultDayOfMonthOrdinalParse","defaultRelativeTime","relativeTime","withoutSuffix","isFuture","pastFuture","aliases","normalizeUnits","units","normalizeObjectUnits","inputObject","normalizedInput","normalizedProp","priorities","getPrioritizedUnits","unitsObj","match1","match2","match3","match4","match6","match1to2","match3to4","match5to6","match1to3","match1to4","match1to6","matchUnsigned","matchSigned","matchOffset","matchShortOffset","matchTimestamp","matchWord","match1to2NoLeadingZero","match1to2HasZero","regexes","addRegexToken","regex","strictRegex","isStrict","localeData","getParseRegexForToken","unescapeFormat","regexEscape","matched","p2","p3","p4","absFloor","toInt","argumentForCoercion","coercedNumber","tokens","addParseToken","tokenLen","addWeekParseToken","addTimeToArrayFromToken","isLeapYear","year","YEAR","MONTH","DATE","HOUR","MINUTE","SECOND","MILLISECOND","WEEK","WEEKDAY","daysInYear","getSetYear","makeGetSet","getIsLeapYear","unit","keepTime","set$1","isUTC","month","date","stringGet","stringSet","prioritized","prioritizedLen","mod","indexOf","daysInMonth","modMonth","defaultLocaleMonths","defaultLocaleMonthsShort","MONTHS_IN_FORMAT","defaultMonthsShortRegex","defaultMonthsRegex","localeMonths","localeMonthsShort","handleStrictParse","monthName","ii","llc","localeMonthsParse","setMonth","getSetMonth","getDaysInMonth","monthsShortRegex","computeMonthsParse","monthsRegex","cmpLenRev","shortPieces","longPieces","mixedPieces","shortP","longP","createDate","M","createUTCDate","firstWeekOffset","dow","doy","fwd","fwdlw","dayOfYearFromWeeks","week","weekday","localWeekday","weekOffset","dayOfYear","resYear","resDayOfYear","weekOfYear","resWeek","weeksInYear","weekOffsetNext","localeWeek","defaultLocaleWeek","localeFirstDayOfWeek","localeFirstDayOfYear","getSetWeek","getSetISOWeek","parseWeekday","parseIsoWeekday","shiftWeekdays","ws","defaultLocaleWeekdays","defaultLocaleWeekdaysShort","defaultLocaleWeekdaysMin","defaultWeekdaysRegex","defaultWeekdaysShortRegex","defaultWeekdaysMinRegex","localeWeekdays","weekdays","localeWeekdaysShort","localeWeekdaysMin","handleStrictParse$1","weekdayName","localeWeekdaysParse","getSetDayOfWeek","day","getSetLocaleDayOfWeek","getSetISODayOfWeek","weekdaysRegex","computeWeekdaysParse","weekdaysShortRegex","weekdaysMinRegex","minPieces","minp","shortp","longp","hFormat","kFormat","meridiem","lowercase","matchMeridiem","kInput","pos1","pos2","localeIsPM","defaultLocaleMeridiemParse","getSetHour","localeMeridiem","hours","minutes","isLower","baseConfig","locales","localeFamilies","globalLocale","commonPrefix","arr1","minl","normalizeLocale","chooseLocale","split","loadLocale","isLocaleNameSane","oldLocale","aliasedRequire","getSetGlobalLocale","defineLocale","updateLocale","tmpLocale","listLocales","checkOverflow","overflow","extendedIsoRegex","basicIsoRegex","tzRegex","isoDates","isoTimes","aspNetJsonRegex","rfc2822","obsOffsets","configFromISO","allowTime","dateFormat","timeFormat","tzFormat","isoDatesLen","isoTimesLen","configFromStringAndFormat","extractFromRFC2822Strings","yearStr","monthStr","dayStr","hourStr","minuteStr","secondStr","untruncateYear","preprocessRFC2822","checkWeekday","weekdayStr","parsedInput","weekdayProvided","weekdayActual","calculateOffset","obsOffset","militaryOffset","numOffset","hm","configFromRFC2822","parsedArray","configFromString","currentDateArray","nowValue","configFromArray","currentDate","expectedWeekday","yearToUse","dayOfYearFromWeekInfo","weekYear","temp","weekdayOverflow","curWeek","createLocal","skipped","stringLength","totalParsedInputLength","era","meridiemFixWrap","hour","isPm","configFromStringAndArray","tempConfig","bestMoment","scoreToBeat","currentScore","validFormatFound","bestFormatIsValid","configfLen","configFromObject","dayOrDate","createFromConfig","prepareConfig","configFromInput","prototypeMin","other","prototypeMax","pickBy","moments","ordering","isDurationValid","unitHasDecimal","orderLen","isValid$1","createInvalid$1","createDuration","Duration","years","quarters","months","weeks","days","seconds","milliseconds","isDuration","absRound","compareArrays","array1","array2","dontConvert","lengthDiff","diffs","separator","offsetFromString","chunkOffset","matches","chunk","cloneWithOffset","getDateOffset","getSetOffset","keepLocalTime","keepMinutes","localAdjust","addSubtract","getSetZone","setOffsetToUTC","setOffsetToLocal","setOffsetToParsedOffset","tZone","hasAlignedHourOffset","isDaylightSavingTime","isDaylightSavingTimeShifted","isLocal","isUtcOffset","isUtc","aspNetRegex","isoRegex","ret","diffRes","parseIso","momentsDifference","inp","positiveMomentsDifference","base","createAdder","direction","period","dur","tmp","isAdding","updateOffset","add","subtract","isString","isMomentInput","isNumberOrStringArray","isMomentInputObject","objectTest","propertyTest","properties","propertyLen","arrayTest","dataTypeTest","isCalendarSpec","getCalendarFormat","myMoment","calendar$1","formats","sod","isAfter","localInput","isBefore","isBetween","inclusivity","localFrom","localTo","isSame","inputMs","isSameOrAfter","isSameOrBefore","asFloat","zoneDelta","monthDiff","wholeMonthDiff","anchor2","adjust","toISOString","keepOffset","utc","inspect","zone","datetime","suffix","inputString","fromNow","toNow","newLocaleData","lang","MS_PER_SECOND","MS_PER_MINUTE","MS_PER_HOUR","MS_PER_400_YEARS","mod$1","dividend","divisor","localStartOfDate","utcStartOfDate","startOf","startOfDate","endOf","valueOf","unix","toDate","toObject","toJSON","isValid$2","parsingFlags","invalidAt","creationData","matchEraAbbr","matchEraName","matchEraNarrow","matchEraYearOrdinal","localeEras","eras","localeErasParse","eraName","narrow","localeErasConvertYear","getEraName","getEraNarrow","getEraAbbr","getEraYear","erasNameRegex","computeErasParse","erasAbbrRegex","erasNarrowRegex","abbrPieces","namePieces","narrowPieces","erasName","erasAbbr","erasNarrow","addWeekYearFormatToken","getter","getSetWeekYear","getSetWeekYearHelper","getSetISOWeekYear","getISOWeeksInYear","getISOWeeksInISOWeekYear","getWeeksInYear","weekInfo","getWeeksInWeekYear","weeksTarget","setWeekAll","dayOfYearData","getSetQuarter","getSetDayOfMonth","getSetDayOfYear","getSetMinute","getSetSecond","getSetMillisecond","parseMs","getZoneAbbr","getZoneName","proto","createUnix","createInZone","preParsePostFormat","proto$1","get$1","field","setter","listMonthsImpl","out","listWeekdaysImpl","localeSorted","listMonths","listMonthsShort","listWeekdays","listWeekdaysShort","listWeekdaysMin","mathAbs","abs","addSubtract$1","add$1","subtract$1","absCeil","bubble","monthsFromDays","monthsToDays","daysToMonths","as","makeAs","alias","asMilliseconds","asSeconds","asMinutes","asHours","asDays","asWeeks","asMonths","asQuarters","asYears","valueOf$1","clone$1","get$2","makeGetter","round","thresholds","substituteTimeAgo","relativeTime$1","posNegDuration","getSetRelativeTimeRounding","roundingFunction","getSetRelativeTimeThreshold","threshold","humanize","argWithSuffix","argThresholds","withSuffix","th","abs$1","toISOString$1","totalSign","ymSign","daysSign","hmsSign","proto$2","renameContactFromGroup","oldGroupName","newGroupName","foundGroups","currentGroups","removeContactFromGroup","IconEmail","groupId","contactFromDropData","contactFromStore","groupedContacts","vcardPromise","content","email","CIRCLE_DESC","getCapabilities","isContactsInteractionEnabled","AppNavigation","AppNavigationCaption","CircleNavigationItem","ContactsSettings","GroupNavigationItem","IconRecentlyContacted","NewCircleIntro","ELLIPSIS_COUNT","GROUP_ALL_CONTACTS","CHART_ALL_CONTACTS","GROUP_NO_GROUP_CONTACTS","GROUP_RECENTLY_CONTACTED","isCirclesEnabled","menu","recentlyIndex","circleName","isPersonal","circle","CircleContent","ChartContent","ContactsContent","ContactsPicker","Content","ImportView","RootNavigation","appName","ROUTE_CIRCLE","addressbooks","rev","appVersion","inList","Router","Contacts","ROUTE_CHART","PiniaVuePlugin","pinia","createPinia","ClickOutside","VTooltip","App"],"ignoreList":[0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,22,23,24,25,28,29,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,163,164,165,166,167,168,169,170,171,172,173,174,175,176,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,198,199,200,201,202,203,205,218,219,220,222,223,229,231,233,236,237,240],"sources":["../node_modules/vuex-router-sync/index.js","../src/ContactsRoot.vue","../node_modules/@nextcloud/vue/dist/Components/NcActionSeparator.mjs","../node_modules/@nextcloud/vue/dist/Components/NcAppContentDetails.mjs","../node_modules/@nextcloud/vue/dist/Components/NcAppContentList.mjs","../node_modules/@nextcloud/vue/dist/Components/NcAppNavigationList.mjs","../node_modules/@nextcloud/vue/dist/chunks/NcAppNavigation-H8Gvbq5E.mjs","../node_modules/@nextcloud/vue/dist/chunks/NcAppNavigationCaption-C0Fkd9G7.mjs","../node_modules/@nextcloud/vue/dist/Components/NcAppSettingsSection.mjs","../node_modules/@nextcloud/vue/dist/chunks/NcCounterBubble-CDfRYl8B.mjs","../node_modules/@nextcloud/vue/dist/chunks/NcListItem-BGoyHTZy.mjs","../node_modules/@nextcloud/vue/dist/chunks/NcUserBubble-cO5krePG.mjs","../node_modules/@nextcloud/dialogs/dist/index.mjs","../node_modules/vue-material-design-icons/AccountGroup.vue","../node_modules/vue-material-design-icons/Cog.vue","../node_modules/vue-material-design-icons/Login.vue","../node_modules/vue-material-design-icons/Logout.vue","../src/mixins/CopyToClipboardMixin.js","../src/mixins/CircleActionsMixin.js","../src/components/DetailsHeader.vue","../src/components/CircleDetails/ContentHeading.vue","../src/components/CircleDetails/CircleConfigs.vue","../node_modules/vue-material-design-icons/Check.vue","../node_modules/vue-material-design-icons/Close.vue","../node_modules/vue-material-design-icons/ExitToApp.vue","../node_modules/vue-material-design-icons/ShieldCheck.vue","../src/mixins/RouterMixin.js","../src/components/MemberList/MemberListItem.vue","../node_modules/vue-virtual-scroll-list/dist/index.js","../node_modules/vue-material-design-icons/Magnify.vue","../src/components/EntityPicker/EntityBubble.vue","../src/components/EntityPicker/EntitySearchResult.vue","../src/components/EntityPicker/EntityPicker.vue","../src/services/collaborationAutocompletion.js","../src/components/MemberList/MemberList.vue","../src/components/CircleDetails/CirclePasswordSettings.vue","../src/components/CircleDetails.vue","../src/components/AppContent/CircleContent.vue","../node_modules/d3-array/src/cumsum.js","../node_modules/d3-array/src/max.js","../node_modules/d3-array/src/min.js","../node_modules/d3-array/src/sum.js","../node_modules/d3-dispatch/src/dispatch.js","../node_modules/d3-selection/src/namespaces.js","../node_modules/d3-selection/src/namespace.js","../node_modules/d3-selection/src/creator.js","../node_modules/d3-selection/src/selector.js","../node_modules/d3-selection/src/selection/select.js","../node_modules/d3-selection/src/array.js","../node_modules/d3-selection/src/selectorAll.js","../node_modules/d3-selection/src/selection/selectAll.js","../node_modules/d3-selection/src/matcher.js","../node_modules/d3-selection/src/selection/selectChild.js","../node_modules/d3-selection/src/selection/selectChildren.js","../node_modules/d3-selection/src/selection/filter.js","../node_modules/d3-selection/src/selection/sparse.js","../node_modules/d3-selection/src/selection/enter.js","../node_modules/d3-selection/src/constant.js","../node_modules/d3-selection/src/selection/data.js","../node_modules/d3-selection/src/selection/exit.js","../node_modules/d3-selection/src/selection/join.js","../node_modules/d3-selection/src/selection/merge.js","../node_modules/d3-selection/src/selection/order.js","../node_modules/d3-selection/src/selection/sort.js","../node_modules/d3-selection/src/selection/call.js","../node_modules/d3-selection/src/selection/nodes.js","../node_modules/d3-selection/src/selection/node.js","../node_modules/d3-selection/src/selection/size.js","../node_modules/d3-selection/src/selection/empty.js","../node_modules/d3-selection/src/selection/each.js","../node_modules/d3-selection/src/selection/attr.js","../node_modules/d3-selection/src/window.js","../node_modules/d3-selection/src/selection/style.js","../node_modules/d3-selection/src/selection/property.js","../node_modules/d3-selection/src/selection/classed.js","../node_modules/d3-selection/src/selection/text.js","../node_modules/d3-selection/src/selection/html.js","../node_modules/d3-selection/src/selection/raise.js","../node_modules/d3-selection/src/selection/lower.js","../node_modules/d3-selection/src/selection/append.js","../node_modules/d3-selection/src/selection/insert.js","../node_modules/d3-selection/src/selection/remove.js","../node_modules/d3-selection/src/selection/clone.js","../node_modules/d3-selection/src/selection/datum.js","../node_modules/d3-selection/src/selection/on.js","../node_modules/d3-selection/src/selection/dispatch.js","../node_modules/d3-selection/src/selection/iterator.js","../node_modules/d3-selection/src/selection/index.js","../node_modules/d3-selection/src/select.js","../node_modules/d3-selection/src/sourceEvent.js","../node_modules/d3-selection/src/pointer.js","../node_modules/d3-drag/src/noevent.js","../node_modules/d3-drag/src/nodrag.js","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/number.js","../node_modules/d3-interpolate/src/string.js","../node_modules/d3-interpolate/src/transform/decompose.js","../node_modules/d3-interpolate/src/transform/parse.js","../node_modules/d3-interpolate/src/transform/index.js","../node_modules/d3-interpolate/src/zoom.js","../node_modules/d3-timer/src/timer.js","../node_modules/d3-timer/src/timeout.js","../node_modules/d3-transition/src/transition/schedule.js","../node_modules/d3-transition/src/interrupt.js","../node_modules/d3-transition/src/selection/interrupt.js","../node_modules/d3-transition/src/transition/tween.js","../node_modules/d3-transition/src/transition/interpolate.js","../node_modules/d3-transition/src/transition/attr.js","../node_modules/d3-transition/src/transition/attrTween.js","../node_modules/d3-transition/src/transition/delay.js","../node_modules/d3-transition/src/transition/duration.js","../node_modules/d3-transition/src/transition/ease.js","../node_modules/d3-transition/src/transition/easeVarying.js","../node_modules/d3-transition/src/transition/filter.js","../node_modules/d3-transition/src/transition/merge.js","../node_modules/d3-transition/src/transition/on.js","../node_modules/d3-transition/src/transition/remove.js","../node_modules/d3-transition/src/transition/select.js","../node_modules/d3-transition/src/transition/selectAll.js","../node_modules/d3-transition/src/transition/selection.js","../node_modules/d3-transition/src/transition/style.js","../node_modules/d3-transition/src/transition/styleTween.js","../node_modules/d3-transition/src/transition/text.js","../node_modules/d3-transition/src/transition/textTween.js","../node_modules/d3-transition/src/transition/transition.js","../node_modules/d3-transition/src/transition/end.js","../node_modules/d3-transition/src/transition/index.js","../node_modules/d3-ease/src/cubic.js","../node_modules/d3-transition/src/selection/transition.js","../node_modules/d3-transition/src/selection/index.js","../node_modules/d3-path/src/path.js","../node_modules/d3-hierarchy/src/hierarchy/count.js","../node_modules/d3-hierarchy/src/hierarchy/each.js","../node_modules/d3-hierarchy/src/hierarchy/eachBefore.js","../node_modules/d3-hierarchy/src/hierarchy/eachAfter.js","../node_modules/d3-hierarchy/src/hierarchy/find.js","../node_modules/d3-hierarchy/src/hierarchy/sum.js","../node_modules/d3-hierarchy/src/hierarchy/sort.js","../node_modules/d3-hierarchy/src/hierarchy/path.js","../node_modules/d3-hierarchy/src/hierarchy/ancestors.js","../node_modules/d3-hierarchy/src/hierarchy/descendants.js","../node_modules/d3-hierarchy/src/hierarchy/leaves.js","../node_modules/d3-hierarchy/src/hierarchy/links.js","../node_modules/d3-hierarchy/src/hierarchy/iterator.js","../node_modules/d3-hierarchy/src/hierarchy/index.js","../node_modules/d3-hierarchy/src/accessors.js","../node_modules/d3-hierarchy/src/stratify.js","../node_modules/d3-hierarchy/src/tree.js","../node_modules/d3-shape/src/constant.js","../node_modules/d3-shape/src/array.js","../node_modules/d3-shape/src/point.js","../node_modules/d3-shape/src/curve/bump.js","../node_modules/d3-shape/src/link.js","../node_modules/d3-zoom/src/constant.js","../node_modules/d3-zoom/src/event.js","../node_modules/d3-zoom/src/transform.js","../node_modules/d3-zoom/src/noevent.js","../node_modules/d3-zoom/src/zoom.js","../src/components/ChartTemplate.vue","../node_modules/d3-flextree/node_modules/d3-hierarchy/src/hierarchy/count.js","../node_modules/d3-flextree/node_modules/d3-hierarchy/src/hierarchy/each.js","../node_modules/d3-flextree/node_modules/d3-hierarchy/src/hierarchy/eachBefore.js","../node_modules/d3-flextree/node_modules/d3-hierarchy/src/hierarchy/eachAfter.js","../node_modules/d3-flextree/node_modules/d3-hierarchy/src/hierarchy/sum.js","../node_modules/d3-flextree/node_modules/d3-hierarchy/src/hierarchy/sort.js","../node_modules/d3-flextree/node_modules/d3-hierarchy/src/hierarchy/path.js","../node_modules/d3-flextree/node_modules/d3-hierarchy/src/hierarchy/ancestors.js","../node_modules/d3-flextree/node_modules/d3-hierarchy/src/hierarchy/descendants.js","../node_modules/d3-flextree/node_modules/d3-hierarchy/src/hierarchy/leaves.js","../node_modules/d3-flextree/node_modules/d3-hierarchy/src/hierarchy/links.js","../node_modules/d3-flextree/node_modules/d3-hierarchy/src/hierarchy/index.js","../node_modules/d3-flextree/src/flextree.js","../node_modules/d3-org-chart/src/d3-org-chart.js","../src/components/OrgChart.vue","../src/components/AppContent/ChartContent.vue","../node_modules/@shortcm/qr-image/lib/encode.js","../node_modules/@shortcm/qr-image/lib/errorcode.js","../node_modules/@shortcm/qr-image/lib/matrix.js","../node_modules/@shortcm/qr-image/lib/qr-base.js","../node_modules/color-name/index.js","../node_modules/simple-swizzle/node_modules/is-arrayish/index.js","../node_modules/simple-swizzle/index.js","../node_modules/color-string/index.js","../node_modules/@shortcm/qr-image/lib/utils.js","../node_modules/js-base64/base64.mjs","../node_modules/@shortcm/qr-image/lib/svg.js","../node_modules/vue-material-design-icons/Download.vue","../node_modules/vue-material-design-icons/Qrcode.vue","../node_modules/vue-material-design-icons/Cake.vue","../node_modules/vue-material-design-icons/EyeCircle.vue","../node_modules/vue-material-design-icons/FolderMultipleImage.vue","../node_modules/vue-material-design-icons/ChevronLeft.vue","../node_modules/vue-material-design-icons/DotsHorizontal.vue","../src/components/ContactDetails/ContactDetailsAddNewProp.vue","../node_modules/vue-material-design-icons/CloudDownload.vue","../node_modules/vue-material-design-icons/Upload.vue","../node_modules/vue-material-design-icons/Folder.vue","../node_modules/vue-material-design-icons/Image.vue","../node_modules/cropperjs/dist/cropper.js","../node_modules/vue-cropperjs/dist/VueCropper.js","../src/components/ContactDetails/ContactDetailsAvatar.vue","../node_modules/string-natural-compare/natural-compare.js","../src/components/Properties/PropertyGroups.vue","../src/components/Properties/PropertyRev.vue","../src/services/isTalkEnabled.js","../src/components/ContactDetails.vue","../src/components/ContactsList/ContactsListItem.vue","../src/components/ContactsList.vue","../src/components/AppContent/ContactsContent.vue","../src/components/ProcessingScreen.vue","../src/views/Processing/AddToGroupView.vue","../src/services/appendContactToGroup.js","../src/components/EntityPicker/ContactsPicker.vue","../src/views/Processing/ImportView.vue","../node_modules/vue-material-design-icons/LocationEnter.vue","../node_modules/vue-material-design-icons/AccountStar.vue","../node_modules/vue-material-design-icons/AccountGroupOutline.vue","../src/components/AppNavigation/CircleNavigationItem.vue","../node_modules/vue-material-design-icons/AccountMultiplePlus.vue","../node_modules/vue-material-design-icons/ShareVariant.vue","../src/services/isGroupSharingEnabled.js","../src/components/AppNavigation/Settings/SettingsAddressbookSharee.vue","../src/utils/url.js","../src/components/AppNavigation/Settings/SettingsAddressbookShare.vue","../src/components/AppNavigation/Settings/SettingsAddressbook.vue","../node_modules/vue-material-design-icons/Loading.vue","../src/components/AppNavigation/Settings/SettingsNewAddressbook.vue","../node_modules/vue-material-design-icons/AlertCircle.vue","../src/components/AppNavigation/Settings/SettingsImportContacts.vue","../node_modules/vue-material-design-icons/FormatListBulletedSquare.vue","../src/components/AppNavigation/Settings/SettingsSortContacts.vue","../src/components/AppNavigation/ContactsSettings.vue","../node_modules/downloadjs/download.js","../node_modules/moment/dist/moment.js","../src/services/renameContactFromGroup.js","../src/services/removeContactFromGroup.js","../node_modules/vue-material-design-icons/FolderEdit.vue","../src/components/AppNavigation/GroupNavigationItem.vue","../src/components/EntityPicker/NewCircleIntro.vue","../src/services/isContactsInteractionEnabled.js","../src/components/Icons/IconRecentlyContacted.vue","../src/components/AppNavigation/RootNavigation.vue","../src/views/Contacts.vue","../src/router/index.js","../src/main.js"],"sourcesContent":["exports.sync = function (store, router, options) {\n  var moduleName = (options || {}).moduleName || 'route'\n\n  store.registerModule(moduleName, {\n    namespaced: true,\n    state: cloneRoute(router.currentRoute),\n    mutations: {\n      'ROUTE_CHANGED': function ROUTE_CHANGED (state, transition) {\n        store.state[moduleName] = cloneRoute(transition.to, transition.from)\n      }\n    }\n  })\n\n  var isTimeTraveling = false\n  var currentPath\n\n  // sync router on store change\n  var storeUnwatch = store.watch(\n    function (state) { return state[moduleName]; },\n    function (route) {\n      var fullPath = route.fullPath;\n      if (fullPath === currentPath) {\n        return\n      }\n      if (currentPath != null) {\n        isTimeTraveling = true\n        router.push(route)\n      }\n      currentPath = fullPath\n    },\n    { sync: true }\n  )\n\n  // sync store on router navigation\n  var afterEachUnHook = router.afterEach(function (to, from) {\n    if (isTimeTraveling) {\n      isTimeTraveling = false\n      return\n    }\n    currentPath = to.fullPath\n    store.commit(moduleName + '/ROUTE_CHANGED', { to: to, from: from })\n  })\n\n  return function unsync () {\n    // On unsync, remove router hook\n    if (afterEachUnHook != null) {\n      afterEachUnHook()\n    }\n\n    // On unsync, remove store watch\n    if (storeUnwatch != null) {\n      storeUnwatch()\n    }\n\n    // On unsync, unregister Module with store\n    store.unregisterModule(moduleName)\n  }\n}\n\nfunction cloneRoute (to, from) {\n  var clone = {\n    name: to.name,\n    path: to.path,\n    hash: to.hash,\n    query: to.query,\n    params: to.params,\n    fullPath: to.fullPath,\n    meta: to.meta\n  }\n  if (from) {\n    clone.from = cloneRoute(from)\n  }\n  return Object.freeze(clone)\n}\n\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<router-view />\n</template>\n\n<script>\nexport default {\n\tname: 'ContactsRoot',\n}\n</script>\n","import '../assets/NcActionSeparator-Ct2RnclR.css';\nimport { n as normalizeComponent } from \"../chunks/_plugin-vue2_normalizer-DU4iP6Vu.mjs\";\nconst _sfc_main = {\n  name: \"NcActionSeparator\"\n};\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c;\n  return _c(\"li\", { staticClass: \"action action-separator action--disabled\", attrs: { \"role\": \"separator\" } });\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  \"3e2324b7\"\n);\nconst NcActionSeparator = __component__.exports;\nexport {\n  NcActionSeparator as default\n};\n//# sourceMappingURL=NcActionSeparator.mjs.map\n","import { n as normalizeComponent } from \"../chunks/_plugin-vue2_normalizer-DU4iP6Vu.mjs\";\nconst _sfc_main = {\n  name: \"NcAppContentDetails\"\n};\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c;\n  return _c(\"div\", { staticClass: \"app-content-details\" }, [_vm._t(\"default\")], 2);\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  null\n);\nconst NcAppContentDetails = __component__.exports;\nexport {\n  NcAppContentDetails as default\n};\n//# sourceMappingURL=NcAppContentDetails.mjs.map\n","import { n as normalizeComponent } from \"../chunks/_plugin-vue2_normalizer-DU4iP6Vu.mjs\";\nconst _sfc_main = {\n  name: \"NcAppContentList\",\n  props: {\n    selection: {\n      type: Boolean,\n      default: false\n    },\n    showDetails: {\n      type: Boolean,\n      default: false\n    }\n  }\n};\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c;\n  return _c(\"div\", { staticClass: \"app-content-list\", class: { selection: _vm.selection, showdetails: _vm.showDetails } }, [_vm._t(\"default\")], 2);\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  null\n);\nconst NcAppContentList = __component__.exports;\nexport {\n  NcAppContentList as default\n};\n//# sourceMappingURL=NcAppContentList.mjs.map\n","import '../assets/NcAppNavigationList-DnKj0-Zq.css';\nimport { n as normalizeComponent } from \"../chunks/_plugin-vue2_normalizer-DU4iP6Vu.mjs\";\nconst _sfc_main = {\n  name: \"NcAppNavigationList\"\n};\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c;\n  return _c(\"ul\", { staticClass: \"app-navigation-list\" }, [_vm._t(\"default\")], 2);\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  \"058e6060\"\n);\nconst NcAppNavigationList = __component__.exports;\nexport {\n  NcAppNavigationList as default\n};\n//# sourceMappingURL=NcAppNavigationList.mjs.map\n","import '../assets/NcAppNavigation-DfTQlVGB.css';\nimport { createFocusTrap } from \"focus-trap\";\nimport { emit, unsubscribe, subscribe } from \"@nextcloud/event-bus\";\nimport { tabbable } from \"tabbable\";\nimport Vue from \"vue\";\nimport { g as getTrapStack } from \"./focusTrap-DmkaYJTC.mjs\";\nimport { l as logger } from \"./logger-D3RVzcfQ.mjs\";\nimport { useHotKey } from \"../Composables/useHotKey.mjs\";\nimport { useIsMobile } from \"../Composables/useIsMobile.mjs\";\nimport NcAppNavigationList from \"../Components/NcAppNavigationList.mjs\";\nimport { N as NcAppNavigationToggle } from \"./NcAppNavigationToggle-CjPJB2s3.mjs\";\nimport { n as normalizeComponent } from \"./_plugin-vue2_normalizer-DU4iP6Vu.mjs\";\nconst _sfc_main = {\n  name: \"NcAppNavigation\",\n  components: {\n    NcAppNavigationList,\n    NcAppNavigationToggle\n  },\n  // Injected from NcContent\n  inject: {\n    setHasAppNavigation: {\n      default: () => () => Vue.util.warn(\"NcAppNavigation is not mounted inside NcContent, this is probably an error.\"),\n      from: \"NcContent:setHasAppNavigation\"\n    }\n  },\n  props: {\n    /**\n     * The aria label to describe the navigation\n     */\n    ariaLabel: {\n      type: String,\n      default: \"\"\n    },\n    /**\n     * aria-labelledby attribute to describe the navigation\n     */\n    ariaLabelledby: {\n      type: String,\n      default: \"\"\n    }\n  },\n  setup() {\n    return {\n      isMobile: useIsMobile()\n    };\n  },\n  data() {\n    return {\n      open: !this.isMobile,\n      focusTrap: null\n    };\n  },\n  watch: {\n    isMobile() {\n      this.open = !this.isMobile;\n      this.toggleFocusTrap();\n    },\n    open() {\n      this.toggleFocusTrap();\n    }\n  },\n  mounted() {\n    this.setHasAppNavigation(true);\n    subscribe(\"toggle-navigation\", this.toggleNavigationByEventBus);\n    emit(\"navigation-toggled\", {\n      open: this.open\n    });\n    this.focusTrap = createFocusTrap(this.$refs.appNavigationContainer, {\n      allowOutsideClick: true,\n      fallbackFocus: this.$refs.appNavigationContainer,\n      trapStack: getTrapStack(),\n      escapeDeactivates: false\n    });\n    this.toggleFocusTrap();\n    useHotKey(\"n\", this.onKeyDown, {\n      prevent: true,\n      stop: true\n    });\n  },\n  unmounted() {\n    this.setHasAppNavigation(false);\n    unsubscribe(\"toggle-navigation\", this.toggleNavigationByEventBus);\n    this.focusTrap.deactivate();\n  },\n  methods: {\n    /**\n     * Toggle the navigation\n     *\n     * @param {boolean} [state] set the state instead of inverting the current one\n     */\n    async toggleNavigation(state) {\n      if (this.open === state) {\n        emit(\"navigation-toggled\", {\n          open: this.open\n        });\n        return;\n      }\n      this.open = typeof state === \"undefined\" ? !this.open : state;\n      const bodyStyles = getComputedStyle(document.body);\n      const animationLength = parseInt(bodyStyles.getPropertyValue(\"--animation-quick\")) || 100;\n      if (this.open) {\n        await this.$nextTick();\n        this.focusFirstElement();\n      }\n      setTimeout(() => {\n        emit(\"navigation-toggled\", {\n          open: this.open\n        });\n      }, 1.5 * animationLength);\n    },\n    toggleNavigationByEventBus({ open }) {\n      this.toggleNavigation(open);\n    },\n    /**\n     * Activate focus trap if it is currently needed, otherwise deactivate\n     */\n    toggleFocusTrap() {\n      if (this.isMobile && this.open) {\n        this.focusTrap.activate();\n      } else {\n        this.focusTrap.deactivate();\n      }\n    },\n    handleEsc() {\n      if (this.isMobile && this.open) {\n        this.toggleNavigation(false);\n      }\n    },\n    focusFirstElement() {\n      const element = tabbable(this.$refs.appNavigationContainer)[0];\n      if (element) {\n        element.focus();\n        logger.debug(\"Focusing first element in the navigation\", { element });\n      }\n    },\n    onKeyDown(event) {\n      if (event.key === \"n\") {\n        if (!this.open) {\n          this.toggleNavigation(true);\n          return;\n        }\n        if (this.isFocusWithinNavigation()) {\n          this.toggleNavigation(false);\n        }\n      }\n    },\n    isFocusWithinNavigation() {\n      const activeElement = document.activeElement;\n      return this.$refs.appNavigationContainer?.contains(activeElement);\n    }\n  }\n};\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c;\n  return _c(\"div\", { ref: \"appNavigationContainer\", staticClass: \"app-navigation\", class: { \"app-navigation--close\": !_vm.open } }, [_c(\"nav\", { staticClass: \"app-navigation__content\", attrs: { \"id\": \"app-navigation-vue\", \"aria-hidden\": _vm.open ? \"false\" : \"true\", \"aria-label\": _vm.ariaLabel || void 0, \"aria-labelledby\": _vm.ariaLabelledby || void 0, \"inert\": !_vm.open || void 0 }, on: { \"keydown\": function($event) {\n    if (!$event.type.indexOf(\"key\") && _vm._k($event.keyCode, \"esc\", 27, $event.key, [\"Esc\", \"Escape\"])) return null;\n    return _vm.handleEsc.apply(null, arguments);\n  } } }, [_c(\"div\", { staticClass: \"app-navigation__search\" }, [_vm._t(\"search\")], 2), _c(\"div\", { staticClass: \"app-navigation__body\", class: { \"app-navigation__body--no-list\": !_vm.$scopedSlots.list } }, [_vm._t(\"default\")], 2), _vm.$scopedSlots.list ? _c(\"NcAppNavigationList\", { staticClass: \"app-navigation__list\" }, [_vm._t(\"list\")], 2) : _vm._e(), _vm._t(\"footer\")], 2), _c(\"NcAppNavigationToggle\", { attrs: { \"open\": _vm.open }, on: { \"update:open\": _vm.toggleNavigation } })], 1);\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  \"e8d5a9e1\"\n);\nconst NcAppNavigation = __component__.exports;\nexport {\n  NcAppNavigation as N\n};\n//# sourceMappingURL=NcAppNavigation-H8Gvbq5E.mjs.map\n","import '../assets/NcAppNavigationCaption-DU9PxTvu.css';\nimport { N as NcActions } from \"./NcActions-CucWK-m-.mjs\";\nimport { n as normalizeComponent } from \"./_plugin-vue2_normalizer-DU4iP6Vu.mjs\";\nconst _sfc_main = {\n  name: \"NcAppNavigationCaption\",\n  components: {\n    NcActions\n  },\n  inheritAttrs: false,\n  props: {\n    name: {\n      type: String,\n      required: true\n    },\n    /**\n     * `id` to set on the inner caption\n     * Can be used for connecting the `NcActionCaption` with `NcActionList` using `aria-labelledby`.\n     */\n    headingId: {\n      type: String,\n      default: null\n    },\n    /**\n     * Enable when used as a heading\n     * e.g. Before NcAppNavigationList\n     */\n    isHeading: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * If `isHeading` is set, this defines the heading level that should be used\n     */\n    headingLevel: {\n      type: Number,\n      default: 2\n    },\n    /**\n     * Any [NcActions](#/Components/NcActions?id=ncactions-1) prop\n     */\n    // Not an actual prop but needed to show in vue-styleguidist docs\n    // eslint-disable-next-line\n    \" \": {}\n  },\n  computed: {\n    wrapperTag() {\n      return this.isHeading ? \"div\" : \"li\";\n    },\n    captionTag() {\n      const headingLevel = Math.max(2, this.headingLevel);\n      return this.isHeading ? `h${headingLevel}` : \"span\";\n    },\n    // Check if the actions slot is populated\n    hasActions() {\n      return !!this.$slots.actions;\n    }\n  }\n};\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c;\n  return _c(_vm.wrapperTag, { tag: \"component\", staticClass: \"app-navigation-caption\", class: { \"app-navigation-caption--heading\": _vm.isHeading } }, [_c(_vm.captionTag, { tag: \"component\", staticClass: \"app-navigation-caption__name\", attrs: { \"id\": _vm.headingId } }, [_vm._v(\" \" + _vm._s(_vm.name) + \" \")]), _vm.hasActions ? _c(\"div\", { staticClass: \"app-navigation-caption__actions\" }, [_c(\"NcActions\", _vm._g(_vm._b({ scopedSlots: _vm._u([{ key: \"icon\", fn: function() {\n    return [_vm._t(\"actionsTriggerIcon\")];\n  }, proxy: true }], null, true) }, \"NcActions\", _vm.$attrs, false), _vm.$listeners), [_vm._t(\"actions\")], 2)], 1) : _vm._e()], 1);\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  \"1133b4da\"\n);\nconst NcAppNavigationCaption = __component__.exports;\nexport {\n  NcAppNavigationCaption as N\n};\n//# sourceMappingURL=NcAppNavigationCaption-C0Fkd9G7.mjs.map\n","import '../assets/NcAppSettingsSection-Bl2-D3_g.css';\nimport { n as normalizeComponent } from \"../chunks/_plugin-vue2_normalizer-DU4iP6Vu.mjs\";\nconst _sfc_main = {\n  name: \"NcAppSettingsSection\",\n  inject: [\"registerSection\", \"unregisterSection\"],\n  props: {\n    name: {\n      type: String,\n      required: true\n    },\n    id: {\n      type: String,\n      required: true,\n      validator(id) {\n        return /^[a-z0-9\\-_]+$/.test(id);\n      }\n    }\n  },\n  computed: {\n    // generate an id for each settingssection based on the name without whitespaces\n    htmlId() {\n      return \"settings-section_\" + this.id;\n    }\n  },\n  // Reactive changes for section navigation\n  watch: {\n    id(newId, oldId) {\n      this.unregisterSection(oldId);\n      this.registerSection(newId, this.name, this.$slots?.icon);\n    },\n    name(newName) {\n      this.unregisterSection(this.id);\n      this.registerSection(this.id, newName, this.$slots?.icon);\n    }\n  },\n  mounted() {\n    this.registerSection(this.id, this.name, this.$slots?.icon);\n  },\n  beforeDestroy() {\n    this.unregisterSection(this.id);\n  }\n};\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c;\n  return _c(\"section\", { staticClass: \"app-settings-section\", attrs: { \"id\": _vm.htmlId, \"aria-labelledby\": `${_vm.htmlId}--label` } }, [_c(\"h3\", { staticClass: \"app-settings-section__name\", attrs: { \"id\": `${_vm.htmlId}--label` } }, [_vm._v(\" \" + _vm._s(_vm.name) + \" \")]), _vm._t(\"default\"), _vm._e()], 2);\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  \"e970c9f7\"\n);\nconst NcAppSettingsSection = __component__.exports;\nexport {\n  NcAppSettingsSection as default\n};\n//# sourceMappingURL=NcAppSettingsSection.mjs.map\n","import '../assets/NcCounterBubble-CI-DxLjL.css';\nimport { getCanonicalLocale } from \"@nextcloud/l10n\";\nimport { n as normalizeComponent } from \"./_plugin-vue2_normalizer-DU4iP6Vu.mjs\";\nconst _sfc_main = {\n  name: \"NcCounterBubble\",\n  props: {\n    type: {\n      type: String,\n      default: \"\",\n      validator(value) {\n        return [\"highlighted\", \"outlined\", \"\"].includes(value);\n      }\n    },\n    /**\n     * Specifies whether the component is used within a component that is\n     * active and therefore has a primary background. Inverts the color of\n     * this component when that is the case.\n     */\n    active: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * The count to display in the counter bubble.\n     * Alternatively, you can pass any value to the default slot.\n     */\n    count: {\n      type: Number,\n      required: false,\n      default: void 0\n    },\n    /**\n     * Disables humanization to display count or content as it is\n     */\n    raw: {\n      type: Boolean,\n      required: false,\n      default: false\n    }\n  },\n  computed: {\n    counterClassObject() {\n      return {\n        \"counter-bubble__counter--highlighted\": this.type === \"highlighted\",\n        \"counter-bubble__counter--outlined\": this.type === \"outlined\",\n        active: this.active\n      };\n    },\n    humanizedCount() {\n      return this.humanizeCount(this.count);\n    }\n  },\n  methods: {\n    humanizeCount(count) {\n      if (this.raw) {\n        return count.toString();\n      }\n      const formatter = new Intl.NumberFormat(getCanonicalLocale(), {\n        notation: \"compact\",\n        compactDisplay: \"short\"\n      });\n      return formatter.format(count);\n    },\n    /**\n     * Get the humanized count from `count` prop\n     * @return {{ humanized: string, original: string} | undefined}\n     */\n    getHumanizedCount() {\n      if (this.count !== void 0) {\n        return {\n          humanized: this.humanizedCount,\n          original: this.count.toString()\n        };\n      }\n      if (this.raw) {\n        return void 0;\n      }\n      if (this.$slots.default?.length === 1) {\n        const slotContent = this.$slots.default[0].text?.trim();\n        if (slotContent && /^\\d+$/.test(slotContent)) {\n          const count = parseInt(slotContent, 10);\n          return {\n            humanized: this.humanizeCount(count),\n            original: slotContent\n          };\n        }\n      }\n    }\n  },\n  render(h) {\n    const count = this.getHumanizedCount();\n    return h(\"div\", {\n      staticClass: \"counter-bubble__counter\",\n      class: this.counterClassObject,\n      attrs: {\n        // Show original count in title if humanized\n        title: count && count.original !== count.humanized ? count.original : void 0\n      }\n    }, [count?.humanized ?? this.$slots.default]);\n  }\n};\nconst _sfc_render = null;\nconst _sfc_staticRenderFns = null;\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  \"f1abaa29\"\n);\nconst NcCounterBubble = __component__.exports;\nexport {\n  NcCounterBubble as N\n};\n//# sourceMappingURL=NcCounterBubble-CDfRYl8B.mjs.map\n","import '../assets/NcListItem-DfaWGP5A.css';\nimport { N as NcActions } from \"./NcActions-CucWK-m-.mjs\";\nimport { N as NcCounterBubble } from \"./NcCounterBubble-CDfRYl8B.mjs\";\nimport NcVNodes from \"../Components/NcVNodes.mjs\";\nimport { n as normalizeComponent } from \"./_plugin-vue2_normalizer-DU4iP6Vu.mjs\";\nconst _sfc_main = {\n  name: \"NcListItem\",\n  components: {\n    NcActions,\n    NcCounterBubble,\n    NcVNodes\n  },\n  props: {\n    /**\n     * The details text displayed in the upper right part of the component\n     */\n    details: {\n      type: String,\n      default: \"\"\n    },\n    /**\n     * Name (first line of text)\n     */\n    name: {\n      type: String,\n      default: void 0\n    },\n    /**\n     * Pass in `true` if you want the matching behavior to\n     * be non-inclusive: https://router.vuejs.org/api/#exact\n     */\n    exact: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * The route for the router link.\n     */\n    to: {\n      type: [String, Object],\n      default: null\n    },\n    /**\n     * The value for the external link\n     */\n    href: {\n      type: String,\n      default: \"#\"\n    },\n    target: {\n      type: String,\n      default: \"\"\n    },\n    /**\n     * Id for the `<a>` element\n     */\n    anchorId: {\n      type: String,\n      default: \"\"\n    },\n    /**\n     * Make subname bold\n     */\n    bold: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * Show the NcListItem in compact design\n     */\n    compact: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * Toggle the active state of the component\n     */\n    active: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * Aria label for the wrapper element\n     */\n    linkAriaLabel: {\n      type: String,\n      default: \"\"\n    },\n    /**\n     * Aria label for the actions toggle\n     */\n    actionsAriaLabel: {\n      type: String,\n      default: void 0\n    },\n    /**\n     * If different from 0 this component will display the\n     * NcCounterBubble component\n     */\n    counterNumber: {\n      type: [Number, String],\n      default: 0\n    },\n    /**\n     * Outlined or highlighted state of the counter\n     */\n    counterType: {\n      type: String,\n      default: \"\",\n      validator(value) {\n        return [\"highlighted\", \"outlined\", \"\"].indexOf(value) !== -1;\n      }\n    },\n    /**\n     * To be used only when the elements in the actions menu are very important\n     */\n    forceDisplayActions: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * Force the actions to display in a three dot menu\n     */\n    forceMenu: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * Show the list component layout\n     */\n    oneLine: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\n    \"click\",\n    \"update:menuOpen\"\n  ],\n  setup() {\n    const [major] = window._oc_config?.version.split(\".\", 2) ?? [];\n    const isLegacy = major && Number.parseInt(major) < 30;\n    return {\n      isLegacy\n    };\n  },\n  data() {\n    return {\n      hovered: false,\n      hasActions: false,\n      hasSubname: false,\n      displayActionsOnHoverFocus: false,\n      menuOpen: false,\n      hasIndicator: false,\n      hasDetails: false\n    };\n  },\n  computed: {\n    showAdditionalElements() {\n      return !this.displayActionsOnHoverFocus || this.forceDisplayActions;\n    },\n    showDetails() {\n      return (this.details !== \"\" || this.hasDetails) && (!this.displayActionsOnHoverFocus || this.forceDisplayActions);\n    }\n  },\n  watch: {\n    menuOpen(newValue) {\n      if (!newValue && !this.hovered) {\n        this.displayActionsOnHoverFocus = false;\n      }\n    }\n  },\n  mounted() {\n    this.checkSlots();\n  },\n  updated() {\n    this.checkSlots();\n  },\n  methods: {\n    /**\n     * Handle link click\n     *\n     * @param {MouseEvent|KeyboardEvent} event - Native click or keydown event\n     * @param {Function} [navigate] - VueRouter link's navigate if any\n     * @param {string} [routerLinkHref] - VueRouter link's href\n     */\n    onClick(event, navigate, routerLinkHref) {\n      this.$emit(\"click\", event);\n      if (event.metaKey || event.altKey || event.ctrlKey || event.shiftKey) {\n        return;\n      }\n      if (routerLinkHref) {\n        navigate?.(event);\n        event.preventDefault();\n      }\n    },\n    showActions() {\n      if (this.hasActions) {\n        this.displayActionsOnHoverFocus = true;\n      }\n      this.hovered = false;\n    },\n    hideActions() {\n      this.displayActionsOnHoverFocus = false;\n    },\n    /**\n     * @param {FocusEvent} event UI event\n     */\n    handleBlur(event) {\n      if (this.menuOpen) {\n        return;\n      }\n      if (this.$refs[\"list-item\"].contains(event.relatedTarget)) {\n        return;\n      }\n      this.hideActions();\n    },\n    /**\n     * Hide the actions on mouseleave unless the menu is open\n     */\n    handleMouseleave() {\n      if (!this.menuOpen) {\n        this.displayActionsOnHoverFocus = false;\n      }\n      this.hovered = false;\n    },\n    handleMouseover() {\n      this.showActions();\n      this.hovered = true;\n    },\n    handleActionsUpdateOpen(e) {\n      this.menuOpen = e;\n      this.$emit(\"update:menuOpen\", e);\n    },\n    // Check if subname and actions slots are populated\n    checkSlots() {\n      if (this.hasActions !== !!this.$slots.actions) {\n        this.hasActions = !!this.$slots.actions;\n      }\n      if (this.hasSubname !== !!this.$slots.subname) {\n        this.hasSubname = !!this.$slots.subname;\n      }\n      if (this.hasIndicator !== !!this.$slots.indicator) {\n        this.hasIndicator = !!this.$slots.indicator;\n      }\n      if (this.hasDetails !== !!this.$slots.details) {\n        this.hasDetails = !!this.$slots.details;\n      }\n    }\n  }\n};\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c;\n  return _c(_vm.to ? \"router-link\" : \"NcVNodes\", { tag: \"component\", attrs: { \"custom\": _vm.to ? true : null, \"to\": _vm.to, \"exact\": _vm.to ? _vm.exact : null }, scopedSlots: _vm._u([{ key: \"default\", fn: function({ href: routerLinkHref, navigate, isActive }) {\n    return [_c(\"li\", { staticClass: \"list-item__wrapper\", class: { \"list-item__wrapper--active\": isActive || _vm.active } }, [_c(\"div\", { ref: \"list-item\", staticClass: \"list-item\", class: {\n      \"list-item--compact\": _vm.compact,\n      \"list-item--legacy\": _vm.isLegacy,\n      \"list-item--one-line\": _vm.oneLine\n    }, on: { \"mouseover\": _vm.handleMouseover, \"mouseleave\": _vm.handleMouseleave } }, [_c(\"a\", { staticClass: \"list-item__anchor\", attrs: { \"id\": _vm.anchorId || void 0, \"aria-label\": _vm.linkAriaLabel, \"href\": routerLinkHref || _vm.href, \"target\": _vm.target || (_vm.href === \"#\" ? void 0 : \"_blank\"), \"rel\": _vm.href === \"#\" ? void 0 : \"noopener noreferrer\" }, on: { \"focus\": _vm.showActions, \"focusout\": _vm.handleBlur, \"click\": function($event) {\n      return _vm.onClick($event, navigate, routerLinkHref);\n    }, \"keydown\": function($event) {\n      if (!$event.type.indexOf(\"key\") && _vm._k($event.keyCode, \"esc\", 27, $event.key, [\"Esc\", \"Escape\"])) return null;\n      return _vm.hideActions.apply(null, arguments);\n    } } }, [_vm._t(\"icon\"), _c(\"div\", { staticClass: \"list-item-content\" }, [_c(\"div\", { staticClass: \"list-item-content__main\" }, [_c(\"div\", { staticClass: \"list-item-content__name\" }, [_vm._t(\"name\", function() {\n      return [_vm._v(_vm._s(_vm.name))];\n    })], 2), _vm.hasSubname ? _c(\"div\", { staticClass: \"list-item-content__subname\", class: { \"list-item-content__subname--bold\": _vm.bold } }, [_vm._t(\"subname\")], 2) : _vm._e()]), _c(\"div\", { staticClass: \"list-item-content__details\" }, [_vm.showDetails ? _c(\"div\", { staticClass: \"list-item-details__details\" }, [_vm._t(\"details\", function() {\n      return [_vm._v(_vm._s(_vm.details))];\n    })], 2) : _vm._e(), _vm.counterNumber || _vm.hasIndicator ? _c(\"div\", { directives: [{ name: \"show\", rawName: \"v-show\", value: _vm.showAdditionalElements, expression: \"showAdditionalElements\" }], staticClass: \"list-item-details__extra\" }, [_vm.counterNumber ? _c(\"NcCounterBubble\", { staticClass: \"list-item-details__counter\", attrs: { \"active\": isActive || _vm.active, \"type\": _vm.counterType } }, [_vm._v(\" \" + _vm._s(_vm.counterNumber) + \" \")]) : _vm._e(), _vm.hasIndicator ? _c(\"span\", { staticClass: \"list-item-details__indicator\" }, [_vm._t(\"indicator\")], 2) : _vm._e()], 1) : _vm._e()])])], 2), _vm.$slots[\"extra-actions\"] ? _c(\"div\", { staticClass: \"list-item-content__extra-actions\" }, [_vm._t(\"extra-actions\")], 2) : _vm._e(), _c(\"div\", { directives: [{ name: \"show\", rawName: \"v-show\", value: _vm.forceDisplayActions || _vm.displayActionsOnHoverFocus, expression: \"forceDisplayActions || displayActionsOnHoverFocus\" }], staticClass: \"list-item-content__actions\", on: { \"focusout\": _vm.handleBlur } }, [_c(\"NcActions\", { ref: \"actions\", attrs: { \"primary\": isActive || _vm.active, \"force-menu\": _vm.forceMenu, \"aria-label\": _vm.actionsAriaLabel }, on: { \"update:open\": _vm.handleActionsUpdateOpen }, scopedSlots: _vm._u([_vm.$slots[\"actions-icon\"] ? { key: \"icon\", fn: function() {\n      return [_vm._t(\"actions-icon\")];\n    }, proxy: true } : null], null, true) }, [_vm._t(\"actions\")], 2)], 1), _vm.$slots.extra ? _c(\"div\", { staticClass: \"list-item__extra\" }, [_vm._t(\"extra\")], 2) : _vm._e()])])];\n  } }], null, true) });\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  \"40599719\"\n);\nconst NcListItem = __component__.exports;\nexport {\n  NcListItem as N\n};\n//# sourceMappingURL=NcListItem-BGoyHTZy.mjs.map\n","import '../assets/NcUserBubble-BsTKRhKz.css';\nimport { n as normalizeComponent } from \"./_plugin-vue2_normalizer-DU4iP6Vu.mjs\";\nimport { N as NcAvatar } from \"./NcAvatar-Db8tkJt9.mjs\";\nimport { N as NcPopover } from \"./NcPopover-m0hDmALa.mjs\";\nimport Vue from \"vue\";\nimport { RouterLink } from \"vue-router\";\nconst _sfc_main$1 = {\n  name: \"NcUserBubbleDiv\"\n};\nvar _sfc_render$1 = function render() {\n  var _vm = this, _c = _vm._self._c;\n  return _c(\"div\", [_vm._t(\"trigger\")], 2);\n};\nvar _sfc_staticRenderFns$1 = [];\nvar __component__$1 = /* @__PURE__ */ normalizeComponent(\n  _sfc_main$1,\n  _sfc_render$1,\n  _sfc_staticRenderFns$1,\n  false,\n  null,\n  null\n);\nconst NcUserBubbleDiv = __component__$1.exports;\nconst _sfc_main = {\n  name: \"NcUserBubble\",\n  components: {\n    NcAvatar,\n    NcPopover,\n    NcUserBubbleDiv\n  },\n  props: {\n    /**\n     * Override generated avatar, can be an url or an icon class\n     */\n    avatarImage: {\n      type: String,\n      default: void 0\n    },\n    /**\n     * Provide the user id if this is a user\n     */\n    user: {\n      type: String,\n      default: void 0\n    },\n    /**\n     * Displayed label\n     */\n    displayName: {\n      type: String,\n      default: void 0\n    },\n    /**\n     * Whether or not to display the user-status\n     */\n    showUserStatus: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * Define the whole bubble as a link\n     */\n    url: {\n      type: String,\n      default: void 0,\n      validator: (url) => {\n        try {\n          url = new URL(url, url?.startsWith?.(\"/\") ? window.location.href : void 0);\n          return true;\n        } catch (error) {\n          return false;\n        }\n      }\n    },\n    /**\n     * Use bubble as a router-link for in-app navigation\n     */\n    to: {\n      type: [String, Object],\n      default: void 0\n    },\n    /**\n     * Default popover state. Requires the UserBubble\n     * to have some content to render inside the popover\n     */\n    open: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * Use the primary colour\n     */\n    primary: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * This is the height of the component\n     */\n    size: {\n      type: Number,\n      default: 20\n    },\n    /**\n     * This is the margin of the avatar (size - margin = avatar size)\n     */\n    margin: {\n      type: Number,\n      default: 2\n    }\n  },\n  emits: [\n    \"click\",\n    \"update:open\"\n  ],\n  computed: {\n    /**\n     * If userbubble is empty, let's NOT\n     * use the Popover component\n     * We need a component instead of a simple div here,\n     * because otherwise the trigger template will not be shown.\n     *\n     * @return {string} 'Popover' or 'UserBubbleDiv'\n     */\n    isPopoverComponent() {\n      return !this.popoverEmpty ? \"NcPopover\" : \"NcUserBubbleDiv\";\n    },\n    /**\n     * Is the provided avatar url valid or not\n     *\n     * @return {boolean}\n     */\n    isAvatarUrl() {\n      if (!this.avatarImage) {\n        return false;\n      }\n      try {\n        const url = new URL(this.avatarImage);\n        return !!url;\n      } catch (error) {\n        return false;\n      }\n    },\n    /**\n     * Do we have a custom avatar or not\n     *\n     * @return {boolean}\n     */\n    isCustomAvatar() {\n      return !!this.avatarImage;\n    },\n    hasUrl() {\n      return this.url && this.url.trim() !== \"\";\n    },\n    isLinkComponent() {\n      if (this.hasUrl) {\n        return \"a\";\n      } else if (this.to) {\n        return RouterLink;\n      } else {\n        return \"div\";\n      }\n    },\n    popoverEmpty() {\n      if (\"default\" in this.$slots) {\n        return false;\n      }\n      return true;\n    },\n    styles() {\n      return {\n        content: {\n          height: this.size + \"px\",\n          lineHeight: this.size + \"px\",\n          borderRadius: this.size / 2 + \"px\"\n        },\n        avatar: {\n          marginInlineStart: this.margin + \"px\"\n        }\n      };\n    }\n  },\n  mounted() {\n    if (!this.displayName && !this.user) {\n      Vue.util.warn(\"[NcUserBubble] At least `displayName` or `user` property should be set.\");\n    }\n  },\n  methods: {\n    onOpenChange(state) {\n      this.$emit(\"update:open\", state);\n    },\n    /**\n     * Catch and forward click event to parent\n     *\n     * @param {Event} event the click event\n     */\n    onClick(event) {\n      this.$emit(\"click\", event);\n    }\n  }\n};\nvar _sfc_render = function render2() {\n  var _vm = this, _c = _vm._self._c;\n  return _c(_vm.isPopoverComponent, { tag: \"component\", staticClass: \"user-bubble__wrapper\", attrs: { \"trigger\": \"hover focus\", \"shown\": _vm.open }, on: { \"update:open\": _vm.onOpenChange }, scopedSlots: _vm._u([{ key: \"trigger\", fn: function({ attrs }) {\n    return [_c(_vm.isLinkComponent, _vm._b({ tag: \"component\", staticClass: \"user-bubble__content\", class: { \"user-bubble__content--primary\": _vm.primary }, style: _vm.styles.content, attrs: { \"to\": _vm.to, \"href\": _vm.hasUrl ? _vm.url : null }, on: { \"click\": _vm.onClick } }, \"component\", attrs, false), [_c(\"NcAvatar\", { staticClass: \"user-bubble__avatar\", style: _vm.styles.avatar, attrs: { \"url\": _vm.isCustomAvatar && _vm.isAvatarUrl ? _vm.avatarImage : void 0, \"icon-class\": _vm.isCustomAvatar && !_vm.isAvatarUrl ? _vm.avatarImage : void 0, \"user\": _vm.user, \"display-name\": _vm.displayName, \"size\": _vm.size - _vm.margin * 2, \"disable-tooltip\": true, \"disable-menu\": true, \"show-user-status\": _vm.showUserStatus } }), _c(\"span\", { staticClass: \"user-bubble__name\" }, [_vm._v(\" \" + _vm._s(_vm.displayName || _vm.user) + \" \")]), _vm.$slots.name ? _c(\"span\", { staticClass: \"user-bubble__secondary\" }, [_vm._t(\"name\")], 2) : _vm._e()], 1)];\n  } }], null, true) }, [_vm._t(\"default\")], 2);\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  \"a62a9496\"\n);\nconst NcUserBubble = __component__.exports;\nexport {\n  NcUserBubble as N\n};\n//# sourceMappingURL=NcUserBubble-cO5krePG.mjs.map\n","import { basename } from \"path\";\nimport Vue, { toRaw, defineComponent, onMounted, onUnmounted } from \"vue\";\nimport { t, n, a as normalizeComponent } from \"./chunks/_plugin-vue2_normalizer-CQ6iBklL.mjs\";\nimport { h, f, g, d, e, c, T, b, l, k, s, i, m, j } from \"./chunks/_plugin-vue2_normalizer-CQ6iBklL.mjs\";\nimport NcDialog from \"@nextcloud/vue/dist/Components/NcDialog.js\";\nimport NcNoteCard from \"@nextcloud/vue/dist/Components/NcNoteCard.js\";\nconst spawnDialog = (dialog, props, onClose = () => {\n}) => {\n  const el = document.createElement(\"div\");\n  const container = document.querySelector(props == null ? void 0 : props.container) || document.body;\n  container.appendChild(el);\n  const vue = new Vue({\n    el,\n    name: \"VueDialogHelper\",\n    render: (h2) => h2(dialog, {\n      props,\n      on: {\n        close: (...rest) => {\n          onClose(...rest.map((v) => toRaw(v)));\n          vue.$destroy();\n        }\n      }\n    })\n  });\n  return vue;\n};\nconst IconMove = '<svg xmlns=\"http://www.w3.org/2000/svg\" id=\"mdi-folder-move\" viewBox=\"0 0 24 24\"><path d=\"M14,18V15H10V11H14V8L19,13M20,6H12L10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6Z\" /></svg>';\nconst IconCopy = '<svg xmlns=\"http://www.w3.org/2000/svg\" id=\"mdi-folder-multiple\" viewBox=\"0 0 24 24\"><path d=\"M22,4H14L12,2H6A2,2 0 0,0 4,4V16A2,2 0 0,0 6,18H22A2,2 0 0,0 24,16V6A2,2 0 0,0 22,4M2,6H0V11H0V20A2,2 0 0,0 2,22H20V20H2V6Z\" /></svg>';\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar FilePickerType = /* @__PURE__ */ ((FilePickerType2) => {\n  FilePickerType2[FilePickerType2[\"Choose\"] = 1] = \"Choose\";\n  FilePickerType2[FilePickerType2[\"Move\"] = 2] = \"Move\";\n  FilePickerType2[FilePickerType2[\"Copy\"] = 3] = \"Copy\";\n  FilePickerType2[FilePickerType2[\"CopyMove\"] = 4] = \"CopyMove\";\n  FilePickerType2[FilePickerType2[\"Custom\"] = 5] = \"Custom\";\n  return FilePickerType2;\n})(FilePickerType || {});\nclass FilePickerClosed extends Error {\n}\nclass FilePicker {\n  constructor(title, multiSelect, mimeTypeFilter, directoriesAllowed, buttons, path, filter, container, disabledNavigation = false) {\n    __publicField(this, \"title\");\n    __publicField(this, \"multiSelect\");\n    __publicField(this, \"mimeTypeFilter\");\n    __publicField(this, \"directoriesAllowed\");\n    __publicField(this, \"buttons\");\n    __publicField(this, \"path\");\n    __publicField(this, \"filter\");\n    __publicField(this, \"container\");\n    __publicField(this, \"disabledNavigation\");\n    this.title = title;\n    this.multiSelect = multiSelect;\n    this.mimeTypeFilter = mimeTypeFilter;\n    this.directoriesAllowed = directoriesAllowed;\n    this.path = path;\n    this.filter = filter;\n    this.buttons = buttons;\n    this.container = container;\n    this.disabledNavigation = disabledNavigation;\n  }\n  /**\n   * Pick files using the FilePicker\n   *\n   * @return Promise with array of picked files or rejected promise on close without picking\n   */\n  async pick() {\n    const { FilePickerVue } = await import(\"./chunks/index-Kg2hZgGF.mjs\");\n    return new Promise((resolve, reject) => {\n      spawnDialog(FilePickerVue, {\n        allowPickDirectory: this.directoriesAllowed,\n        buttons: this.buttons,\n        container: this.container,\n        name: this.title,\n        path: this.path,\n        mimetypeFilter: this.mimeTypeFilter,\n        multiselect: this.multiSelect,\n        filterFn: this.filter,\n        disabledNavigation: this.disabledNavigation\n      }, (...rest) => {\n        var _a;\n        const [nodes] = rest;\n        if (!Array.isArray(nodes) || nodes.length === 0) {\n          reject(new FilePickerClosed(\"FilePicker: No nodes selected\"));\n        } else {\n          if (this.multiSelect) {\n            resolve(nodes.map((node) => node.path));\n          } else {\n            resolve(((_a = nodes[0]) == null ? void 0 : _a.path) || \"/\");\n          }\n        }\n      });\n    });\n  }\n}\nclass FilePickerBuilder {\n  /**\n   * Construct a new FilePicker\n   *\n   * @param title Title of the FilePicker\n   */\n  constructor(title) {\n    __publicField(this, \"title\");\n    __publicField(this, \"multiSelect\", false);\n    __publicField(this, \"mimeTypeFilter\", []);\n    __publicField(this, \"directoriesAllowed\", false);\n    __publicField(this, \"path\");\n    __publicField(this, \"filter\");\n    __publicField(this, \"buttons\", []);\n    __publicField(this, \"container\");\n    __publicField(this, \"disabledNavigation\", false);\n    this.title = title;\n  }\n  /**\n   * Set the container where the FilePicker will be mounted\n   * By default 'body' is used\n   *\n   * @param container The dialog container\n   */\n  setContainer(container) {\n    this.container = container;\n    return this;\n  }\n  /**\n   * Enable or disable picking multiple files\n   *\n   * @param ms True to enable picking multiple files, false otherwise\n   */\n  setMultiSelect(ms) {\n    this.multiSelect = ms;\n    return this;\n  }\n  /**\n   * Add allowed MIME type\n   *\n   * @param filter MIME type to allow\n   */\n  addMimeTypeFilter(filter) {\n    this.mimeTypeFilter.push(filter);\n    return this;\n  }\n  /**\n   * Set allowed MIME types\n   *\n   * @param filter Array of allowed MIME types\n   */\n  setMimeTypeFilter(filter) {\n    this.mimeTypeFilter = filter;\n    return this;\n  }\n  /**\n   * Add a button to the FilePicker\n   * Note: This overrides any previous `setButtonFactory` call\n   *\n   * @param button The button\n   */\n  addButton(button) {\n    if (typeof this.buttons === \"function\") {\n      console.warn(\"FilePicker buttons were set to factory, now overwritten with button object.\");\n      this.buttons = [];\n    }\n    this.buttons.push(button);\n    return this;\n  }\n  /**\n   * Set the button factory which is used to generate buttons from current view, path and selected nodes\n   * Note: This overrides any previous `addButton` call\n   *\n   * @param factory The button factory\n   */\n  setButtonFactory(factory) {\n    this.buttons = factory;\n    return this;\n  }\n  /**\n   * Set FilePicker type based on legacy file picker types\n   * @param type The legacy filepicker type to emulate\n   * @deprecated Use `addButton` or `setButtonFactory` instead as with setType you do not know which button was pressed\n   */\n  setType(type) {\n    this.buttons = (nodes, path) => {\n      var _a, _b, _c;\n      const buttons = [];\n      const node = ((_b = (_a = nodes == null ? void 0 : nodes[0]) == null ? void 0 : _a.attributes) == null ? void 0 : _b.displayName) || ((_c = nodes == null ? void 0 : nodes[0]) == null ? void 0 : _c.basename);\n      const target = node || basename(path);\n      if (type === 1) {\n        let label = t(\"Choose\");\n        if (nodes.length === 1) {\n          label = t(\"Choose {file}\", { file: node });\n        } else if (this.multiSelect) {\n          label = n(\"Choose %n file\", \"Choose %n files\", nodes.length);\n        }\n        buttons.push({\n          callback: () => {\n          },\n          type: \"primary\",\n          label\n        });\n      }\n      if (type === 4 || type === 3) {\n        buttons.push({\n          callback: () => {\n          },\n          label: target ? t(\"Copy to {target}\", { target }) : t(\"Copy\"),\n          type: \"primary\",\n          icon: IconCopy\n        });\n      }\n      if (type === 2 || type === 4) {\n        buttons.push({\n          callback: () => {\n          },\n          label: target ? t(\"Move to {target}\", { target }) : t(\"Move\"),\n          type: type === 2 ? \"primary\" : \"secondary\",\n          icon: IconMove\n        });\n      }\n      return buttons;\n    };\n    return this;\n  }\n  /**\n   * Allow to pick directories besides files\n   *\n   * @param allow True to allow picking directories\n   */\n  allowDirectories(allow = true) {\n    this.directoriesAllowed = allow;\n    return this;\n  }\n  /**\n   * Set starting path of the FilePicker\n   *\n   * @param path Path to start from picking\n   */\n  startAt(path) {\n    this.path = path;\n    return this;\n  }\n  /**\n   * Add filter function to filter file list of FilePicker\n   *\n   * @param filter Filter function to apply\n   */\n  setFilter(filter) {\n    this.filter = filter;\n    return this;\n  }\n  /**\n   * Allow to pick directories besides files\n   *\n   * @param allow True to allow picking directories\n   */\n  disableNavigation() {\n    this.disabledNavigation = true;\n    return this;\n  }\n  /**\n   * Construct the configured FilePicker\n   */\n  build() {\n    return new FilePicker(\n      this.title,\n      this.multiSelect,\n      this.mimeTypeFilter,\n      this.directoriesAllowed,\n      this.buttons,\n      this.path,\n      this.filter,\n      this.container,\n      this.disabledNavigation\n    );\n  }\n}\nfunction getFilePickerBuilder(title) {\n  return new FilePickerBuilder(title);\n}\nvar DialogSeverity = /* @__PURE__ */ ((DialogSeverity2) => {\n  DialogSeverity2[\"Info\"] = \"info\";\n  DialogSeverity2[\"Warning\"] = \"warning\";\n  DialogSeverity2[\"Error\"] = \"error\";\n  return DialogSeverity2;\n})(DialogSeverity || {});\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  __name: \"GenericDialog\",\n  props: {\n    name: null,\n    text: null,\n    html: null,\n    buttons: null,\n    severity: null\n  },\n  setup(__props) {\n    const props = __props;\n    const handleUnload = () => \"\".concat(props.name, \": \").concat(props.text);\n    onMounted(() => window.addEventListener(\"unload\", handleUnload));\n    onUnmounted(() => window.removeEventListener(\"unload\", handleUnload));\n    return { __sfc: true, props, handleUnload, NcDialog, NcNoteCard };\n  }\n});\nvar _sfc_render = function render() {\n  var _vm = this, _c = _vm._self._c, _setup = _vm._self._setupProxy;\n  return _c(_setup.NcDialog, { attrs: { \"dialog-classes\": \"nc-generic-dialog\", \"buttons\": _vm.buttons, \"name\": _vm.name, \"message\": _vm.text }, on: { \"update:open\": function($event) {\n    return _vm.$emit(\"close\");\n  } } }, [_vm.severity ? _c(_setup.NcNoteCard, { attrs: { \"type\": _vm.severity } }, [_c(\"p\", { domProps: { \"textContent\": _vm._s(_vm.text) } })]) : _vm._e(), _vm.html ? _c(\"div\", { domProps: { \"innerHTML\": _vm._s(_vm.html) } }) : _vm._e()], 1);\n};\nvar _sfc_staticRenderFns = [];\nvar __component__ = /* @__PURE__ */ normalizeComponent(\n  _sfc_main,\n  _sfc_render,\n  _sfc_staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  null\n);\nconst GenericDialog = __component__.exports;\nvar __typeError = (msg) => {\n  throw TypeError(msg);\n};\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar _name, _text, _buttons, _severity, _dialog, _html, _severity2, _text2, _name2, _buttons2;\nclass Dialog {\n  constructor(name, text, buttons = [], severity) {\n    __privateAdd(this, _name);\n    __privateAdd(this, _text);\n    __privateAdd(this, _buttons);\n    __privateAdd(this, _severity);\n    __privateAdd(this, _dialog);\n    __privateAdd(this, _html);\n    __privateSet(this, _name, name);\n    __privateSet(this, _text, text);\n    __privateSet(this, _buttons, buttons);\n    __privateSet(this, _severity, severity);\n    __privateSet(this, _dialog, void 0);\n    __privateSet(this, _html, void 0);\n  }\n  /**\n   * @deprecated DO NOT USE! It will be removed in the near future!\n   * @param html HTML content\n   */\n  setHTML(html) {\n    __privateSet(this, _html, html);\n    return this;\n  }\n  /**\n   * Spawn and show the dialog - if already open the previous instance will be destroyed\n   * @return Promise that resolves when the dialog is answered successfully and rejects on close\n   */\n  show() {\n    if (__privateGet(this, _dialog)) {\n      __privateGet(this, _dialog).$destroy();\n    }\n    return new Promise((resolve) => {\n      __privateSet(this, _dialog, spawnDialog(\n        GenericDialog,\n        {\n          buttons: __privateGet(this, _buttons),\n          name: __privateGet(this, _name),\n          text: __privateGet(this, _text),\n          severity: __privateGet(this, _severity),\n          html: __privateGet(this, _html)\n        },\n        resolve\n      ));\n    });\n  }\n  /**\n   * Hide and destroy the current dialog instance\n   */\n  hide() {\n    var _a;\n    (_a = __privateGet(this, _dialog)) == null ? void 0 : _a.$destroy();\n  }\n}\n_name = /* @__PURE__ */ new WeakMap();\n_text = /* @__PURE__ */ new WeakMap();\n_buttons = /* @__PURE__ */ new WeakMap();\n_severity = /* @__PURE__ */ new WeakMap();\n_dialog = /* @__PURE__ */ new WeakMap();\n_html = /* @__PURE__ */ new WeakMap();\nclass DialogBuilder {\n  constructor(name) {\n    __privateAdd(this, _severity2);\n    __privateAdd(this, _text2);\n    __privateAdd(this, _name2);\n    __privateAdd(this, _buttons2);\n    __privateSet(this, _severity2, void 0);\n    __privateSet(this, _text2, \"\");\n    __privateSet(this, _name2, name != null ? name : \"\");\n    __privateSet(this, _buttons2, []);\n  }\n  /**\n   * Set dialog name\n   * @param name The name or headline of the dialog\n   */\n  setName(name) {\n    __privateSet(this, _name2, name);\n    return this;\n  }\n  /**\n   * Set the dialog text\n   * @param text Main text of the dialog\n   */\n  setText(text) {\n    __privateSet(this, _text2, text);\n    return this;\n  }\n  /**\n   * Set the severity of the dialog\n   * @param severity Severity of the dialog\n   */\n  setSeverity(severity) {\n    __privateSet(this, _severity2, severity);\n    return this;\n  }\n  /**\n   * Set buttons from array\n   * @param buttons Either an array of dialog buttons\n   */\n  setButtons(buttons) {\n    if (__privateGet(this, _buttons2).length > 0) {\n      console.warn(\"[@nextcloud/dialogs] Dialog buttons are already set - this overrides previous buttons.\");\n    }\n    __privateSet(this, _buttons2, buttons);\n    return this;\n  }\n  /**\n   * Add a single button\n   * @param button Button to add\n   */\n  addButton(button) {\n    __privateGet(this, _buttons2).push(button);\n    return this;\n  }\n  build() {\n    return new Dialog(__privateGet(this, _name2), __privateGet(this, _text2), __privateGet(this, _buttons2), __privateGet(this, _severity2));\n  }\n}\n_severity2 = /* @__PURE__ */ new WeakMap();\n_text2 = /* @__PURE__ */ new WeakMap();\n_name2 = /* @__PURE__ */ new WeakMap();\n_buttons2 = /* @__PURE__ */ new WeakMap();\nfunction getDialogBuilder(name) {\n  return new DialogBuilder(name);\n}\nexport {\n  Dialog,\n  DialogBuilder,\n  DialogSeverity,\n  FilePicker,\n  FilePickerBuilder,\n  FilePickerClosed,\n  FilePickerType,\n  h as TOAST_ARIA_LIVE_ASSERTIVE,\n  f as TOAST_ARIA_LIVE_OFF,\n  g as TOAST_ARIA_LIVE_POLITE,\n  d as TOAST_DEFAULT_TIMEOUT,\n  e as TOAST_PERMANENT_TIMEOUT,\n  c as TOAST_UNDO_TIMEOUT,\n  T as ToastAriaLive,\n  b as ToastType,\n  getDialogBuilder,\n  getFilePickerBuilder,\n  l as showError,\n  k as showInfo,\n  s as showMessage,\n  i as showSuccess,\n  m as showUndo,\n  j as showWarning,\n  spawnDialog\n};\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon account-group-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"AccountGroupIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon cog-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"CogIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon login-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M11 7L9.6 8.4L12.2 11H2V13H12.2L9.6 15.6L11 17L16 12L11 7M20 19H12V21H20C21.1 21 22 20.1 22 19V5C22 3.9 21.1 3 20 3H12V5H20V19Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"LoginIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon logout-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.58L17 17L22 12M4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"LogoutIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","/**\n * SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { showError, showSuccess } from '@nextcloud/dialogs'\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tcopied: false,\n\t\t\tcopyLoading: false,\n\t\t\tcopySuccess: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tcopyLinkIcon() {\n\t\t\tif (this.copySuccess) {\n\t\t\t\treturn 'icon-checkmark'\n\t\t\t}\n\t\t\tif (this.copyLoading) {\n\t\t\t\treturn 'icon-loading-small'\n\t\t\t}\n\t\t\treturn 'icon-public'\n\t\t},\n\t},\n\n\tmethods: {\n\t\tasync copyToClipboard(url) {\n\t\t\t// change to loading status\n\t\t\tthis.copyLoading = true\n\n\t\t\t// copy link to clipboard\n\t\t\ttry {\n\t\t\t\tawait navigator.clipboard.writeText(url)\n\t\t\t\tthis.copySuccess = true\n\t\t\t\tthis.copied = true\n\n\t\t\t\t// Notify success\n\t\t\t\tshowSuccess(t('contacts', 'Link copied to the clipboard'))\n\t\t\t} catch (error) {\n\t\t\t\tthis.copySuccess = false\n\t\t\t\tthis.copied = true\n\t\t\t\tshowError(t('contacts', 'Could not copy link to the clipboard.'))\n\t\t\t} finally {\n\t\t\t\tthis.copyLoading = false\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t// stop loading status regardless of outcome\n\t\t\t\t\tthis.copied = false\n\t\t\t\t\tthis.copySuccess = false\n\t\t\t\t}, 2000)\n\t\t\t}\n\t\t},\n\t},\n}\n","/**\n * SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport { emit } from '@nextcloud/event-bus'\nimport { showError } from '@nextcloud/dialogs'\n\nimport { joinCircle } from '../services/circles.ts'\nimport Circle from '../models/circle.ts'\nimport CopyToClipboardMixin from './CopyToClipboardMixin.js'\nimport Member from '../models/member.ts'\n\nexport default {\n\n\tprops: {\n\t\tcircle: {\n\t\t\ttype: Circle,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tmixins: [CopyToClipboardMixin],\n\n\tdata() {\n\t\treturn {\n\t\t\tloadingAction: false,\n\t\t\tloadingJoin: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tcopyButtonText() {\n\t\t\tif (this.copied) {\n\t\t\t\treturn this.copySuccess\n\t\t\t\t\t? t('contacts', 'Copied')\n\t\t\t\t\t: t('contacts', 'Could not copy')\n\t\t\t}\n\t\t\treturn t('contacts', 'Copy link')\n\t\t},\n\n\t\tcircleUrl() {\n\t\t\tconst route = this.$router.resolve(this.circle.router)\n\t\t\treturn window.location.origin + route.href\n\t\t},\n\n\t\tjoinButtonTitle() {\n\t\t\tif (this.circle.requireJoinAccept) {\n\t\t\t\treturn t('contacts', 'Request to join')\n\t\t\t}\n\t\t\treturn t('contacts', 'Join team')\n\t\t},\n\t},\n\n\tmethods: {\n\t\tconfirmLeaveCircle() {\n\t\t\twindow.OC.dialogs.confirmDestructive(\n\t\t\t\tt('contacts', 'You are about to leave {circle}.\\nAre you sure?', {\n\t\t\t\t\tcircle: this.circle.displayName,\n\t\t\t\t}),\n\t\t\t\tt('contacts', 'Please confirm team leave'),\n\t\t\t\twindow.OC.dialogs.YES_NO_BUTTONS,\n\t\t\t\tthis.leaveCircle,\n\t\t\t\ttrue,\n\t\t\t)\n\t\t},\n\t\tasync leaveCircle(confirm) {\n\t\t\tif (!confirm) {\n\t\t\t\tthis.logger.debug('Circle leave cancelled')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.loadingAction = true\n\t\t\tconst member = this.circle.initiator\n\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('deleteMemberFromCircle', {\n\t\t\t\t\tmember,\n\t\t\t\t\tleave: true,\n\t\t\t\t})\n\n\t\t\t\t// Reset initiator\n\t\t\t\tthis.circle.initiator = null\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Could not leave the circle', member, error)\n\t\t\t\tshowError(t('contacts', 'Could not leave the team {displayName}', this.circle))\n\t\t\t} finally {\n\t\t\t\tthis.loadingAction = false\n\t\t\t}\n\n\t\t},\n\n\t\tasync joinCircle() {\n\t\t\tthis.loadingJoin = true\n\t\t\ttry {\n\t\t\t\tconst initiator = await joinCircle(this.circle.id)\n\t\t\t\tconst member = new Member(initiator, this.circle)\n\n\t\t\t\t// Update initiator with newest membership values\n\t\t\t\tthis.circle.initiator = member\n\n\t\t\t\t// Append new member\n\t\t\t\tmember.circle.addMember(member)\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('contacts', 'Unable to join the team'))\n\t\t\t\tconsole.error('Unable to join the circle', error)\n\t\t\t} finally {\n\t\t\t\tthis.loadingJoin = false\n\t\t\t}\n\n\t\t},\n\n\t\tconfirmDeleteCircle() {\n\t\t\twindow.OC.dialogs.confirmDestructive(\n\t\t\t\tt('contacts', 'You are about to delete {circle}.\\nAre you sure?', {\n\t\t\t\t\tcircle: this.circle.displayName,\n\t\t\t\t}),\n\t\t\t\tt('contacts', 'Please confirm team deletion'),\n\t\t\t\twindow.OC.dialogs.YES_NO_BUTTONS,\n\t\t\t\tthis.deleteCircle,\n\t\t\t\ttrue,\n\t\t\t)\n\t\t},\n\t\tasync deleteCircle(confirm) {\n\t\t\tif (!confirm) {\n\t\t\t\tthis.logger.debug('Circle deletion cancelled')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.loadingAction = true\n\n\t\t\ttry {\n\t\t\t\tthis.$store.dispatch('deleteCircle', this.circle.id)\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('contacts', 'Unable to delete the team'))\n\t\t\t} finally {\n\t\t\t\tthis.loadingAction = false\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Trigger the entity picker view\n\t\t */\n\t\tasync addMemberToCircle() {\n\t\t\ttry {\n\t\t\t\t// Avoid VueRouter NavigationDuplicated\n\t\t\t\tawait this.$router.push(this.circle.router)\n\t\t\t} catch (error) {}\n\t\t\temit('contacts:circles:append', this.circle.id)\n\t\t},\n\t},\n}\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<!-- contact header -->\n\t<header class=\"contact-header\" :style=\"cssStyle\">\n\t\t<div class=\"contact-header__no-wrap\">\n\t\t\t<div class=\"contact-header__avatar\">\n\t\t\t\t<slot name=\"avatar\" :avatar-size=\"avatarSize\" />\n\t\t\t</div>\n\n\t\t\t<!-- fullname, org, title -->\n\t\t\t<div class=\"contact-header__infos\">\n\t\t\t\t<h2 class=\"contact-header__infos-title\">\n\t\t\t\t\t<slot name=\"title\" />\n\t\t\t\t</h2>\n\t\t\t\t<div v-if=\"$slots.subtitle\" class=\"contact-header__infos-subtitle\">\n\t\t\t\t\t<slot name=\"subtitle\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"contact-header__quick-actions\">\n\t\t\t\t\t<slot name=\"quick-actions\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- actions -->\n\t\t<div class=\"contact-header__actions\">\n\t\t\t<slot name=\"actions\" />\n\n\t\t\t<!-- menu actions -->\n\t\t\t<Actions ref=\"actions\"\n\t\t\t\tclass=\"header-menu\"\n\t\t\t\tmenu-align=\"right\"\n\t\t\t\tv-bind=\"$attrs\">\n\t\t\t\t<slot name=\"actions-menu\" />\n\t\t\t</Actions>\n\t\t</div>\n\t</header>\n</template>\n\n<script>\nimport { NcActions as Actions } from '@nextcloud/vue'\n\nexport default {\n\tname: 'DetailsHeader',\n\n\tcomponents: {\n\t\tActions,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tavatarSize: 75,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tcssStyle() {\n\t\t\treturn {\n\t\t\t\t'--avatar-size': this.avatarSize + 'px',\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../css/ContactDetailsLayout';\n\n$top-padding: 50px;\n\n// Header with avatar, name, position, actions...\n.contact-header {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-wrap: wrap;\n\tpadding: $top-padding 0 20px;\n\tgap: $contact-details-row-gap;\n\t&__quick-actions{\n\t\tpadding: 5px 0;\n\t}\n\n\t@media (max-width: 1024px) {\n\t\t// Top padding of 44px is already included in AppContent by default on mobile\n\t\tpadding-top: calc($top-padding - 44px);\n\t\t&__no-wrap {\n\t\t\twidth: 100%;\n\t\t}\n\t\t&__actions .header-menu {\n\t\t\tmargin-left: auto;\n\t\t}\n\t\t&__avatar {\n\t\t\twidth: 150px !important;\n\t\t}\n\t}\n\n\t&__no-wrap {\n\t\tdisplay: flex;\n\t\tgap: $contact-details-row-gap;\n\t\talign-items: center;\n\t\tmin-width: 0;\n\t}\n\n\t// AVATAR\n\t&__avatar {\n\t\t// Global single column layout\n\t\tdisplay: flex;\n\t\tflex: 0 1 auto;\n\t\tjustify-content: flex-end;\n\t\twidth: $contact-details-label-max-width;\n\t\tmin-width: 0; // Has to be zero unless we implement wrapping\n\t}\n\n\t// ORG-TITLE-NAME\n\t&__infos {\n\t\tflex-direction: column;\n\n\t\t// Global single column layout\n\t\tdisplay: flex;\n\t\tflex: 0 1 auto;\n\t\twidth: $contact-details-value-max-width;\n\t\tmin-width: 0; // Has to be zero unless we implement wrapping\n\n\t\t&-title,\n\t\t&-subtitle {\n\t\t\tdisplay: flex;\n\t\t\tflex-wrap: wrap;\n\t\t\tmargin: 0;\n\t\t}\n\n\t\t&__quick-actions {\n\t\t\tpadding: 5px 0;\n\t\t}\n\n\t\t:deep(input) {\n\t\t\tflex: 1 auto;\n\t\t}\n\n\t\t&-title :deep(input) {\n\t\t\tfont-weight: bold;\n\t\t}\n\n\t\t&-subtitle:placeholder-shown {\n\t\t\tmax-width: 20%;\n\t\t}\n\t}\n\n\t// ACTIONS\n\t&__actions {\n\t\tdisplay: flex;\n\t\tflex: 1 0 auto;\n\t\tgap: 5px;\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<h3 class=\"app-content-heading\">\n\t\t<slot />\n\t\t<div v-if=\"loading\" class=\"app-content-heading__loader icon-loading-small\" />\n\t</h3>\n</template>\n\n<script>\nexport default {\n\tname: 'ContentHeading',\n\n\tprops: {\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.app-content-heading {\n\tfont-weight: bold;\n\tdisplay: flex;\n\n\t&__loader {\n\t\tmargin-left: 8px;\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<ul>\n\t\t<li v-for=\"(configs, title) in PUBLIC_CIRCLE_CONFIG\" :key=\"title\" class=\"circle-config\">\n\t\t\t<ContentHeading class=\"circle-config__title\">\n\t\t\t\t{{ title }}\n\t\t\t</ContentHeading>\n\n\t\t\t<ul class=\"circle-config__list\">\n\t\t\t\t<CheckboxRadioSwitch v-for=\"(label, config) in configs\"\n\t\t\t\t\t:key=\"'circle-config' + config\"\n\t\t\t\t\t:checked=\"isChecked(config)\"\n\t\t\t\t\t:loading=\"loading === config\"\n\t\t\t\t\t:disabled=\"loading !== false\"\n\t\t\t\t\twrapper-element=\"li\"\n\t\t\t\t\t@update:checked=\"onChange(config, $event)\">\n\t\t\t\t\t{{ label }}\n\t\t\t\t</CheckboxRadioSwitch>\n\t\t\t</ul>\n\t\t</li>\n\t</ul>\n</template>\n\n<script>\nimport { NcCheckboxRadioSwitch as CheckboxRadioSwitch } from '@nextcloud/vue'\nimport ContentHeading from './ContentHeading.vue'\n\nimport { PUBLIC_CIRCLE_CONFIG } from '../../models/constants.ts'\nimport Circle from '../../models/circle.ts'\nimport { CircleEdit, editCircle } from '../../services/circles.ts'\nimport { showError } from '@nextcloud/dialogs'\n\nexport default {\n\tname: 'CircleConfigs',\n\n\tcomponents: {\n\t\tCheckboxRadioSwitch,\n\t\tContentHeading,\n\t},\n\n\tprops: {\n\t\tcircle: {\n\t\t\ttype: Circle,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tPUBLIC_CIRCLE_CONFIG,\n\n\t\t\tloading: false,\n\t\t}\n\t},\n\n\tmethods: {\n\t\tisChecked(config) {\n\t\t\treturn (this.circle.config & config) !== 0\n\t\t},\n\n\t\t/**\n\t\t * On toggle, add or remove the config bitwise\n\t\t *\n\t\t * @param {CircleConfig} config the circle config to manage\n\t\t * @param {boolean} checked checked or not\n\t\t */\n\t\tasync onChange(config, checked) {\n\t\t\tthis.logger.debug(`Circle config ${config} is set to ${checked}`)\n\n\t\t\tthis.loading = config\n\t\t\tconst prevConfig = this.circle.config\n\t\t\tif (checked) {\n\t\t\t\t// eslint-disable-next-line vue/no-mutating-props\n\t\t\t\tconfig = prevConfig | config\n\t\t\t} else {\n\t\t\t\t// eslint-disable-next-line vue/no-mutating-props\n\t\t\t\tconfig = prevConfig & ~config\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst circleData = await editCircle(this.circle.id, CircleEdit.Config, config)\n\t\t\t\t// eslint-disable-next-line vue/no-mutating-props\n\t\t\t\tthis.circle.config = circleData.config\n\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Unable to edit circle config', prevConfig, config, error)\n\t\t\t\tshowError(t('contacts', 'An error happened during the config change'))\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.circle-config {\n\t&__title {\n\t\tuser-select: none;\n\t\tmargin-top: 22px;\n\t}\n}\n</style>\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon check-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"CheckIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon close-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"CloseIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon exit-to-app-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M19,3H5C3.89,3 3,3.89 3,5V9H5V5H19V19H5V15H3V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M10.08,15.58L11.5,17L16.5,12L11.5,7L10.08,8.41L12.67,11H3V13H12.67L10.08,15.58Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"ExitToAppIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon shield-check-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"ShieldCheckIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","/**\n * SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nexport default {\n\tcomputed: {\n\t\t// router variables\n\t\tselectedContact() {\n\t\t\treturn this.$route.params.selectedContact\n\t\t},\n\t\tselectedGroup() {\n\t\t\treturn this.$route.params.selectedGroup\n\t\t},\n\t\tselectedCircle() {\n\t\t\treturn this.$route.params.selectedCircle\n\t\t},\n\t},\n}\n","<!--\n  - SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<NcListItem compact\n\t\t:name=\"source.displayName\"\n\t\tclass=\"members-list-item\">\n\t\t<template #icon>\n\t\t\t<NcAvatar disable-menu\n\t\t\t\t:size=\"avatarSize\"\n\t\t\t\t:display-name=\"source.displayName\"\n\t\t\t\t:is-no-user=\"!source.isUser\" />\n\t\t</template>\n\n\t\t<!-- Level -->\n\t\t<template #subname>\n\t\t\t{{ levelName }}\n\t\t</template>\n\n\t\t<!-- Accept invite -->\n\t\t<template v-if=\"!loading && isPendingApproval && circle.canManageMembers\" #extra-actions>\n\t\t\t<NcButton @click=\"acceptMember\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconCheck :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('contacts', 'Accept membership request') }}\n\t\t\t</NcButton>\n\t\t\t<NcButton @click=\"deleteMember\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconClose :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('contacts', 'Reject membership request') }}\n\t\t\t</NcButton>\n\t\t</template>\n\n\t\t<template v-else #actions>\n\t\t\t<NcActionText v-if=\"loading\" icon=\"icon-loading-small\">\n\t\t\t\t{{ t('contacts', 'Loading ') }}\n\t\t\t</NcActionText>\n\n\t\t\t<!-- Normal menu -->\n\t\t\t<template v-else>\n\t\t\t\t<!-- Level picker -->\n\t\t\t\t<template v-if=\"canChangeLevel\">\n\t\t\t\t\t<NcActionText>\n\t\t\t\t\t\t{{ t('contacts', 'Manage level') }}\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconShieldCheck :size=\"16\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcActionText>\n\t\t\t\t\t<NcActionButton v-for=\"level in availableLevelsChange\"\n\t\t\t\t\t\t:key=\"level\"\n\t\t\t\t\t\ticon=\"\"\n\t\t\t\t\t\t@click=\"changeLevel(level)\">\n\t\t\t\t\t\t{{ levelChangeLabel(level) }}\n\t\t\t\t\t</NcActionButton>\n\n\t\t\t\t\t<NcActionSeparator />\n\t\t\t\t</template>\n\n\t\t\t\t<!-- Leave or delete member from circle -->\n\t\t\t\t<NcActionButton v-if=\"isCurrentUser && !circle.isOwner\" @click=\"deleteMember\">\n\t\t\t\t\t{{ t('contacts', 'Leave team') }}\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconExitToApp :size=\"16\" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcActionButton>\n\t\t\t\t<NcActionButton v-else-if=\"canDelete\" @click=\"deleteMember\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconDelete :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Remove member') }}\n\t\t\t\t</NcActionButton>\n\t\t\t</template>\n\t\t</template>\n\t</NcListItem>\n</template>\n\n<script>\nimport { CIRCLES_MEMBER_LEVELS, MemberLevels, MemberStatus } from '../../models/constants.ts'\n\nimport {\n\tNcAvatar,\n\tNcListItem,\n\tNcActionSeparator,\n\tNcActionButton,\n\tNcActionText,\n} from '@nextcloud/vue'\nimport IconCheck from 'vue-material-design-icons/Check.vue'\nimport IconClose from 'vue-material-design-icons/Close.vue'\nimport IconDelete from 'vue-material-design-icons/Delete.vue'\nimport IconExitToApp from 'vue-material-design-icons/ExitToApp.vue'\nimport IconShieldCheck from 'vue-material-design-icons/ShieldCheck.vue'\n\nimport { changeMemberLevel } from '../../services/circles.ts'\nimport { showError } from '@nextcloud/dialogs'\nimport RouterMixin from '../../mixins/RouterMixin.js'\n\nexport default {\n\tname: 'MemberListItem',\n\n\tcomponents: {\n\t\tIconCheck,\n\t\tIconClose,\n\t\tIconDelete,\n\t\tIconExitToApp,\n\t\tIconShieldCheck,\n\t\tNcListItem,\n\t\tNcActionButton,\n\t\tNcActionSeparator,\n\t\tNcActionText,\n\t\tNcAvatar,\n\t},\n\n\tmixins: [RouterMixin],\n\n\tprops: {\n\t\tsource: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t/**\n\t\t * Return the current circle\n\t\t *\n\t\t * @return {Circle}\n\t\t */\n\t\tcircle() {\n\t\t\treturn this.$store.getters.getCircle(this.selectedCircle)\n\t\t},\n\n\t\t/**\n\t\t * Current member level translated name\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tlevelName() {\n\t\t\tif (this.source.level === MemberLevels.NONE) {\n\t\t\t\treturn t('contacts', 'Pending')\n\t\t\t}\n\n\t\t\treturn CIRCLES_MEMBER_LEVELS[this.source.level]\n\t\t\t\t|| CIRCLES_MEMBER_LEVELS[MemberLevels.MEMBER]\n\t\t},\n\n\t\t/**\n\t\t * Current user member level\n\t\t *\n\t\t * @return {number}\n\t\t */\n\t\tcurrentUserLevel() {\n\t\t\treturn this.circle?.initiator?.level || MemberLevels.MEMBER\n\t\t},\n\n\t\t/**\n\t\t * Current user member level\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tcurrentUserId() {\n\t\t\treturn this.circle?.initiator?.singleId\n\t\t},\n\n\t\t/**\n\t\t * Available levels change to the current user\n\t\t *\n\t\t * @return {Array}\n\t\t */\n\t\tavailableLevelsChange() {\n\t\t\tconst levels = Object.keys(CIRCLES_MEMBER_LEVELS)\n\t\t\t\t// Object.keys returns those as string\n\t\t\t\t.map(level => parseInt(level, 10))\n\t\t\t\t// we cannot set to a level higher or equal than the current user's level\n\t\t\t\t.filter(level => level < this.currentUserLevel)\n\n\t\t\t// Admins can promote others as Admin too\n\t\t\tif (this.currentUserLevel === MemberLevels.ADMIN) {\n\t\t\t\tlevels.push(MemberLevels.ADMIN)\n\t\t\t}\n\n\t\t\t// Owners transfer ownership to another member\n\t\t\tif (this.circle.isOwner) {\n\t\t\t\tlevels.push(MemberLevels.OWNER)\n\t\t\t}\n\n\t\t\t// we cannot set to the level this member is already\n\t\t\treturn levels.filter(level => level !== this.source.level)\n\t\t},\n\n\t\t/**\n\t\t * Is the current member the current user?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisCurrentUser() {\n\t\t\treturn this.currentUserId === this.source.singleId\n\t\t},\n\n\t\t/**\n\t\t * Is the current member pending moderator approval?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisPendingApproval() {\n\t\t\treturn this.source?.level === MemberLevels.NONE\n\t\t\t\t&& this.source?.status === MemberStatus.REQUESTING\n\t\t},\n\n\t\t/**\n\t\t * Can the current user change the level of others?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tcanChangeLevel() {\n\t\t\t// we can change if the member is at the same\n\t\t\t// or lower level as the current user\n\t\t\t// BUT not an owner as there can/must always be one\n\t\t\treturn this.source.level > MemberLevels.NONE\n\t\t\t\t&& this.availableLevelsChange.length > 0\n\t\t\t\t&& this.currentUserLevel >= this.source.level\n\t\t\t\t&& this.circle.canManageMembers\n\t\t\t\t&& !(this.circle.isOwner && this.isCurrentUser)\n\t\t},\n\n\t\t/**\n\t\t * Can the current user delete members or?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tcanDelete() {\n\t\t\treturn this.circle.canManageMembers\n\t\t\t\t&& this.source.level <= this.currentUserLevel\n\t\t\t\t&& !this.isCurrentUser\n\t\t},\n\n\t\tavatarSize() {\n\t\t\treturn parseInt(window.getComputedStyle(document.body).getPropertyValue('--default-clickable-area'))\n\t\t},\n\t},\n\tmethods: {\n\t\t/**\n\t\t * Return the promote/demote member action label\n\t\t *\n\t\t * @param {MemberLevel} level the member level\n\t\t * @return {string}\n\t\t */\n\t\tlevelChangeLabel(level) {\n\t\t\tif (level === MemberLevels.OWNER) {\n\t\t\t\treturn t('contacts', 'Promote as sole owner')\n\t\t\t}\n\n\t\t\tif (this.source.level < level) {\n\t\t\t\treturn t('contacts', 'Promote to {level}', { level: CIRCLES_MEMBER_LEVELS[level] })\n\t\t\t}\n\t\t\treturn t('contacts', 'Demote to {level}', { level: CIRCLES_MEMBER_LEVELS[level] })\n\t\t},\n\n\t\t/**\n\t\t * Delete the current member\n\t\t */\n\t\tasync deleteMember() {\n\t\t\tthis.loading = true\n\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('deleteMemberFromCircle', {\n\t\t\t\t\tmember: this.source,\n\t\t\t\t\tleave: this.isCurrentUser,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tif (error?.response?.status === 404) {\n\t\t\t\t\tthis.logger.debug('Member is not in circle')\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tconsole.error('Could not delete the member', this.source, error)\n\t\t\t\tshowError(t('contacts', 'Could not delete the member {displayName}', this.source))\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\tasync changeLevel(level) {\n\t\t\tthis.loading = true\n\n\t\t\ttry {\n\t\t\t\tawait changeMemberLevel(this.circle.id, this.source.id, level)\n\t\t\t\tthis.showLevelMenu = false\n\n\t\t\t\t// If we changed an owner, let's refresh the whole dataset to update all ownership & memberships\n\t\t\t\tif (level === MemberLevels.OWNER) {\n\t\t\t\t\tawait this.$store.dispatch('getCircle', this.circle.id)\n\t\t\t\t\tawait this.$store.dispatch('getCircleMembers', this.circle.id)\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// this.source is a class. We're modifying the class setter, not the prop itself\n\t\t\t\t// eslint-disable-next-line vue/no-mutating-props\n\t\t\t\tthis.source.level = level\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Could not change the member level to', CIRCLES_MEMBER_LEVELS[level])\n\t\t\t\tshowError(t('contacts', 'Could not change the member level to {level}', {\n\t\t\t\t\tlevel: CIRCLES_MEMBER_LEVELS[level],\n\t\t\t\t}))\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\tasync acceptMember() {\n\t\t\tthis.loading = true\n\n\t\t\ttry {\n\t\t\t\tawait await this.$store.dispatch('acceptCircleMember', {\n\t\t\t\t\tcircleId: this.circle.id,\n\t\t\t\t\tmemberId: this.source.id,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Could not accept membership request', this.source, error)\n\t\t\t\tshowError(t('contacts', 'Could not accept membership request'))\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Reset menu on close\n\t\t */\n\t\tonMenuClose() {\n\t\t\tthis.showLevelMenu = false\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.members-list-item {\n\tuser-select: none;\n\tbox-sizing: border-box;\n\tpage-break-inside: avoid;\n}\n</style>\n","/*!\n * vue-virtual-scroll-list v2.3.4\n * open source under the MIT license\n * https://github.com/tangbc/vue-virtual-scroll-list#readme\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('vue')) :\n  typeof define === 'function' && define.amd ? define(['vue'], factory) :\n  (global = global || self, global.VirtualList = factory(global.Vue));\n}(this, (function (Vue) { 'use strict';\n\n  Vue = Vue && Object.prototype.hasOwnProperty.call(Vue, 'default') ? Vue['default'] : Vue;\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      enumerableOnly && (symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      })), keys.push.apply(keys, symbols);\n    }\n    return keys;\n  }\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = null != arguments[i] ? arguments[i] : {};\n      i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n    return target;\n  }\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n  }\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n    return arr2;\n  }\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  /**\n   * virtual list core calculating center\n   */\n\n  var DIRECTION_TYPE = {\n    FRONT: 'FRONT',\n    // scroll up or left\n    BEHIND: 'BEHIND' // scroll down or right\n  };\n\n  var CALC_TYPE = {\n    INIT: 'INIT',\n    FIXED: 'FIXED',\n    DYNAMIC: 'DYNAMIC'\n  };\n  var LEADING_BUFFER = 0;\n  var Virtual = /*#__PURE__*/function () {\n    function Virtual(param, callUpdate) {\n      _classCallCheck(this, Virtual);\n      this.init(param, callUpdate);\n    }\n    _createClass(Virtual, [{\n      key: \"init\",\n      value: function init(param, callUpdate) {\n        // param data\n        this.param = param;\n        this.callUpdate = callUpdate;\n\n        // size data\n        this.sizes = new Map();\n        this.firstRangeTotalSize = 0;\n        this.firstRangeAverageSize = 0;\n        this.fixedSizeValue = 0;\n        this.calcType = CALC_TYPE.INIT;\n\n        // scroll data\n        this.offset = 0;\n        this.direction = '';\n\n        // range data\n        this.range = Object.create(null);\n        if (param) {\n          this.checkRange(0, param.keeps - 1);\n        }\n\n        // benchmark test data\n        // this.__bsearchCalls = 0\n        // this.__getIndexOffsetCalls = 0\n      }\n    }, {\n      key: \"destroy\",\n      value: function destroy() {\n        this.init(null, null);\n      }\n\n      // return current render range\n    }, {\n      key: \"getRange\",\n      value: function getRange() {\n        var range = Object.create(null);\n        range.start = this.range.start;\n        range.end = this.range.end;\n        range.padFront = this.range.padFront;\n        range.padBehind = this.range.padBehind;\n        return range;\n      }\n    }, {\n      key: \"isBehind\",\n      value: function isBehind() {\n        return this.direction === DIRECTION_TYPE.BEHIND;\n      }\n    }, {\n      key: \"isFront\",\n      value: function isFront() {\n        return this.direction === DIRECTION_TYPE.FRONT;\n      }\n\n      // return start index offset\n    }, {\n      key: \"getOffset\",\n      value: function getOffset(start) {\n        return (start < 1 ? 0 : this.getIndexOffset(start)) + this.param.slotHeaderSize;\n      }\n    }, {\n      key: \"updateParam\",\n      value: function updateParam(key, value) {\n        var _this = this;\n        if (this.param && key in this.param) {\n          // if uniqueIds change, find out deleted id and remove from size map\n          if (key === 'uniqueIds') {\n            this.sizes.forEach(function (v, key) {\n              if (!value.includes(key)) {\n                _this.sizes[\"delete\"](key);\n              }\n            });\n          }\n          this.param[key] = value;\n        }\n      }\n\n      // save each size map by id\n    }, {\n      key: \"saveSize\",\n      value: function saveSize(id, size) {\n        this.sizes.set(id, size);\n\n        // we assume size type is fixed at the beginning and remember first size value\n        // if there is no size value different from this at next comming saving\n        // we think it's a fixed size list, otherwise is dynamic size list\n        if (this.calcType === CALC_TYPE.INIT) {\n          this.fixedSizeValue = size;\n          this.calcType = CALC_TYPE.FIXED;\n        } else if (this.calcType === CALC_TYPE.FIXED && this.fixedSizeValue !== size) {\n          this.calcType = CALC_TYPE.DYNAMIC;\n          // it's no use at all\n          delete this.fixedSizeValue;\n        }\n\n        // calculate the average size only in the first range\n        if (this.calcType !== CALC_TYPE.FIXED && typeof this.firstRangeTotalSize !== 'undefined') {\n          if (this.sizes.size < Math.min(this.param.keeps, this.param.uniqueIds.length)) {\n            this.firstRangeTotalSize = _toConsumableArray(this.sizes.values()).reduce(function (acc, val) {\n              return acc + val;\n            }, 0);\n            this.firstRangeAverageSize = Math.round(this.firstRangeTotalSize / this.sizes.size);\n          } else {\n            // it's done using\n            delete this.firstRangeTotalSize;\n          }\n        }\n      }\n\n      // in some special situation (e.g. length change) we need to update in a row\n      // try goiong to render next range by a leading buffer according to current direction\n    }, {\n      key: \"handleDataSourcesChange\",\n      value: function handleDataSourcesChange() {\n        var start = this.range.start;\n        if (this.isFront()) {\n          start = start - LEADING_BUFFER;\n        } else if (this.isBehind()) {\n          start = start + LEADING_BUFFER;\n        }\n        start = Math.max(start, 0);\n        this.updateRange(this.range.start, this.getEndByStart(start));\n      }\n\n      // when slot size change, we also need force update\n    }, {\n      key: \"handleSlotSizeChange\",\n      value: function handleSlotSizeChange() {\n        this.handleDataSourcesChange();\n      }\n\n      // calculating range on scroll\n    }, {\n      key: \"handleScroll\",\n      value: function handleScroll(offset) {\n        this.direction = offset < this.offset || offset === 0 ? DIRECTION_TYPE.FRONT : DIRECTION_TYPE.BEHIND;\n        this.offset = offset;\n        if (!this.param) {\n          return;\n        }\n        if (this.direction === DIRECTION_TYPE.FRONT) {\n          this.handleFront();\n        } else if (this.direction === DIRECTION_TYPE.BEHIND) {\n          this.handleBehind();\n        }\n      }\n\n      // ----------- public method end -----------\n    }, {\n      key: \"handleFront\",\n      value: function handleFront() {\n        var overs = this.getScrollOvers();\n        // should not change range if start doesn't exceed overs\n        if (overs > this.range.start) {\n          return;\n        }\n\n        // move up start by a buffer length, and make sure its safety\n        var start = Math.max(overs - this.param.buffer, 0);\n        this.checkRange(start, this.getEndByStart(start));\n      }\n    }, {\n      key: \"handleBehind\",\n      value: function handleBehind() {\n        var overs = this.getScrollOvers();\n        // range should not change if scroll overs within buffer\n        if (overs < this.range.start + this.param.buffer) {\n          return;\n        }\n        this.checkRange(overs, this.getEndByStart(overs));\n      }\n\n      // return the pass overs according to current scroll offset\n    }, {\n      key: \"getScrollOvers\",\n      value: function getScrollOvers() {\n        // if slot header exist, we need subtract its size\n        var offset = this.offset - this.param.slotHeaderSize;\n        if (offset <= 0) {\n          return 0;\n        }\n\n        // if is fixed type, that can be easily\n        if (this.isFixedType()) {\n          return Math.floor(offset / this.fixedSizeValue);\n        }\n        var low = 0;\n        var middle = 0;\n        var middleOffset = 0;\n        var high = this.param.uniqueIds.length;\n        while (low <= high) {\n          // this.__bsearchCalls++\n          middle = low + Math.floor((high - low) / 2);\n          middleOffset = this.getIndexOffset(middle);\n          if (middleOffset === offset) {\n            return middle;\n          } else if (middleOffset < offset) {\n            low = middle + 1;\n          } else if (middleOffset > offset) {\n            high = middle - 1;\n          }\n        }\n        return low > 0 ? --low : 0;\n      }\n\n      // return a scroll offset from given index, can efficiency be improved more here?\n      // although the call frequency is very high, its only a superposition of numbers\n    }, {\n      key: \"getIndexOffset\",\n      value: function getIndexOffset(givenIndex) {\n        if (!givenIndex) {\n          return 0;\n        }\n        var offset = 0;\n        var indexSize = 0;\n        for (var index = 0; index < givenIndex; index++) {\n          // this.__getIndexOffsetCalls++\n          indexSize = this.sizes.get(this.param.uniqueIds[index]);\n          offset = offset + (typeof indexSize === 'number' ? indexSize : this.getEstimateSize());\n        }\n        return offset;\n      }\n\n      // is fixed size type\n    }, {\n      key: \"isFixedType\",\n      value: function isFixedType() {\n        return this.calcType === CALC_TYPE.FIXED;\n      }\n\n      // return the real last index\n    }, {\n      key: \"getLastIndex\",\n      value: function getLastIndex() {\n        return this.param.uniqueIds.length - 1;\n      }\n\n      // in some conditions range is broke, we need correct it\n      // and then decide whether need update to next range\n    }, {\n      key: \"checkRange\",\n      value: function checkRange(start, end) {\n        var keeps = this.param.keeps;\n        var total = this.param.uniqueIds.length;\n\n        // datas less than keeps, render all\n        if (total <= keeps) {\n          start = 0;\n          end = this.getLastIndex();\n        } else if (end - start < keeps - 1) {\n          // if range length is less than keeps, corrent it base on end\n          start = end - keeps + 1;\n        }\n        if (this.range.start !== start) {\n          this.updateRange(start, end);\n        }\n      }\n\n      // setting to a new range and rerender\n    }, {\n      key: \"updateRange\",\n      value: function updateRange(start, end) {\n        this.range.start = start;\n        this.range.end = end;\n        this.range.padFront = this.getPadFront();\n        this.range.padBehind = this.getPadBehind();\n        this.callUpdate(this.getRange());\n      }\n\n      // return end base on start\n    }, {\n      key: \"getEndByStart\",\n      value: function getEndByStart(start) {\n        var theoryEnd = start + this.param.keeps - 1;\n        var truelyEnd = Math.min(theoryEnd, this.getLastIndex());\n        return truelyEnd;\n      }\n\n      // return total front offset\n    }, {\n      key: \"getPadFront\",\n      value: function getPadFront() {\n        if (this.isFixedType()) {\n          return this.fixedSizeValue * this.range.start;\n        } else {\n          return this.getIndexOffset(this.range.start);\n        }\n      }\n\n      // return total behind offset\n    }, {\n      key: \"getPadBehind\",\n      value: function getPadBehind() {\n        var end = this.range.end;\n        var lastIndex = this.getLastIndex();\n        if (this.isFixedType()) {\n          return (lastIndex - end) * this.fixedSizeValue;\n        }\n        return (lastIndex - end) * this.getEstimateSize();\n      }\n\n      // get the item estimate size\n    }, {\n      key: \"getEstimateSize\",\n      value: function getEstimateSize() {\n        return this.isFixedType() ? this.fixedSizeValue : this.firstRangeAverageSize || this.param.estimateSize;\n      }\n    }]);\n    return Virtual;\n  }();\n\n  /**\n   * props declaration for default, item and slot component\n   */\n\n  var VirtualProps = {\n    dataKey: {\n      type: [String, Function],\n      required: true\n    },\n    dataSources: {\n      type: Array,\n      required: true\n    },\n    dataComponent: {\n      type: [Object, Function],\n      required: true\n    },\n    keeps: {\n      type: Number,\n      \"default\": 30\n    },\n    extraProps: {\n      type: Object\n    },\n    estimateSize: {\n      type: Number,\n      \"default\": 50\n    },\n    direction: {\n      type: String,\n      \"default\": 'vertical' // the other value is horizontal\n    },\n\n    start: {\n      type: Number,\n      \"default\": 0\n    },\n    offset: {\n      type: Number,\n      \"default\": 0\n    },\n    topThreshold: {\n      type: Number,\n      \"default\": 0\n    },\n    bottomThreshold: {\n      type: Number,\n      \"default\": 0\n    },\n    pageMode: {\n      type: Boolean,\n      \"default\": false\n    },\n    rootTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    wrapTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    wrapClass: {\n      type: String,\n      \"default\": ''\n    },\n    wrapStyle: {\n      type: Object\n    },\n    itemTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    itemClass: {\n      type: String,\n      \"default\": ''\n    },\n    itemClassAdd: {\n      type: Function\n    },\n    itemStyle: {\n      type: Object\n    },\n    headerTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    headerClass: {\n      type: String,\n      \"default\": ''\n    },\n    headerStyle: {\n      type: Object\n    },\n    footerTag: {\n      type: String,\n      \"default\": 'div'\n    },\n    footerClass: {\n      type: String,\n      \"default\": ''\n    },\n    footerStyle: {\n      type: Object\n    },\n    itemScopedSlots: {\n      type: Object\n    }\n  };\n  var ItemProps = {\n    index: {\n      type: Number\n    },\n    event: {\n      type: String\n    },\n    tag: {\n      type: String\n    },\n    horizontal: {\n      type: Boolean\n    },\n    source: {\n      type: Object\n    },\n    component: {\n      type: [Object, Function]\n    },\n    slotComponent: {\n      type: Function\n    },\n    uniqueKey: {\n      type: [String, Number]\n    },\n    extraProps: {\n      type: Object\n    },\n    scopedSlots: {\n      type: Object\n    }\n  };\n  var SlotProps = {\n    event: {\n      type: String\n    },\n    uniqueKey: {\n      type: String\n    },\n    tag: {\n      type: String\n    },\n    horizontal: {\n      type: Boolean\n    }\n  };\n\n  var Wrapper = {\n    created: function created() {\n      this.shapeKey = this.horizontal ? 'offsetWidth' : 'offsetHeight';\n    },\n    mounted: function mounted() {\n      var _this = this;\n      if (typeof ResizeObserver !== 'undefined') {\n        this.resizeObserver = new ResizeObserver(function () {\n          _this.dispatchSizeChange();\n        });\n        this.resizeObserver.observe(this.$el);\n      }\n    },\n    // since componet will be reused, so disptach when updated\n    updated: function updated() {\n      // this.dispatchSizeChange()\n      this.resizeObserver.observe(this.$el);\n    },\n    beforeDestroy: function beforeDestroy() {\n      if (this.resizeObserver) {\n        this.resizeObserver.disconnect();\n        this.resizeObserver = null;\n      }\n    },\n    methods: {\n      getCurrentSize: function getCurrentSize() {\n        return this.$el ? this.$el[this.shapeKey] : 0;\n      },\n      // tell parent current size identify by unqiue key\n      dispatchSizeChange: function dispatchSizeChange() {\n        this.$parent.$emit(this.event, this.uniqueKey, this.getCurrentSize(), this.hasInitial);\n      }\n    }\n  };\n\n  // wrapping for item\n  var Item = Vue.component('virtual-list-item', {\n    mixins: [Wrapper],\n    props: ItemProps,\n    render: function render(h) {\n      var tag = this.tag,\n        component = this.component,\n        _this$extraProps = this.extraProps,\n        extraProps = _this$extraProps === void 0 ? {} : _this$extraProps,\n        index = this.index,\n        source = this.source,\n        _this$scopedSlots = this.scopedSlots,\n        scopedSlots = _this$scopedSlots === void 0 ? {} : _this$scopedSlots,\n        uniqueKey = this.uniqueKey,\n        slotComponent = this.slotComponent;\n      var props = _objectSpread2(_objectSpread2({}, extraProps), {}, {\n        source: source,\n        index: index\n      });\n      return h(tag, {\n        key: uniqueKey,\n        attrs: {\n          role: 'listitem'\n        }\n      }, [slotComponent ? slotComponent({\n        item: source,\n        index: index,\n        scope: props\n      }) : h(component, {\n        props: props,\n        scopedSlots: scopedSlots\n      })]);\n    }\n  });\n\n  // wrapping for slot\n  var Slot = Vue.component('virtual-list-slot', {\n    mixins: [Wrapper],\n    props: SlotProps,\n    render: function render(h) {\n      var tag = this.tag,\n        uniqueKey = this.uniqueKey;\n      return h(tag, {\n        key: uniqueKey,\n        attrs: {\n          role: uniqueKey\n        }\n      }, this.$slots[\"default\"]);\n    }\n  });\n\n  /**\n   * virtual list default component\n   */\n  var EVENT_TYPE = {\n    ITEM: 'item_resize',\n    SLOT: 'slot_resize'\n  };\n  var SLOT_TYPE = {\n    HEADER: 'thead',\n    // string value also use for aria role attribute\n    FOOTER: 'tfoot'\n  };\n  var VirtualList = Vue.component('virtual-list', {\n    props: VirtualProps,\n    data: function data() {\n      return {\n        range: null\n      };\n    },\n    watch: {\n      'dataSources.length': function dataSourcesLength() {\n        this.virtual.updateParam('uniqueIds', this.getUniqueIdFromDataSources());\n        this.virtual.handleDataSourcesChange();\n      },\n      keeps: function keeps(newValue) {\n        this.virtual.updateParam('keeps', newValue);\n        this.virtual.handleSlotSizeChange();\n      },\n      start: function start(newValue) {\n        this.scrollToIndex(newValue);\n      },\n      offset: function offset(newValue) {\n        this.scrollToOffset(newValue);\n      }\n    },\n    created: function created() {\n      this.isHorizontal = this.direction === 'horizontal';\n      this.directionKey = this.isHorizontal ? 'scrollLeft' : 'scrollTop';\n      this.installVirtual();\n\n      // listen item size change\n      this.$on(EVENT_TYPE.ITEM, this.onItemResized);\n\n      // listen slot size change\n      if (this.$slots.header || this.$slots.footer) {\n        this.$on(EVENT_TYPE.SLOT, this.onSlotResized);\n      }\n    },\n    activated: function activated() {\n      // set back offset when awake from keep-alive\n      this.scrollToOffset(this.virtual.offset);\n      if (this.pageMode) {\n        document.addEventListener('scroll', this.onScroll, {\n          passive: false\n        });\n      }\n    },\n    deactivated: function deactivated() {\n      if (this.pageMode) {\n        document.removeEventListener('scroll', this.onScroll);\n      }\n    },\n    mounted: function mounted() {\n      // set position\n      if (this.start) {\n        this.scrollToIndex(this.start);\n      } else if (this.offset) {\n        this.scrollToOffset(this.offset);\n      }\n\n      // in page mode we bind scroll event to document\n      if (this.pageMode) {\n        this.updatePageModeFront();\n        document.addEventListener('scroll', this.onScroll, {\n          passive: false\n        });\n      }\n    },\n    beforeDestroy: function beforeDestroy() {\n      this.virtual.destroy();\n      if (this.pageMode) {\n        document.removeEventListener('scroll', this.onScroll);\n      }\n    },\n    methods: {\n      // get item size by id\n      getSize: function getSize(id) {\n        return this.virtual.sizes.get(id);\n      },\n      // get the total number of stored (rendered) items\n      getSizes: function getSizes() {\n        return this.virtual.sizes.size;\n      },\n      // return current scroll offset\n      getOffset: function getOffset() {\n        if (this.pageMode) {\n          return document.documentElement[this.directionKey] || document.body[this.directionKey];\n        } else {\n          var root = this.$refs.root;\n          return root ? Math.ceil(root[this.directionKey]) : 0;\n        }\n      },\n      // return client viewport size\n      getClientSize: function getClientSize() {\n        var key = this.isHorizontal ? 'clientWidth' : 'clientHeight';\n        if (this.pageMode) {\n          return document.documentElement[key] || document.body[key];\n        } else {\n          var root = this.$refs.root;\n          return root ? Math.ceil(root[key]) : 0;\n        }\n      },\n      // return all scroll size\n      getScrollSize: function getScrollSize() {\n        var key = this.isHorizontal ? 'scrollWidth' : 'scrollHeight';\n        if (this.pageMode) {\n          return document.documentElement[key] || document.body[key];\n        } else {\n          var root = this.$refs.root;\n          return root ? Math.ceil(root[key]) : 0;\n        }\n      },\n      // set current scroll position to a expectant offset\n      scrollToOffset: function scrollToOffset(offset) {\n        if (this.pageMode) {\n          document.body[this.directionKey] = offset;\n          document.documentElement[this.directionKey] = offset;\n        } else {\n          var root = this.$refs.root;\n          if (root) {\n            root[this.directionKey] = offset;\n          }\n        }\n      },\n      // set current scroll position to a expectant index\n      scrollToIndex: function scrollToIndex(index) {\n        // scroll to bottom\n        if (index >= this.dataSources.length - 1) {\n          this.scrollToBottom();\n        } else {\n          var offset = this.virtual.getOffset(index);\n          this.scrollToOffset(offset);\n        }\n      },\n      // set current scroll position to bottom\n      scrollToBottom: function scrollToBottom() {\n        var _this = this;\n        var shepherd = this.$refs.shepherd;\n        if (shepherd) {\n          var offset = shepherd[this.isHorizontal ? 'offsetLeft' : 'offsetTop'];\n          this.scrollToOffset(offset);\n\n          // check if it's really scrolled to the bottom\n          // maybe list doesn't render and calculate to last range\n          // so we need retry in next event loop until it really at bottom\n          setTimeout(function () {\n            if (_this.getOffset() + _this.getClientSize() + 1 < _this.getScrollSize()) {\n              _this.scrollToBottom();\n            }\n          }, 3);\n        }\n      },\n      // when using page mode we need update slot header size manually\n      // taking root offset relative to the browser as slot header size\n      updatePageModeFront: function updatePageModeFront() {\n        var root = this.$refs.root;\n        if (root) {\n          var rect = root.getBoundingClientRect();\n          var defaultView = root.ownerDocument.defaultView;\n          var offsetFront = this.isHorizontal ? rect.left + defaultView.pageXOffset : rect.top + defaultView.pageYOffset;\n          this.virtual.updateParam('slotHeaderSize', offsetFront);\n        }\n      },\n      // reset all state back to initial\n      reset: function reset() {\n        this.virtual.destroy();\n        this.scrollToOffset(0);\n        this.installVirtual();\n      },\n      // ----------- public method end -----------\n      installVirtual: function installVirtual() {\n        this.virtual = new Virtual({\n          slotHeaderSize: 0,\n          slotFooterSize: 0,\n          keeps: this.keeps,\n          estimateSize: this.estimateSize,\n          buffer: Math.round(this.keeps / 3),\n          // recommend for a third of keeps\n          uniqueIds: this.getUniqueIdFromDataSources()\n        }, this.onRangeChanged);\n\n        // sync initial range\n        this.range = this.virtual.getRange();\n      },\n      getUniqueIdFromDataSources: function getUniqueIdFromDataSources() {\n        var dataKey = this.dataKey;\n        return this.dataSources.map(function (dataSource) {\n          return typeof dataKey === 'function' ? dataKey(dataSource) : dataSource[dataKey];\n        });\n      },\n      // event called when each item mounted or size changed\n      onItemResized: function onItemResized(id, size) {\n        this.virtual.saveSize(id, size);\n        this.$emit('resized', id, size);\n      },\n      // event called when slot mounted or size changed\n      onSlotResized: function onSlotResized(type, size, hasInit) {\n        if (type === SLOT_TYPE.HEADER) {\n          this.virtual.updateParam('slotHeaderSize', size);\n        } else if (type === SLOT_TYPE.FOOTER) {\n          this.virtual.updateParam('slotFooterSize', size);\n        }\n        if (hasInit) {\n          this.virtual.handleSlotSizeChange();\n        }\n      },\n      // here is the rerendering entry\n      onRangeChanged: function onRangeChanged(range) {\n        this.range = range;\n      },\n      onScroll: function onScroll(evt) {\n        var offset = this.getOffset();\n        var clientSize = this.getClientSize();\n        var scrollSize = this.getScrollSize();\n\n        // \biOS scroll-spring-back behavior will make direction mistake\n        if (offset < 0 || offset + clientSize > scrollSize + 1 || !scrollSize) {\n          return;\n        }\n        this.virtual.handleScroll(offset);\n        this.emitEvent(offset, clientSize, scrollSize, evt);\n      },\n      // emit event in special position\n      emitEvent: function emitEvent(offset, clientSize, scrollSize, evt) {\n        this.$emit('scroll', evt, this.virtual.getRange());\n        if (this.virtual.isFront() && !!this.dataSources.length && offset - this.topThreshold <= 0) {\n          this.$emit('totop');\n        } else if (this.virtual.isBehind() && offset + clientSize + this.bottomThreshold >= scrollSize) {\n          this.$emit('tobottom');\n        }\n      },\n      // get the real render slots based on range data\n      // in-place patch strategy will try to reuse components as possible\n      // so those components that are reused will not trigger lifecycle mounted\n      getRenderSlots: function getRenderSlots(h) {\n        var slots = [];\n        var _this$range = this.range,\n          start = _this$range.start,\n          end = _this$range.end;\n        var dataSources = this.dataSources,\n          dataKey = this.dataKey,\n          itemClass = this.itemClass,\n          itemTag = this.itemTag,\n          itemStyle = this.itemStyle,\n          isHorizontal = this.isHorizontal,\n          extraProps = this.extraProps,\n          dataComponent = this.dataComponent,\n          itemScopedSlots = this.itemScopedSlots;\n        var slotComponent = this.$scopedSlots && this.$scopedSlots.item;\n        for (var index = start; index <= end; index++) {\n          var dataSource = dataSources[index];\n          if (dataSource) {\n            var uniqueKey = typeof dataKey === 'function' ? dataKey(dataSource) : dataSource[dataKey];\n            if (typeof uniqueKey === 'string' || typeof uniqueKey === 'number') {\n              slots.push(h(Item, {\n                props: {\n                  index: index,\n                  tag: itemTag,\n                  event: EVENT_TYPE.ITEM,\n                  horizontal: isHorizontal,\n                  uniqueKey: uniqueKey,\n                  source: dataSource,\n                  extraProps: extraProps,\n                  component: dataComponent,\n                  slotComponent: slotComponent,\n                  scopedSlots: itemScopedSlots\n                },\n                style: itemStyle,\n                \"class\": \"\".concat(itemClass).concat(this.itemClassAdd ? ' ' + this.itemClassAdd(index) : '')\n              }));\n            } else {\n              console.warn(\"Cannot get the data-key '\".concat(dataKey, \"' from data-sources.\"));\n            }\n          } else {\n            console.warn(\"Cannot get the index '\".concat(index, \"' from data-sources.\"));\n          }\n        }\n        return slots;\n      }\n    },\n    // render function, a closer-to-the-compiler alternative to templates\n    // https://vuejs.org/v2/guide/render-function.html#The-Data-Object-In-Depth\n    render: function render(h) {\n      var _this$$slots = this.$slots,\n        header = _this$$slots.header,\n        footer = _this$$slots.footer;\n      var _this$range2 = this.range,\n        padFront = _this$range2.padFront,\n        padBehind = _this$range2.padBehind;\n      var isHorizontal = this.isHorizontal,\n        pageMode = this.pageMode,\n        rootTag = this.rootTag,\n        wrapTag = this.wrapTag,\n        wrapClass = this.wrapClass,\n        wrapStyle = this.wrapStyle,\n        headerTag = this.headerTag,\n        headerClass = this.headerClass,\n        headerStyle = this.headerStyle,\n        footerTag = this.footerTag,\n        footerClass = this.footerClass,\n        footerStyle = this.footerStyle;\n      var paddingStyle = {\n        padding: isHorizontal ? \"0px \".concat(padBehind, \"px 0px \").concat(padFront, \"px\") : \"\".concat(padFront, \"px 0px \").concat(padBehind, \"px\")\n      };\n      var wrapperStyle = wrapStyle ? Object.assign({}, wrapStyle, paddingStyle) : paddingStyle;\n      return h(rootTag, {\n        ref: 'root',\n        on: {\n          '&scroll': !pageMode && this.onScroll\n        }\n      }, [\n      // header slot\n      header ? h(Slot, {\n        \"class\": headerClass,\n        style: headerStyle,\n        props: {\n          tag: headerTag,\n          event: EVENT_TYPE.SLOT,\n          uniqueKey: SLOT_TYPE.HEADER\n        }\n      }, header) : null,\n      // main list\n      h(wrapTag, {\n        \"class\": wrapClass,\n        attrs: {\n          role: 'group'\n        },\n        style: wrapperStyle\n      }, this.getRenderSlots(h)),\n      // footer slot\n      footer ? h(Slot, {\n        \"class\": footerClass,\n        style: footerStyle,\n        props: {\n          tag: footerTag,\n          event: EVENT_TYPE.SLOT,\n          uniqueKey: SLOT_TYPE.FOOTER\n        }\n      }, footer) : null,\n      // an empty element use to scroll to bottom\n      h('div', {\n        ref: 'shepherd',\n        style: {\n          width: isHorizontal ? '0px' : '100%',\n          height: isHorizontal ? '100%' : '0px'\n        }\n      })]);\n    }\n  });\n\n  return VirtualList;\n\n})));\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon magnify-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"MagnifyIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<UserBubble class=\"entity-picker__bubble\"\n\t\t:margin=\"0\"\n\t\t:size=\"22\"\n\t\t:display-name=\"label\">\n\t\t<template #name>\n\t\t\t<a href=\"#\"\n\t\t\t\t:title=\"t('contacts', 'Remove {type}', { type })\"\n\t\t\t\tclass=\"entity-picker__bubble-delete icon-close\"\n\t\t\t\t@click=\"onDelete\" />\n\t\t</template>\n\t</UserBubble>\n</template>\n\n<script>\nimport { NcUserBubble as UserBubble } from '@nextcloud/vue'\n\nexport default {\n\tname: 'EntityBubble',\n\n\tcomponents: {\n\t\tUserBubble,\n\t},\n\n\tprops: {\n\t\t/**\n\t\t * Unique id of the entity\n\t\t */\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\n\t\t/**\n\t\t * Label of the entity\n\t\t */\n\t\tlabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\n\t\t/**\n\t\t * Type of the entity. e.g user, circle, group...\n\t\t */\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tmethods: {\n\t\tonDelete() {\n\t\t\t// Emit delete. Be aware it might be unique\n\t\t\t// amongst their types, but not unique amongst\n\t\t\t// the whole selection all. Make sure to\n\t\t\t// properly compare all necessary data.\n\t\t\tthis.$emit('delete', {\n\t\t\t\tid: this.id,\n\t\t\t\ttype: this.type,\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// better visual with light default tint\n:deep(.user-bubble__content) {\n\tbackground-color: var(--color-pirimary-light);\n}\n\n.entity-picker__bubble {\n\tdisplay: flex;\n\n\t&-delete {\n\t\tdisplay: block;\n\t\theight: 100%;\n\t\t// squeeze in the border radius\n\t\tmargin-right: -4px;\n\t\topacity: .7;\n\n\t\t&:hover,\n\t\t&:active,\n\t\t&:focus {\n\t\t\topacity: 1;\n\t\t}\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<h4 v-if=\"source.heading\" :key=\"source.id\" class=\"entity-picker__option-caption\">\n\t\t{{ t('contacts', 'Add {type}', {type: source.label.toLowerCase()}) }}\n\t</h4>\n\n\t<UserBubble v-else\n\t\tclass=\"entity-picker__bubble\"\n\t\t:class=\"{'entity-picker__bubble--selected': isSelected}\"\n\t\t:display-name=\"source.label\"\n\t\t:user=\"source.user\"\n\t\t:margin=\"6\"\n\t\t:size=\"44\"\n\t\turl=\"#\"\n\t\t@click.stop.prevent=\"onClick(source)\">\n\t\t<template #title>\n\t\t\t<span class=\"entity-picker__bubble-checkmark icon-checkmark\" />\n\t\t</template>\n\t</UserBubble>\n</template>\n\n<script>\nimport { NcUserBubble as UserBubble } from '@nextcloud/vue'\n\nexport default {\n\tname: 'EntitySearchResult',\n\n\tcomponents: {\n\t\tUserBubble,\n\t},\n\n\tprops: {\n\t\tsource: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn {}\n\t\t\t},\n\t\t},\n\t\tonClick: {\n\t\t\ttype: Function,\n\t\t\tdefault() {},\n\t\t},\n\t\tselection: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({}),\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tisSelected() {\n\t\t\treturn this.source.id in this.selection\n\t\t},\n\t},\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n@use 'sass:math';\n\n// https://uxplanet.org/7-rules-for-mobile-ui-button-design-e9cf2ea54556\n// recommended is 48px\n// 44px is what we choose and have very good visual-to-usability ratio\n$clickable-area: 44px;\n\n// background icon size\n// also used for the scss icon font\n$icon-size: 16px;\n\n// icon padding for a $clickable-area width and a $icon-size icon\n// ( 44px - 16px ) / 2\n$icon-margin: math.div($clickable-area - $icon-size, 2);\n\n.entity-picker {\n\t&__option {\n\t\t&-caption {\n\t\t\tpadding-left: 10px;\n\t\t\tlist-style-type: none;\n\t\t\tuser-select: none;\n\t\t\twhite-space: nowrap;\n\t\t\ttext-overflow: ellipsis;\n\t\t\tpointer-events: none;\n\t\t\tcolor: var(--color-primary-element);\n\t\t\tbox-shadow: none !important;\n\t\t\tline-height: $clickable-area;\n\n\t\t\t&:not(:first-child) {\n\t\t\t\tmargin-top: math.div($clickable-area, 2);\n\t\t\t}\n\t\t}\n\t}\n\n\t&__bubble {\n\t\tdisplay: flex;\n\t\tmargin-bottom: 4px;\n\n\t\t&-checkmark {\n\t\t\tdisplay: block;\n\t\t\topacity: 0;\n\t\t}\n\n\t\t// Show checkmark on selected\n\t\t&--selected .entity-picker__bubble-checkmark {\n\t\t\topacity: 1;\n\t\t}\n\n\t\t// Show primary bg on hovering entities\n\t\t&--selected,\n\t\t&:hover,\n\t\t&:focus {\n\t\t\t:deep(.user-bubble__content) {\n\t\t\t\t// better visual with light default tint\n\t\t\t\tbackground-color: var(--color-primary-element-light);\n\t\t\t}\n\t\t}\n\t}\n}\n\n:deep(.user-bubble__content){\n\t// Take full width\n\twidth: 100%;\n\t// Override default styling\n\tbackground: none;\n\t.user-bubble__secondary {\n\t\t// Force show checkmark\n\t\tdisplay: inline-flex;\n\t\tmargin-right: 4px;\n\t\tmargin-left: auto;\n\t}\n\t&, * {\n\t\t// the whole row is clickable,let's force the proper cursor\n\t\tcursor: pointer;\n\t\tuser-select: none;\n\t\t-webkit-user-drag: none;\n\t\t-khtml-user-drag: none;\n\t\t-moz-user-drag: none;\n\t\t-o-user-drag: none;\n\t}\n}\n\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<Modal size=\"normal\"\n\t\t@close=\"onCancel\">\n\t\t<!-- Wrapper for content & navigation -->\n\t\t<div class=\"entity-picker\">\n\t\t\t<!-- Search -->\n\t\t\t<div class=\"entity-picker__search\">\n\t\t\t\t<div class=\"entity-picker__search-icon icon-search\" />\n\t\t\t\t<input ref=\"input\"\n\t\t\t\t\tv-model=\"searchQuery\"\n\t\t\t\t\t:placeholder=\"t('contacts', 'Search {types}', {types: searchPlaceholderTypes})\"\n\t\t\t\t\tclass=\"entity-picker__search-input\"\n\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t@input=\"onSearch\">\n\t\t\t</div>\n\n\t\t\t<!-- Loading -->\n\t\t\t<EmptyContent v-if=\"loading\" :name=\"t('contacts', 'Loading ')\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconLoading :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</EmptyContent>\n\n\t\t\t<template v-else>\n\t\t\t\t<!-- Picked entities -->\n\t\t\t\t<transition-group v-if=\"Object.keys(selectionSet).length > 0\"\n\t\t\t\t\tname=\"zoom\"\n\t\t\t\t\ttag=\"ul\"\n\t\t\t\t\tclass=\"entity-picker__selection\">\n\t\t\t\t\t<EntityBubble v-for=\"entity in selectionSet\"\n\t\t\t\t\t\t:key=\"entity.key || `entity-${entity.type}-${entity.id}`\"\n\t\t\t\t\t\tv-bind=\"entity\"\n\t\t\t\t\t\t@delete=\"onDelete(entity)\" />\n\t\t\t\t</transition-group>\n\n\t\t\t\t<!-- No recommendations -->\n\t\t\t\t<EmptyContent v-if=\"dataSet.length === 0\" :name=\"t('contacts', 'Search for people to add')\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconSearch :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t</EmptyContent>\n\n\t\t\t\t<!-- Searched & picked entities -->\n\t\t\t\t<VirtualList v-else-if=\"searchSet.length > 0 && availableEntities.length > 0\"\n\t\t\t\t\tclass=\"entity-picker__options\"\n\t\t\t\t\tdata-key=\"id\"\n\t\t\t\t\t:data-sources=\"availableEntities\"\n\t\t\t\t\t:data-component=\"EntitySearchResult\"\n\t\t\t\t\t:estimate-size=\"44\"\n\t\t\t\t\t:extra-props=\"{ selection: selectionSet, onClick }\" />\n\n\t\t\t\t<EmptyContent v-else-if=\"searchQuery\" :name=\"t('contacts', 'No results')\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconSearch :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t</EmptyContent>\n\n\t\t\t\t<div class=\"entity-picker__navigation\">\n\t\t\t\t\t<button :disabled=\"loading\"\n\t\t\t\t\t\tclass=\"navigation__button-left\"\n\t\t\t\t\t\t@click=\"onCancel\">\n\t\t\t\t\t\t{{ t('contacts', 'Cancel') }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button :disabled=\"isEmptySelection || loading\"\n\t\t\t\t\t\tclass=\"navigation__button-right primary\"\n\t\t\t\t\t\t@click=\"onSubmit\">\n\t\t\t\t\t\t{{ confirmLabel }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t</modal>\n</template>\n\n<script>\nimport debounce from 'debounce'\nimport VirtualList from 'vue-virtual-scroll-list'\nimport {\n\tNcEmptyContent as EmptyContent,\n\tNcLoadingIcon as IconLoading,\n\tNcModal as Modal,\n} from '@nextcloud/vue'\nimport IconSearch from 'vue-material-design-icons/Magnify.vue'\nimport EntityBubble from './EntityBubble.vue'\nimport EntitySearchResult from './EntitySearchResult.vue'\n\nexport default {\n\tname: 'EntityPicker',\n\n\tcomponents: {\n\t\tEmptyContent,\n\t\tEntityBubble,\n\t\tIconSearch,\n\t\tIconLoading,\n\t\tModal,\n\t\tVirtualList,\n\t},\n\n\tprops: {\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\n\t\t/**\n\t\t * The types of data within dataSet\n\t\t * Array of objects. id must match dataSet entity type\n\t\t */\n\t\tdataTypes: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tvalidator: types => {\n\t\t\t\tconst invalidTypes = types.filter(type => !type.id && !type.label)\n\t\t\t\tif (invalidTypes.length > 0) {\n\t\t\t\t\tconsole.error('The following types MUST have a proper id and label key', invalidTypes)\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\treturn true\n\t\t\t},\n\t\t},\n\n\t\t/**\n\t\t * The data to be used\n\t\t */\n\t\tdataSet: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tvalidator: data => {\n\t\t\t\tdata.forEach(source => {\n\t\t\t\t\tif (!source.id || !source.label) {\n\t\t\t\t\t\tconsole.error('The following source MUST have a proper id and label key', source)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn true\n\t\t\t},\n\t\t},\n\n\t\t/**\n\t\t * The sorting key for the dataSet\n\t\t */\n\t\tsort: {\n\t\t\ttype: String,\n\t\t\tdefault: 'label',\n\t\t},\n\n\t\t/**\n\t\t * Confirm button text\n\t\t */\n\t\tconfirmLabel: {\n\t\t\ttype: String,\n\t\t\tdefault: t('contacts', 'Add to group'),\n\t\t},\n\n\t\t/**\n\t\t * The input will also filter the dataSet based on the label.\n\t\t * If you are using the search event to inject a different dataSet, you can disable this\n\t\t */\n\t\tinternalSearch: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\n\t\t/**\n\t\t * Override the local management of selection\n\t\t * You MUST use a sync modifier or the selection will be locked\n\t\t */\n\t\tselection: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tsearchQuery: '',\n\t\t\tlocalSelection: {},\n\t\t\tEntitySearchResult,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t/**\n\t\t * If the selection is set externally, let's use it\n\t\t */\n\t\tselectionSet: {\n\t\t\tget() {\n\t\t\t\tif (this.selection !== null) {\n\t\t\t\t\treturn this.selection\n\t\t\t\t}\n\t\t\t\treturn this.localSelection\n\t\t\t},\n\t\t\tset(selection) {\n\t\t\t\tif (this.selection !== null) {\n\t\t\t\t\tthis.$emit('update:selection', selection)\n\t\t\t\t}\n\t\t\t\tthis.localSelection = selection\n\t\t\t},\n\t\t},\n\n\t\t/**\n\t\t * Are we handling a single entity type ?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisSingleType() {\n\t\t\treturn !(this.dataTypes.length > 1)\n\t\t},\n\n\t\t/**\n\t\t * Is the current selection empty\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisEmptySelection() {\n\t\t\treturn Object.keys(this.selectionSet).length === 0\n\t\t},\n\n\t\t/**\n\t\t * Formatted search input placeholder based on\n\t\t * available types\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tsearchPlaceholderTypes() {\n\t\t\tconst types = this.dataTypes\n\t\t\t\t.map(type => type.label)\n\t\t\t\t.join(', ')\n\t\t\treturn `${types}`\n\t\t},\n\n\t\t/**\n\t\t * Available data based on current search if query\n\t\t * is valid, returns default full data et otherwise\n\t\t *\n\t\t * @return {object[]}\n\t\t */\n\t\tsearchSet() {\n\t\t\t// If internal search is enabled and we have a search query, filter data set\n\t\t\tif (this.internalSearch && this.searchQuery && this.searchQuery.trim !== '') {\n\t\t\t\treturn this.dataSet.filter(entity => {\n\t\t\t\t\treturn entity.label.toLowerCase().indexOf(this.searchQuery.toLowerCase()) > -1\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn this.dataSet\n\t\t},\n\n\t\t/**\n\t\t * Returns available entities grouped by type(s) if any\n\t\t *\n\t\t * @return {object[]}\n\t\t */\n\t\tavailableEntities() {\n\t\t\t// If only one type, return the full set directly\n\t\t\tif (this.isSingleType) {\n\t\t\t\treturn this.searchSet\n\t\t\t}\n\n\t\t\t// Else group by types\n\t\t\treturn this.dataTypes.map(type => {\n\t\t\t\tconst dataSet = this.searchSet.filter(entity => entity.type === type.id)\n\t\t\t\tconst dataList = [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: type.id,\n\t\t\t\t\t\tlabel: type.label,\n\t\t\t\t\t\theading: true,\n\t\t\t\t\t},\n\t\t\t\t\t...dataSet,\n\t\t\t\t]\n\n\t\t\t\t// If no results, hide the type\n\t\t\t\tif (dataSet.length === 0) {\n\t\t\t\t\treturn []\n\t\t\t\t}\n\n\t\t\t\treturn dataList\n\t\t\t}).flat()\n\t\t},\n\t},\n\n\tmounted() {\n\t\tthis.$nextTick(() => {\n\t\t\tthis.$refs.input.focus()\n\t\t\tthis.$refs.input.select()\n\t\t})\n\t},\n\n\tmethods: {\n\t\tonCancel() {\n\t\t\t/**\n\t\t\t * Emitted when the user closed or cancelled\n\t\t\t */\n\t\t\tthis.$emit('close')\n\t\t},\n\t\tonSubmit() {\n\t\t\t/**\n\t\t\t * Emitted when user submit the form\n\t\t\t *\n\t\t\t * @type {Array} the selected entities\n\t\t\t */\n\t\t\tthis.$emit('submit', Object.values(this.selectionSet))\n\t\t},\n\n\t\tonSearch: debounce(function() {\n\t\t\t/**\n\t\t\t * Emitted when search change\n\t\t\t *\n\t\t\t * @type {string} the search query\n\t\t\t */\n\t\t\tthis.$emit('search', this.searchQuery)\n\t\t}, 200),\n\n\t\t/**\n\t\t * Remove entity from selection\n\t\t *\n\t\t * @param {object} entity the entity to remove\n\t\t */\n\t\tonDelete(entity) {\n\t\t\tthis.$delete(this.selectionSet, entity.id, entity)\n\t\t\tconsole.debug('Removing entity from selection', entity)\n\t\t},\n\n\t\t/**\n\t\t * Add/remove entity from selection\n\t\t *\n\t\t * @param {object} entity the entity to add\n\t\t */\n\t\tonClick(entity) {\n\t\t\tif (entity.id in this.selectionSet) {\n\t\t\t\tthis.$delete(this.selectionSet, entity.id)\n\t\t\t\tconsole.debug('Removed entity to selection', entity)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.$set(this.selectionSet, entity.id, entity)\n\t\t\tconsole.debug('Added entity to selection', entity)\n\t\t},\n\n\t\t/**\n\t\t * Toggle entity from selection\n\t\t *\n\t\t * @param {object} entity the entity to add/remove\n\t\t */\n\t\tonToggle(entity) {\n\t\t\tif (entity.id in this.selectionSet) {\n\t\t\t\tthis.onDelete(entity)\n\t\t\t} else {\n\t\t\t\tthis.onPick(entity)\n\t\t\t}\n\t\t},\n\t},\n\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n@use 'sass:math';\n\n// Dialog variables\n$dialog-padding: 20px;\n$dialog-height: 480px;\n$entity-spacing: 4px;\n\n// https://uxplanet.org/7-rules-for-mobile-ui-button-design-e9cf2ea54556\n// recommended is 48px\n// 44px is what we choose and have very good visual-to-usability ratio\n$clickable-area: 44px;\n\n// background icon size\n// also used for the scss icon font\n$icon-size: 16px;\n\n// icon padding for a $clickable-area width and a $icon-size icon\n// ( 44px - 16px ) / 2\n$icon-margin: math.div($clickable-area - $icon-size, 2);\n\n.entity-picker {\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: column;\n\tmin-height: $dialog-height;\n\theight: 100%;\n\tpadding: $dialog-padding;\n\tbox-sizing: border-box;\n\n\t&__search {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\twidth: 95%;\n\t\t&-input {\n\t\t\twidth: 100%;\n\t\t\theight: $clickable-area - $entity-spacing !important;\n\t\t\tmargin: $entity-spacing 0;\n\t\t\tpadding-left: $clickable-area !important;\n\t\t\tfont-size: 16px;\n\t\t\tline-height: $clickable-area - $entity-spacing;\n\t\t}\n\t\t&-icon {\n\t\t\tposition: absolute;\n\t\t\twidth: $clickable-area;\n\t\t\theight: $clickable-area;\n\t\t}\n\t}\n\n\t&__selection {\n\t\tdisplay: flex;\n\t\toverflow-y: auto;\n\t\talign-content: flex-start;\n\t\tflex: 1 0 auto;\n\t\tflex-wrap: wrap;\n\t\tjustify-content: flex-start;\n\t\t// half a line height to know there is more lines\n\t\tmax-height: 6.5em;\n\t\tpadding: $entity-spacing 0;\n\t\tborder-bottom: 1px solid var(--color-background-darker);\n\t\tbackground: var(--color-main-background);\n\n\t\t// Allows 2 per line\n\t\t.entity-picker__bubble {\n\t\t\tmax-width: calc(50% - #{$entity-spacing});\n\t\t\tmargin-right: $entity-spacing;\n\t\t\tmargin-bottom: $entity-spacing;\n\t\t}\n\t}\n\n\t&__options {\n\t\toverflow-y: auto;\n\t\tflex: 1 1 100%;\n\t\tmargin: $entity-spacing 0;\n\t}\n\n\t&__navigation {\n\t\tz-index: 1;\n\t\tdisplay: flex;\n\t\t// define our base width, no shrinkage\n\t\tflex: 0 0;\n\t\tjustify-content: space-between;\n\t\t// Same as above\n\t\twidth: 100%;\n\t\tbox-shadow: 0 -10px 5px var(--color-main-background);\n\t\t&__button-right {\n\t\t\tmargin-left: auto;\n\t\t}\n\t}\n}\n\n// Properly center Entity Picker empty content\n:deep(.empty-content) {\n\tmargin: auto 0 !important;\n}\n\n/** Size full in the modal component doesn't have border radius, this adds\nit back */\n:deep(.modal-container) {\n\tborder-radius: var(--border-radius-large) !important;\n}\n\n:deep(.modal-container__close) {\n\tmargin-top: 19px;\n}\n\n</style>\n\n<style lang=\"scss\" scoped>\n.zoom-enter-active {\n\tanimation: zoom-in var(--animation-quick);\n}\n\n.zoom-leave-active {\n\tanimation: zoom-in var(--animation-quick) reverse;\n\n\twill-change: transform;\n}\n\n@keyframes zoom-in {\n\t0% {\n\t\ttransform: scale(0);\n\t}\n\t100% {\n\t\ttransform: scale(1);\n\t}\n}\n\n</style>\n","/**\n * SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport axios from '@nextcloud/axios'\nimport { generateOcsUrl } from '@nextcloud/router'\n\nimport { SHARES_TYPES_MEMBER_MAP } from '../models/constants.ts'\n\n// generate allowed shareType from SHARES_TYPES_MEMBER_MAP\nconst shareType = Object.keys(SHARES_TYPES_MEMBER_MAP)\nconst maxAutocompleteResults = parseInt(window.OC.config['sharing.maxAutocompleteResults'], 10) || 25\n\n/**\n * Get suggestions\n *\n * @param {string} search the search query\n */\nexport const getSuggestions = async function(search) {\n\tconst request = await axios.get(generateOcsUrl('apps/files_sharing/api/v1/sharees'), {\n\t\tparams: {\n\t\t\tformat: 'json',\n\t\t\titemType: 'file',\n\t\t\tsearch,\n\t\t\tperPage: maxAutocompleteResults,\n\t\t\tshareType,\n\t\t\tlookup: false,\n\t\t},\n\t})\n\n\tconst data = request.data.ocs.data\n\tconst exact = request.data.ocs.data.exact\n\tdata.exact = [] // removing exact from general results\n\n\t// flatten array of arrays\n\tconst rawExactSuggestions = Object.values(exact).reduce((arr, elem) => arr.concat(elem), [])\n\tconst rawSuggestions = Object.values(data).reduce((arr, elem) => arr.concat(elem), [])\n\n\t// remove invalid data and format to user-select layout\n\tconst exactSuggestions = rawExactSuggestions\n\t\t.filter(result => typeof result === 'object')\n\t\t.map(share => formatResults(share))\n\t\t// sort by type so we can get user&groups first...\n\t\t.sort((a, b) => a.shareType - b.shareType)\n\tconst suggestions = rawSuggestions\n\t\t.filter(result => typeof result === 'object')\n\t\t.map(share => formatResults(share))\n\t\t// sort by type so we can get user&groups first...\n\t\t.sort((a, b) => a.shareType - b.shareType)\n\n\tconst allSuggestions = exactSuggestions.concat(suggestions)\n\n\t// Count occurances of display names in order to provide a distinguishable description if needed\n\tconst nameCounts = allSuggestions.reduce((nameCounts, result) => {\n\t\tif (!result.displayName) {\n\t\t\treturn nameCounts\n\t\t}\n\t\tif (!nameCounts[result.displayName]) {\n\t\t\tnameCounts[result.displayName] = 0\n\t\t}\n\t\tnameCounts[result.displayName]++\n\t\treturn nameCounts\n\t}, {})\n\n\tconst finalResults = allSuggestions.map(item => {\n\t\t// Make sure that items with duplicate displayName get the shareWith applied as a description\n\t\tif (nameCounts[item.displayName] > 1 && !item.desc) {\n\t\t\treturn { ...item, desc: item.shareWithDisplayNameUnique }\n\t\t}\n\t\treturn item\n\t})\n\n\tconsole.info('suggestions', finalResults)\n\n\treturn finalResults\n}\n\n/**\n * Get the sharing recommendations\n */\nexport const getRecommendations = async function() {\n\tconst request = await axios.get(generateOcsUrl('apps/files_sharing/api/v1/sharees_recommended'), {\n\t\tparams: {\n\t\t\tformat: 'json',\n\t\t\titemType: 'file',\n\t\t\tshareType,\n\t\t},\n\t})\n\n\t// flatten array of arrays\n\tconst exact = request.data.ocs.data.exact\n\tconst recommendations = Object.values(exact).reduce((arr, elem) => arr.concat(elem), [])\n\n\t// remove invalid data and format to user-select layout\n\tconst finalResults = recommendations\n\t\t.map(share => formatResults(share))\n\n\tconsole.info('recommendations', finalResults)\n\n\treturn finalResults\n}\n\nconst formatResults = function(result) {\n\tconst type = `picker-${result.value.shareType}`\n\treturn {\n\t\tlabel: result.label,\n\t\tid: `${type}-${result.value.shareWith}`,\n\t\t// If this is a user, set as user for avatar display by UserBubble\n\t\tuser: [window.OC.Share.SHARE_TYPE_USER, window.OC.Share.SHARE_TYPE_REMOTE].indexOf(result.value.shareType) > -1\n\t\t\t? result.value.shareWith\n\t\t\t: null,\n\t\ttype,\n\t\t...result.value,\n\t}\n}\n","<!--\n  - SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<section class=\"member-list\">\n\t\t<ContentHeading>\n\t\t\t{{ t('contacts', 'Team members') }}\n\t\t</ContentHeading>\n\n\t\t<NcEmptyContent v-if=\"loading\" class=\"empty-content\" :name=\"t('contacts', 'Loading members list ')\">\n\t\t\t<template #icon>\n\t\t\t\t<IconLoading :size=\"20\" />\n\t\t\t</template>\n\t\t</NcEmptyContent>\n\n\t\t<NcEmptyContent v-else-if=\"!circle.isMember\"\n\t\t\tclass=\"empty-content\"\n\t\t\t:name=\"t('contacts', 'The list of members is only visible to members of this team')\">\n\t\t\t<template #icon>\n\t\t\t\t<IconContact :size=\"20\" />\n\t\t\t</template>\n\t\t</NcEmptyContent>\n\n\t\t<NcEmptyContent v-else-if=\"!hasMembers\"\n\t\t\tclass=\"empty-content\"\n\t\t\t:name=\"t('contacts', 'You currently have no access to the member list')\">\n\t\t\t<template #icon>\n\t\t\t\t<IconContact :size=\"20\" />\n\t\t\t</template>\n\t\t</NcEmptyContent>\n\n\t\t<div v-else>\n\t\t\t<div class=\"member-list__new\">\n\t\t\t\t<NcButton v-if=\"circle.canManageMembers\"\n\t\t\t\t\t@click=\"onShowPicker(circle.id)\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<NcLoadingIcon v-if=\"loading\" />\n\t\t\t\t\t\t<IconAdd v-else :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Add members') }}\n\t\t\t\t</NcButton>\n\t\t\t</div>\n\n\t\t\t<MemberListGroup v-for=\"group, index in groupedList\"\n\t\t\t\t:key=\"`member-list-group-${index}`\"\n\t\t\t\tv-bind=\"group\" />\n\t\t</div>\n\n\t\t<!-- member picker -->\n\t\t<EntityPicker v-if=\"showPicker\"\n\t\t\t:confirm-label=\"t('contacts', 'Add to {circle}', { circle: circle.displayName })\"\n\t\t\t:data-types=\"pickerTypes\"\n\t\t\t:data-set=\"filteredPickerData\"\n\t\t\t:internal-search=\"false\"\n\t\t\t:loading=\"pickerLoading\"\n\t\t\t:selection.sync=\"pickerSelection\"\n\t\t\t@close=\"resetPicker\"\n\t\t\t@search=\"onSearch\"\n\t\t\t@submit=\"onPickerPick\" />\n\t</section>\n</template>\n\n<script lang=\"ts\">\nimport {\n\tNcButton,\n\tNcEmptyContent,\n\tNcLoadingIcon,\n\tisMobile,\n} from '@nextcloud/vue'\n\nimport MemberListGroup from './MemberListGroup.vue'\nimport EntityPicker from '../EntityPicker/EntityPicker.vue'\nimport IconContact from 'vue-material-design-icons/AccountMultiple.vue'\nimport IconAdd from 'vue-material-design-icons/Plus.vue'\nimport RouterMixin from '../../mixins/RouterMixin.js'\n\nimport { showError, showWarning } from '@nextcloud/dialogs'\nimport { subscribe } from '@nextcloud/event-bus'\nimport { t } from '@nextcloud/l10n'\nimport { getRecommendations, getSuggestions } from '../../services/collaborationAutocompletion.js'\nimport { SHARES_TYPES_MEMBER_MAP, CIRCLES_MEMBER_GROUPING } from '../../models/constants'\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n\tname: 'MemberList',\n\n\tcomponents: {\n\t\tEntityPicker,\n\t\tIconContact,\n\t\tIconAdd,\n\t\tMemberListGroup,\n\t\tNcButton,\n\t\tNcEmptyContent,\n\t\tNcLoadingIcon,\n\t},\n\n\tmixins: [isMobile, RouterMixin],\n\n\tprops: {\n\t\tlist: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tpickerLoading: false,\n\t\t\tshowPicker: false,\n\t\t\tshowPickerIntro: true,\n\n\t\t\trecommendations: [],\n\t\t\tpickerCircle: null,\n\t\t\tpickerData: [],\n\t\t\tpickerSelection: {},\n\t\t\tpickerTypes: CIRCLES_MEMBER_GROUPING,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t/**\n\t\t * Return the current circle\n\t\t *\n\t\t * @return {Circle}\n\t\t */\n\t\tcircle() {\n\t\t\treturn this.$store.getters.getCircle(this.selectedCircle)\n\t\t},\n\n\t\thasMembers() {\n\t\t\treturn this.groupedList.length > 0\n\t\t},\n\n\t\tfilteredPickerData() {\n\t\t\treturn this.pickerData.filter(entity => {\n\t\t\t\tconst type = SHARES_TYPES_MEMBER_MAP[entity.shareType]\n\t\t\t\tconst list = this.list.filter(({ userType }) => userType === type)\n\t\t\t\tif (list) {\n\t\t\t\t\treturn list.find((member) => member.userId === entity.shareWith) === undefined\n\t\t\t\t}\n\t\t\t\t// If the type doesn't exists, there is no member of this type\n\t\t\t\treturn true\n\t\t\t})\n\t\t},\n\n\t\tgroupedList() {\n\t\t\treturn CIRCLES_MEMBER_GROUPING\n\t\t\t\t.map(({ labelStandalone, type }) => ({\n\t\t\t\t\ttype,\n\t\t\t\t\tlabel: labelStandalone,\n\t\t\t\t\tmembers: [...this.list.filter(({ userType }) => userType === type)],\n\t\t\t\t}))\n\t\t\t\t.filter(({ members }) => members.length > 0)\n\t\t},\n\t},\n\n\tmounted() {\n\t\tsubscribe('contacts:circles:append', this.onShowPicker)\n\t},\n\n\tmethods: {\n\t\t/**\n\t\t * Show picker and fetch for recommendations\n\t\t * Cache the circleId in case the url change or something\n\t\t * and make sure we add them to the desired circle.\n\t\t *\n\t\t * @param {string} circleId the circle id to add members to\n\t\t */\n\t\tasync onShowPicker(circleId) {\n\t\t\tthis.showPicker = true\n\t\t\tthis.pickerLoading = true\n\t\t\tthis.pickerCircle = circleId\n\n\t\t\ttry {\n\t\t\t\tconst results = await getRecommendations()\n\t\t\t\t// cache recommendations\n\t\t\t\tthis.recommendations = results\n\t\t\t\tthis.pickerData = results\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Unable to get the recommendations list', error)\n\t\t\t\t// Do not show the error, let the user search\n\t\t\t\t// showError(t('contacts', 'Unable to get the recommendations list'))\n\t\t\t} finally {\n\t\t\t\tthis.pickerLoading = false\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * On EntityPicker search.\n\t\t * Returns recommendations if empty\n\t\t *\n\t\t * @param {string} term the searched term\n\t\t */\n\t\tasync onSearch(term) {\n\t\t\tif (term.trim() === '') {\n\t\t\t\tthis.pickerData = this.recommendations\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.pickerLoading = true\n\n\t\t\ttry {\n\t\t\t\tconst results = await getSuggestions(term)\n\t\t\t\tthis.pickerData = results\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Unable to get the results', error)\n\t\t\t\tshowError(t('contacts', 'Unable to get the results'))\n\t\t\t} finally {\n\t\t\t\tthis.pickerLoading = false\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * On picker submit\n\t\t *\n\t\t * @param {Array} selection the selection to add to the circle\n\t\t */\n\t\tasync onPickerPick(selection) {\n\t\t\tthis.logger.info('Adding selection to circle', { selection, pickerCircle: this.pickerCircle })\n\n\t\t\tthis.pickerLoading = true\n\n\t\t\tselection = selection.map(entry => ({\n\t\t\t\tid: entry.shareWith,\n\t\t\t\ttype: SHARES_TYPES_MEMBER_MAP[entry.shareType],\n\t\t\t}))\n\n\t\t\ttry {\n\t\t\t\tconst members = await this.$store.dispatch('addMembersToCircle', { circleId: this.pickerCircle, selection })\n\n\t\t\t\tif (members.length < selection.length) {\n\t\t\t\t\tshowWarning(t('contacts', 'Some members could not be added'))\n\t\t\t\t\t// TODO filter successful members and edit selection\n\t\t\t\t\tthis.pickerSelection = {}\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.resetPicker()\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('contacts', 'There was an issue adding members to the team'))\n\t\t\t\tconsole.error('There was an issue adding members to the circle', this.pickerCircle, error)\n\t\t\t} finally {\n\t\t\t\tthis.pickerLoading = false\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Reset picker related variables\n\t\t */\n\t\tresetPicker() {\n\t\t\tthis.showPicker = false\n\t\t\tthis.pickerCircle = null\n\t\t\tthis.pickerData = []\n\t\t\tthis.pickerSelection = {}\n\t\t},\n\t},\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.member-list {\n\t// Make virtual scroller scrollable\n\tmax-height: 100%;\n\tmax-width: 900px;\n\toverflow: auto;\n\n\t&__new {\n\t\tpadding: 10px;\n\t\tdisplay: inline-flex;\n\n\t\tbutton {\n\t\t\tbackground-position: 14px center;\n\t\t\ttext-align: left;\n\n\t\t}\n\t}\n\n\t:deep(.empty-content) {\n\t\tmargin: auto;\n\t}\n}\n\n.empty-content {\n\theight: 100%;\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<ul>\n\t\t<li class=\"circle-config\">\n\t\t\t<ContentHeading class=\"circle-config__title\">\n\t\t\t\t{{ t('contacts', 'Password protection') }}\n\t\t\t</ContentHeading>\n\n\t\t\t<ul class=\"circle-config__list\">\n\t\t\t\t<CheckboxRadioSwitch :checked=\"enforcePasswordProtection\"\n\t\t\t\t\t:loading=\"loading.includes(ENFORCE_PASSWORD_PROTECTION)\"\n\t\t\t\t\t:disabled=\"loading.length > 0\"\n\t\t\t\t\twrapper-element=\"li\"\n\t\t\t\t\t@update:checked=\"changePasswordProtection\">\n\t\t\t\t\t{{ t('contacts', 'Enforce password protection on files shared to this team') }}\n\t\t\t\t</CheckboxRadioSwitch>\n\n\t\t\t\t<CheckboxRadioSwitch v-if=\"enforcePasswordProtection\"\n\t\t\t\t\t:checked=\"useUniquePassword || showUniquePasswordInput\"\n\t\t\t\t\t:loading=\"loading.includes(USE_UNIQUE_PASSWORD)\"\n\t\t\t\t\t:disabled=\"loading.length > 0\"\n\t\t\t\t\twrapper-element=\"li\"\n\t\t\t\t\t@update:checked=\"changeUseUniquePassword\">\n\t\t\t\t\t{{ t('contacts', 'Use a unique password for all shares to this team') }}\n\t\t\t\t</CheckboxRadioSwitch>\n\n\t\t\t\t<li class=\"unique-password\">\n\t\t\t\t\t<template v-if=\"showUniquePasswordInput\">\n\t\t\t\t\t\t<input v-model=\"uniquePassword\"\n\t\t\t\t\t\t\t:disabled=\"loading.length > 0\"\n\t\t\t\t\t\t\t:placeholder=\"t('contacts', 'Unique password ')\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t@keyup.enter=\"saveUniquePassword\">\n\t\t\t\t\t\t<Button type=\"tertiary-no-background\"\n\t\t\t\t\t\t\t:disabled=\"loading.length > 0 || uniquePassword.length === 0\"\n\t\t\t\t\t\t\t@click=\"saveUniquePassword\">\n\t\t\t\t\t\t\t{{ t('contacts', 'Save') }}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</template>\n\t\t\t\t\t<Button v-else-if=\"useUniquePassword\"\n\t\t\t\t\t\tclass=\"change-unique-password\"\n\t\t\t\t\t\t@click=\"onClickChangePassword\">\n\t\t\t\t\t\t{{ t('contacts', 'Change unique password') }}\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t<div v-if=\"uniquePasswordError\" class=\"unique-password-error\">\n\t\t\t\t\t\t{{ t('contacts', 'Failed to save password. Please try again later.') }}\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</li>\n\t</ul>\n</template>\n\n<script>\nimport ContentHeading from './ContentHeading.vue'\nimport {\n\tNcCheckboxRadioSwitch as CheckboxRadioSwitch,\n\tNcButton as Button,\n} from '@nextcloud/vue'\n\n// Circle setting keys\nconst ENFORCE_PASSWORD_PROTECTION = 'enforce_password'\nconst USE_UNIQUE_PASSWORD = 'password_single_enabled'\nconst UNIQUE_PASSWORD = 'password_single'\n\nexport default {\n\tname: 'CirclePasswordSettings',\n\tcomponents: {\n\t\tContentHeading,\n\t\tCheckboxRadioSwitch,\n\t\tButton,\n\t},\n\tprops: {\n\t\tcircle: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tENFORCE_PASSWORD_PROTECTION,\n\t\t\tUSE_UNIQUE_PASSWORD,\n\t\t\tUNIQUE_PASSWORD,\n\n\t\t\tloading: [],\n\n\t\t\tuniquePassword: '',\n\t\t\tuniquePasswordError: false,\n\t\t\tshowUniquePasswordInput: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\t/**\n\t\t * @return {string}\n\t\t */\n\t\tcircleId() {\n\t\t\treturn this.circle._data.id\n\t\t},\n\n\t\t/**\n\t\t * @return {boolean}\n\t\t */\n\t\tenforcePasswordProtection() {\n\t\t\tconst value = this.circle._data.settings[ENFORCE_PASSWORD_PROTECTION]\n\t\t\treturn value === '1' || value === 'true'\n\t\t},\n\n\t\t/**\n\t\t * @return {boolean}\n\t\t */\n\t\tuseUniquePassword() {\n\t\t\tconst value = this.circle._data.settings[USE_UNIQUE_PASSWORD]\n\t\t\treturn value === '1' || value === 'true'\n\t\t},\n\t},\n\tmethods: {\n\t\t/**\n\t\t * Change handler for enforcePasswordProtection checkbox.\n\t\t */\n\t\tasync changePasswordProtection() {\n\t\t\tthis.loading.push(ENFORCE_PASSWORD_PROTECTION)\n\t\t\ttry {\n\t\t\t\tconst newValue = !this.enforcePasswordProtection\n\n\t\t\t\t// Also disable unique password setting\n\t\t\t\tif (!newValue && this.useUniquePassword) {\n\t\t\t\t\tawait this.saveUseUniquePassword(false)\n\t\t\t\t}\n\n\t\t\t\t// Also hide password input\n\t\t\t\tif (!newValue && this.showUniquePasswordInput) {\n\t\t\t\t\tthis.showUniquePasswordInput = false\n\t\t\t\t}\n\n\t\t\t\tawait this.$store.dispatch('editCircleSetting', {\n\t\t\t\t\tcircleId: this.circleId,\n\t\t\t\t\tsetting: {\n\t\t\t\t\t\tsetting: ENFORCE_PASSWORD_PROTECTION,\n\t\t\t\t\t\tvalue: newValue.toString(),\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.loading = this.loading.filter(item => item !== ENFORCE_PASSWORD_PROTECTION)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Change handler for useUniquePassword checkbox.\n\t\t */\n\t\tasync changeUseUniquePassword() {\n\t\t\t// Only update backend if the user disables the setting.\n\t\t\t// It will be enabled once a unique password has been set.\n\t\t\tif (!this.useUniquePassword) {\n\t\t\t\tthis.showUniquePasswordInput = !this.showUniquePasswordInput\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tawait this.saveUseUniquePassword(!this.useUniquePassword)\n\t\t},\n\n\t\t/**\n\t\t * Update backend with given value for useUniquePassword.\n\t\t *\n\t\t * @param {boolean} value New value\n\t\t */\n\t\tasync saveUseUniquePassword(value) {\n\t\t\tthis.loading.push(USE_UNIQUE_PASSWORD)\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('editCircleSetting', {\n\t\t\t\t\tcircleId: this.circleId,\n\t\t\t\t\tsetting: {\n\t\t\t\t\t\tsetting: USE_UNIQUE_PASSWORD,\n\t\t\t\t\t\tvalue: value.toString(),\n\t\t\t\t\t},\n\t\t\t\t})\n\n\t\t\t\t// Reset unique password input state if disabled\n\t\t\t\tif (!value) {\n\t\t\t\t\tthis.uniquePassword = ''\n\t\t\t\t\tthis.showUniquePasswordInput = false\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tthis.loading = this.loading.filter(item => item !== USE_UNIQUE_PASSWORD)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Persist uniquePassword to backend.\n\t\t */\n\t\tasync saveUniquePassword() {\n\t\t\tif (this.uniquePassword.length === 0) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.loading.push(UNIQUE_PASSWORD)\n\t\t\tthis.uniquePasswordError = false\n\t\t\ttry {\n\t\t\t\tif (!this.useUniquePassword) {\n\t\t\t\t\tawait this.saveUseUniquePassword(true)\n\t\t\t\t}\n\n\t\t\t\tawait this.$store.dispatch('editCircleSetting', {\n\t\t\t\t\tcircleId: this.circleId,\n\t\t\t\t\tsetting: {\n\t\t\t\t\t\tsetting: UNIQUE_PASSWORD,\n\t\t\t\t\t\tvalue: this.uniquePassword,\n\t\t\t\t\t},\n\t\t\t\t})\n\n\t\t\t\t// Show change button after saving the password\n\t\t\t\tthis.showUniquePasswordInput = false\n\t\t\t\tthis.uniquePassword = ''\n\t\t\t} catch {\n\t\t\t\tthis.uniquePasswordError = true\n\t\t\t} finally {\n\t\t\t\tthis.loading = this.loading.filter(item => item !== UNIQUE_PASSWORD)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Click handler for the button to show the uniquePassword input.\n\t\t */\n\t\tonClickChangePassword() {\n\t\t\tthis.showUniquePasswordInput = true\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.unique-password {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-wrap: wrap;\n\twidth: 100%;\n\n\tinput {\n\t\tflex: 1 auto;\n\t\tmax-width: 200px;\n\t}\n\n\t.change-unique-password {\n\t\tmargin-top: 5px;\n\t}\n\n\t// Force wrap error into a new line\n\t.unique-password-error {\n\t\tflex: 1 100%;\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"circle-details\">\n\t\t<!-- contact header -->\n\t\t<DetailsHeader>\n\t\t\t<!-- avatar and upload photo -->\n\t\t\t<template #avatar=\"{avatarSize}\">\n\t\t\t\t<Avatar :disable-tooltip=\"true\"\n\t\t\t\t\t:display-name=\"circle.displayName\"\n\t\t\t\t\t:is-no-user=\"true\"\n\t\t\t\t\t:size=\"avatarSize\" />\n\t\t\t</template>\n\n\t\t\t<!-- display name -->\n\t\t\t<template #title>\n\t\t\t\t<div v-if=\"loadingName\" class=\"circle-name__loader icon-loading-small\" />\n\t\t\t\t<h2>\n\t\t\t\t\t{{ circle.displayName }}\n\t\t\t\t</h2>\n\t\t\t</template>\n\n\t\t\t<!-- org, title -->\n\t\t\t<template v-if=\"!circle.isOwner\" #subtitle>\n\t\t\t\t{{ t('contacts', 'Team owned by {owner}', { owner: circle.owner.displayName}) }}\n\t\t\t</template>\n\n\t\t\t<template #actions>\n\t\t\t\t<!-- copy circle link -->\n\t\t\t\t<Button type=\"tertiary\"\n\t\t\t\t\t:href=\"circleUrl\"\n\t\t\t\t\t:title=\"copyButtonText\"\n\t\t\t\t\t:class=\"copyLinkIcon\"\n\t\t\t\t\t@click.stop.prevent=\"copyToClipboard(circleUrl)\" />\n\n\t\t\t\t<!-- Team settings modal -->\n\t\t\t\t<Button v-if=\"(circle.isOwner || circle.isAdmin) && !circle.isPersonal\" @click=\"showSettingsModal = true\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Cog :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Team settings') }}\n\t\t\t\t</Button>\n\n\t\t\t\t<!-- Only show the join button if the circle is accepting requests -->\n\t\t\t\t<Button v-if=\"!circle.isPendingMember && !circle.isMember && circle.canJoin\"\n\t\t\t\t\t:disabled=\"loadingJoin\"\n\t\t\t\t\tclass=\"primary\"\n\t\t\t\t\t@click=\"joinCircle\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Login :size=\"16\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Request to join') }}\n\t\t\t\t</Button>\n\t\t\t</template>\n\t\t</DetailsHeader>\n\n\t\t<section v-if=\"showDescription\" class=\"circle-details-section\">\n\t\t\t<ContentHeading :loading=\"loadingDescription\">\n\t\t\t\t{{ t('contacts', 'Description') }}\n\t\t\t</ContentHeading>\n\n\t\t\t<RichContenteditable :value.sync=\"circle.description\"\n\t\t\t\t:auto-complete=\"onAutocomplete\"\n\t\t\t\t:maxlength=\"1024\"\n\t\t\t\t:multiline=\"true\"\n\t\t\t\t:contenteditable=\"false\"\n\t\t\t\t:placeholder=\"descriptionPlaceholder\"\n\t\t\t\tclass=\"circle-details-section__description\"\n\t\t\t\t@update:value=\"onDescriptionChangeDebounce\" />\n\t\t</section>\n\n\t\t<!-- not a member -->\n\t\t<template v-if=\"!circle.isMember\">\n\t\t\t<!-- Pending request validation -->\n\t\t\t<NcEmptyContent v-if=\"circle.isPendingMember\"\n\t\t\t\t:name=\"t('contacts', 'Your request to join this team is pending approval')\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcLoadingIcon :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</NcEmptyContent>\n\n\t\t\t<NcEmptyContent v-else\n\t\t\t\t:name=\"t('contacts', 'You are not a member of {circle}', { circle: circle.displayName})\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconAccountGroup :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</NcEmptyContent>\n\t\t</template>\n\n\t\t<section v-else>\n\t\t\t<ContentHeading>\n\t\t\t\t{{ t('contacts', 'Team resources') }}\n\t\t\t</ContentHeading>\n\t\t\t<p>{{ t('contacts', 'Anything shared with this team will show up here') }}</p>\n\t\t\t<div v-for=\"provider in resourceProviders\" :key=\"provider.id\">\n\t\t\t\t<ContentHeading>\n\t\t\t\t\t<span v-show=\"false\" class=\"provider__icon\" v-html=\"provider.icon\" /> {{ provider.name }}\n\t\t\t\t</ContentHeading>\n\n\t\t\t\t<ul>\n\t\t\t\t\t<ListItem v-for=\"resource in resourcesForProvider(provider.id)\"\n\t\t\t\t\t\t:key=\"resource.url\"\n\t\t\t\t\t\tclass=\"resource\"\n\t\t\t\t\t\t:name=\"resource.label\"\n\t\t\t\t\t\t:href=\"resource.url\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<span v-if=\"resource.iconEmoji\" class=\"resource__icon\">\n\t\t\t\t\t\t\t\t{{ resource.iconEmoji }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span v-else-if=\"resource.iconSvg\" class=\"resource__icon\" v-html=\"resource.iconSvg\" />\n\t\t\t\t\t\t\t<span v-else-if=\"resource.iconURL\" class=\"resource__icon\">\n\t\t\t\t\t\t\t\t<img :src=\"resource.iconURL\" alt=\"\">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</ListItem>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</section>\n\n\t\t<MemberList v-if=\"members.length\" :list=\"members\" />\n\n\t\t<Modal v-if=\"(circle.isOwner || circle.isAdmin) && !circle.isPersonal && showSettingsModal\" @close=\"showSettingsModal=false\">\n\t\t\t<div class=\"circle-settings\">\n\t\t\t\t<h2>{{ t('contacts', 'Team settings') }}</h2>\n\n\t\t\t\t<h3>{{ t('contacts', 'Team name') }}</h3>\n\t\t\t\t<input v-model=\"circle.displayName\"\n\t\t\t\t\t:readonly=\"!circle.isOwner\"\n\t\t\t\t\t:placeholder=\"t('contacts', 'Team name')\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tautocorrect=\"off\"\n\t\t\t\t\tspellcheck=\"false\"\n\t\t\t\t\tname=\"displayname\"\n\t\t\t\t\t@input=\"onNameChangeDebounce\">\n\n\t\t\t\t<h3>{{ t('contacts', 'Description') }}</h3>\n\t\t\t\t<RichContenteditable :value.sync=\"circle.description\"\n\t\t\t\t\t:auto-complete=\"onAutocomplete\"\n\t\t\t\t\t:maxlength=\"1024\"\n\t\t\t\t\t:multiline=\"true\"\n\t\t\t\t\t:contenteditable=\"circle.isOwner\"\n\t\t\t\t\t:placeholder=\"descriptionPlaceholder\"\n\t\t\t\t\tclass=\"circle-details-section__description\"\n\t\t\t\t\t@update:value=\"onDescriptionChangeDebounce\" />\n\n\t\t\t\t<h3>{{ t('contacts', 'Settings') }}</h3>\n\t\t\t\t<CircleConfigs class=\"circle-details-section__configs\" :circle=\"circle\" />\n\t\t\t\t<CirclePasswordSettings class=\"circle-details-section__configs\" :circle=\"circle\" />\n\n\t\t\t\t<h3>{{ t('contacts', 'Actions') }}</h3>\n\t\t\t\t<!-- leave circle -->\n\t\t\t\t<Button v-if=\"circle.canLeave\"\n\t\t\t\t\ttype=\"warning\"\n\t\t\t\t\t@click=\"confirmLeaveCircle\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Logout :size=\"16\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Leave team') }}\n\t\t\t\t</Button>\n\n\t\t\t\t<!-- delete circle -->\n\t\t\t\t<Button v-if=\"circle.canDelete\"\n\t\t\t\t\ttype=\"error\"\n\t\t\t\t\thref=\"#\"\n\t\t\t\t\t@click.prevent.stop=\"confirmDeleteCircle\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconDelete :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Delete team') }}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</Modal>\n\t</div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useElementSize } from '@vueuse/core'\nimport debounce from 'debounce'\nimport { generateOcsUrl } from '@nextcloud/router'\nimport { showError } from '@nextcloud/dialogs'\nimport axios from '@nextcloud/axios'\n\nimport {\n\tNcAvatar as Avatar,\n\tNcButton as Button,\n\tNcEmptyContent,\n\tNcListItem as ListItem,\n\tNcLoadingIcon,\n\tNcModal as Modal,\n\tNcRichContenteditable as RichContenteditable,\n} from '@nextcloud/vue'\n\nimport Cog from 'vue-material-design-icons/Cog.vue'\nimport Login from 'vue-material-design-icons/Login.vue'\nimport Logout from 'vue-material-design-icons/Logout.vue'\nimport IconDelete from 'vue-material-design-icons/Delete.vue'\nimport IconAccountGroup from 'vue-material-design-icons/AccountGroup.vue'\n\nimport { CircleEdit, editCircle } from '../services/circles.ts'\nimport CircleActionsMixin from '../mixins/CircleActionsMixin.js'\nimport DetailsHeader from './DetailsHeader.vue'\nimport CircleConfigs from './CircleDetails/CircleConfigs.vue'\nimport MemberList from './MemberList/MemberList.vue'\nimport ContentHeading from './CircleDetails/ContentHeading.vue'\nimport CirclePasswordSettings from './CircleDetails/CirclePasswordSettings.vue'\n\nexport default {\n\tname: 'CircleDetails',\n\n\tcomponents: {\n\t\tAvatar,\n\t\tButton,\n\t\tCircleConfigs,\n\t\tCirclePasswordSettings,\n\t\tContentHeading,\n\t\tDetailsHeader,\n\t\tListItem,\n\t\tCog,\n\t\tIconAccountGroup,\n\t\tIconDelete,\n\t\tLogin,\n\t\tLogout,\n\t\tMemberList,\n\t\tModal,\n\t\tNcEmptyContent,\n\t\tNcLoadingIcon,\n\t\tRichContenteditable,\n\t},\n\n\tmixins: [CircleActionsMixin],\n\n\tsetup() {\n\t\tconst avatarList = ref()\n\t\tconst { width } = useElementSize(avatarList)\n\t\treturn { avatarList, width }\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tloadingDescription: false,\n\t\t\tloadingName: false,\n\t\t\tshowSettingsModal: false,\n\t\t\tshowMembersModal: false,\n\t\t\tresources: null,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tdescriptionPlaceholder() {\n\t\t\tif (this.circle.description.trim() === '') {\n\t\t\t\treturn t('contacts', 'There is no description for this team')\n\t\t\t}\n\t\t\treturn t('contacts', 'Enter a description for the team')\n\t\t},\n\n\t\tisEmptyDescription() {\n\t\t\treturn this.circle.description.trim() === ''\n\t\t},\n\n\t\tshowDescription() {\n\t\t\tif (this.circle.isOwner) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t\treturn !this.isEmptyDescription\n\t\t},\n\n\t\tmembers() {\n\t\t\treturn Object.values(this.$store.getters.getCircle(this.circle.id)?.members || [])\n\t\t},\n\n\t\tmaxMembers() {\n\t\t\t// How many avatars (default-clickable-area + 12px gap) fit?\n\t\t\tconst avatarWidth = parseInt(window.getComputedStyle(document.body).getPropertyValue('--default-clickable-area')) + 12\n\t\t\tconst maxMembers = Math.floor(this.width / avatarWidth)\n\t\t\treturn (this.members.length > maxMembers)\n\t\t\t\t? maxMembers - 1\n\t\t\t\t: maxMembers\n\t\t},\n\n\t\tmemberLimit() {\n\t\t\treturn Math.min(this.members.length, this.maxMembers)\n\t\t},\n\n\t\tmembersLimited() {\n\t\t\treturn this.members.slice(0, this.memberLimit)\n\t\t},\n\n\t\thasExtraMembers() {\n\t\t\treturn this.members.length > this.maxMembers\n\t\t},\n\n\t\tresourceProviders() {\n\t\t\treturn this.resources?.reduce((acc, res) => {\n\t\t\t\tif (!acc.find(p => p.id === res.provider.id)) {\n\t\t\t\t\tacc.push(res.provider)\n\t\t\t\t}\n\t\t\t\treturn acc\n\t\t\t}, []) ?? []\n\t\t},\n\n\t\tresourcesForProvider() {\n\t\t\treturn (providerId) => {\n\t\t\t\treturn this.resources?.filter(res => res.provider.id === providerId) ?? []\n\t\t\t}\n\t\t},\n\t},\n\n\twatch: {\n\t\t'circle.id': {\n\t\t\thandler() {\n\t\t\t\tthis.fetchTeamResources()\n\t\t\t},\n\t\t\timmediate: true,\n\t\t},\n\t},\n\n\tmethods: {\n\t\tasync fetchTeamResources() {\n\t\t\tconst response = await axios.get(generateOcsUrl(`/teams/${this.circle.id}/resources`))\n\t\t\tthis.resources = response.data.ocs.data.resources\n\t\t},\n\t\t/**\n\t\t * Autocomplete @mentions on the description\n\t\t *\n\t\t * @param {string} search the search term\n\t\t * @param {Function} callback callback to be called with results array\n\t\t */\n\t\tonAutocomplete(search, callback) {\n\t\t\t// TODO: implement autocompletion. Disabled for now\n\t\t\t// eslint-disable-next-line n/no-callback-literal\n\t\t\tcallback([])\n\t\t},\n\n\t\tonDescriptionChangeDebounce: debounce(function(...args) {\n\t\t\tthis.onDescriptionChange(...args)\n\t\t}, 500),\n\t\tasync onDescriptionChange(description) {\n\t\t\tthis.loadingDescription = true\n\t\t\ttry {\n\t\t\t\tawait editCircle(this.circle.id, CircleEdit.Description, description)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Unable to edit team description', description, error)\n\t\t\t\tshowError(t('contacts', 'An error happened during description sync'))\n\t\t\t} finally {\n\t\t\t\tthis.loadingDescription = false\n\t\t\t}\n\t\t},\n\n\t\tonNameChangeDebounce: debounce(function(event) {\n\t\t\tthis.onNameChange(event.target.value)\n\t\t}, 500),\n\t\tasync onNameChange(name) {\n\t\t\tthis.loadingName = true\n\t\t\ttry {\n\t\t\t\tawait editCircle(this.circle.id, CircleEdit.Name, name)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Unable to edit name', name, error)\n\t\t\t\tshowError(t('contacts', 'An error happened during name sync'))\n\t\t\t} finally {\n\t\t\t\tthis.loadingName = false\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.app-content-details header,\n.app-content-details section {\n\tmax-width: 800px;\n\tmargin: auto;\n\tmargin-bottom: 36px;\n\t@media screen and (max-width: 1024px) {\n\t\tpadding: 0 20px;\n\n\t}\n\n\t&:deep(.contact-header__avatar) {\n\t\twidth: 75px !important;\n\t}\n\n\t&:deep(.contact-header__no-wrap) {\n\t\tflex-grow: 1;\n\t}\n\n\t&:deep(.contact-header__actions) {\n\t\tflex-grow: 0;\n\t}\n}\n\n.circle-name__loader {\n\tmargin-left: 8px;\n}\n\n.circle-details {\n\tpadding-inline: 20px;\n}\n\n.circle-details-section {\n\t&:not(:first-of-type) {\n\t\tmargin-top: 24px;\n\t}\n\n\t&__actions {\n\t\tdisplay: flex;\n\t\ta, button {\n\t\t\tmargin-right: 8px;\n\t\t}\n\t}\n\n\t&__description {\n\t\tmax-width: 800px;\n\t}\n}\n\n.avatar-box {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n.avatar-list {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tflex-grow: 1;\n\tgap: 12px;\n}\n\n:deep(.app-content-list) {\n\tmax-width: 100%;\n\tborder: 0;\n}\n\n.circle-settings {\n\tmargin: 12px;\n}\n\n.provider__icon {\n\tdisplay: inline-block;\n\twidth: 24px;\n\theight: 24px;\n}\n\n.resource {\n\t&__icon {\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttext-align: center;\n\t\tsvg {\n\t\t\twidth: 20px;\n\t\t\theight: 20px;\n\t\t}\n\t\timg {\n\t\t\tborder-radius: var(--border-radius-pill);\n\t\t\toverflow: hidden;\n\t\t\twidth: 32px;\n\t\t\theight: 32px;\n\t\t}\n\t}\n\n\t&:deep(.line-one__name) {\n\t\tfont-weight: normal;\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<AppContent>\n\t\t<EmptyContent v-if=\"!circle\" :name=\"t('contacts', 'Please select a team')\">\n\t\t\t<template #icon>\n\t\t\t\t<AccountGroup :size=\"20\" />\n\t\t\t</template>\n\t\t</EmptyContent>\n\n\t\t<EmptyContent v-else-if=\"loading\" class=\"empty-content\" :name=\"t('contacts', 'Loading team')\">\n\t\t\t<template #icon>\n\t\t\t\t<IconLoading :size=\"20\" />\n\t\t\t</template>\n\t\t</EmptyContent>\n\n\t\t<CircleDetails v-else :circle=\"circle\" />\n\t</AppContent>\n</template>\n<script>\nimport { showError } from '@nextcloud/dialogs'\nimport {\n\tNcAppContent as AppContent,\n\tNcEmptyContent as EmptyContent,\n\tNcLoadingIcon as IconLoading,\n\tisMobile,\n} from '@nextcloud/vue'\nimport AccountGroup from 'vue-material-design-icons/AccountGroup.vue'\nimport CircleDetails from '../CircleDetails.vue'\nimport RouterMixin from '../../mixins/RouterMixin.js'\n\nexport default {\n\tname: 'CircleContent',\n\n\tcomponents: {\n\t\tAppContent,\n\t\tCircleDetails,\n\t\tEmptyContent,\n\t\tAccountGroup,\n\t\tIconLoading,\n\t},\n\n\tmixins: [isMobile, RouterMixin],\n\n\tprops: {\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tloadingList: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t// store variables\n\t\tcircles() {\n\t\t\treturn this.$store.getters.getCircles\n\t\t},\n\t\tcircle() {\n\t\t\treturn this.$store.getters.getCircle(this.selectedCircle)\n\t\t},\n\t\tmembers() {\n\t\t\treturn Object.values(this.circle?.members || [])\n\t\t},\n\n\t\t/**\n\t\t * Is the current circle empty\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisEmptyCircle() {\n\t\t\treturn this.members.length === 0\n\t\t},\n\t},\n\n\twatch: {\n\t\tcircle(newCircle) {\n\t\t\tif (newCircle?.id) {\n\t\t\t\tthis.fetchCircleMembers(newCircle.id)\n\t\t\t}\n\t\t},\n\t},\n\n\tbeforeMount() {\n\t\tif (this.circle?.id) {\n\t\t\tthis.fetchCircleMembers(this.circle.id)\n\t\t}\n\t},\n\n\tmethods: {\n\t\tasync fetchCircleMembers(circleId) {\n\t\t\tthis.loadingList = true\n\t\t\tthis.logger.debug('Fetching members for', { circleId })\n\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('getCircleMembers', circleId)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error)\n\t\t\t\tshowError(t('contacts', 'There was an error fetching the member list'))\n\t\t\t} finally {\n\t\t\t\tthis.loadingList = false\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// TODO: replace my button component when available\nbutton {\n\theight: 44px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tspan {\n\t\tmargin-right: 10px;\n\t}\n}\n\n.empty-content {\n\theight: 100%;\n}\n</style>\n","export default function cumsum(values, valueof) {\n  var sum = 0, index = 0;\n  return Float64Array.from(values, valueof === undefined\n    ? v => (sum += +v || 0)\n    : v => (sum += +valueof(v, index++, values) || 0));\n}","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","export default function sum(values, valueof) {\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        sum += value;\n      }\n    }\n  }\n  return sum;\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? Were done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n","export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n","export default function(callback, that) {\n  var node = this, nodes = [node], children, i, index = -1;\n  while (node = nodes.pop()) {\n    callback.call(that, node, ++index, this);\n    if (children = node.children) {\n      for (i = children.length - 1; i >= 0; --i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  return this;\n}\n","export default function(callback, that) {\n  var node = this, nodes = [node], next = [], children, i, n, index = -1;\n  while (node = nodes.pop()) {\n    next.push(node);\n    if (children = node.children) {\n      for (i = 0, n = children.length; i < n; ++i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  while (node = next.pop()) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n","export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    if (callback.call(that, node, ++index, this)) {\n      return node;\n    }\n  }\n}\n","export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n","export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n","export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n","export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n","export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Dont include the roots parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n","export default function*() {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      yield node;\n      if (children = node.children) {\n        for (i = 0, n = children.length; i < n; ++i) {\n          next.push(children[i]);\n        }\n      }\n    }\n  } while (next.length);\n}\n","import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_find from \"./find.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\nimport node_iterator from \"./iterator.js\";\n\nexport default function hierarchy(data, children) {\n  if (data instanceof Map) {\n    data = [undefined, data];\n    if (children === undefined) children = mapChildren;\n  } else if (children === undefined) {\n    children = objectChildren;\n  }\n\n  var root = new Node(data),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if ((childs = children(node.data)) && (n = (childs = Array.from(childs)).length)) {\n      node.children = childs;\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = childs[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction objectChildren(d) {\n  return d.children;\n}\n\nfunction mapChildren(d) {\n  return Array.isArray(d) ? d[1] : null;\n}\n\nfunction copyData(node) {\n  if (node.data.value !== undefined) node.value = node.data.value;\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  find: node_find,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy,\n  [Symbol.iterator]: node_iterator\n};\n","export function optional(f) {\n  return f == null ? null : required(f);\n}\n\nexport function required(f) {\n  if (typeof f !== \"function\") throw new Error;\n  return f;\n}\n","import {optional} from \"./accessors.js\";\nimport {Node, computeHeight} from \"./hierarchy/index.js\";\n\nvar preroot = {depth: -1},\n    ambiguous = {},\n    imputed = {};\n\nfunction defaultId(d) {\n  return d.id;\n}\n\nfunction defaultParentId(d) {\n  return d.parentId;\n}\n\nexport default function() {\n  var id = defaultId,\n      parentId = defaultParentId,\n      path;\n\n  function stratify(data) {\n    var nodes = Array.from(data),\n        currentId = id,\n        currentParentId = parentId,\n        n,\n        d,\n        i,\n        root,\n        parent,\n        node,\n        nodeId,\n        nodeKey,\n        nodeByKey = new Map;\n\n    if (path != null) {\n      const I = nodes.map((d, i) => normalize(path(d, i, data)));\n      const P = I.map(parentof);\n      const S = new Set(I).add(\"\");\n      for (const i of P) {\n        if (!S.has(i)) {\n          S.add(i);\n          I.push(i);\n          P.push(parentof(i));\n          nodes.push(imputed);\n        }\n      }\n      currentId = (_, i) => I[i];\n      currentParentId = (_, i) => P[i];\n    }\n\n    for (i = 0, n = nodes.length; i < n; ++i) {\n      d = nodes[i], node = nodes[i] = new Node(d);\n      if ((nodeId = currentId(d, i, data)) != null && (nodeId += \"\")) {\n        nodeKey = node.id = nodeId;\n        nodeByKey.set(nodeKey, nodeByKey.has(nodeKey) ? ambiguous : node);\n      }\n      if ((nodeId = currentParentId(d, i, data)) != null && (nodeId += \"\")) {\n        node.parent = nodeId;\n      }\n    }\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i];\n      if (nodeId = node.parent) {\n        parent = nodeByKey.get(nodeId);\n        if (!parent) throw new Error(\"missing: \" + nodeId);\n        if (parent === ambiguous) throw new Error(\"ambiguous: \" + nodeId);\n        if (parent.children) parent.children.push(node);\n        else parent.children = [node];\n        node.parent = parent;\n      } else {\n        if (root) throw new Error(\"multiple roots\");\n        root = node;\n      }\n    }\n\n    if (!root) throw new Error(\"no root\");\n\n    // When imputing internal nodes, only introduce roots if needed.\n    // Then replace the imputed marker data with null.\n    if (path != null) {\n      while (root.data === imputed && root.children.length === 1) {\n        root = root.children[0], --n;\n      }\n      for (let i = nodes.length - 1; i >= 0; --i) {\n        node = nodes[i];\n        if (node.data !== imputed) break;\n        node.data = null;\n      }\n    }\n\n    root.parent = preroot;\n    root.eachBefore(function(node) { node.depth = node.parent.depth + 1; --n; }).eachBefore(computeHeight);\n    root.parent = null;\n    if (n > 0) throw new Error(\"cycle\");\n\n    return root;\n  }\n\n  stratify.id = function(x) {\n    return arguments.length ? (id = optional(x), stratify) : id;\n  };\n\n  stratify.parentId = function(x) {\n    return arguments.length ? (parentId = optional(x), stratify) : parentId;\n  };\n\n  stratify.path = function(x) {\n    return arguments.length ? (path = optional(x), stratify) : path;\n  };\n\n  return stratify;\n}\n\n// To normalize a path, we coerce to a string, strip the trailing slash if any\n// (as long as the trailing slash is not immediately preceded by another slash),\n// and add leading slash if missing.\nfunction normalize(path) {\n  path = `${path}`;\n  let i = path.length;\n  if (slash(path, i - 1) && !slash(path, i - 2)) path = path.slice(0, -1);\n  return path[0] === \"/\" ? path : `/${path}`;\n}\n\n// Walk backwards to find the first slash that is not the leading slash, e.g.:\n// \"/foo/bar\"  \"/foo\", \"/foo\"  \"/\", \"/\"  \"\". (The root is special-cased\n// because the id of the root must be a truthy value.)\nfunction parentof(path) {\n  let i = path.length;\n  if (i < 2) return \"\";\n  while (--i > 1) if (slash(path, i)) break;\n  return path.slice(0, i);\n}\n\n// Slashes can be escaped; to determine whether a slash is a path delimiter, we\n// count the number of preceding backslashes escaping the forward slash: an odd\n// number indicates an escaped forward slash.\nfunction slash(path, i) {\n  if (path[i] === \"/\") {\n    let k = 0;\n    while (i > 0 && path[--i] === \"\\\\\") ++k;\n    if ((k & 1) === 0) return true;\n  }\n  return false;\n}\n","import {Node} from \"./hierarchy/index.js\";\n\nfunction defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\n// function radialSeparation(a, b) {\n//   return (a.parent === b.parent ? 1 : 2) / a.depth;\n// }\n\n// This function is used to traverse the left contour of a subtree (or\n// subforest). It returns the successor of v on this contour. This successor is\n// either given by the leftmost child of v or by the thread of v. The function\n// returns null if and only if v is on the highest level of its subtree.\nfunction nextLeft(v) {\n  var children = v.children;\n  return children ? children[0] : v.t;\n}\n\n// This function works analogously to nextLeft.\nfunction nextRight(v) {\n  var children = v.children;\n  return children ? children[children.length - 1] : v.t;\n}\n\n// Shifts the current subtree rooted at w+. This is done by increasing\n// prelim(w+) and mod(w+) by shift.\nfunction moveSubtree(wm, wp, shift) {\n  var change = shift / (wp.i - wm.i);\n  wp.c -= change;\n  wp.s += shift;\n  wm.c += change;\n  wp.z += shift;\n  wp.m += shift;\n}\n\n// All other shifts, applied to the smaller subtrees between w- and w+, are\n// performed by this function. To prepare the shifts, we have to adjust\n// change(w+), shift(w+), and change(w-).\nfunction executeShifts(v) {\n  var shift = 0,\n      change = 0,\n      children = v.children,\n      i = children.length,\n      w;\n  while (--i >= 0) {\n    w = children[i];\n    w.z += shift;\n    w.m += shift;\n    shift += w.s + (change += w.c);\n  }\n}\n\n// If vi-s ancestor is a sibling of v, returns vi-s ancestor. Otherwise,\n// returns the specified (default) ancestor.\nfunction nextAncestor(vim, v, ancestor) {\n  return vim.a.parent === v.parent ? vim.a : ancestor;\n}\n\nfunction TreeNode(node, i) {\n  this._ = node;\n  this.parent = null;\n  this.children = null;\n  this.A = null; // default ancestor\n  this.a = this; // ancestor\n  this.z = 0; // prelim\n  this.m = 0; // mod\n  this.c = 0; // change\n  this.s = 0; // shift\n  this.t = null; // thread\n  this.i = i; // number\n}\n\nTreeNode.prototype = Object.create(Node.prototype);\n\nfunction treeRoot(root) {\n  var tree = new TreeNode(root, 0),\n      node,\n      nodes = [tree],\n      child,\n      children,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if (children = node._.children) {\n      node.children = new Array(n = children.length);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new TreeNode(children[i], i));\n        child.parent = node;\n      }\n    }\n  }\n\n  (tree.parent = new TreeNode(null, 0)).children = [tree];\n  return tree;\n}\n\n// Node-link tree diagram using the Reingold-Tilford \"tidy\" algorithm\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = null;\n\n  function tree(root) {\n    var t = treeRoot(root);\n\n    // Compute the layout using Buchheim et al.s algorithm.\n    t.eachAfter(firstWalk), t.parent.m = -t.z;\n    t.eachBefore(secondWalk);\n\n    // If a fixed node size is specified, scale x and y.\n    if (nodeSize) root.eachBefore(sizeNode);\n\n    // If a fixed tree size is specified, scale x and y based on the extent.\n    // Compute the left-most, right-most, and depth-most nodes for extents.\n    else {\n      var left = root,\n          right = root,\n          bottom = root;\n      root.eachBefore(function(node) {\n        if (node.x < left.x) left = node;\n        if (node.x > right.x) right = node;\n        if (node.depth > bottom.depth) bottom = node;\n      });\n      var s = left === right ? 1 : separation(left, right) / 2,\n          tx = s - left.x,\n          kx = dx / (right.x + s + tx),\n          ky = dy / (bottom.depth || 1);\n      root.eachBefore(function(node) {\n        node.x = (node.x + tx) * kx;\n        node.y = node.depth * ky;\n      });\n    }\n\n    return root;\n  }\n\n  // Computes a preliminary x-coordinate for v. Before that, FIRST WALK is\n  // applied recursively to the children of v, as well as the function\n  // APPORTION. After spacing out the children by calling EXECUTE SHIFTS, the\n  // node v is placed to the midpoint of its outermost children.\n  function firstWalk(v) {\n    var children = v.children,\n        siblings = v.parent.children,\n        w = v.i ? siblings[v.i - 1] : null;\n    if (children) {\n      executeShifts(v);\n      var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n      if (w) {\n        v.z = w.z + separation(v._, w._);\n        v.m = v.z - midpoint;\n      } else {\n        v.z = midpoint;\n      }\n    } else if (w) {\n      v.z = w.z + separation(v._, w._);\n    }\n    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n  }\n\n  // Computes all real x-coordinates by summing up the modifiers recursively.\n  function secondWalk(v) {\n    v._.x = v.z + v.parent.m;\n    v.m += v.parent.m;\n  }\n\n  // The core of the algorithm. Here, a new subtree is combined with the\n  // previous subtrees. Threads are used to traverse the inside and outside\n  // contours of the left and right subtree up to the highest common level. The\n  // vertices used for the traversals are vi+, vi-, vo-, and vo+, where the\n  // superscript o means outside and i means inside, the subscript - means left\n  // subtree and + means right subtree. For summing up the modifiers along the\n  // contour, we use respective variables si+, si-, so-, and so+. Whenever two\n  // nodes of the inside contours conflict, we compute the left one of the\n  // greatest uncommon ancestors using the function ANCESTOR and call MOVE\n  // SUBTREE to shift the subtree and prepare the shifts of smaller subtrees.\n  // Finally, we add a new thread (if necessary).\n  function apportion(v, w, ancestor) {\n    if (w) {\n      var vip = v,\n          vop = v,\n          vim = w,\n          vom = vip.parent.children[0],\n          sip = vip.m,\n          sop = vop.m,\n          sim = vim.m,\n          som = vom.m,\n          shift;\n      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {\n        vom = nextLeft(vom);\n        vop = nextRight(vop);\n        vop.a = v;\n        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n        if (shift > 0) {\n          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);\n          sip += shift;\n          sop += shift;\n        }\n        sim += vim.m;\n        sip += vip.m;\n        som += vom.m;\n        sop += vop.m;\n      }\n      if (vim && !nextRight(vop)) {\n        vop.t = vim;\n        vop.m += sim - sop;\n      }\n      if (vip && !nextLeft(vom)) {\n        vom.t = vip;\n        vom.m += sip - som;\n        ancestor = v;\n      }\n    }\n    return ancestor;\n  }\n\n  function sizeNode(node) {\n    node.x *= dx;\n    node.y = node.depth * dy;\n  }\n\n  tree.separation = function(x) {\n    return arguments.length ? (separation = x, tree) : separation;\n  };\n\n  tree.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], tree) : (nodeSize ? null : [dx, dy]);\n  };\n\n  tree.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], tree) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return tree;\n}\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import pointRadial from \"../pointRadial.js\";\n\nclass Bump {\n  constructor(context, x) {\n    this._context = context;\n    this._x = x;\n  }\n  areaStart() {\n    this._line = 0;\n  }\n  areaEnd() {\n    this._line = NaN;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  }\n  point(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: {\n        this._point = 1;\n        if (this._line) this._context.lineTo(x, y);\n        else this._context.moveTo(x, y);\n        break;\n      }\n      case 1: this._point = 2; // falls through\n      default: {\n        if (this._x) this._context.bezierCurveTo(this._x0 = (this._x0 + x) / 2, this._y0, this._x0, y, x, y);\n        else this._context.bezierCurveTo(this._x0, this._y0 = (this._y0 + y) / 2, x, this._y0, x, y);\n        break;\n      }\n    }\n    this._x0 = x, this._y0 = y;\n  }\n}\n\nclass BumpRadial {\n  constructor(context) {\n    this._context = context;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {}\n  point(x, y) {\n    x = +x, y = +y;\n    if (this._point++ === 0) {\n      this._x0 = x, this._y0 = y;\n    } else {\n      const p0 = pointRadial(this._x0, this._y0);\n      const p1 = pointRadial(this._x0, this._y0 = (this._y0 + y) / 2);\n      const p2 = pointRadial(x, this._y0);\n      const p3 = pointRadial(x, y);\n      this._context.moveTo(...p0);\n      this._context.bezierCurveTo(...p1, ...p2, ...p3);\n    }\n  }\n}\n\nexport function bumpX(context) {\n  return new Bump(context, true);\n}\n\nexport function bumpY(context) {\n  return new Bump(context, false);\n}\n\nexport function bumpRadial(context) {\n  return new BumpRadial(context);\n}\n","import {path} from \"d3-path\";\nimport {slice} from \"./array.js\";\nimport constant from \"./constant.js\";\nimport {bumpX, bumpY, bumpRadial} from \"./curve/bump.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nexport function link(curve) {\n  let source = linkSource;\n  let target = linkTarget;\n  let x = pointX;\n  let y = pointY;\n  let context = null;\n  let output = null;\n\n  function link() {\n    let buffer;\n    const argv = slice.call(arguments);\n    const s = source.apply(this, argv);\n    const t = target.apply(this, argv);\n    if (context == null) output = curve(buffer = path());\n    output.lineStart();\n    argv[0] = s, output.point(+x.apply(this, argv), +y.apply(this, argv));\n    argv[0] = t, output.point(+x.apply(this, argv), +y.apply(this, argv));\n    output.lineEnd();\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  link.source = function(_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function(_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), link) : context;\n  };\n\n  return link;\n}\n\nexport function linkHorizontal() {\n  return link(bumpX);\n}\n\nexport function linkVertical() {\n  return link(bumpY);\n}\n\nexport function linkRadial() {\n  const l = link(bumpRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wont trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div class=\"org-chart-node\">\n\t\t<div class=\"inner-box\">\n\t\t\t<router-link :to=\"{\n\t\t\t\tname: 'contact',\n\t\t\t\tparams: {\n\t\t\t\t\tselectedGroup: selectedChart,\n\t\t\t\t\tselectedContact: data.key,\n\t\t\t\t},\n\t\t\t}\">\n\t\t\t\t<Avatar :disable-tooltip=\"true\"\n\t\t\t\t\t:display-name=\"data.fullName\"\n\t\t\t\t\t:is-no-user=\"true\"\n\t\t\t\t\t:size=\"60\"\n\t\t\t\t\t:url=\"data.photoUrl\"\n\t\t\t\t\tclass=\"org-chart-node__avatar\" />\n\t\t\t</router-link>\n\t\t\t<div class=\"panel\" />\n\t\t\t<div class=\"main-container\">\n\t\t\t\t<h3 class=\"fullName\">\n\t\t\t\t\t{{ data.fullName }}\n\t\t\t\t</h3>\n\t\t\t\t<h4 class=\"title\">\n\t\t\t\t\t{{ data.title }}\n\t\t\t\t</h4>\n\t\t\t</div>\n\t\t\t<div class=\"description\">\n\t\t\t\t<p v-if=\"data._directSubordinates\">\n\t\t\t\t\t{{ t('contacts', 'Manages') }}: {{ data._directSubordinates }}\n\t\t\t\t</p>\n\t\t\t\t<p v-if=\"data._totalSubordinates\">\n\t\t\t\t\t{{ t('contacts', 'Oversees') }}: {{ data._totalSubordinates }}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { NcAvatar as Avatar } from '@nextcloud/vue'\n\nexport default {\n\tname: 'ChartTemplate',\n\tcomponents: {\n\t\tAvatar,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t\tonAvatarClick: {\n\t\t\ttype: Function,\n\t\t\tdefault: () => {},\n\t\t},\n\t},\n\tcomputed: {\n\t\tselectedChart() {\n\t\t\treturn this.$route.params.selectedChart\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.org-chart-node {\n\tbackground-color: var(--color-main-background);\n\theight: 175px;\n\tborder-radius: var(--border-radius-large);\n\toverflow: visible;\n\n\t&__avatar {\n\t\tmargin-top: -30px;\n\t\tborder: 1px solid var(--color-border);\n\t}\n\n\t.inner-box {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\theight: 175px;\n\t\tpadding-top: 0;\n\t\tmargin-top: 30px;\n\t\tborder: 1px solid var(--color-border);\n\t\tborder-radius: var(--border-radius-large);\n\t\tbackground-color: var(--color-main-background);\n\n\t\t.main-container {\n\t\t\tpadding: 20px;\n\t\t\ttext-align: center;\n\t\t\tflex: 1;\n\n\t\t\t.fullName {\n\t\t\t\tcolor: var(--color-primary-element);\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\n\t\t\t.title {\n\t\t\t\tmargin-top: 4px;\n\t\t\t}\n\t\t}\n\n\t\t.description {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\twidth: 100%;\n\t\t\tpadding: 15px;\n\t\t}\n\t}\n\n\t.inner-box-highlight {\n\t\tborder: 2px solid var(--color-primary-element) !important;\n\t}\n\n\t.panel {\n\t\twidth: 100%;\n\t\tmargin: -34px -1px 0 -1px;\n\t\tbackground-color: var(--color-primary-element);\n\t\theight: 15px;\n\t\tborder-top-left-radius: var(--border-radius-large);\n\t\tborder-top-right-radius: var(--border-radius-large);\n\t}\n}\n</style>\n","function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n","export default function(callback) {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      callback(node), children = node.children;\n      if (children) for (i = 0, n = children.length; i < n; ++i) {\n        next.push(children[i]);\n      }\n    }\n  } while (next.length);\n  return this;\n}\n","export default function(callback) {\n  var node = this, nodes = [node], children, i;\n  while (node = nodes.pop()) {\n    callback(node), children = node.children;\n    if (children) for (i = children.length - 1; i >= 0; --i) {\n      nodes.push(children[i]);\n    }\n  }\n  return this;\n}\n","export default function(callback) {\n  var node = this, nodes = [node], next = [], children, i, n;\n  while (node = nodes.pop()) {\n    next.push(node), children = node.children;\n    if (children) for (i = 0, n = children.length; i < n; ++i) {\n      nodes.push(children[i]);\n    }\n  }\n  while (node = next.pop()) {\n    callback(node);\n  }\n  return this;\n}\n","export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n","export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n","export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n","export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n","export default function() {\n  var nodes = [];\n  this.each(function(node) {\n    nodes.push(node);\n  });\n  return nodes;\n}\n","export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n","export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Dont include the roots parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n","import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\n\nexport default function hierarchy(data, children) {\n  var root = new Node(data),\n      valued = +data.value && (root.value = data.value),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  if (children == null) children = defaultChildren;\n\n  while (node = nodes.pop()) {\n    if (valued) node.value = +node.data.value;\n    if ((childs = children(node.data)) && (n = childs.length)) {\n      node.children = new Array(n);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction defaultChildren(d) {\n  return d.children;\n}\n\nfunction copyData(node) {\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy\n};\n","import {hierarchy} from 'd3-hierarchy';\nimport packageInfo from '../package.json';\n\nconst {version} = packageInfo;\nconst defaults = Object.freeze({\n  children: data => data.children,\n  nodeSize: node => node.data.size,\n  spacing: 0,\n});\n\n// Create a layout function with customizable options. Per D3-style, the\n// options can be set at any time using setter methods. The layout function\n// will compute the tree node positions based on the options in effect at the\n// time it is called.\nexport default function flextree(options) {\n  const opts = Object.assign({}, defaults, options);\n  function accessor(name) {\n    const opt = opts[name];\n    return typeof opt === 'function' ? opt : () => opt;\n  }\n\n  function layout(tree) {\n    const wtree = wrap(getWrapper(), tree, node=>node.children);\n    wtree.update();\n    return wtree.data;\n  }\n\n  function getFlexNode() {\n    const nodeSize = accessor('nodeSize');\n    const spacing = accessor('spacing');\n    return class FlexNode extends hierarchy.prototype.constructor {\n      constructor(data) {\n        super(data);\n      }\n      copy() {\n        const c = wrap(this.constructor, this, node=>node.children);\n        c.each(node => node.data = node.data.data);\n        return c;\n      }\n      get size() { return nodeSize(this); }\n      spacing(oNode) { return spacing(this, oNode); }\n      get nodes() { return this.descendants(); }\n      get xSize() { return this.size[0]; }\n      get ySize() { return this.size[1]; }\n      get top() { return this.y; }\n      get bottom() { return this.y + this.ySize; }\n      get left() { return this.x - this.xSize / 2; }\n      get right() { return this.x + this.xSize / 2; }\n      get root() {\n        const ancs = this.ancestors();\n        return ancs[ancs.length - 1];\n      }\n      get numChildren() {\n        return this.hasChildren ? this.children.length : 0;\n      }\n      get hasChildren() { return !this.noChildren; }\n      get noChildren() { return this.children === null; }\n      get firstChild() {\n        return this.hasChildren ? this.children[0] : null;\n      }\n      get lastChild() {\n        return this.hasChildren ? this.children[this.numChildren - 1] : null;\n      }\n      get extents() {\n        return (this.children || []).reduce(\n          (acc, kid) => FlexNode.maxExtents(acc, kid.extents),\n          this.nodeExtents);\n      }\n      get nodeExtents() {\n        return {\n          top: this.top,\n          bottom: this.bottom,\n          left: this.left,\n          right: this.right,\n        };\n      }\n      static maxExtents(e0, e1) {\n        return {\n          top: Math.min(e0.top, e1.top),\n          bottom: Math.max(e0.bottom, e1.bottom),\n          left: Math.min(e0.left, e1.left),\n          right: Math.max(e0.right, e1.right),\n        };\n      }\n    };\n  }\n\n  function getWrapper() {\n    const FlexNode = getFlexNode();\n    const nodeSize = accessor('nodeSize');\n    const spacing = accessor('spacing');\n    return class extends FlexNode {\n      constructor(data) {\n        super(data);\n        Object.assign(this, {\n          x: 0, y: 0,\n          relX: 0, prelim: 0, shift: 0, change: 0,\n          lExt: this, lExtRelX: 0, lThr: null,\n          rExt: this, rExtRelX: 0, rThr: null,\n        });\n      }\n      get size() { return nodeSize(this.data); }\n      spacing(oNode) { return spacing(this.data, oNode.data); }\n      get x() { return this.data.x; }\n      set x(v) { this.data.x = v; }\n      get y() { return this.data.y; }\n      set y(v) { this.data.y = v; }\n      update() {\n        layoutChildren(this);\n        resolveX(this);\n        return this;\n      }\n    };\n  }\n\n  function wrap(FlexClass, treeData, children) {\n    const _wrap = (data, parent) => {\n      const node = new FlexClass(data);\n      Object.assign(node, {\n        parent,\n        depth: parent === null ? 0 : parent.depth + 1,\n        height: 0,\n        length: 1,\n      });\n      const kidsData = children(data) || [];\n      node.children = kidsData.length === 0 ? null\n        : kidsData.map(kd => _wrap(kd, node));\n      if (node.children) {\n        Object.assign(node, node.children.reduce(\n          (hl, kid) => ({\n            height: Math.max(hl.height, kid.height + 1),\n            length: hl.length + kid.length,\n          }), node\n        ));\n      }\n      return node;\n    };\n    return _wrap(treeData, null);\n  }\n\n\n  Object.assign(layout, {\n    nodeSize(arg) {\n      return arguments.length ? (opts.nodeSize = arg, layout) : opts.nodeSize;\n    },\n    spacing(arg) {\n      return arguments.length ? (opts.spacing = arg, layout) : opts.spacing;\n    },\n    children(arg) {\n      return arguments.length ? (opts.children = arg, layout) : opts.children;\n    },\n    hierarchy(treeData, children) {\n      const kids = typeof children === 'undefined' ? opts.children : children;\n      return wrap(getFlexNode(), treeData, kids);\n    },\n    dump(tree) {\n      const nodeSize = accessor('nodeSize');\n      const _dump = i0 => node => {\n        const i1 = i0 + '  ';\n        const i2 = i0 + '    ';\n        const {x, y} = node;\n        const size = nodeSize(node);\n        const kids = (node.children || []);\n        const kdumps = (kids.length === 0) ? ' ' :\n          `,${i1}children: [${i2}${kids.map(_dump(i2)).join(i2)}${i1}],${i0}`;\n        return `{ size: [${size.join(', ')}],${i1}x: ${x}, y: ${y}${kdumps}},`;\n      };\n      return _dump('\\n')(tree);\n    },\n  });\n  return layout;\n}\nflextree.version = version;\n\nconst layoutChildren = (w, y = 0) => {\n  w.y = y;\n  (w.children || []).reduce((acc, kid) => {\n    const [i, lastLows] = acc;\n    layoutChildren(kid, w.y + w.ySize);\n    // The lowest vertical coordinate while extreme nodes still point\n    // in current subtree.\n    const lowY = (i === 0 ? kid.lExt : kid.rExt).bottom;\n    if (i !== 0) separate(w, i, lastLows);\n    const lows = updateLows(lowY, i, lastLows);\n    return [i + 1, lows];\n  }, [0, null]);\n  shiftChange(w);\n  positionRoot(w);\n  return w;\n};\n\n// Resolves the relative coordinate properties - relX and prelim --\n// to set the final, absolute x coordinate for each node. This also sets\n// `prelim` to 0, so that `relX` for each node is its x-coordinate relative\n// to its parent.\nconst resolveX = (w, prevSum, parentX) => {\n  // A call to resolveX without arguments is assumed to be for the root of\n  // the tree. This will set the root's x-coord to zero.\n  if (typeof prevSum === 'undefined') {\n    prevSum = -w.relX - w.prelim;\n    parentX = 0;\n  }\n  const sum = prevSum + w.relX;\n  w.relX = sum + w.prelim - parentX;\n  w.prelim = 0;\n  w.x = parentX + w.relX;\n  (w.children || []).forEach(k => resolveX(k, sum, w.x));\n  return w;\n};\n\n// Process shift and change for all children, to add intermediate spacing to\n// each child's modifier.\nconst shiftChange = w => {\n  (w.children || []).reduce((acc, child) => {\n    const [lastShiftSum, lastChangeSum] = acc;\n    const shiftSum = lastShiftSum + child.shift;\n    const changeSum = lastChangeSum + shiftSum + child.change;\n    child.relX += changeSum;\n    return [shiftSum, changeSum];\n  }, [0, 0]);\n};\n\n// Separates the latest child from its previous sibling\n/* eslint-disable complexity */\nconst separate = (w, i, lows) => {\n  const lSib = w.children[i - 1];\n  const curSubtree = w.children[i];\n  let rContour = lSib;\n  let rSumMods = lSib.relX;\n  let lContour = curSubtree;\n  let lSumMods = curSubtree.relX;\n  let isFirst = true;\n  while (rContour && lContour) {\n    if (rContour.bottom > lows.lowY) lows = lows.next;\n    // How far to the left of the right side of rContour is the left side\n    // of lContour? First compute the center-to-center distance, then add\n    // the \"spacing\"\n    const dist =\n      (rSumMods + rContour.prelim) - (lSumMods + lContour.prelim) +\n      rContour.xSize / 2 + lContour.xSize / 2 +\n      rContour.spacing(lContour);\n    if (dist > 0 || (dist < 0 && isFirst)) {\n      lSumMods += dist;\n      // Move subtree by changing relX.\n      moveSubtree(curSubtree, dist);\n      distributeExtra(w, i, lows.index, dist);\n    }\n    isFirst = false;\n    // Advance highest node(s) and sum(s) of modifiers\n    const rightBottom = rContour.bottom;\n    const leftBottom = lContour.bottom;\n    if (rightBottom <= leftBottom) {\n      rContour = nextRContour(rContour);\n      if (rContour) rSumMods += rContour.relX;\n    }\n    if (rightBottom >= leftBottom) {\n      lContour = nextLContour(lContour);\n      if (lContour) lSumMods += lContour.relX;\n    }\n  }\n  // Set threads and update extreme nodes. In the first case, the\n  // current subtree is taller than the left siblings.\n  if (!rContour && lContour) setLThr(w, i, lContour, lSumMods);\n  // In the next case, the left siblings are taller than the current subtree\n  else if (rContour && !lContour) setRThr(w, i, rContour, rSumMods);\n};\n/* eslint-enable complexity */\n\n// Move subtree by changing relX.\nconst moveSubtree = (subtree, distance) => {\n  subtree.relX += distance;\n  subtree.lExtRelX += distance;\n  subtree.rExtRelX += distance;\n};\n\nconst distributeExtra = (w, curSubtreeI, leftSibI, dist) => {\n  const curSubtree = w.children[curSubtreeI];\n  const n = curSubtreeI - leftSibI;\n  // Are there intermediate children?\n  if (n > 1) {\n    const delta = dist / n;\n    w.children[leftSibI + 1].shift += delta;\n    curSubtree.shift -= delta;\n    curSubtree.change -= dist - delta;\n  }\n};\n\nconst nextLContour = w => {\n  return w.hasChildren ? w.firstChild : w.lThr;\n};\n\nconst nextRContour = w => {\n  return w.hasChildren ? w.lastChild : w.rThr;\n};\n\nconst setLThr = (w, i, lContour, lSumMods) => {\n  const firstChild = w.firstChild;\n  const lExt = firstChild.lExt;\n  const curSubtree = w.children[i];\n  lExt.lThr = lContour;\n  // Change relX so that the sum of modifier after following thread is correct.\n  const diff = lSumMods - lContour.relX - firstChild.lExtRelX;\n  lExt.relX += diff;\n  // Change preliminary x coordinate so that the node does not move.\n  lExt.prelim -= diff;\n  // Update extreme node and its sum of modifiers.\n  firstChild.lExt = curSubtree.lExt;\n  firstChild.lExtRelX = curSubtree.lExtRelX;\n};\n\n// Mirror image of setLThr.\nconst setRThr = (w, i, rContour, rSumMods) => {\n  const curSubtree = w.children[i];\n  const rExt = curSubtree.rExt;\n  const lSib = w.children[i - 1];\n  rExt.rThr = rContour;\n  const diff = rSumMods - rContour.relX - curSubtree.rExtRelX;\n  rExt.relX += diff;\n  rExt.prelim -= diff;\n  curSubtree.rExt = lSib.rExt;\n  curSubtree.rExtRelX = lSib.rExtRelX;\n};\n\n// Position root between children, taking into account their modifiers\nconst positionRoot = w => {\n  if (w.hasChildren) {\n    const k0 = w.firstChild;\n    const kf = w.lastChild;\n    const prelim = (k0.prelim + k0.relX - k0.xSize / 2 +\n      kf.relX + kf.prelim + kf.xSize / 2 ) / 2;\n    Object.assign(w, {\n      prelim,\n      lExt: k0.lExt, lExtRelX: k0.lExtRelX,\n      rExt: kf.rExt, rExtRelX: kf.rExtRelX,\n    });\n  }\n};\n\n// Make/maintain a linked list of the indexes of left siblings and their\n// lowest vertical coordinate.\nconst updateLows = (lowY, index, lastLows) => {\n  // Remove siblings that are hidden by the new subtree.\n  while (lastLows !== null && lowY >= lastLows.lowY)\n    lastLows = lastLows.next;\n  // Prepend the new subtree.\n  return {\n    lowY,\n    index,\n    next: lastLows,\n  };\n};\n","import { selection, select } from \"d3-selection\";\nimport { max, min, sum, cumsum } from \"d3-array\";\nimport { tree, stratify } from \"d3-hierarchy\";\nimport { zoom, zoomIdentity } from \"d3-zoom\";\nimport { flextree } from 'd3-flextree';\nimport { linkHorizontal } from 'd3-shape';\n\nconst d3 = {\n    selection,\n    select,\n    max,\n    min,\n    sum,\n    cumsum,\n    tree,\n    stratify,\n    zoom,\n    zoomIdentity,\n    linkHorizontal,\n    flextree\n}\n\nexport class OrgChart {\n    constructor() {\n\n        // Exposed variables  test test\n        const attrs = {\n\n            /* NOT INTENDED FOR PUBLIC OVERRIDE */\n\n            id: `ID${Math.floor(Math.random() * 1000000)}`, // Id for event handlings\n            firstDraw: true,    // Whether chart is drawn for the first time\n            ctx: document.createElement('canvas').getContext('2d'),\n            initialExpandLevel: 1,\n            nodeDefaultBackground: 'none',\n            lastTransform: { x: 0, y: 0, k: 1 },  // Panning and zooming values\n            allowedNodesCount: {},\n            zoomBehavior: null,\n            generateRoot: null,\n\n            /*  INTENDED FOR PUBLIC OVERRIDE */\n\n            svgWidth: 800,   // Configure svg width\n            svgHeight: window.innerHeight - 100,  // Configure svg height\n            container: \"body\",  // Set parent container, either CSS style selector or DOM element\n            data: null, // Set data, it must be an array of objects, where hierarchy is clearly defined via id and parent ID (property names are configurable)\n            connections: [], // Sets connection data, array of objects, SAMPLE:  [{from:\"145\",to:\"201\",label:\"Conflicts of interest\"}]\n            defaultFont: \"Helvetica\", // Set default font\n            nodeId: d => d.nodeId || d.id, // Configure accessor for node id, default is either odeId or id\n            parentNodeId: d => d.parentNodeId || d.parentId, // Configure accessor for parent node id, default is either parentNodeId or parentId\n            rootMargin: 40, // Configure how much root node is offset from top\n            nodeWidth: d3Node => 250, // Configure each node width, use with caution, it is better to have the same value set for all nodes\n            nodeHeight: d => 150,  //  Configure each node height, use with caution, it is better to have the same value set for all nodes\n            neighbourMargin: (n1, n2) => 80, // Configure margin between two nodes, use with caution, it is better to have the same value set for all nodes\n            siblingsMargin: d3Node => 20, // Configure margin between two siblings, use with caution, it is better to have the same value set for all nodes\n            childrenMargin: d => 60, // Configure margin between parent and children, use with caution, it is better to have the same value set for all nodes\n            compactMarginPair: d => 100, // Configure margin between two nodes in compact mode, use with caution, it is better to have the same value set for all nodes\n            compactMarginBetween: (d3Node => 20), // Configure margin between two nodes in compact mode, use with caution, it is better to have the same value set for all nodes\n            nodeButtonWidth: d => 40, // Configure expand & collapse button width\n            nodeButtonHeight: d => 40, // Configure expand & collapse button height\n            nodeButtonX: d => -20, // Configure expand & collapse button x position\n            nodeButtonY: d => -20,  // Configure expand & collapse button y position\n            linkYOffset: 30, // When correcting links which is not working for safari\n            pagingStep: d => 5, // Configure how many nodes to show when making new nodes appear\n            minPagingVisibleNodes: d => 2000, // Configure minimum number of visible nodes , after which paging button appears\n            scaleExtent: [0.001, 20],  // Configure zoom scale extent , if you don't want any kind of zooming, set it to [1,1]\n            duration: 400, // Configure duration of transitions\n            imageName: 'Chart', // Configure exported PNG and SVG image name\n            setActiveNodeCentered: true, // Configure if active node should be centered when expanded and collapsed\n            layout: \"top\",// Configure layout direction , possible values are \"top\", \"left\", \"right\", \"bottom\"\n            compact: true, // Configure if compact mode is enabled , when enabled, nodes are shown in compact positions, instead of horizontal spread\n            createZoom: d => d3.zoom(),\n            onZoomStart: e => { }, // Callback for zoom & panning start\n            onZoom: e => { }, // Callback for zoom & panning \n            onZoomEnd: e => { }, // Callback for zoom & panning end\n            onNodeClick: (d) => d, // Callback for node click\n            onExpandOrCollapse: (d) => d, // Callback for node expand or collapse\n\n            /*\n            * Node HTML content generation , remember that you can access some helper methods:\n\n            * node=> node.data - to access node's original data\n            * node=> node.leaves() - to access node's leaves\n            * node=> node.descendants() - to access node's descendants\n            * node=> node.children - to access node's children\n            * node=> node.parent - to access node's parent\n            * node=> node.depth - to access node's depth\n            * node=> node.hierarchyHeight - to access node's hierarchy height ( Height, which d3 assigns to hierarchy nodes)\n            * node=> node.height - to access node's height\n            * node=> node.width - to access node's width\n            * \n            * You can also access additional properties to style your node:\n            * \n            * d=>d.data._centeredWithDescendants - when node is centered with descendants\n            * d=>d.data._directSubordinatesPaging - subordinates count in paging mode\n            * d=>d.data._directSubordinates - subordinates count\n            * d=>d.data._totalSubordinates - total subordinates count\n            * d=>d._highlighted - when node is highlighted\n            * d=>d._upToTheRootHighlighted - when node is highlighted up to the root\n            * d=>d._expanded - when node is expanded\n            * d=>d.data._centered - when node is centered\n            */\n            nodeContent: d => `<div style=\"padding:5px;font-size:10px;\">Sample Node(id=${d.id}), override using <br/> \n            <code>chart.nodeContent({data}=>{ <br/>\n             &nbsp;&nbsp;&nbsp;&nbsp;return '' // Custom HTML <br/>\n             })</code>\n             <br/> \n             Or check different <a href=\"https://github.com/bumbeishvili/org-chart#jump-to-examples\" target=\"_blank\">layout examples</a>\n             </div>`,\n\n            /* Node expand & collapse button content and styling. You can access same helper methods as above */\n            buttonContent: ({ node, state }) => {\n                const icons = {\n                    \"left\": d => d ?\n                        `<div style=\"display:flex;\"><span style=\"align-items:center;display:flex;\"><svg width=\"8\" height=\"8\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                      <path d=\"M14.283 3.50094L6.51 11.4749C6.37348 11.615 6.29707 11.8029 6.29707 11.9984C6.29707 12.194 6.37348 12.3819 6.51 12.5219L14.283 20.4989C14.3466 20.5643 14.4226 20.6162 14.5066 20.6516C14.5906 20.6871 14.6808 20.7053 14.772 20.7053C14.8632 20.7053 14.9534 20.6871 15.0374 20.6516C15.1214 20.6162 15.1974 20.5643 15.261 20.4989C15.3918 20.365 15.4651 20.1852 15.4651 19.9979C15.4651 19.8107 15.3918 19.6309 15.261 19.4969L7.9515 11.9984L15.261 4.50144C15.3914 4.36756 15.4643 4.18807 15.4643 4.00119C15.4643 3.81431 15.3914 3.63482 15.261 3.50094C15.1974 3.43563 15.1214 3.38371 15.0374 3.34827C14.9534 3.31282 14.8632 3.29456 14.772 3.29456C14.6808 3.29456 14.5906 3.31282 14.5066 3.34827C14.4226 3.38371 14.3466 3.43563 14.283 3.50094V3.50094Z\" fill=\"#716E7B\" stroke=\"#716E7B\"/>\n                      </svg></span><span style=\"color:#716E7B\">${node.data._directSubordinatesPaging} </span></div>` :\n                        `<div style=\"display:flex;\"><span style=\"align-items:center;display:flex;\"><svg width=\"8\" height=\"8\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                          <path d=\"M7.989 3.49944C7.85817 3.63339 7.78492 3.8132 7.78492 4.00044C7.78492 4.18768 7.85817 4.36749 7.989 4.50144L15.2985 11.9999L7.989 19.4969C7.85817 19.6309 7.78492 19.8107 7.78492 19.9979C7.78492 20.1852 7.85817 20.365 7.989 20.4989C8.05259 20.5643 8.12863 20.6162 8.21261 20.6516C8.2966 20.6871 8.38684 20.7053 8.478 20.7053C8.56916 20.7053 8.6594 20.6871 8.74338 20.6516C8.82737 20.6162 8.90341 20.5643 8.967 20.4989L16.74 12.5234C16.8765 12.3834 16.9529 12.1955 16.9529 11.9999C16.9529 11.8044 16.8765 11.6165 16.74 11.4764L8.967 3.50094C8.90341 3.43563 8.82737 3.38371 8.74338 3.34827C8.6594 3.31282 8.56916 3.29456 8.478 3.29456C8.38684 3.29456 8.2966 3.31282 8.21261 3.34827C8.12863 3.38371 8.05259 3.43563 7.989 3.50094V3.49944Z\" fill=\"#716E7B\" stroke=\"#716E7B\"/>\n                          </svg></span><span style=\"color:#716E7B\">${node.data._directSubordinatesPaging} </span></div>`\n                    ,\n                    \"bottom\": d => d ? `<div style=\"display:flex;\"><span style=\"align-items:center;display:flex;\"><svg width=\"8\" height=\"8\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                       <path d=\"M19.497 7.98903L12 15.297L4.503 7.98903C4.36905 7.85819 4.18924 7.78495 4.002 7.78495C3.81476 7.78495 3.63495 7.85819 3.501 7.98903C3.43614 8.05257 3.38462 8.12842 3.34944 8.21213C3.31427 8.29584 3.29615 8.38573 3.29615 8.47653C3.29615 8.56733 3.31427 8.65721 3.34944 8.74092C3.38462 8.82463 3.43614 8.90048 3.501 8.96403L11.4765 16.74C11.6166 16.8765 11.8044 16.953 12 16.953C12.1956 16.953 12.3834 16.8765 12.5235 16.74L20.499 8.96553C20.5643 8.90193 20.6162 8.8259 20.6517 8.74191C20.6871 8.65792 20.7054 8.56769 20.7054 8.47653C20.7054 8.38537 20.6871 8.29513 20.6517 8.21114C20.6162 8.12715 20.5643 8.05112 20.499 7.98753C20.3651 7.85669 20.1852 7.78345 19.998 7.78345C19.8108 7.78345 19.6309 7.85669 19.497 7.98753V7.98903Z\" fill=\"#716E7B\" stroke=\"#716E7B\"/>\n                       </svg></span><span style=\"margin-left:1px;color:#716E7B\" >${node.data._directSubordinatesPaging} </span></div>\n                       ` : `<div style=\"display:flex;\"><span style=\"align-items:center;display:flex;\"><svg width=\"8\" height=\"8\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                       <path d=\"M11.457 8.07005L3.49199 16.4296C3.35903 16.569 3.28485 16.7543 3.28485 16.9471C3.28485 17.1398 3.35903 17.3251 3.49199 17.4646L3.50099 17.4736C3.56545 17.5414 3.64304 17.5954 3.72904 17.6324C3.81504 17.6693 3.90765 17.6883 4.00124 17.6883C4.09483 17.6883 4.18745 17.6693 4.27344 17.6324C4.35944 17.5954 4.43703 17.5414 4.50149 17.4736L12.0015 9.60155L19.4985 17.4736C19.563 17.5414 19.6405 17.5954 19.7265 17.6324C19.8125 17.6693 19.9052 17.6883 19.9987 17.6883C20.0923 17.6883 20.1849 17.6693 20.2709 17.6324C20.3569 17.5954 20.4345 17.5414 20.499 17.4736L20.508 17.4646C20.641 17.3251 20.7151 17.1398 20.7151 16.9471C20.7151 16.7543 20.641 16.569 20.508 16.4296L12.543 8.07005C12.4729 7.99653 12.3887 7.93801 12.2954 7.89801C12.202 7.85802 12.1015 7.8374 12 7.8374C11.8984 7.8374 11.798 7.85802 11.7046 7.89801C11.6113 7.93801 11.527 7.99653 11.457 8.07005Z\" fill=\"#716E7B\" stroke=\"#716E7B\"/>\n                       </svg></span><span style=\"margin-left:1px;color:#716E7B\" >${node.data._directSubordinatesPaging} </span></div>\n                    `,\n                    \"right\": d => d ? `<div style=\"display:flex;\"><span style=\"align-items:center;display:flex;\"><svg width=\"8\" height=\"8\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                       <path d=\"M7.989 3.49944C7.85817 3.63339 7.78492 3.8132 7.78492 4.00044C7.78492 4.18768 7.85817 4.36749 7.989 4.50144L15.2985 11.9999L7.989 19.4969C7.85817 19.6309 7.78492 19.8107 7.78492 19.9979C7.78492 20.1852 7.85817 20.365 7.989 20.4989C8.05259 20.5643 8.12863 20.6162 8.21261 20.6516C8.2966 20.6871 8.38684 20.7053 8.478 20.7053C8.56916 20.7053 8.6594 20.6871 8.74338 20.6516C8.82737 20.6162 8.90341 20.5643 8.967 20.4989L16.74 12.5234C16.8765 12.3834 16.9529 12.1955 16.9529 11.9999C16.9529 11.8044 16.8765 11.6165 16.74 11.4764L8.967 3.50094C8.90341 3.43563 8.82737 3.38371 8.74338 3.34827C8.6594 3.31282 8.56916 3.29456 8.478 3.29456C8.38684 3.29456 8.2966 3.31282 8.21261 3.34827C8.12863 3.38371 8.05259 3.43563 7.989 3.50094V3.49944Z\" fill=\"#716E7B\" stroke=\"#716E7B\"/>\n                       </svg></span><span style=\"color:#716E7B\">${node.data._directSubordinatesPaging} </span></div>` :\n                        `<div style=\"display:flex;\"><span style=\"align-items:center;display:flex;\"><svg width=\"8\" height=\"8\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                       <path d=\"M14.283 3.50094L6.51 11.4749C6.37348 11.615 6.29707 11.8029 6.29707 11.9984C6.29707 12.194 6.37348 12.3819 6.51 12.5219L14.283 20.4989C14.3466 20.5643 14.4226 20.6162 14.5066 20.6516C14.5906 20.6871 14.6808 20.7053 14.772 20.7053C14.8632 20.7053 14.9534 20.6871 15.0374 20.6516C15.1214 20.6162 15.1974 20.5643 15.261 20.4989C15.3918 20.365 15.4651 20.1852 15.4651 19.9979C15.4651 19.8107 15.3918 19.6309 15.261 19.4969L7.9515 11.9984L15.261 4.50144C15.3914 4.36756 15.4643 4.18807 15.4643 4.00119C15.4643 3.81431 15.3914 3.63482 15.261 3.50094C15.1974 3.43563 15.1214 3.38371 15.0374 3.34827C14.9534 3.31282 14.8632 3.29456 14.772 3.29456C14.6808 3.29456 14.5906 3.31282 14.5066 3.34827C14.4226 3.38371 14.3466 3.43563 14.283 3.50094V3.50094Z\" fill=\"#716E7B\" stroke=\"#716E7B\"/>\n                       </svg></span><span style=\"color:#716E7B\">${node.data._directSubordinatesPaging} </span></div>`,\n                    \"top\": d => d ? `<div style=\"display:flex;\"><span style=\"align-items:center;display:flex;\"><svg width=\"8\" height=\"8\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M11.457 8.07005L3.49199 16.4296C3.35903 16.569 3.28485 16.7543 3.28485 16.9471C3.28485 17.1398 3.35903 17.3251 3.49199 17.4646L3.50099 17.4736C3.56545 17.5414 3.64304 17.5954 3.72904 17.6324C3.81504 17.6693 3.90765 17.6883 4.00124 17.6883C4.09483 17.6883 4.18745 17.6693 4.27344 17.6324C4.35944 17.5954 4.43703 17.5414 4.50149 17.4736L12.0015 9.60155L19.4985 17.4736C19.563 17.5414 19.6405 17.5954 19.7265 17.6324C19.8125 17.6693 19.9052 17.6883 19.9987 17.6883C20.0923 17.6883 20.1849 17.6693 20.2709 17.6324C20.3569 17.5954 20.4345 17.5414 20.499 17.4736L20.508 17.4646C20.641 17.3251 20.7151 17.1398 20.7151 16.9471C20.7151 16.7543 20.641 16.569 20.508 16.4296L12.543 8.07005C12.4729 7.99653 12.3887 7.93801 12.2954 7.89801C12.202 7.85802 12.1015 7.8374 12 7.8374C11.8984 7.8374 11.798 7.85802 11.7046 7.89801C11.6113 7.93801 11.527 7.99653 11.457 8.07005Z\" fill=\"#716E7B\" stroke=\"#716E7B\"/>\n                        </svg></span><span style=\"margin-left:1px;color:#716E7B\">${node.data._directSubordinatesPaging} </span></div>\n                        ` : `<div style=\"display:flex;\"><span style=\"align-items:center;display:flex;\"><svg width=\"8\" height=\"8\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M19.497 7.98903L12 15.297L4.503 7.98903C4.36905 7.85819 4.18924 7.78495 4.002 7.78495C3.81476 7.78495 3.63495 7.85819 3.501 7.98903C3.43614 8.05257 3.38462 8.12842 3.34944 8.21213C3.31427 8.29584 3.29615 8.38573 3.29615 8.47653C3.29615 8.56733 3.31427 8.65721 3.34944 8.74092C3.38462 8.82463 3.43614 8.90048 3.501 8.96403L11.4765 16.74C11.6166 16.8765 11.8044 16.953 12 16.953C12.1956 16.953 12.3834 16.8765 12.5235 16.74L20.499 8.96553C20.5643 8.90193 20.6162 8.8259 20.6517 8.74191C20.6871 8.65792 20.7054 8.56769 20.7054 8.47653C20.7054 8.38537 20.6871 8.29513 20.6517 8.21114C20.6162 8.12715 20.5643 8.05112 20.499 7.98753C20.3651 7.85669 20.1852 7.78345 19.998 7.78345C19.8108 7.78345 19.6309 7.85669 19.497 7.98753V7.98903Z\" fill=\"#716E7B\" stroke=\"#716E7B\"/>\n                        </svg></span><span style=\"margin-left:1px;color:#716E7B\">${node.data._directSubordinatesPaging} </span></div>\n                    `,\n                }\n                return `<div style=\"border:1px solid #E4E2E9;border-radius:3px;padding:3px;font-size:9px;margin:auto auto;background-color:white\"> ${icons[state.layout](node.children)}  </div>`\n            },\n            /* Node paging button content and styling. You can access same helper methods as above. */\n            pagingButton: (d, i, arr, state) => {\n                const step = state.pagingStep(d.parent);\n                const currentIndex = d.parent.data._pagingStep;\n                const diff = d.parent.data._directSubordinatesPaging - currentIndex;\n                const min = Math.min(diff, step);\n                return `\n                   <div style=\"margin-top:90px;\">\n                      <div style=\"display:flex;width:170px;border-radius:20px;padding:5px 15px; padding-bottom:4px;;background-color:#E5E9F2\">\n                      <div><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                      <path d=\"M5.59 7.41L10.18 12L5.59 16.59L7 18L13 12L7 6L5.59 7.41ZM16 6H18V18H16V6Z\" fill=\"#716E7B\" stroke=\"#716E7B\"/>\n                      </svg>\n                      </div><div style=\"line-height:2\"> Show next ${min}  nodes </div></div>\n                   </div>\n                `\n            },\n            /* You can access and modify actual node DOM element in runtime using this method. */\n            nodeUpdate: function (d, i, arr) {\n                d3.select(this)\n                    .select('.node-rect')\n                    .attr(\"stroke\", d => d.data._highlighted || d.data._upToTheRootHighlighted ? '#E27396' : 'none')\n                    .attr(\"stroke-width\", d.data._highlighted || d.data._upToTheRootHighlighted ? 10 : 1)\n            },\n            nodeEnter: (d) => d, // Custom handling of node update\n            nodeExit: (d) => d, // Custom handling of exit node\n            /* You can access and modify actual link DOM element in runtime using this method. */\n            linkUpdate: function (d, i, arr) {\n                d3.select(this)\n                    .attr(\"stroke\", d => d.data._upToTheRootHighlighted ? '#E27396' : '#E4E2E9')\n                    .attr(\"stroke-width\", d => d.data._upToTheRootHighlighted ? 5 : 1)\n\n                if (d.data._upToTheRootHighlighted) {\n                    d3.select(this).raise()\n                }\n            },\n            /* Horizontal diagonal generation algorithm - https://observablehq.com/@bumbeishvili/curved-edges-compact-horizontal */\n            hdiagonal: function (s, t, m) {\n                // Define source and target x,y coordinates\n                const x = s.x;\n                const y = s.y;\n                const ex = t.x;\n                const ey = t.y;\n\n                let mx = m && m.x != null ? m.x : x;  // This is a changed line\n                let my = m && m.y != null ? m.y : y; // This also is a changed line\n\n                // Values in case of top reversed and left reversed diagonals\n                let xrvs = ex - x < 0 ? -1 : 1;\n                let yrvs = ey - y < 0 ? -1 : 1;\n\n                // Define preferred curve radius\n                let rdef = 35;\n\n                // Reduce curve radius, if source-target x space is smaller\n                let r = Math.abs(ex - x) / 2 < rdef ? Math.abs(ex - x) / 2 : rdef;\n\n                // Further reduce curve radius, is y space is more small\n                r = Math.abs(ey - y) / 2 < r ? Math.abs(ey - y) / 2 : r;\n\n                // Defin width and height of link, excluding radius\n                let h = Math.abs(ey - y) / 2 - r;\n                let w = Math.abs(ex - x) / 2 - r;\n\n                // Build and return custom arc command\n                return `\n                          M ${mx} ${my}\n                          L ${mx} ${y}\n                          L ${x} ${y}\n                          L ${x + w * xrvs} ${y}\n                          C ${x + w * xrvs + r * xrvs} ${y} \n                            ${x + w * xrvs + r * xrvs} ${y} \n                            ${x + w * xrvs + r * xrvs} ${y + r * yrvs}\n                          L ${x + w * xrvs + r * xrvs} ${ey - r * yrvs} \n                          C ${x + w * xrvs + r * xrvs}  ${ey} \n                            ${x + w * xrvs + r * xrvs}  ${ey} \n                            ${ex - w * xrvs}  ${ey}\n                          L ${ex} ${ey}\n               `;\n            },\n            /* Vertical diagonal generation algorithm - https://observablehq.com/@bumbeishvili/curved-edges-compacty-vertical */\n            diagonal: function (s, t, m, offsets = { sy: 0, }) {\n                const x = s.x;\n                let y = s.y;\n\n                const ex = t.x;\n                const ey = t.y;\n\n                let mx = m && m.x != null ? m.x : x;  // This is a changed line\n                let my = m && m.y != null ? m.y : y; // This also is a changed line\n\n                let xrvs = ex - x < 0 ? -1 : 1;\n                let yrvs = ey - y < 0 ? -1 : 1;\n\n                y += offsets.sy;\n\n\n                let rdef = 35;\n                let r = Math.abs(ex - x) / 2 < rdef ? Math.abs(ex - x) / 2 : rdef;\n\n                r = Math.abs(ey - y) / 2 < r ? Math.abs(ey - y) / 2 : r;\n\n                let h = Math.abs(ey - y) / 2 - r;\n                let w = Math.abs(ex - x) - r * 2;\n                //w=0;\n                const path = `\n                          M ${mx} ${my}\n                          L ${x} ${my}\n                          L ${x} ${y}\n                          L ${x} ${y + h * yrvs}\n                          C  ${x} ${y + h * yrvs + r * yrvs} ${x} ${y + h * yrvs + r * yrvs\n                    } ${x + r * xrvs} ${y + h * yrvs + r * yrvs}\n                          L ${x + w * xrvs + r * xrvs} ${y + h * yrvs + r * yrvs}\n                          C  ${ex}  ${y + h * yrvs + r * yrvs} ${ex}  ${y + h * yrvs + r * yrvs\n                    } ${ex} ${ey - h * yrvs}\n                          L ${ex} ${ey}\n               `;\n                return path;\n            },\n            // Defining arrows with markers for connections\n            defs: function (state, visibleConnections) {\n                return `<defs>\n                    ${visibleConnections.map(conn => {\n                    const labelWidth = this.getTextWidth(conn.label, { ctx: state.ctx, fontSize: 2, defaultFont: state.defaultFont });\n                    return `\n                       <marker id=\"${conn.from + \"_\" + conn.to}\" refX=\"${conn._source.x < conn._target.x ? -7 : 7}\" refY=\"5\" markerWidth=\"500\"  markerHeight=\"500\"  orient=\"${conn._source.x < conn._target.x ? \"auto\" : \"auto-start-reverse\"}\" >\n                       <rect rx=0.5 width=${conn.label ? labelWidth + 3 : 0} height=3 y=1  fill=\"#E27396\"></rect>\n                       <text font-size=\"2px\" x=1 fill=\"white\" y=3>${conn.label || ''}</text>\n                       </marker>\n\n                       <marker id=\"arrow-${conn.from + \"_\" + conn.to}\"  markerWidth=\"500\"  markerHeight=\"500\"  refY=\"2\"  refX=\"1\" orient=\"${conn._source.x < conn._target.x ? \"auto\" : \"auto-start-reverse\"}\" >\n                       <path transform=\"translate(0)\" d='M0,0 V4 L2,2 Z' fill='#E27396' />\n                       </marker>\n                    `}).join(\"\")}\n                    </defs>\n                    `},\n            /* You can update connections with custom styling using this function */\n            connectionsUpdate: function (d, i, arr) {\n                d3.select(this)\n                    .attr(\"stroke\", d => '#E27396')\n                    .attr('stroke-linecap', 'round')\n                    .attr(\"stroke-width\", d => '5')\n                    .attr('pointer-events', 'none')\n                    .attr(\"marker-start\", d => `url(#${d.from + \"_\" + d.to})`)\n                    .attr(\"marker-end\", d => `url(#arrow-${d.from + \"_\" + d.to})`)\n            },\n            // Link generator for connections\n            linkGroupArc: d3.linkHorizontal().x(d => d.x).y(d => d.y),\n\n            /*\n            *   You can customize/offset positions for each node and link by overriding these functions\n            *   For example, suppose you want to move link y position 30 px bellow in top layout. You can do it like this:\n            *   ```javascript\n            *   const layout = chart.layoutBindings();\n            *   layout.top.linkY = node => node.y + 30;\n            *   chart.layoutBindings(layout);\n            *   ```\n            */\n            layoutBindings: {\n                \"left\": {\n                    \"nodeLeftX\": node => 0,\n                    \"nodeRightX\": node => node.width,\n                    \"nodeTopY\": node => - node.height / 2,\n                    \"nodeBottomY\": node => node.height / 2,\n                    \"nodeJoinX\": node => node.x + node.width,\n                    \"nodeJoinY\": node => node.y - node.height / 2,\n                    \"linkJoinX\": node => node.x + node.width,\n                    \"linkJoinY\": node => node.y,\n                    \"linkX\": node => node.x,\n                    \"linkY\": node => node.y,\n                    \"linkCompactXStart\": node => node.x + node.width / 2,//node.x + (node.compactEven ? node.width / 2 : -node.width / 2),\n                    \"linkCompactYStart\": node => node.y + (node.compactEven ? node.height / 2 : -node.height / 2),\n                    \"compactLinkMidX\": (node, state) => node.firstCompactNode.x,// node.firstCompactNode.x + node.firstCompactNode.flexCompactDim[0] / 4 + state.compactMarginPair(node) / 4,\n                    \"compactLinkMidY\": (node, state) => node.firstCompactNode.y + node.firstCompactNode.flexCompactDim[0] / 4 + state.compactMarginPair(node) / 4,\n                    \"linkParentX\": node => node.parent.x + node.parent.width,\n                    \"linkParentY\": node => node.parent.y,\n                    \"buttonX\": node => node.width,\n                    \"buttonY\": node => node.height / 2,\n                    \"centerTransform\": ({ root, rootMargin, centerY, scale, centerX }) => `translate(${rootMargin},${centerY}) scale(${scale})`,\n                    \"compactDimension\": {\n                        sizeColumn: node => node.height,\n                        sizeRow: node => node.width,\n                        reverse: arr => arr.slice().reverse()\n                    },\n                    \"nodeFlexSize\": ({ height, width, siblingsMargin, childrenMargin, state, node }) => {\n                        if (state.compact && node.flexCompactDim) {\n                            const result = [node.flexCompactDim[0], node.flexCompactDim[1]]\n                            return result;\n                        };\n                        return [height + siblingsMargin, width + childrenMargin]\n                    },\n                    \"zoomTransform\": ({ centerY, scale }) => `translate(${0},${centerY}) scale(${scale})`,\n                    \"diagonal\": this.hdiagonal.bind(this),\n                    \"swap\": d => { const x = d.x; d.x = d.y; d.y = x; },\n                    \"nodeUpdateTransform\": ({ x, y, width, height }) => `translate(${x},${y - height / 2})`,\n                },\n                \"top\": {\n                    \"nodeLeftX\": node => -node.width / 2,\n                    \"nodeRightX\": node => node.width / 2,\n                    \"nodeTopY\": node => 0,\n                    \"nodeBottomY\": node => node.height,\n                    \"nodeJoinX\": node => node.x - node.width / 2,\n                    \"nodeJoinY\": node => node.y + node.height,\n                    \"linkJoinX\": node => node.x,\n                    \"linkJoinY\": node => node.y + node.height,\n                    \"linkCompactXStart\": node => node.x + (node.compactEven ? node.width / 2 : -node.width / 2),\n                    \"linkCompactYStart\": node => node.y + node.height / 2,\n                    \"compactLinkMidX\": (node, state) => node.firstCompactNode.x + node.firstCompactNode.flexCompactDim[0] / 4 + state.compactMarginPair(node) / 4,\n                    \"compactLinkMidY\": node => node.firstCompactNode.y,\n                    \"compactDimension\": {\n                        sizeColumn: node => node.width,\n                        sizeRow: node => node.height,\n                        reverse: arr => arr,\n                    },\n                    \"linkX\": node => node.x,\n                    \"linkY\": node => node.y,\n                    \"linkParentX\": node => node.parent.x,\n                    \"linkParentY\": node => node.parent.y + node.parent.height,\n                    \"buttonX\": node => node.width / 2,\n                    \"buttonY\": node => node.height,\n                    \"centerTransform\": ({ root, rootMargin, centerY, scale, centerX }) => `translate(${centerX},${rootMargin}) scale(${scale})`,\n                    \"nodeFlexSize\": ({ height, width, siblingsMargin, childrenMargin, state, node, compactViewIndex }) => {\n                        if (state.compact && node.flexCompactDim) {\n                            const result = [node.flexCompactDim[0], node.flexCompactDim[1]]\n                            return result;\n                        };\n                        return [width + siblingsMargin, height + childrenMargin];\n                    },\n                    \"zoomTransform\": ({ centerX, scale }) => `translate(${centerX},0}) scale(${scale})`,\n                    \"diagonal\": this.diagonal.bind(this),\n                    \"swap\": d => { },\n                    \"nodeUpdateTransform\": ({ x, y, width, height }) => `translate(${x - width / 2},${y})`,\n\n                },\n                \"bottom\": {\n                    \"nodeLeftX\": node => -node.width / 2,\n                    \"nodeRightX\": node => node.width / 2,\n                    \"nodeTopY\": node => -node.height,\n                    \"nodeBottomY\": node => 0,\n                    \"nodeJoinX\": node => node.x - node.width / 2,\n                    \"nodeJoinY\": node => node.y - node.height - node.height,\n                    \"linkJoinX\": node => node.x,\n                    \"linkJoinY\": node => node.y - node.height,\n                    \"linkCompactXStart\": node => node.x + (node.compactEven ? node.width / 2 : -node.width / 2),\n                    \"linkCompactYStart\": node => node.y - node.height / 2,\n                    \"compactLinkMidX\": (node, state) => node.firstCompactNode.x + node.firstCompactNode.flexCompactDim[0] / 4 + state.compactMarginPair(node) / 4,\n                    \"compactLinkMidY\": node => node.firstCompactNode.y,\n                    \"linkX\": node => node.x,\n                    \"linkY\": node => node.y,\n                    \"compactDimension\": {\n                        sizeColumn: node => node.width,\n                        sizeRow: node => node.height,\n                        reverse: arr => arr,\n                    },\n                    \"linkParentX\": node => node.parent.x,\n                    \"linkParentY\": node => node.parent.y - node.parent.height,\n                    \"buttonX\": node => node.width / 2,\n                    \"buttonY\": node => 0,\n                    \"centerTransform\": ({ root, rootMargin, centerY, scale, centerX, chartHeight }) => `translate(${centerX},${chartHeight - rootMargin}) scale(${scale})`,\n                    \"nodeFlexSize\": ({ height, width, siblingsMargin, childrenMargin, state, node }) => {\n                        if (state.compact && node.flexCompactDim) {\n                            const result = [node.flexCompactDim[0], node.flexCompactDim[1]]\n                            return result;\n                        };\n                        return [width + siblingsMargin, height + childrenMargin]\n                    },\n                    \"zoomTransform\": ({ centerX, scale }) => `translate(${centerX},0}) scale(${scale})`,\n                    \"diagonal\": this.diagonal.bind(this),\n                    \"swap\": d => { d.y = -d.y; },\n                    \"nodeUpdateTransform\": ({ x, y, width, height }) => `translate(${x - width / 2},${y - height})`,\n                },\n                \"right\": {\n                    \"nodeLeftX\": node => -node.width,\n                    \"nodeRightX\": node => 0,\n                    \"nodeTopY\": node => - node.height / 2,\n                    \"nodeBottomY\": node => node.height / 2,\n                    \"nodeJoinX\": node => node.x - node.width - node.width,\n                    \"nodeJoinY\": node => node.y - node.height / 2,\n                    \"linkJoinX\": node => node.x - node.width,\n                    \"linkJoinY\": node => node.y,\n                    \"linkX\": node => node.x,\n                    \"linkY\": node => node.y,\n                    \"linkParentX\": node => node.parent.x - node.parent.width,\n                    \"linkParentY\": node => node.parent.y,\n                    \"buttonX\": node => 0,\n                    \"buttonY\": node => node.height / 2,\n                    \"linkCompactXStart\": node => node.x - node.width / 2,//node.x + (node.compactEven ? node.width / 2 : -node.width / 2),\n                    \"linkCompactYStart\": node => node.y + (node.compactEven ? node.height / 2 : -node.height / 2),\n                    \"compactLinkMidX\": (node, state) => node.firstCompactNode.x,// node.firstCompactNode.x + node.firstCompactNode.flexCompactDim[0] / 4 + state.compactMarginPair(node) / 4,\n                    \"compactLinkMidY\": (node, state) => node.firstCompactNode.y + node.firstCompactNode.flexCompactDim[0] / 4 + state.compactMarginPair(node) / 4,\n                    \"centerTransform\": ({ root, rootMargin, centerY, scale, centerX, chartWidth }) => `translate(${chartWidth - rootMargin},${centerY}) scale(${scale})`,\n                    \"nodeFlexSize\": ({ height, width, siblingsMargin, childrenMargin, state, node }) => {\n                        if (state.compact && node.flexCompactDim) {\n                            const result = [node.flexCompactDim[0], node.flexCompactDim[1]]\n                            return result;\n                        };\n                        return [height + siblingsMargin, width + childrenMargin]\n                    },\n                    \"compactDimension\": {\n                        sizeColumn: node => node.height,\n                        sizeRow: node => node.width,\n                        reverse: arr => arr.slice().reverse()\n                    },\n                    \"zoomTransform\": ({ centerY, scale }) => `translate(${0},${centerY}) scale(${scale})`,\n                    \"diagonal\": this.hdiagonal.bind(this),\n                    \"swap\": d => { const x = d.x; d.x = -d.y; d.y = x; },\n                    \"nodeUpdateTransform\": ({ x, y, width, height }) => `translate(${x - width},${y - height / 2})`,\n                },\n            }\n\n        };\n\n        this.getChartState = () => attrs;\n\n        // Dynamically set getter and setter functions for Chart class\n        Object.keys(attrs).forEach((key) => {\n            //@ts-ignore\n            this[key] = function (_) {\n                if (!arguments.length) {\n                    return attrs[key];\n                } else {\n                    attrs[key] = _;\n                }\n                return this;\n            };\n        });\n\n        this.initializeEnterExitUpdatePattern();\n    }\n\n    initializeEnterExitUpdatePattern() {\n        d3.selection.prototype.patternify = function (params) {\n            var container = this;\n            var selector = params.selector;\n            var elementTag = params.tag;\n            var data = params.data || [selector];\n\n            // Pattern in action\n            var selection = container.selectAll(\".\" + selector).data(data, (d, i) => {\n                if (typeof d === \"object\") {\n                    if (d.id) { return d.id; }\n                }\n                return i;\n            });\n            selection.exit().remove();\n            selection = selection.enter().append(elementTag).merge(selection);\n            selection.attr(\"class\", selector);\n            return selection;\n        };\n    }\n\n    // This method retrieves passed node's children IDs (including node)\n    getNodeChildren({ data, children, _children }, nodeStore) {\n        // Store current node ID\n        nodeStore.push(data);\n\n        // Loop over children and recursively store descendants id (expanded nodes)\n        if (children) {\n            children.forEach((d) => {\n                this.getNodeChildren(d, nodeStore);\n            });\n        }\n\n        // Loop over _children and recursively store descendants id (collapsed nodes)\n        if (_children) {\n            _children.forEach((d) => {\n                this.getNodeChildren(d, nodeStore);\n            });\n        }\n\n        // Return result\n        return nodeStore;\n    }\n\n    // This method can be invoked via chart.setZoomFactor API, it zooms to particulat scale\n    initialZoom(zoomLevel) {\n        const attrs = this.getChartState();\n        attrs.lastTransform.k = zoomLevel;\n        return this;\n    }\n\n    render() {\n        //InnerFunctions which will update visuals\n        const attrs = this.getChartState();\n        if (!attrs.data || attrs.data.length == 0) {\n            console.log('ORG CHART - Data is empty');\n            if (attrs.container) {\n                select(attrs.container).select('.nodes-wrapper').remove();\n                select(attrs.container).select('.links-wrapper').remove();\n                select(attrs.container).select('.connections-wrapper').remove();\n            }\n            return this;\n        }\n\n        //Drawing containers\n        const container = d3.select(attrs.container);\n        const containerRect = container.node().getBoundingClientRect();\n        if (containerRect.width > 0) attrs.svgWidth = containerRect.width;\n\n        //Calculated properties\n        const calc = {\n            id: `ID${Math.floor(Math.random() * 1000000)}`, // id for event handlings,\n            chartWidth: attrs.svgWidth,\n            chartHeight: attrs.svgHeight\n        };\n        attrs.calc = calc;\n\n        // Calculate max node depth (it's needed for layout heights calculation)\n        calc.centerX = calc.chartWidth / 2;\n        calc.centerY = calc.chartHeight / 2;\n\n        // ******************* BEHAVIORS  **********************\n        if (attrs.firstDraw) {\n            const behaviors = {\n                zoom: null\n            };\n\n            // Get zooming function\n            behaviors.zoom = attrs.createZoom()\n                .clickDistance(10)\n                .on('start', (event, d) => attrs.onZoomStart(event))\n                .on('end', (event, d) => attrs.onZoomEnd(event))\n                .on(\"zoom\", (event, d) => {\n                    attrs.onZoom(event);\n                    this.zoomed(event, d);\n                })\n                .scaleExtent(attrs.scaleExtent)\n            attrs.zoomBehavior = behaviors.zoom;\n        }\n\n        //****************** ROOT node work ************************\n\n        attrs.flexTreeLayout = flextree({\n            nodeSize: node => {\n                const width = attrs.nodeWidth(node);;\n                const height = attrs.nodeHeight(node);\n                const siblingsMargin = attrs.siblingsMargin(node)\n                const childrenMargin = attrs.childrenMargin(node);\n                return attrs.layoutBindings[attrs.layout].nodeFlexSize({\n                    state: attrs,\n                    node: node,\n                    width,\n                    height,\n                    siblingsMargin,\n                    childrenMargin\n                });\n            }\n        })\n            .spacing((nodeA, nodeB) => nodeA.parent == nodeB.parent ? 0 : attrs.neighbourMargin(nodeA, nodeB));\n\n        this.setLayouts({ expandNodesFirst: false });\n\n        // *************************  DRAWING **************************\n        //Add svg\n        const svg = container\n            .patternify({\n                tag: \"svg\",\n                selector: \"svg-chart-container\"\n            })\n            .attr(\"width\", attrs.svgWidth)\n            .attr(\"height\", attrs.svgHeight)\n            .attr(\"font-family\", attrs.defaultFont)\n\n        if (attrs.firstDraw) {\n            svg.call(attrs.zoomBehavior)\n                .on(\"dblclick.zoom\", null)\n                .attr(\"cursor\", \"move\")\n        }\n\n        attrs.svg = svg;\n\n        //Add container g element\n        const chart = svg\n            .patternify({\n                tag: \"g\",\n                selector: \"chart\"\n            })\n\n        // Add one more container g element, for better positioning controls\n        attrs.centerG = chart\n            .patternify({\n                tag: \"g\",\n                selector: \"center-group\"\n            })\n\n        attrs.linksWrapper = attrs.centerG.patternify({\n            tag: \"g\",\n            selector: \"links-wrapper\"\n        })\n\n        attrs.nodesWrapper = attrs.centerG.patternify({\n            tag: \"g\",\n            selector: \"nodes-wrapper\"\n        })\n\n        attrs.connectionsWrapper = attrs.centerG.patternify({\n            tag: \"g\",\n            selector: \"connections-wrapper\"\n        })\n\n        attrs.defsWrapper = svg.patternify({\n            tag: \"g\",\n            selector: \"defs-wrapper\"\n        })\n\n        if (attrs.firstDraw) {\n            attrs.centerG.attr(\"transform\", () => {\n                return attrs.layoutBindings[attrs.layout].centerTransform({\n                    centerX: calc.centerX,\n                    centerY: calc.centerY,\n                    scale: attrs.lastTransform.k,\n                    rootMargin: attrs.rootMargin,\n                    root: attrs.root,\n                    chartHeight: calc.chartHeight,\n                    chartWidth: calc.chartWidth\n                })\n            });\n        }\n\n        attrs.chart = chart;\n\n        // Display tree contenrs\n        this.update(attrs.root);\n\n\n        //#########################################  UTIL FUNCS ##################################\n        // This function restyles foreign object elements ()\n\n        d3.select(window).on(`resize.${attrs.id}`, () => {\n            const containerRect = d3.select(attrs.container).node().getBoundingClientRect();\n            attrs.svg.attr('width', containerRect.width)\n        });\n\n        if (attrs.firstDraw) {\n            attrs.firstDraw = false;\n        }\n\n        return this;\n    }\n\n    // This function can be invoked via chart.addNode API, and it adds node in tree at runtime\n    addNode(obj) {\n        const attrs = this.getChartState();\n        if (obj && (attrs.parentNodeId(obj) == null || attrs.parentNodeId(obj) == attrs.nodeId(obj)) && attrs.data.length == 0) {\n            attrs.data.push(obj);\n            this.render()\n            return this;\n        }\n        const root = attrs.generateRoot(attrs.data)\n        const descendants = root.descendants();\n        const nodeFound = descendants.filter(({ data }) => attrs.nodeId(data).toString() === attrs.nodeId(obj).toString())[0];\n        const parentFound = descendants.filter(({ data }) => attrs.nodeId(data).toString() === attrs.parentNodeId(obj).toString())[0];\n        if (nodeFound) {\n            console.log(`ORG CHART - ADD - Node with id \"${attrs.nodeId(obj)}\" already exists in tree`)\n            return this;\n        }\n\n        if (obj._centered && !obj._expanded) obj._expanded = true;\n        attrs.data.push(obj);\n\n        // Update state of nodes and redraw graph\n        this.updateNodesState();\n\n        return this;\n    }\n\n    // This function can be invoked via chart.removeNode API, and it removes node from tree at runtime\n    removeNode(nodeId) {\n        const attrs = this.getChartState();\n        const root = attrs.generateRoot(attrs.data)\n        const descendants = root.descendants();\n        const node = descendants.filter(({ data }) => attrs.nodeId(data) == nodeId)[0];\n\n        if (!node) {\n            console.log(`ORG CHART - REMOVE - Node with id \"${nodeId}\" not found in the tree`);\n            return this;\n        }\n\n        // Get all node descendants\n        const nodeDescendants = node.descendants()\n\n        // Mark all node children and node itself for removal\n        nodeDescendants\n            .forEach(d => d.data._filteredOut = true)\n\n        // Filter out retrieved nodes and reassign data\n        attrs.data = attrs.data.filter(d => !d._filteredOut);\n\n        if (attrs.data.length == 0) {\n            this.render();\n        } else {\n            const updateNodesState = this.updateNodesState.bind(this);\n            // Update state of nodes and redraw graph\n            updateNodesState();\n        }\n        return this;\n    }\n\n    groupBy(array, accessor, aggegator) {\n        const grouped = {}\n        array.forEach(item => {\n            const key = accessor(item)\n            if (!grouped[key]) {\n                grouped[key] = []\n            }\n            grouped[key].push(item)\n        })\n\n        Object.keys(grouped).forEach(key => {\n            grouped[key] = aggegator(grouped[key])\n        })\n        return Object.entries(grouped);\n    }\n    calculateCompactFlexDimensions(root) {\n        const attrs = this.getChartState();\n        root.eachBefore(node => {\n            node.firstCompact = null;\n            node.compactEven = null;\n            node.flexCompactDim = null;\n            node.firstCompactNode = null;\n        })\n        root.eachBefore(node => {\n            if (node.children && node.children.length > 1) {\n                const compactChildren = node.children\n                    .filter(d => !d.children)\n\n                if (compactChildren.length < 2) return;\n                compactChildren.forEach((child, i) => {\n                    if (!i) child.firstCompact = true;\n                    if (i % 2) child.compactEven = false;\n                    else child.compactEven = true;\n                    child.row = Math.floor(i / 2);\n                })\n                const evenMaxColumnDimension = d3.max(compactChildren.filter(d => d.compactEven), attrs.layoutBindings[attrs.layout].compactDimension.sizeColumn);\n                const oddMaxColumnDimension = d3.max(compactChildren.filter(d => !d.compactEven), attrs.layoutBindings[attrs.layout].compactDimension.sizeColumn);\n                const columnSize = Math.max(evenMaxColumnDimension, oddMaxColumnDimension) * 2;\n                const rowsMapNew = this.groupBy(compactChildren, d => d.row, reducedGroup => d3.max(reducedGroup, d => attrs.layoutBindings[attrs.layout].compactDimension.sizeRow(d) + attrs.compactMarginBetween(d)));\n                const rowSize = d3.sum(rowsMapNew.map(v => v[1]))\n                compactChildren.forEach(node => {\n                    node.firstCompactNode = compactChildren[0];\n                    if (node.firstCompact) {\n                        node.flexCompactDim = [\n                            columnSize + attrs.compactMarginPair(node),\n                            rowSize - attrs.compactMarginBetween(node)\n                        ];\n                    } else {\n                        node.flexCompactDim = [0, 0];\n                    }\n                })\n                node.flexCompactDim = null;\n            }\n        })\n    }\n\n    calculateCompactFlexPositions(root) {\n        const attrs = this.getChartState();\n        root.eachBefore(node => {\n            if (node.children) {\n                const compactChildren = node.children.filter(d => d.flexCompactDim);\n                const fch = compactChildren[0];\n                if (!fch) return;\n                compactChildren.forEach((child, i, arr) => {\n                    if (i == 0) fch.x -= fch.flexCompactDim[0] / 2;\n                    if (i & i % 2 - 1) child.x = fch.x + fch.flexCompactDim[0] * 0.25 - attrs.compactMarginPair(child) / 4;\n                    else if (i) child.x = fch.x + fch.flexCompactDim[0] * 0.75 + attrs.compactMarginPair(child) / 4;\n                })\n                const centerX = fch.x + fch.flexCompactDim[0] * 0.5;\n                fch.x = fch.x + fch.flexCompactDim[0] * 0.25 - attrs.compactMarginPair(fch) / 4;\n                const offsetX = node.x - centerX;\n                if (Math.abs(offsetX) < 10) {\n                    compactChildren.forEach(d => d.x += offsetX);\n                }\n\n                const rowsMapNew = this.groupBy(compactChildren, d => d.row, reducedGroup => d3.max(reducedGroup, d => attrs.layoutBindings[attrs.layout].compactDimension.sizeRow(d)));\n                const cumSum = d3.cumsum(rowsMapNew.map(d => d[1] + attrs.compactMarginBetween(d)));\n                compactChildren\n                    .forEach((node, i) => {\n                        if (node.row) {\n                            node.y = fch.y + cumSum[node.row - 1]\n                        } else {\n                            node.y = fch.y;\n                        }\n                    })\n\n            }\n        })\n    }\n\n    // This function basically redraws visible graph, based on nodes state\n    update({ x0, y0, x = 0, y = 0, width, height }) {\n        const attrs = this.getChartState();\n        const calc = attrs.calc;\n\n        // Paging\n        if (attrs.compact) {\n            this.calculateCompactFlexDimensions(attrs.root);\n        }\n\n        //  Assigns the x and y position for the nodes\n        const treeData = attrs.flexTreeLayout(attrs.root);\n\n        // Reassigns the x and y position for the based on the compact layout\n        if (attrs.compact) {\n            this.calculateCompactFlexPositions(attrs.root);\n        }\n\n        const nodes = treeData.descendants();\n\n        // console.table(nodes.map(d => ({ x: d.x, y: d.y, width: d.width, height: d.height, flexCompactDim: d.flexCompactDim + \"\" })))\n\n        // Get all links\n        const links = treeData.descendants().slice(1);\n        nodes.forEach(attrs.layoutBindings[attrs.layout].swap)\n\n        // Connections\n        const connections = attrs.connections;\n        const allNodesMap = {};\n        attrs.allNodes.forEach(d => allNodesMap[attrs.nodeId(d.data)] = d);\n\n        const visibleNodesMap = {}\n        nodes.forEach(d => visibleNodesMap[attrs.nodeId(d.data)] = d);\n\n        connections.forEach(connection => {\n            const source = allNodesMap[connection.from];\n            const target = allNodesMap[connection.to];\n            connection._source = source;\n            connection._target = target;\n        })\n        const visibleConnections = connections.filter(d => visibleNodesMap[d.from] && visibleNodesMap[d.to]);\n        const defsString = attrs.defs.bind(this)(attrs, visibleConnections);\n        const existingString = attrs.defsWrapper.html();\n        if (defsString !== existingString) {\n            attrs.defsWrapper.html(defsString)\n        }\n\n        // --------------------------  LINKS ----------------------\n        // Get links selection\n        const linkSelection = attrs.linksWrapper\n            .selectAll(\"path.link\")\n            .data(links, (d) => attrs.nodeId(d.data));\n\n        // Enter any new links at the parent's previous position.\n        const linkEnter = linkSelection\n            .enter()\n            .insert(\"path\", \"g\")\n            .attr(\"class\", \"link\")\n            .attr(\"d\", (d) => {\n                const xo = attrs.layoutBindings[attrs.layout].linkJoinX({ x: x0, y: y0, width, height });\n                const yo = attrs.layoutBindings[attrs.layout].linkJoinY({ x: x0, y: y0, width, height });\n                const o = { x: xo, y: yo };\n                return attrs.layoutBindings[attrs.layout].diagonal(o, o, o);\n            });\n\n        // Get links update selection\n        const linkUpdate = linkEnter.merge(linkSelection);\n\n        // Styling links\n        linkUpdate\n            .attr(\"fill\", \"none\")\n\n\n        if (this.isEdge()) {\n            linkUpdate\n                .style('display', d => {\n                    const display = d.data._pagingButton ? 'none' : 'auto'\n                    return display;\n                })\n        } else {\n            linkUpdate\n                .attr('display', d => {\n                    const display = d.data._pagingButton ? 'none' : 'auto'\n                    return display;\n                })\n        }\n\n        // Allow external modifications\n        linkUpdate.each(attrs.linkUpdate);\n\n        // Transition back to the parent element position\n        linkUpdate\n            .transition()\n            .duration(attrs.duration)\n            .attr(\"d\", (d) => {\n                const n = attrs.compact && d.flexCompactDim ?\n                    {\n                        x: attrs.layoutBindings[attrs.layout].compactLinkMidX(d, attrs),\n                        y: attrs.layoutBindings[attrs.layout].compactLinkMidY(d, attrs)\n                    } :\n                    {\n                        x: attrs.layoutBindings[attrs.layout].linkX(d),\n                        y: attrs.layoutBindings[attrs.layout].linkY(d)\n                    };\n\n                const p = {\n                    x: attrs.layoutBindings[attrs.layout].linkParentX(d),\n                    y: attrs.layoutBindings[attrs.layout].linkParentY(d),\n                };\n\n                const m = attrs.compact && d.flexCompactDim ? {\n                    x: attrs.layoutBindings[attrs.layout].linkCompactXStart(d),\n                    y: attrs.layoutBindings[attrs.layout].linkCompactYStart(d),\n                } : n;\n                return attrs.layoutBindings[attrs.layout].diagonal(n, p, m, { sy: attrs.linkYOffset });\n            });\n\n        // Remove any  links which is exiting after animation\n        const linkExit = linkSelection\n            .exit()\n            .transition()\n            .duration(attrs.duration)\n            .attr(\"d\", (d) => {\n                const xo = attrs.layoutBindings[attrs.layout].linkJoinX({ x, y, width, height });\n                const yo = attrs.layoutBindings[attrs.layout].linkJoinY({ x, y, width, height });\n                const o = { x: xo, y: yo };\n                return attrs.layoutBindings[attrs.layout].diagonal(o, o, null, { sy: attrs.linkYOffset });\n            })\n            .remove();\n\n\n        // --------------------------  CONNECTIONS ----------------------\n\n        const connectionsSel = attrs.connectionsWrapper\n            .selectAll(\"path.connection\")\n            .data(visibleConnections)\n\n        // Enter any new connections at the parent's previous position.\n        const connEnter = connectionsSel\n            .enter()\n            .insert(\"path\", \"g\")\n            .attr(\"class\", \"connection\")\n            .attr(\"d\", (d) => {\n                const xo = attrs.layoutBindings[attrs.layout].linkJoinX({ x: x0, y: y0, width, height });\n                const yo = attrs.layoutBindings[attrs.layout].linkJoinY({ x: x0, y: y0, width, height });\n                const o = { x: xo, y: yo };\n                return attrs.layoutBindings[attrs.layout].diagonal(o, o, null, { sy: attrs.linkYOffset });\n            });\n\n\n        // Get connections update selection\n        const connUpdate = connEnter.merge(connectionsSel);\n\n        // Styling connections\n        connUpdate.attr(\"fill\", \"none\")\n\n        // Transition back to the parent element position\n        connUpdate\n            .transition()\n            .duration(attrs.duration)\n            .attr('d', (d) => {\n                const xs = attrs.layoutBindings[attrs.layout].linkX({ x: d._source.x, y: d._source.y, width: d._source.width, height: d._source.height });\n                const ys = attrs.layoutBindings[attrs.layout].linkY({ x: d._source.x, y: d._source.y, width: d._source.width, height: d._source.height });\n                const xt = attrs.layoutBindings[attrs.layout].linkJoinX({ x: d._target.x, y: d._target.y, width: d._target.width, height: d._target.height });\n                const yt = attrs.layoutBindings[attrs.layout].linkJoinY({ x: d._target.x, y: d._target.y, width: d._target.width, height: d._target.height });\n                return attrs.linkGroupArc({ source: { x: xs, y: ys }, target: { x: xt, y: yt } })\n            })\n\n        // Allow external modifications\n        connUpdate.each(attrs.connectionsUpdate);\n\n        // Remove any  links which is exiting after animation\n        const connExit = connectionsSel\n            .exit()\n            .transition()\n            .duration(attrs.duration)\n            .attr('opacity', 0)\n            .remove();\n\n        // --------------------------  NODES ----------------------\n        // Get nodes selection\n        const nodesSelection = attrs.nodesWrapper\n            .selectAll(\"g.node\")\n            .data(nodes, ({ data }) => attrs.nodeId(data));\n\n        // Enter any new nodes at the parent's previous position.\n        const nodeEnter = nodesSelection\n            .enter()\n            .append(\"g\")\n            .attr(\"class\", \"node\")\n            .attr(\"transform\", (d) => {\n                if (d == attrs.root) return `translate(${x0},${y0})`\n                const xj = attrs.layoutBindings[attrs.layout].nodeJoinX({ x: x0, y: y0, width, height });\n                const yj = attrs.layoutBindings[attrs.layout].nodeJoinY({ x: x0, y: y0, width, height });\n                return `translate(${xj},${yj})`\n            })\n            .attr(\"cursor\", \"pointer\")\n            .on(\"click.node\", (event, node) => {\n                const { data } = node;\n                if ([...event.srcElement.classList].includes(\"node-button-foreign-object\")) {\n                    return;\n                }\n                if ([...event.srcElement.classList].includes(\"paging-button-wrapper\")) {\n                    this.loadPagingNodes(node);\n                    return;\n                }\n                if (!data._pagingButton) {\n                    attrs.onNodeClick(node);\n                    return;\n                }\n                console.log('event fired, no handlers')\n            })\n            //  Event handler to the expand button\n            .on(\"keydown.node\", (event, node) => {\n                const { data } = node;\n                if (event.key === 'Enter' || event.key === ' ' || event.key === 'Spacebar') {\n                    if ([...event.srcElement.classList].includes(\"node-button-foreign-object\")) {\n                        return;\n                    }\n                    if ([...event.srcElement.classList].includes(\"paging-button-wrapper\")) {\n                        this.loadPagingNodes(node);\n                        return;\n                    }\n                    if (event.key === 'Enter' || event.key === ' ' || event.key === 'Spacebar') {\n                        this.onButtonClick(event, node)\n                    }\n                }\n            });\n        nodeEnter.each(attrs.nodeEnter)\n\n        // Add background rectangle for the nodes\n        nodeEnter\n            .patternify({\n                tag: \"rect\",\n                selector: \"node-rect\",\n                data: (d) => [d]\n            })\n\n        // Node update styles\n        const nodeUpdate = nodeEnter\n            .merge(nodesSelection)\n            .style(\"font\", \"12px sans-serif\");\n\n        // Add foreignObject element inside rectangle\n        const fo = nodeUpdate.patternify({\n            tag: \"foreignObject\",\n            selector: \"node-foreign-object\",\n            data: (d) => [d]\n        })\n            .style('overflow', 'visible')\n\n        // Add foreign object\n        fo.patternify({\n            tag: \"xhtml:div\",\n            selector: \"node-foreign-object-div\",\n            data: (d) => [d]\n        })\n\n        this.restyleForeignObjectElements();\n\n        // Add Node button circle's group (expand-collapse button)\n        const nodeButtonGroups = nodeEnter\n            .patternify({\n                tag: \"g\",\n                selector: \"node-button-g\",\n                data: (d) => [d]\n            })\n            .on(\"click\", (event, d) => this.onButtonClick(event, d))\n            .on(\"keydown\", (event, d) => {\n                if (event.key === 'Enter' || event.key === ' ' || event.key === 'Spacebar') {\n                    this.onButtonClick(event, d)\n                }\n            });\n\n        nodeButtonGroups.patternify({\n            tag: 'rect',\n            selector: 'node-button-rect',\n            data: (d) => [d]\n        })\n            .attr('opacity', 0)\n            .attr('pointer-events', 'all')\n            .attr('width', d => attrs.nodeButtonWidth(d))\n            .attr('height', d => attrs.nodeButtonHeight(d))\n            .attr('x', d => attrs.nodeButtonX(d))\n            .attr('y', d => attrs.nodeButtonY(d))\n\n        // Add expand collapse button content\n        const nodeFo = nodeButtonGroups\n            .patternify({\n                tag: \"foreignObject\",\n                selector: \"node-button-foreign-object\",\n                data: (d) => [d]\n            })\n            .attr('width', d => attrs.nodeButtonWidth(d))\n            .attr('height', d => attrs.nodeButtonHeight(d))\n            .attr('x', d => attrs.nodeButtonX(d))\n            .attr('y', d => attrs.nodeButtonY(d))\n            .style('overflow', 'visible')\n            .patternify({\n                tag: \"xhtml:div\",\n                selector: \"node-button-div\",\n                data: (d) => [d]\n            })\n            .style('pointer-events', 'none')\n            .style('display', 'flex')\n            .style('width', '100%')\n            .style('height', '100%')\n\n\n\n        // Transition to the proper position for the node\n        nodeUpdate\n            .transition()\n            .attr(\"opacity\", 0)\n            .duration(attrs.duration)\n            .attr(\"transform\", ({ x, y, width, height }) => {\n                return attrs.layoutBindings[attrs.layout].nodeUpdateTransform({ x, y, width, height });\n\n            })\n            .attr(\"opacity\", 1);\n\n        // Style node rectangles\n        nodeUpdate\n            .select(\".node-rect\")\n            .attr(\"width\", ({ width }) => width)\n            .attr(\"height\", ({ height }) => height)\n            .attr(\"x\", ({ width }) => 0)\n            .attr(\"y\", ({ height }) => 0)\n            .attr(\"cursor\", \"pointer\")\n            .attr('rx', 3)\n            .attr(\"fill\", attrs.nodeDefaultBackground)\n\n\n        nodeUpdate.select(\".node-button-g\").attr(\"transform\", ({ data, width, height }) => {\n            const x = attrs.layoutBindings[attrs.layout].buttonX({ width, height });\n            const y = attrs.layoutBindings[attrs.layout].buttonY({ width, height });\n            return `translate(${x},${y})`\n        })\n            .attr(\"display\", ({ data }) => {\n                return data._directSubordinates > 0 ? null : 'none';\n            })\n            .attr(\"opacity\", ({ data, children, _children }) => {\n                if (data._pagingButton) {\n                    return 0;\n                }\n                if (children || _children) {\n                    return 1;\n                }\n                return 0;\n            });\n\n        // Restyle node button circle\n        nodeUpdate\n            .select(\".node-button-foreign-object .node-button-div\")\n            .html((node) => {\n                return attrs.buttonContent({ node, state: attrs })\n            })\n\n        // Restyle button texts\n        nodeUpdate\n            .select(\".node-button-text\")\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"alignment-baseline\", \"middle\")\n            .attr(\"font-size\", ({ children }) => {\n                if (children) return 40;\n                return 26;\n            })\n            .text(({ children }) => {\n                if (children) return \"-\";\n                return \"+\";\n            })\n            .attr(\"y\", this.isEdge() ? 10 : 0);\n\n        nodeUpdate.each(attrs.nodeUpdate)\n\n        // Remove any exiting nodes after transition\n        const nodeExitTransition = nodesSelection\n            .exit()\n        nodeExitTransition.each(attrs.nodeExit)\n\n        const maxDepthNode = nodeExitTransition.data().reduce((a, b) => a.depth < b.depth ? a : b, { depth: Infinity });\n\n        nodeExitTransition.attr(\"opacity\", 1)\n            .transition()\n            .duration(attrs.duration)\n            .attr(\"transform\", (d) => {\n\n                let { x, y, width, height } = maxDepthNode.parent || {};\n                const ex = attrs.layoutBindings[attrs.layout].nodeJoinX({ x, y, width, height });\n                const ey = attrs.layoutBindings[attrs.layout].nodeJoinY({ x, y, width, height });\n                return `translate(${ex},${ey})`\n            })\n            .on(\"end\", function () {\n                d3.select(this).remove();\n            })\n            .attr(\"opacity\", 0);\n\n        // Store the old positions for transition.\n        nodes.forEach((d) => {\n            d.x0 = d.x;\n            d.y0 = d.y;\n        });\n\n        // CHECK FOR CENTERING\n        const centeredNode = attrs.allNodes.filter(d => d.data._centered)[0]\n        if (centeredNode) {\n            let centeredNodes = [centeredNode]\n            if (centeredNode.data._centeredWithDescendants) {\n                if (attrs.compact) {\n                    centeredNodes = centeredNode.descendants().filter((d, i) => i < 7);\n                } else {\n                    centeredNodes = centeredNode.descendants().filter((d, i, arr) => {\n                        const h = Math.round(arr.length / 2);\n                        const spread = 2;\n                        if (arr.length % 2) {\n                            return i > h - spread && i < h + spread - 1;\n                        }\n\n                        return i > h - spread && i < h + spread;\n                    });\n                }\n\n            }\n            centeredNode.data._centeredWithDescendants = null;\n            centeredNode.data._centered = null;\n            this.fit({\n                animate: true,\n                scale: false,\n                nodes: centeredNodes\n            })\n        }\n\n    }\n\n    // This function detects whether current browser is edge\n    isEdge() {\n        return window.navigator.userAgent.includes(\"Edge\");\n    }\n\n    // Generate horizontal diagonal - play with it here - https://observablehq.com/@bumbeishvili/curved-edges-horizontal-d3-v3-v4-v5-v6\n    hdiagonal(s, t, m, offsets) {\n        const state = this.getChartState();\n        return state.hdiagonal(s, t, m, offsets);\n    }\n\n    // Generate custom diagonal - play with it here - https://observablehq.com/@bumbeishvili/curved-edges\n    diagonal(s, t, m, offsets) {\n        const state = this.getChartState();\n        return state.diagonal(s, t, m, offsets);\n    }\n\n    restyleForeignObjectElements() {\n        const attrs = this.getChartState();\n\n        attrs.svg\n            .selectAll(\".node-foreign-object\")\n            .attr(\"width\", ({ width }) => width)\n            .attr(\"height\", ({ height }) => height)\n            .attr(\"x\", ({ width }) => 0)\n            .attr(\"y\", ({ height }) => 0);\n        attrs.svg\n            .selectAll(\".node-foreign-object-div\")\n            .style(\"width\", ({ width }) => `${width}px`)\n            .style(\"height\", ({ height }) => `${height}px`)\n            .html(function (d, i, arr) {\n                if (d.data._pagingButton) {\n                    return `<div class=\"paging-button-wrapper\"><div style=\"pointer-events:none\">${attrs.pagingButton(d, i, arr, attrs)}</div></div>`;\n                }\n                return attrs.nodeContent.bind(this)(d, i, arr, attrs)\n            })\n    }\n\n    // Toggle children on click.\n    onButtonClick(event, d) {\n        const attrs = this.getChartState();\n        if (d.data._pagingButton) {\n            return;\n        }\n        if (attrs.setActiveNodeCentered) {\n            d.data._centered = true;\n            d.data._centeredWithDescendants = true;\n        }\n\n        // If childrens are expanded\n        if (d.children) {\n            //Collapse them\n            d._children = d.children;\n            d.children = null;\n\n            // Set descendants expanded property to false\n            this.setExpansionFlagToChildren(d, false);\n        } else {\n            // Expand children\n            d.children = d._children;\n            d._children = null;\n\n            // Set each children as expanded\n            if (d.children) {\n                d.children.forEach(({ data }) => (data._expanded = true));\n            }\n        }\n\n        // Redraw Graph\n        this.update(d);\n        event.stopPropagation();\n\n        // Trigger callback\n        attrs.onExpandOrCollapse(d);\n\n    }\n\n    // This function changes `expanded` property to descendants\n    setExpansionFlagToChildren({ data, children, _children }, flag) {\n        // Set flag to the current property\n        data._expanded = flag;\n\n        // Loop over and recursively update expanded children's descendants\n        if (children) {\n            children.forEach((d) => {\n                this.setExpansionFlagToChildren(d, flag);\n            });\n        }\n\n        // Loop over and recursively update collapsed children's descendants\n        if (_children) {\n            _children.forEach((d) => {\n                this.setExpansionFlagToChildren(d, flag);\n            });\n        }\n    }\n\n\n    // Method which only expands nodes, which have property set \"expanded=true\"\n    expandSomeNodes(d) {\n        // If node has expanded property set\n        if (d.data._expanded) {\n            // Retrieve node's parent\n            let parent = d.parent;\n\n            // While we can go up\n            while (parent && parent._children) {\n                // Expand all current parent's children\n                parent.children = parent._children;\n                parent._children = null;\n                // Replace current parent holding object\n                parent = parent.parent;\n            }\n        }\n\n        // Recursively do the same for collapsed nodes\n        if (d._children) {\n            d._children.forEach((ch) => this.expandSomeNodes(ch));\n        }\n\n        // Recursively do the same for expanded nodes\n        if (d.children) {\n            d.children.forEach((ch) => this.expandSomeNodes(ch));\n        }\n    }\n\n    // This function updates nodes state and redraws graph, usually after data change\n    updateNodesState() {\n        const attrs = this.getChartState();\n\n\n        this.setLayouts({ expandNodesFirst: true });\n\n        // Redraw Graphs\n        this.update(attrs.root);\n    }\n\n    setLayouts({ expandNodesFirst = true }) {\n        const attrs = this.getChartState();\n        // Store new root by converting flat data to hierarchy\n\n        attrs.generateRoot = d3\n            .stratify()\n            .id((d) => attrs.nodeId(d))\n            .parentId(d => attrs.parentNodeId(d))\n        attrs.root = attrs.generateRoot(attrs.data);\n\n        const descendantsBefore = attrs.root.descendants();\n        if (attrs.initialExpandLevel > 1 && descendantsBefore.length > 0) {\n            descendantsBefore.forEach((d) => {\n                if (d.depth <= attrs.initialExpandLevel) {\n                    d.data._expanded = true;\n                }\n            })\n            attrs.initialExpandLevel = 1;\n        }\n\n\n        const hiddenNodesMap = {};\n        attrs.root.descendants()\n            .filter(node => node.children)\n            .filter(node => !node.data._pagingStep)\n            .forEach(node => {\n                node.data._pagingStep = attrs.minPagingVisibleNodes(node);\n            })\n\n\n\n        attrs.root.eachBefore((node, i) => {\n            node.data._directSubordinatesPaging = node.children ? node.children.length : 0;\n            if (node.children) {\n                node.children.forEach((child, j) => {\n                    child.data._pagingButton = false;\n                    if (j > node.data._pagingStep) {\n                        hiddenNodesMap[child.id] = true;\n                    }\n                    if (j === node.data._pagingStep && (node.children.length - 1) > node.data._pagingStep) {\n                        child.data._pagingButton = true;\n                    }\n                    if (hiddenNodesMap[child.parent.id]) {\n                        hiddenNodesMap[child.id] = true;\n                    }\n                    if (child.data._expanded || child.data._centered || child.data._highlighted || child.data._upToTheRootHighlighted) {\n                        let localNode = child;\n                        while (localNode && (hiddenNodesMap[localNode.id] || localNode.data._pagingButton)) {\n                            hiddenNodesMap[localNode.id] = false;\n                            if (localNode.data._pagingButton) {\n                                localNode.data._pagingButton = false;\n                                localNode.parent.children.forEach(ch => {\n                                    ch.data._expanded = true;\n                                    hiddenNodesMap[ch.id] = false;\n                                })\n                            }\n                            localNode = localNode.parent;\n                        }\n                    }\n                })\n            }\n        })\n\n\n        attrs.root = d3\n            .stratify()\n            .id((d) => attrs.nodeId(d))\n            .parentId(d => attrs.parentNodeId(d))(attrs.data.filter(d => hiddenNodesMap[d.id] !== true));\n\n        attrs.root.each((node, i, arr) => {\n            let _hierarchyHeight = node._hierarchyHeight || node.height\n            let width = attrs.nodeWidth(node);\n            let height = attrs.nodeHeight(node);\n            Object.assign(node, { width, height, _hierarchyHeight })\n        })\n\n        // Store positions, where children appear during their enter animation\n        attrs.root.x0 = 0;\n        attrs.root.y0 = 0;\n        attrs.allNodes = attrs.root.descendants();\n\n        // Store direct and total descendants count\n        attrs.allNodes.forEach((d) => {\n            Object.assign(d.data, {\n                _directSubordinates: d.children ? d.children.length : 0,\n                _totalSubordinates: d.descendants().length - 1\n            });\n        });\n\n        if (attrs.root.children) {\n            if (expandNodesFirst) {\n                // Expand all nodes first\n                attrs.root.children.forEach(this.expand);\n            }\n            // Then collapse them all\n            attrs.root.children.forEach((d) => this.collapse(d));\n\n            // Collapse root if level is 0\n            if (attrs.initialExpandLevel == 0) {\n                attrs.root._children = attrs.root.children;\n                attrs.root.children = null;\n            }\n\n            // Then only expand nodes, which have expanded property set to true\n            [attrs.root].forEach((ch) => this.expandSomeNodes(ch));\n        }\n    }\n\n    // Function which collapses passed node and it's descendants\n    collapse(d) {\n        if (d.children) {\n            d._children = d.children;\n            d._children.forEach((ch) => this.collapse(ch));\n            d.children = null;\n        }\n    }\n\n    // Function which expands passed node and it's descendants\n    expand(d) {\n        if (d._children) {\n            d.children = d._children;\n            d.children.forEach((ch) => this.expand(ch));\n            d._children = null;\n        }\n    }\n\n    // Zoom handler function\n    zoomed(event, d) {\n        const attrs = this.getChartState();\n        const chart = attrs.chart;\n\n        // Get d3 event's transform object\n        const transform = event.transform;\n\n        // Store it\n        attrs.lastTransform = transform;\n\n        // Reposition and rescale chart accordingly\n        chart.attr(\"transform\", transform);\n\n        // Apply new styles to the foreign object element\n        if (this.isEdge()) {\n            this.restyleForeignObjectElements();\n        }\n    }\n\n    zoomTreeBounds({ x0, x1, y0, y1, params = { animate: true, scale: true, onCompleted: () => { } } }) {\n        const { centerG, svgWidth: w, svgHeight: h, svg, zoomBehavior, duration, lastTransform } = this.getChartState()\n        let scaleVal = Math.min(8, 0.9 / Math.max((x1 - x0) / w, (y1 - y0) / h));\n        let identity = d3.zoomIdentity.translate(w / 2, h / 2)\n        identity = identity.scale(params.scale ? scaleVal : lastTransform.k)\n\n        identity = identity.translate(-(x0 + x1) / 2, -(y0 + y1) / 2);\n        // Transition zoom wrapper component into specified bounds\n        svg.transition().duration(params.animate ? duration : 0).call(zoomBehavior.transform, identity);\n        centerG.transition().duration(params.animate ? duration : 0).attr('transform', 'translate(0,0)')\n            .on('end', function () {\n                if (params.onCompleted) {\n                    params.onCompleted()\n                }\n            })\n    }\n\n    fit({ animate = true, nodes, scale = true, onCompleted = () => { } } = {}) {\n        const attrs = this.getChartState();\n        const { root } = attrs;\n        let descendants = nodes ? nodes : root.descendants();\n        const minX = d3.min(descendants, d => d.x + attrs.layoutBindings[attrs.layout].nodeLeftX(d))\n        const maxX = d3.max(descendants, d => d.x + attrs.layoutBindings[attrs.layout].nodeRightX(d))\n        const minY = d3.min(descendants, d => d.y + attrs.layoutBindings[attrs.layout].nodeTopY(d))\n        const maxY = d3.max(descendants, d => d.y + attrs.layoutBindings[attrs.layout].nodeBottomY(d))\n\n        this.zoomTreeBounds({\n            params: { animate: animate, scale, onCompleted },\n            x0: minX - 50,\n            x1: maxX + 50,\n            y0: minY - 50,\n            y1: maxY + 50,\n\n        });\n        return this;\n    }\n\n    // Load Paging Nodes\n    loadPagingNodes(node) {\n        const attrs = this.getChartState();\n        node.data._pagingButton = false;\n        const current = node.parent.data._pagingStep;\n        const step = attrs.pagingStep(node.parent)\n        const newPagingIndex = current + step;\n        node.parent.data._pagingStep = newPagingIndex;\n        this.updateNodesState();\n    }\n\n    // This function can be invoked via chart.setExpanded API, it expands or collapses particular node\n    setExpanded(id, expandedFlag = true) {\n\n        const attrs = this.getChartState();\n        // Retrieve node by node Id\n        const node = attrs.allNodes.filter(({ data }) => attrs.nodeId(data) == id)[0];\n\n        if (!node) {\n            console.log(`ORG CHART - ${expandedFlag ? \"EXPAND\" : \"COLLAPSE\"} - Node with id (${id})  not found in the tree`)\n            return this;\n        }\n        node.data._expanded = expandedFlag;\n        if (expandedFlag == false) {\n            const parent = node.parent || { descendants: () => [] };\n            const descendants = parent.descendants().filter(d => d != parent);\n            descendants.forEach(d => d.data._expanded = false)\n        }\n\n\n        return this;\n    }\n\n    setCentered(nodeId) {\n        const attrs = this.getChartState();\n        // this.setExpanded(nodeId)\n        const root = attrs.generateRoot(attrs.data)\n        const descendants = root.descendants();\n        const node = descendants.filter(({ data }) => attrs.nodeId(data).toString() == nodeId.toString())[0];\n        if (!node) {\n            console.log(`ORG CHART - CENTER - Node with id (${nodeId}) not found in the tree`)\n            return this;\n        }\n        const ancestors = node.ancestors();\n        ancestors.forEach(d => d.data._expanded = true)\n        node.data._centered = true;\n        node.data._expanded = true;\n        return this;\n    }\n\n    setHighlighted(nodeId) {\n        const attrs = this.getChartState();\n        const root = attrs.generateRoot(attrs.data)\n        const descendants = root.descendants();\n        const node = descendants.filter(d => attrs.nodeId(d.data).toString() === nodeId.toString())[0];\n        if (!node) {\n            console.log(`ORG CHART - HIGHLIGHT - Node with id (${nodeId})  not found in the tree`);\n            return this\n        }\n        const ancestors = node.ancestors();\n        ancestors.forEach(d => d.data._expanded = true)\n        node.data._highlighted = true;\n        node.data._expanded = true;\n        node.data._centered = true;\n        return this;\n    }\n\n    setUpToTheRootHighlighted(nodeId) {\n        const attrs = this.getChartState();\n        const root = attrs.generateRoot(attrs.data)\n        const descendants = root.descendants();\n        const node = descendants.filter(d => attrs.nodeId(d.data).toString() === nodeId.toString())[0];\n        if (!node) {\n            console.log(`ORG CHART - HIGHLIGHTROOT - Node with id (${nodeId}) not found in the tree`)\n            return this;\n        }\n        const ancestors = node.ancestors();\n        ancestors.forEach(d => d.data._expanded = true)\n        node.data._upToTheRootHighlighted = true;\n        node.data._expanded = true;\n        node.ancestors().forEach(d => d.data._upToTheRootHighlighted = true)\n        return this;\n    }\n\n    clearHighlighting() {\n        const attrs = this.getChartState();\n        attrs.allNodes.forEach(d => {\n            d.data._highlighted = false;\n            d.data._upToTheRootHighlighted = false;\n        })\n        this.update(attrs.root);\n        return this;\n    }\n\n    // It can take selector which would go fullscreen\n    fullscreen(elem) {\n        const attrs = this.getChartState();\n        const el = d3.select(elem || attrs.container).node();\n\n        d3.select(document).on('fullscreenchange.' + attrs.id, function (d) {\n            const fsElement = document.fullscreenElement || document.mozFullscreenElement || document.webkitFullscreenElement;\n            if (fsElement == el) {\n                setTimeout(d => {\n                    attrs.svg.attr('height', window.innerHeight - 40);\n                }, 500)\n            } else {\n                attrs.svg.attr('height', attrs.svgHeight)\n            }\n        })\n\n        if (el.requestFullscreen) {\n            el.requestFullscreen();\n        } else if (el.mozRequestFullScreen) {\n            el.mozRequestFullScreen();\n        } else if (el.webkitRequestFullscreen) {\n            el.webkitRequestFullscreen();\n        } else if (el.msRequestFullscreen) {\n            el.msRequestFullscreen();\n        }\n    }\n\n    // Zoom in exposed method\n    zoomIn() {\n        const { svg, zoomBehavior } = this.getChartState();\n        svg.transition().call(zoomBehavior.scaleBy, 1.3);\n    }\n\n    // Zoom out exposed method\n    zoomOut() {\n        const { svg, zoomBehavior } = this.getChartState();\n        svg.transition().call(zoomBehavior.scaleBy, 0.78);\n    }\n\n    toDataURL(url, callback) {\n        var xhr = new XMLHttpRequest();\n        xhr.onload = function () {\n            var reader = new FileReader();\n            reader.onloadend = function () {\n                callback(reader.result);\n            }\n            reader.readAsDataURL(xhr.response);\n        };\n        xhr.open('GET', url);\n        xhr.responseType = 'blob';\n        xhr.send();\n    }\n\n    exportImg({ full = false, scale = 3, onLoad = d => d, save = true, backgroundColor = \"#FAFAFA\" } = {}) {\n        const that = this;\n        const attrs = this.getChartState();\n        const { svg: svgImg, root } = attrs\n        let count = 0;\n        const selection = svgImg.selectAll('img')\n        let total = selection.size()\n\n        const exportImage = () => {\n            const transform = JSON.parse(JSON.stringify(that.lastTransform()));\n            const duration = that.duration();\n            if (full) {\n                that.fit();\n            }\n            const { svg } = that.getChartState()\n\n            setTimeout(d => {\n                that.downloadImage({\n                    node: svg.node(), scale,\n                    isSvg: false,\n                    backgroundColor,\n                    onAlreadySerialized: d => {\n                        that.update(root)\n                    },\n                    imageName: attrs.imageName,\n                    onLoad: onLoad,\n                    save\n                })\n            }, full ? duration + 10 : 0)\n        }\n\n        if (total > 0) {\n            selection\n                .each(function () {\n                    that.toDataURL(this.src, (dataUrl) => {\n                        this.src = dataUrl;\n                        if (++count == total) {\n                            exportImage();\n                        }\n                    })\n                })\n        } else {\n            exportImage();\n        }\n\n\n    }\n\n\n\n    exportSvg() {\n        const { svg, imageName } = this.getChartState();\n        this.downloadImage({ imageName: imageName, node: svg.node(), scale: 3, isSvg: true })\n        return this;\n    }\n\n    expandAll() {\n        const { allNodes, root, data } = this.getChartState();\n        data.forEach(d => d._expanded = true)\n        // allNodes.forEach(d => d.data._expanded = true);\n        this.render()\n        return this;\n    }\n\n    collapseAll() {\n        const { allNodes, root } = this.getChartState();\n        allNodes.forEach(d => d.data._expanded = false);\n        this.initialExpandLevel(0)\n        this.render();\n        return this;\n    }\n\n    downloadImage({ node, scale = 2, imageName = 'graph', isSvg = false, save = true, backgroundColor = \"#FAFAFA\", onAlreadySerialized = d => { }, onLoad = d => { } }) {\n        // Retrieve svg node\n        const svgNode = node;\n\n        function saveAs(uri, filename) {\n            // create link\n            var link = document.createElement('a');\n            if (typeof link.download === 'string') {\n                document.body.appendChild(link); // Firefox requires the link to be in the body\n                link.download = filename;\n                link.href = uri;\n                link.click();\n                document.body.removeChild(link); // remove the link when done\n            } else {\n                location.replace(uri);\n            }\n        }\n        // This function serializes SVG and sets all necessary attributes\n        function serializeString(svg) {\n            const xmlns = 'http://www.w3.org/2000/xmlns/';\n            const xlinkns = 'http://www.w3.org/1999/xlink';\n            const svgns = 'http://www.w3.org/2000/svg';\n            svg = svg.cloneNode(true);\n            const fragment = window.location.href + '#';\n            const walker = document.createTreeWalker(svg, NodeFilter.SHOW_ELEMENT, null, false);\n            while (walker.nextNode()) {\n                for (const attr of walker.currentNode.attributes) {\n                    if (attr.value.includes(fragment)) {\n                        attr.value = attr.value.replace(fragment, '#');\n                    }\n                }\n            }\n            svg.setAttributeNS(xmlns, 'xmlns', svgns);\n            svg.setAttributeNS(xmlns, 'xmlns:xlink', xlinkns);\n            const serializer = new XMLSerializer();\n            const string = serializer.serializeToString(svg);\n            return string;\n        }\n\n        if (isSvg) {\n            let source = serializeString(svgNode);\n            //add xml declaration\n            source = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n' + source;\n            //convert svg source to URI data scheme.\n            var url = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(source);\n            saveAs(url, imageName + \".svg\");\n            onAlreadySerialized()\n            return;\n        }\n        // Get image quality index (basically,  index you can zoom in)\n        const quality = scale\n        // Create image\n        const image = document.createElement('img');\n        image.onload = function () {\n            // Create image canvas\n            const canvas = document.createElement('canvas');\n            // Set width and height based on SVG node\n            const rect = svgNode.getBoundingClientRect();\n            canvas.width = rect.width * quality;\n            canvas.height = rect.height * quality;\n            // Draw background\n            const context = canvas.getContext('2d');\n            context.fillStyle = backgroundColor;;\n            context.fillRect(0, 0, rect.width * quality, rect.height * quality);\n            context.drawImage(image, 0, 0, rect.width * quality, rect.height * quality);\n            // Set some image metadata\n            let dt = canvas.toDataURL('image/png');\n            if (onLoad) {\n                onLoad(dt)\n            }\n            if (save) {\n                // Invoke saving function\n                saveAs(dt, imageName + '.png');\n            }\n\n        };\n\n        var url = 'data:image/svg+xml; charset=utf8, ' + encodeURIComponent(serializeString(svgNode));\n\n        onAlreadySerialized()\n\n        image.src = url// URL.createObjectURL(blob);\n        // This function invokes save window\n\n    }\n\n    // Calculate what size text will take\n    getTextWidth(text, {\n        fontSize = 14,\n        fontWeight = 400,\n        defaultFont = \"Helvetice\",\n        ctx\n    } = {}) {\n        ctx.font = `${fontWeight || ''} ${fontSize}px ${defaultFont} `\n        const measurement = ctx.measureText(text);\n        return measurement.width;\n    }\n\n    // Clear after moving off from the page\n    clear() {\n        const attrs = this.getChartState();\n        d3.select(window).on(`resize.${attrs.id}`, null);\n        attrs.svg && attrs.svg.selectAll(\"*\").remove();\n    }\n}","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div class=\"org-chart\">\n\t\t<div v-if=\"data.length > 1\" class=\"org-chart__menu\">\n\t\t\t<h3>\n\t\t\t\t{{ t('contacts', 'Chart') }}:\n\t\t\t</h3>\n\t\t\t<NcSelect v-model=\"chart\"\n\t\t\t\tclass=\"chart-selection\"\n\t\t\t\t:disabled=\"data.length === 1\"\n\t\t\t\t:options=\"charts\"\n\t\t\t\t:allow-empty=\"false\"\n\t\t\t\t:searchable=\"false\"\n\t\t\t\t:placeholder=\"placeholder\"\n\t\t\t\tinput-id=\"select-chart-input\"\n\t\t\t\tlabel=\"label\"\n\t\t\t\t@input=\"chartChanged\" />\n\t\t</div>\n\t\t<div ref=\"svgElementContainer\" class=\"org-chart__container\" />\n\t</div>\n</template>\n\n<script>\nimport * as d3 from 'd3'\nimport ChartTemplate from './ChartTemplate.vue'\nimport { getLocale } from '@nextcloud/l10n'\nimport { NcSelect } from '@nextcloud/vue'\nimport { OrgChart } from 'd3-org-chart'\nimport router from './../router/index.js'\nimport Vue from 'vue'\n\nexport default {\n\tname: 'OrgChart',\n\tcomponents: {\n\t\tNcSelect,\n\t},\n\tprops: {\n\t\tdata: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tchartReference: null,\n\t\t\tchart: 0,\n\t\t}\n\t},\n\tcomputed: {\n\t\tcharts() {\n\t\t\treturn this.data.map((nodes, index) => {\n\t\t\t\tconst head = nodes.find(node => node.parentNodeId === null)\n\t\t\t\treturn {\n\t\t\t\t\tid: index,\n\t\t\t\t\tlabel: head.org ? `${head.org} (${head.fullName})` : head.fullName,\n\t\t\t\t}\n\t\t\t}).sort((a, b) => {\n\t\t\t\treturn a.label.localeCompare(\n\t\t\t\t\tb.label,\n\t\t\t\t\tgetLocale().replace('_', '-'),\n\t\t\t\t\t{ sensitivity: 'base' },\n\t\t\t\t)\n\t\t\t})\n\t\t},\n\t\tplaceholder() {\n\t\t\treturn t('contacts', 'Select chart ')\n\t\t},\n\t},\n\twatch: {\n\t\tdata() {\n\t\t\tif (this.data[this.chart]?.length) {\n\t\t\t\tthis.renderChart(this.data[this.chart])\n\t\t\t}\n\t\t},\n\t},\n\tmounted() {\n\t\tif (this.data[this.chart]?.length) {\n\t\t\tthis.renderChart(this.data[this.chart])\n\t\t}\n\t},\n\tmethods: {\n\t\tchartChanged(inputProps) {\n\t\t\tthis.renderChart(this.data[inputProps.id])\n\t\t},\n\t\tgoToContact(key) {\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'contact',\n\t\t\t\tparams: {\n\t\t\t\t\tselectedGroup: this.$route.params.selectedChart,\n\t\t\t\t\tselectedContact: key,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\trenderChart(data) {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-this-alias\n\t\t\tconst that = this\n\t\t\tif (!this.chartReference) {\n\t\t\t\tthis.chartReference = new OrgChart()\n\t\t\t}\n\n\t\t\tthis.chartReference\n\t\t\t\t.container(this.$refs.svgElementContainer) // node or css selector\n\t\t\t\t.data(data)\n\t\t\t\t.nodeWidth(() => 250)\n\t\t\t\t.initialZoom(1)\n\t\t\t\t.nodeHeight(() => 200)\n\t\t\t\t.childrenMargin(() => 70)\n\t\t\t\t.compactMarginBetween(() => 15)\n\t\t\t\t.compactMarginPair(() => 80)\n\t\t\t\t.nodeContent(() => {\n\t\t\t\t\treturn ''\n\t\t\t\t})\n\t\t\t\t.nodeUpdate(function(d) {\n\t\t\t\t\t// Render vue component node template for each node\n\t\t\t\t\tconst containerHTMLElement = this.querySelector('.node-foreign-object-div')\n\t\t\t\t\tif (containerHTMLElement) {\n\t\t\t\t\t\t// Avoid re-render if already we have rendered component\n\t\t\t\t\t\tif (d.data.rendered) {\n\t\t\t\t\t\t\tcontainerHTMLElement.appendChild(d.data.rendered)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst ComponentClass = Vue.extend(ChartTemplate)\n\t\t\t\t\t\t\tconst instance = new ComponentClass({\n\t\t\t\t\t\t\t\tpropsData: {\n\t\t\t\t\t\t\t\t\tdata: d.data,\n\t\t\t\t\t\t\t\t\tonAvatarClick: (uid) => that.goToContact(uid),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trouter,\n\t\t\t\t\t\t\t}).$mount()\n\t\t\t\t\t\t\td.data.rendered = instance.$el\n\t\t\t\t\t\t\tcontainerHTMLElement.appendChild(instance.$el)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t.select('.inner-box')\n\t\t\t\t\t\t.attr('class', (dRect) => dRect.data._highlighted || dRect.data._upToTheRootHighlighted ? 'inner-box inner-box-highlight' : 'inner-box')\n\t\t\t\t})\n\t\t\t\t.linkUpdate(function(d) {\n\t\t\t\t\td3.select(this)\n\t\t\t\t\t\t.attr('stroke', () => 'var(--color-primary-element)')\n\t\t\t\t\t\t.attr('stroke-width', (dRect) =>\n\t\t\t\t\t\t\tdRect.data._upToTheRootHighlighted ? 2 : 1,\n\t\t\t\t\t\t)\n\n\t\t\t\t\tif (d.data._upToTheRootHighlighted) {\n\t\t\t\t\t\td3.select(this).raise()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.onNodeClick(d => {\n\t\t\t\t\tif (!this.chartReference.data().filter(item => item.nodeId === d)[0]._upToTheRootHighlighted) {\n\t\t\t\t\t\tthis.chartReference.clearHighlighting()\n\t\t\t\t\t\tthis.chartReference.setUpToTheRootHighlighted(d).render()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.chartReference.clearHighlighting()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.render()\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.org-chart {\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\n\t&__menu {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tjustify-content: flex-start;\n\t\tborder: 1px solid var(--color-border);\n\n\t\th3 {\n\t\t\tpadding-left: 50px;\n\t\t\tpadding-right: 10px;\n\t\t\tmargin: 9px 0;\n\t\t}\n\t}\n\n\t&__container {\n\t\tdisplay: flex;\n\t\tbackground-color: var(--color-main-background);\n\t\theight: 100%;\n\n\t\tsvg {\n\t\t\theight: 100%;\n\t\t}\n\t}\n\n\t.node-button-div {\n\t\tfilter: var(--background-invert-if-dark);\n\n\t\t& > div > div {\n\t\t\tfilter: var(--background-invert-if-dark);\n\t\t}\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<AppContent>\n\t\t<OrgChart :data=\"transformData\" />\n\t</AppContent>\n</template>\n\n<script>\nimport { NcAppContent as AppContent } from '@nextcloud/vue'\n\nimport OrgChart from '../OrgChart.vue'\nimport { getChart, transformNode } from '../../utils/chartUtils.js'\n\nexport default {\n\tname: 'ChartContent',\n\tcomponents: {\n\t\tAppContent,\n\t\tOrgChart,\n\t},\n\tprops: {\n\t\tcontactsList: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdata: [],\n\t\t\tsearchQuery: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\ttransformData() {\n\t\t\tconst contactsByUid = {}\n\t\t\tconst contacts = Object.keys(this.contactsList).map(key => {\n\t\t\t\tconst [uid, addressbook] = key.split('~')\n\t\t\t\tif (!contactsByUid[addressbook]) {\n\t\t\t\t\tcontactsByUid[addressbook] = {}\n\t\t\t\t}\n\t\t\t\treturn (contactsByUid[addressbook][uid] = this.contactsList[key])\n\t\t\t})\n\n\t\t\tconst headManagers = []\n\t\t\tconst tempContacts = contacts.filter(contact => contact.managersName).reduce((prev, contact) => {\n\t\t\t\tprev.push(transformNode(contact))\n\n\t\t\t\tconst manager = contactsByUid[contact.addressbook.id][contact.managersName]\n\t\t\t\tif (manager && !manager.managersName && !headManagers.some(m => m.nodeId === manager.uid)) {\n\t\t\t\t\tprev.push(transformNode(manager))\n\t\t\t\t\theadManagers.push(transformNode(manager))\n\t\t\t\t}\n\t\t\t\treturn prev\n\t\t\t}, [])\n\n\t\t\tconst charts = headManagers.map(managerNode => getChart(tempContacts, managerNode))\n\t\t\t// Debugging logs to figure out why a graph might not show. Leave this in place until the logic is bulletproof\n\t\t\tconsole.debug('Org charts', charts.map((nodes, index) => nodes.map(n => `list ${index} ${n.nodeId} (${n.fullName}) -> ${n.parentNodeId}`)))\n\t\t\treturn charts\n\t\t},\n\t},\n}\n</script>\n","const enc = new TextEncoder();\nconst dec = new TextDecoder();\nexport function encode(inData, parse_url) {\n    let str;\n    let data;\n    if (typeof inData === \"string\" || typeof inData === \"number\") {\n        str = `${inData}`;\n        data = enc.encode(str);\n    }\n    else if (typeof Buffer !== \"undefined\" && Buffer.isBuffer(data)) {\n        str = inData.toString();\n    }\n    else if (Array.isArray(inData)) {\n        data = new Uint8Array(inData);\n        str = dec.decode(inData);\n    }\n    else {\n        throw new Error(\"Bad data: \" + typeof inData);\n    }\n    if (/^[0-9]+$/.test(str)) {\n        if (data.byteLength > 7089) {\n            throw new Error(\"Too much data\");\n        }\n        return encode_numeric(str);\n    }\n    if (/^[0-9A-Z \\$%\\*\\+\\.\\/\\:\\-]+$/.test(str)) {\n        if (data.byteLength > 4296) {\n            throw new Error(\"Too much data\");\n        }\n        return encode_alphanum(str);\n    }\n    if (parse_url && /^https?:/i.test(str)) {\n        return encode_url(str);\n    }\n    if (data.byteLength > 2953) {\n        throw new Error(\"Too much data\");\n    }\n    return encode_8bit(new Uint8Array(data));\n}\nfunction pushBits(arr, n, value) {\n    for (let bit = 1 << (n - 1); bit; bit >>>= 1) {\n        arr.push(bit & value ? 1 : 0);\n    }\n}\nfunction encode_8bit(data) {\n    const len = data.byteLength;\n    const bits = [];\n    for (let i = 0; i < len; i++) {\n        pushBits(bits, 8, data[i]);\n    }\n    const res = {};\n    let d = [0, 1, 0, 0];\n    pushBits(d, 16, len);\n    res.data10 = res.data27 = d.concat(bits);\n    if (len < 256) {\n        let d = [0, 1, 0, 0];\n        pushBits(d, 8, len);\n        res.data1 = d.concat(bits);\n    }\n    return res;\n}\nconst ALPHANUM = (function (s) {\n    const res = {};\n    for (let i = 0; i < s.length; i++) {\n        res[s[i]] = i;\n    }\n    return res;\n})(\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:\");\nfunction encode_alphanum(str) {\n    const len = str.length;\n    const bits = [];\n    for (let i = 0; i < len; i += 2) {\n        let b = 6;\n        let n = ALPHANUM[str[i]];\n        if (str[i + 1]) {\n            b = 11;\n            n = n * 45 + ALPHANUM[str[i + 1]];\n        }\n        pushBits(bits, b, n);\n    }\n    const res = {};\n    let d = [0, 0, 1, 0];\n    pushBits(d, 13, len);\n    res.data27 = d.concat(bits);\n    if (len < 2048) {\n        let d = [0, 0, 1, 0];\n        pushBits(d, 11, len);\n        res.data10 = d.concat(bits);\n    }\n    if (len < 512) {\n        let d = [0, 0, 1, 0];\n        pushBits(d, 9, len);\n        res.data1 = d.concat(bits);\n    }\n    return res;\n}\nfunction encode_numeric(str) {\n    const len = str.length;\n    const bits = [];\n    for (let i = 0; i < len; i += 3) {\n        const s = str.substr(i, 3);\n        const b = Math.ceil((s.length * 10) / 3);\n        pushBits(bits, b, parseInt(s, 10));\n    }\n    const res = {};\n    let d = [0, 0, 0, 1];\n    pushBits(d, 14, len);\n    res.data27 = d.concat(bits);\n    if (len < 4096) {\n        let d = [0, 0, 0, 1];\n        pushBits(d, 12, len);\n        res.data10 = d.concat(bits);\n    }\n    if (len < 1024) {\n        let d = [0, 0, 0, 1];\n        pushBits(d, 10, len);\n        res.data1 = d.concat(bits);\n    }\n    return res;\n}\nfunction encode_url(str) {\n    const slash = str.indexOf(\"/\", 8) + 1 || str.length;\n    const res = encode(str.slice(0, slash).toUpperCase(), false);\n    if (slash >= str.length) {\n        return res;\n    }\n    const path_res = encode(str.slice(slash), false);\n    res.data27 = res.data27.concat(path_res.data27);\n    if (res.data10 && path_res.data10) {\n        res.data10 = res.data10.concat(path_res.data10);\n    }\n    if (res.data1 && path_res.data1) {\n        res.data1 = res.data1.concat(path_res.data1);\n    }\n    return res;\n}\n//# sourceMappingURL=encode.js.map","export function calculateEC(msg, ec_len) {\n    msg = [].slice.call(msg);\n    const poly = generatorPolynomial(ec_len);\n    for (let i = 0; i < ec_len; i++)\n        msg.push(0);\n    while (msg.length > ec_len) {\n        if (!msg[0]) {\n            msg.shift();\n            continue;\n        }\n        const log_k = log(msg[0]);\n        for (let i = 0; i <= ec_len; i++) {\n            msg[i] = msg[i] ^ exp(poly[i] + log_k);\n        }\n        msg.shift();\n    }\n    return new Uint8Array(msg);\n}\nconst GF256_BASE = 285;\nconst EXP_TABLE = [1];\nconst LOG_TABLE = [];\nfor (let i = 1; i < 256; i++) {\n    let n = EXP_TABLE[i - 1] << 1;\n    if (n > 255)\n        n ^= GF256_BASE;\n    EXP_TABLE[i] = n;\n}\nfor (let i = 0; i < 255; i++) {\n    LOG_TABLE[EXP_TABLE[i]] = i;\n}\nfunction exp(k) {\n    while (k < 0)\n        k += 255;\n    while (k > 255)\n        k -= 255;\n    return EXP_TABLE[k];\n}\nfunction log(k) {\n    if (k < 1 || k > 255) {\n        throw Error(`Bad log(${k})`);\n    }\n    return LOG_TABLE[k];\n}\nconst POLYNOMIALS = [\n    [0],\n    [0, 0],\n    [0, 25, 1],\n];\nfunction generatorPolynomial(num) {\n    if (POLYNOMIALS[num]) {\n        return POLYNOMIALS[num];\n    }\n    const prev = generatorPolynomial(num - 1);\n    const res = [];\n    res[0] = prev[0];\n    for (let i = 1; i <= num; i++) {\n        res[i] = log(exp(prev[i]) ^ exp(prev[i - 1] + num - 1));\n    }\n    POLYNOMIALS[num] = res;\n    return res;\n}\n//# sourceMappingURL=errorcode.js.map","export function init(version) {\n    const N = (version << 2) + 0b10001;\n    const matrix = [];\n    let zeros = Array(N).fill(0);\n    for (let i = 0; i < N; i++) {\n        matrix[i] = [...zeros];\n    }\n    return matrix;\n}\nexport function fillFinders(matrix) {\n    const N = matrix.length;\n    for (var i = -3; i <= 3; i++) {\n        for (let j = -3; j <= 3; j++) {\n            const max = Math.max(i, j);\n            const min = Math.min(i, j);\n            const pixel = (max == 2 && min >= -2) || (min == -2 && max <= 2)\n                ? 0x80\n                : 0x81;\n            matrix[3 + i][3 + j] = pixel;\n            matrix[3 + i][N - 4 + j] = pixel;\n            matrix[N - 4 + i][3 + j] = pixel;\n        }\n    }\n    for (var i = 0; i < 8; i++) {\n        matrix[7][i] =\n            matrix[i][7] =\n                matrix[7][N - i - 1] =\n                    matrix[i][N - 8] =\n                        matrix[N - 8][i] =\n                            matrix[N - 1 - i][7] =\n                                0x80;\n    }\n}\nexport function fillAlignAndTiming(matrix) {\n    const N = matrix.length;\n    if (N > 21) {\n        const len = N - 13;\n        let delta = Math.round(len / Math.ceil(len / 28));\n        if (delta % 2)\n            delta++;\n        const res = [];\n        for (let p = len + 6; p > 10; p -= delta) {\n            res.unshift(p);\n        }\n        res.unshift(6);\n        for (var i = 0; i < res.length; i++) {\n            for (let j = 0; j < res.length; j++) {\n                const x = res[i];\n                const y = res[j];\n                if (matrix[x][y])\n                    continue;\n                for (let r = -2; r <= 2; r++) {\n                    for (let c = -2; c <= 2; c++) {\n                        const max = Math.max(r, c);\n                        const min = Math.min(r, c);\n                        const pixel = (max == 1 && min >= -1) || (min == -1 && max <= 1)\n                            ? 0x80\n                            : 0x81;\n                        matrix[x + r][y + c] = pixel;\n                    }\n                }\n            }\n        }\n    }\n    for (var i = 8; i < N - 8; i++) {\n        matrix[6][i] = matrix[i][6] = i % 2 ? 0x80 : 0x81;\n    }\n}\nexport function fillStub(matrix) {\n    const N = matrix.length;\n    for (var i = 0; i < 8; i++) {\n        if (i != 6) {\n            matrix[8][i] = matrix[i][8] = 0x80;\n        }\n        matrix[8][N - 1 - i] = 0x80;\n        matrix[N - 1 - i][8] = 0x80;\n    }\n    matrix[8][8] = 0x80;\n    matrix[N - 8][8] = 0x81;\n    if (N < 45)\n        return;\n    for (var i = N - 11; i < N - 8; i++) {\n        for (let j = 0; j < 6; j++) {\n            matrix[i][j] = matrix[j][i] = 0x80;\n        }\n    }\n}\nexport const fillReserved = (function () {\n    const FORMATS = Array(32);\n    const VERSIONS = Array(40);\n    const gf15 = 0x0537;\n    const gf18 = 0x1f25;\n    const formats_mask = 0x5412;\n    for (let format = 0; format < 32; format++) {\n        let res = format << 10;\n        for (let i = 5; i > 0; i--) {\n            if (res >>> (9 + i)) {\n                res ^= gf15 << (i - 1);\n            }\n        }\n        FORMATS[format] = (res | (format << 10)) ^ formats_mask;\n    }\n    for (let version = 7; version <= 40; version++) {\n        let res = version << 12;\n        for (let i = 6; i > 0; i--) {\n            if (res >>> (11 + i)) {\n                res ^= gf18 << (i - 1);\n            }\n        }\n        VERSIONS[version] = res | (version << 12);\n    }\n    const EC_LEVELS = {\n        L: 1,\n        M: 0,\n        Q: 3,\n        H: 2,\n    };\n    return function fillReserved(matrix, ec_level, mask) {\n        const N = matrix.length;\n        const format = FORMATS[(EC_LEVELS[ec_level] << 3) | mask];\n        function F(k) {\n            return (format >> k) & 1 ? 0x81 : 0x80;\n        }\n        for (var i = 0; i < 8; i++) {\n            matrix[8][N - 1 - i] = F(i);\n            if (i < 6)\n                matrix[i][8] = F(i);\n        }\n        for (var i = 8; i < 15; i++) {\n            matrix[N - 15 + i][8] = F(i);\n            if (i > 8)\n                matrix[8][14 - i] = F(i);\n        }\n        matrix[7][8] = F(6);\n        matrix[8][8] = F(7);\n        matrix[8][7] = F(8);\n        const version = VERSIONS[(N - 17) / 4];\n        if (!version) {\n            return;\n        }\n        function V(k) {\n            return (version >> k) & 1 ? 0x81 : 0x80;\n        }\n        for (var i = 0; i < 6; i++) {\n            for (let j = 0; j < 3; j++) {\n                matrix[N - 11 + j][i] = matrix[i][N - 11 + j] = V(i * 3 + j);\n            }\n        }\n    };\n})();\nexport const fillData = (function () {\n    const MASK_FUNCTIONS = [\n        (i, j) => (i + j) % 2 == 0,\n        (i, j) => i % 2 == 0,\n        (i, j) => j % 3 == 0,\n        (i, j) => (i + j) % 3 == 0,\n        (i, j) => (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0,\n        (i, j) => ((i * j) % 2) + ((i * j) % 3) == 0,\n        (i, j) => (((i * j) % 2) + ((i * j) % 3)) % 2 == 0,\n        (i, j) => (((i * j) % 3) + ((i + j) % 2)) % 2 == 0,\n    ];\n    return function fillData(matrix, data, mask) {\n        const N = matrix.length;\n        let row;\n        let col;\n        let dir = -1;\n        row = col = N - 1;\n        const mask_fn = MASK_FUNCTIONS[mask];\n        let len = data.blocks[data.blocks.length - 1].length;\n        for (var i = 0; i < len; i++) {\n            for (var b = 0; b < data.blocks.length; b++) {\n                if (data.blocks[b].length <= i) {\n                    continue;\n                }\n                put(data.blocks[b][i]);\n            }\n        }\n        len = data.ec_len;\n        for (var i = 0; i < len; i++) {\n            for (var b = 0; b < data.ec.length; b++) {\n                put(data.ec[b][i]);\n            }\n        }\n        if (col > -1) {\n            do {\n                matrix[row][col] = mask_fn(row, col) ? 1 : 0;\n            } while (next());\n        }\n        function put(byte) {\n            for (let mask = 0x80; mask; mask >>= 1) {\n                let pixel = !!(mask & byte);\n                if (mask_fn(row, col))\n                    pixel = !pixel;\n                matrix[row][col] = pixel ? 1 : 0;\n                next();\n            }\n        }\n        function next() {\n            do {\n                if (col % 2 ^ Number(col < 6)) {\n                    if ((dir < 0 && row == 0) || (dir > 0 && row == N - 1)) {\n                        col--;\n                        dir = -dir;\n                    }\n                    else {\n                        col++;\n                        row += dir;\n                    }\n                }\n                else {\n                    col--;\n                }\n                if (col == 6) {\n                    col--;\n                }\n                if (col < 0) {\n                    return false;\n                }\n            } while (matrix[row][col] & 0xf0);\n            return true;\n        }\n    };\n})();\nexport function calculatePenalty(matrix) {\n    const N = matrix.length;\n    let penalty = 0;\n    for (var i = 0; i < N; i++) {\n        var pixel = matrix[i][0] & 1;\n        var len = 1;\n        for (var j = 1; j < N; j++) {\n            var p = matrix[i][j] & 1;\n            if (p == pixel) {\n                len++;\n                continue;\n            }\n            if (len >= 5) {\n                penalty += len - 2;\n            }\n            pixel = p;\n            len = 1;\n        }\n        if (len >= 5) {\n            penalty += len - 2;\n        }\n    }\n    for (var j = 0; j < N; j++) {\n        var pixel = matrix[0][j] & 1;\n        var len = 1;\n        for (var i = 1; i < N; i++) {\n            var p = matrix[i][j] & 1;\n            if (p == pixel) {\n                len++;\n                continue;\n            }\n            if (len >= 5) {\n                penalty += len - 2;\n            }\n            pixel = p;\n            len = 1;\n        }\n        if (len >= 5) {\n            penalty += len - 2;\n        }\n    }\n    for (var i = 0; i < N - 1; i++) {\n        for (var j = 0; j < N - 1; j++) {\n            const s = (matrix[i][j] +\n                matrix[i][j + 1] +\n                matrix[i + 1][j] +\n                matrix[i + 1][j + 1]) &\n                7;\n            if (s == 0 || s == 4) {\n                penalty += 3;\n            }\n        }\n    }\n    function I(k) {\n        return matrix[i][j + k] & 1;\n    }\n    function J(k) {\n        return matrix[i + k][j] & 1;\n    }\n    for (var i = 0; i < N; i++) {\n        for (var j = 0; j < N; j++) {\n            if (j < N - 6 &&\n                I(0) &&\n                !I(1) &&\n                I(2) &&\n                I(3) &&\n                I(4) &&\n                !I(5) &&\n                I(6)) {\n                if (j >= 4 && !(I(-4) || I(-3) || I(-2) || I(-1))) {\n                    penalty += 40;\n                }\n                if (j < N - 10 && !(I(7) || I(8) || I(9) || I(10))) {\n                    penalty += 40;\n                }\n            }\n            if (i < N - 6 &&\n                J(0) &&\n                !J(1) &&\n                J(2) &&\n                J(3) &&\n                J(4) &&\n                !J(5) &&\n                J(6)) {\n                if (i >= 4 && !(J(-4) || J(-3) || J(-2) || J(-1))) {\n                    penalty += 40;\n                }\n                if (i < N - 10 && !(J(7) || J(8) || J(9) || J(10))) {\n                    penalty += 40;\n                }\n            }\n        }\n    }\n    let numDark = 0;\n    for (var i = 0; i < N; i++) {\n        for (var j = 0; j < N; j++) {\n            if (matrix[i][j] & 1)\n                numDark++;\n        }\n    }\n    penalty += 10 * Math.floor(Math.abs(10 - (20 * numDark) / (N * N)));\n    return penalty;\n}\nexport function getMatrix(data) {\n    const matrix = init(data.version);\n    fillFinders(matrix);\n    fillAlignAndTiming(matrix);\n    fillStub(matrix);\n    let penalty = Infinity;\n    let bestMask = 0;\n    for (let mask = 0; mask < 8; mask++) {\n        fillData(matrix, data, mask);\n        fillReserved(matrix, data.ec_level, mask);\n        const p = calculatePenalty(matrix);\n        if (p < penalty) {\n            penalty = p;\n            bestMask = mask;\n        }\n    }\n    fillData(matrix, data, bestMask);\n    fillReserved(matrix, data.ec_level, bestMask);\n    return matrix.map((row) => row.map((cell) => cell & 1));\n}\n//# sourceMappingURL=matrix.js.map","import { encode } from \"./encode.js\";\nimport { calculateEC } from \"./errorcode.js\";\nimport { getMatrix } from \"./matrix.js\";\nconst EC_LEVELS = [\"L\", \"M\", \"Q\", \"H\"];\nexport function getTemplate(message, ec_level) {\n    let i = 1;\n    let len;\n    if (message.data1) {\n        len = Math.ceil(message.data1.length / 8);\n    }\n    else {\n        i = 10;\n    }\n    for (; i < 10; i++) {\n        let version = mappedVersions[i][ec_level];\n        if (version.data_len >= len) {\n            return deepCopy(version);\n        }\n    }\n    if (message.data10) {\n        len = Math.ceil(message.data10.length / 8);\n    }\n    else {\n        i = 27;\n    }\n    for (; i < 27; i++) {\n        let version = mappedVersions[i][ec_level];\n        if (version.data_len >= len) {\n            return deepCopy(version);\n        }\n    }\n    len = Math.ceil(message.data27.length / 8);\n    for (; i < 41; i++) {\n        let version = mappedVersions[i][ec_level];\n        if (version.data_len >= len) {\n            return deepCopy(version);\n        }\n    }\n    throw new Error(\"Too much data\");\n}\nexport function fillTemplate(message, template) {\n    const blocks = new Uint8Array(template.data_len);\n    let messageUpdated;\n    if (template.version < 10) {\n        messageUpdated = message.data1;\n    }\n    else if (template.version < 27) {\n        messageUpdated = message.data10;\n    }\n    else {\n        messageUpdated = message.data27;\n    }\n    const len = messageUpdated.length;\n    for (let i = 0; i < len; i += 8) {\n        let b = 0;\n        for (let j = 0; j < 8; j++) {\n            b = (b << 1) | (messageUpdated[i + j] ? 1 : 0);\n        }\n        blocks[i / 8] = b;\n    }\n    let pad = 236;\n    for (let i = Math.ceil((len + 4) / 8); i < blocks.length; i++) {\n        blocks[i] = pad;\n        pad = pad == 236 ? 17 : 236;\n    }\n    let offset = 0;\n    template.blocks = template.blocks.map((n) => {\n        const b = blocks.slice(offset, offset + n);\n        offset += n;\n        template.ec.push(calculateEC(b, template.ec_len));\n        return b;\n    });\n    return template;\n}\nexport function QR(text, ec_level, parse_url) {\n    ec_level = EC_LEVELS.includes(ec_level) ? ec_level : \"M\";\n    const message = encode(text, parse_url);\n    const data = fillTemplate(message, getTemplate(message, ec_level));\n    return getMatrix(data);\n}\nconst deepCopy = typeof structuredClone !== \"undefined\" ? structuredClone : ((obj) => JSON.parse(JSON.stringify(obj)));\nconst versions = [\n    [],\n    [26, 7, 1, 10, 1, 13, 1, 17, 1],\n    [44, 10, 1, 16, 1, 22, 1, 28, 1],\n    [70, 15, 1, 26, 1, 36, 2, 44, 2],\n    [100, 20, 1, 36, 2, 52, 2, 64, 4],\n    [134, 26, 1, 48, 2, 72, 4, 88, 4],\n    [172, 36, 2, 64, 4, 96, 4, 112, 4],\n    [196, 40, 2, 72, 4, 108, 6, 130, 5],\n    [242, 48, 2, 88, 4, 132, 6, 156, 6],\n    [292, 60, 2, 110, 5, 160, 8, 192, 8],\n    [346, 72, 4, 130, 5, 192, 8, 224, 8],\n    [404, 80, 4, 150, 5, 224, 8, 264, 11],\n    [466, 96, 4, 176, 8, 260, 10, 308, 11],\n    [532, 104, 4, 198, 9, 288, 12, 352, 16],\n    [581, 120, 4, 216, 9, 320, 16, 384, 16],\n    [655, 132, 6, 240, 10, 360, 12, 432, 18],\n    [733, 144, 6, 280, 10, 408, 17, 480, 16],\n    [815, 168, 6, 308, 11, 448, 16, 532, 19],\n    [901, 180, 6, 338, 13, 504, 18, 588, 21],\n    [991, 196, 7, 364, 14, 546, 21, 650, 25],\n    [1085, 224, 8, 416, 16, 600, 20, 700, 25],\n    [1156, 224, 8, 442, 17, 644, 23, 750, 25],\n    [1258, 252, 9, 476, 17, 690, 23, 816, 34],\n    [1364, 270, 9, 504, 18, 750, 25, 900, 30],\n    [1474, 300, 10, 560, 20, 810, 27, 960, 32],\n    [1588, 312, 12, 588, 21, 870, 29, 1050, 35],\n    [1706, 336, 12, 644, 23, 952, 34, 1110, 37],\n    [1828, 360, 12, 700, 25, 1020, 34, 1200, 40],\n    [1921, 390, 13, 728, 26, 1050, 35, 1260, 42],\n    [2051, 420, 14, 784, 28, 1140, 38, 1350, 45],\n    [2185, 450, 15, 812, 29, 1200, 40, 1440, 48],\n    [2323, 480, 16, 868, 31, 1290, 43, 1530, 51],\n    [2465, 510, 17, 924, 33, 1350, 45, 1620, 54],\n    [2611, 540, 18, 980, 35, 1440, 48, 1710, 57],\n    [2761, 570, 19, 1036, 37, 1530, 51, 1800, 60],\n    [2876, 570, 19, 1064, 38, 1590, 53, 1890, 63],\n    [3034, 600, 20, 1120, 40, 1680, 56, 1980, 66],\n    [3196, 630, 21, 1204, 43, 1770, 59, 2100, 70],\n    [3362, 660, 22, 1260, 45, 1860, 62, 2220, 74],\n    [3532, 720, 24, 1316, 47, 1950, 65, 2310, 77],\n    [3706, 750, 25, 1372, 49, 2040, 68, 2430, 81],\n];\nconst mappedVersions = versions.map((el, index) => {\n    if (!index) {\n        return Object.create(null);\n    }\n    const res = Object.create(null);\n    for (let i = 1; i < 8; i += 2) {\n        const length = el[0] - el[i];\n        const num_template = el[i + 1];\n        const ec_level = EC_LEVELS[(i / 2) | 0];\n        const level = {\n            version: index,\n            ec_level,\n            data_len: length,\n            ec_len: el[i] / num_template,\n            blocks: [],\n            ec: [],\n        };\n        for (let k = num_template, n = length; k > 0; k--) {\n            const block = (n / k) | 0;\n            level.blocks.push(block);\n            n -= block;\n        }\n        res[ec_level] = level;\n    }\n    return res;\n});\n//# sourceMappingURL=qr-base.js.map","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","module.exports = function isArrayish(obj) {\n\tif (!obj || typeof obj === 'string') {\n\t\treturn false;\n\t}\n\n\treturn obj instanceof Array || Array.isArray(obj) ||\n\t\t(obj.length >= 0 && (obj.splice instanceof Function ||\n\t\t\t(Object.getOwnPropertyDescriptor(obj, (obj.length - 1)) && obj.constructor.name !== 'String')));\n};\n","'use strict';\n\nvar isArrayish = require('is-arrayish');\n\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\n\nvar swizzle = module.exports = function swizzle(args) {\n\tvar results = [];\n\n\tfor (var i = 0, len = args.length; i < len; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (isArrayish(arg)) {\n\t\t\t// http://jsperf.com/javascript-array-concat-vs-push/98\n\t\t\tresults = concat.call(results, slice.call(arg));\n\t\t} else {\n\t\t\tresults.push(arg);\n\t\t}\n\t}\n\n\treturn results;\n};\n\nswizzle.wrap = function (fn) {\n\treturn function () {\n\t\treturn fn(swizzle(arguments));\n\t};\n};\n","/* MIT license */\nvar colorNames = require('color-name');\nvar swizzle = require('simple-swizzle');\nvar hasOwnProperty = Object.hasOwnProperty;\n\nvar reverseNames = Object.create(null);\n\n// create a list of reverse color names\nfor (var name in colorNames) {\n\tif (hasOwnProperty.call(colorNames, name)) {\n\t\treverseNames[colorNames[name]] = name;\n\t}\n}\n\nvar cs = module.exports = {\n\tto: {},\n\tget: {}\n};\n\ncs.get = function (string) {\n\tvar prefix = string.substring(0, 3).toLowerCase();\n\tvar val;\n\tvar model;\n\tswitch (prefix) {\n\t\tcase 'hsl':\n\t\t\tval = cs.get.hsl(string);\n\t\t\tmodel = 'hsl';\n\t\t\tbreak;\n\t\tcase 'hwb':\n\t\t\tval = cs.get.hwb(string);\n\t\t\tmodel = 'hwb';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tval = cs.get.rgb(string);\n\t\t\tmodel = 'rgb';\n\t\t\tbreak;\n\t}\n\n\tif (!val) {\n\t\treturn null;\n\t}\n\n\treturn {model: model, value: val};\n};\n\ncs.get.rgb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar abbr = /^#([a-f0-9]{3,4})$/i;\n\tvar hex = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i;\n\tvar rgba = /^rgba?\\(\\s*([+-]?\\d+)(?=[\\s,])\\s*(?:,\\s*)?([+-]?\\d+)(?=[\\s,])\\s*(?:,\\s*)?([+-]?\\d+)\\s*(?:[,|\\/]\\s*([+-]?[\\d\\.]+)(%?)\\s*)?\\)$/;\n\tvar per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,?\\s*([+-]?[\\d\\.]+)\\%\\s*,?\\s*([+-]?[\\d\\.]+)\\%\\s*(?:[,|\\/]\\s*([+-]?[\\d\\.]+)(%?)\\s*)?\\)$/;\n\tvar keyword = /^(\\w+)$/;\n\n\tvar rgb = [0, 0, 0, 1];\n\tvar match;\n\tvar i;\n\tvar hexAlpha;\n\n\tif (match = string.match(hex)) {\n\t\thexAlpha = match[2];\n\t\tmatch = match[1];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\t// https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n\t\t\tvar i2 = i * 2;\n\t\t\trgb[i] = parseInt(match.slice(i2, i2 + 2), 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = parseInt(hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(abbr)) {\n\t\tmatch = match[1];\n\t\thexAlpha = match[3];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i] + match[i], 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = parseInt(hexAlpha + hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(rgba)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i + 1], 0);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\tif (match[5]) {\n\t\t\t\trgb[3] = parseFloat(match[4]) * 0.01;\n\t\t\t} else {\n\t\t\t\trgb[3] = parseFloat(match[4]);\n\t\t\t}\n\t\t}\n\t} else if (match = string.match(per)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\tif (match[5]) {\n\t\t\t\trgb[3] = parseFloat(match[4]) * 0.01;\n\t\t\t} else {\n\t\t\t\trgb[3] = parseFloat(match[4]);\n\t\t\t}\n\t\t}\n\t} else if (match = string.match(keyword)) {\n\t\tif (match[1] === 'transparent') {\n\t\t\treturn [0, 0, 0, 0];\n\t\t}\n\n\t\tif (!hasOwnProperty.call(colorNames, match[1])) {\n\t\t\treturn null;\n\t\t}\n\n\t\trgb = colorNames[match[1]];\n\t\trgb[3] = 1;\n\n\t\treturn rgb;\n\t} else {\n\t\treturn null;\n\t}\n\n\tfor (i = 0; i < 3; i++) {\n\t\trgb[i] = clamp(rgb[i], 0, 255);\n\t}\n\trgb[3] = clamp(rgb[3], 0, 1);\n\n\treturn rgb;\n};\n\ncs.get.hsl = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hsl = /^hsla?\\(\\s*([+-]?(?:\\d{0,3}\\.)?\\d+)(?:deg)?\\s*,?\\s*([+-]?[\\d\\.]+)%\\s*,?\\s*([+-]?[\\d\\.]+)%\\s*(?:[,|\\/]\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)\\s*)?\\)$/;\n\tvar match = string.match(hsl);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar s = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar l = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\n\t\treturn [h, s, l, a];\n\t}\n\n\treturn null;\n};\n\ncs.get.hwb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hwb = /^hwb\\(\\s*([+-]?\\d{0,3}(?:\\.\\d+)?)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)\\s*)?\\)$/;\n\tvar match = string.match(hwb);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar w = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar b = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\t\treturn [h, w, b, a];\n\t}\n\n\treturn null;\n};\n\ncs.to.hex = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn (\n\t\t'#' +\n\t\thexDouble(rgba[0]) +\n\t\thexDouble(rgba[1]) +\n\t\thexDouble(rgba[2]) +\n\t\t(rgba[3] < 1\n\t\t\t? (hexDouble(Math.round(rgba[3] * 255)))\n\t\t\t: '')\n\t);\n};\n\ncs.to.rgb = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ')'\n\t\t: 'rgba(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ', ' + rgba[3] + ')';\n};\n\ncs.to.rgb.percent = function () {\n\tvar rgba = swizzle(arguments);\n\n\tvar r = Math.round(rgba[0] / 255 * 100);\n\tvar g = Math.round(rgba[1] / 255 * 100);\n\tvar b = Math.round(rgba[2] / 255 * 100);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + r + '%, ' + g + '%, ' + b + '%)'\n\t\t: 'rgba(' + r + '%, ' + g + '%, ' + b + '%, ' + rgba[3] + ')';\n};\n\ncs.to.hsl = function () {\n\tvar hsla = swizzle(arguments);\n\treturn hsla.length < 4 || hsla[3] === 1\n\t\t? 'hsl(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%)'\n\t\t: 'hsla(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%, ' + hsla[3] + ')';\n};\n\n// hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\ncs.to.hwb = function () {\n\tvar hwba = swizzle(arguments);\n\n\tvar a = '';\n\tif (hwba.length >= 4 && hwba[3] !== 1) {\n\t\ta = ', ' + hwba[3];\n\t}\n\n\treturn 'hwb(' + hwba[0] + ', ' + hwba[1] + '%, ' + hwba[2] + '%' + a + ')';\n};\n\ncs.to.keyword = function (rgb) {\n\treturn reverseNames[rgb.slice(0, 3)];\n};\n\n// helpers\nfunction clamp(num, min, max) {\n\treturn Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n\tvar str = Math.round(num).toString(16).toUpperCase();\n\treturn (str.length < 2) ? '0' + str : str;\n}\n","import colorString from \"color-string\";\nexport function getOptions(inOptions) {\n    const type = inOptions?.type ?? \"png\";\n    const defaults = type === \"png\" ? BITMAP_OPTIONS : VECTOR_OPTIONS;\n    return { ...defaults, ...inOptions };\n}\nexport function colorToHex(color) {\n    if (typeof color === \"string\") {\n        return colorString.to.hex(colorString.get.rgb(color));\n    }\n    return `#${(color >>> 8).toString(16).padStart(6, \"0\")}`;\n}\nexport function getSVGPath(matrix, size, margin = 0, borderRadius = 0) {\n    let rectangles = [];\n    for (let x = 0; x < matrix.length; x++) {\n        const column = matrix[x];\n        for (let y = 0; y < column.length; y++) {\n            if (column[y]) {\n                const leftX = x * size + margin;\n                const rightX = (x + 1) * size + margin;\n                const topY = y * size + margin;\n                const bottomY = (y + 1) * size + margin;\n                const rectangle = [];\n                rectangle.push(`M ${leftX} ${topY + borderRadius}`);\n                rectangle.push(`L ${leftX} ${bottomY - borderRadius}`);\n                if (borderRadius > 0) {\n                    rectangle.push(`A ${borderRadius} ${borderRadius} 0 0 0 ${leftX + borderRadius} ${bottomY} `);\n                }\n                rectangle.push(`L ${rightX - borderRadius} ${bottomY}`);\n                if (borderRadius > 0) {\n                    rectangle.push(`A ${borderRadius} ${borderRadius} 0 0 0 ${rightX} ${bottomY - borderRadius}`);\n                }\n                rectangle.push(`L ${rightX} ${topY + borderRadius}`);\n                if (borderRadius > 0) {\n                    rectangle.push(`A ${borderRadius} ${borderRadius} 0 0 0 ${rightX - borderRadius} ${topY}`);\n                }\n                rectangle.push(`L ${leftX + borderRadius} ${topY}`);\n                if (borderRadius > 0) {\n                    rectangle.push(`A ${borderRadius} ${borderRadius} 0 0 0 ${leftX} ${topY + borderRadius}`);\n                }\n                rectangle.push(`z`);\n                rectangles.push(rectangle.join(\" \"));\n            }\n        }\n    }\n    return rectangles.join(\" \");\n}\nconst commonOptions = {\n    type: \"png\",\n    parse_url: false,\n    ec_level: \"M\",\n    logo: undefined,\n    logoWidth: 20,\n    logoHeight: 20,\n    bgColor: 0xffffffff,\n    color: 0x000000ff,\n};\nconst BITMAP_OPTIONS = {\n    ...commonOptions,\n    margin: 1,\n    size: 5,\n};\nconst VECTOR_OPTIONS = {\n    ...commonOptions,\n    margin: 1,\n    size: 0,\n};\n//# sourceMappingURL=utils.js.map","/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.7.7';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = Array.prototype.slice.call(b64ch);\nconst b64tab = ((a) => {\n    let tab = {};\n    a.forEach((c, i) => tab[c] = i);\n    return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function'\n    ? Uint8Array.from.bind(Uint8Array)\n    : (it) => new Uint8Array(Array.prototype.slice.call(it, 0));\nconst _mkUriSafe = (src) => src\n    .replace(/=/g, '').replace(/[+\\/]/g, (m0) => m0 == '+' ? '-' : '_');\nconst _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = (bin) => {\n    // console.log('polyfilled');\n    let u32, c0, c1, c2, asc = '';\n    const pad = bin.length % 3;\n    for (let i = 0; i < bin.length;) {\n        if ((c0 = bin.charCodeAt(i++)) > 255 ||\n            (c1 = bin.charCodeAt(i++)) > 255 ||\n            (c2 = bin.charCodeAt(i++)) > 255)\n            throw new TypeError('invalid character found');\n        u32 = (c0 << 16) | (c1 << 8) | c2;\n        asc += b64chs[u32 >> 18 & 63]\n            + b64chs[u32 >> 12 & 63]\n            + b64chs[u32 >> 6 & 63]\n            + b64chs[u32 & 63];\n    }\n    return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = typeof btoa === 'function' ? (bin) => btoa(bin)\n    : _hasBuffer ? (bin) => Buffer.from(bin, 'binary').toString('base64')\n        : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer\n    ? (u8a) => Buffer.from(u8a).toString('base64')\n    : (u8a) => {\n        // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n        const maxargs = 0x1000;\n        let strs = [];\n        for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n            strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n        }\n        return _btoa(strs.join(''));\n    };\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 5\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = (c) => {\n    if (c.length < 2) {\n        var cc = c.charCodeAt(0);\n        return cc < 0x80 ? c\n            : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                + _fromCC(0x80 | (cc & 0x3f)))\n                : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                    + _fromCC(0x80 | (cc & 0x3f)));\n    }\n    else {\n        var cc = 0x10000\n            + (c.charCodeAt(0) - 0xD800) * 0x400\n            + (c.charCodeAt(1) - 0xDC00);\n        return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n            + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n            + _fromCC(0x80 | (cc & 0x3f)));\n    }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = (u) => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer\n    ? (s) => Buffer.from(s, 'utf8').toString('base64')\n    : _TE\n        ? (s) => _fromUint8Array(_TE.encode(s))\n        : (s) => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe\n    ? _mkUriSafe(_encode(src))\n    : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 5.\n * @returns {string} Base64 string\n */\nconst encodeURI = (src) => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = (cccc) => {\n    switch (cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                | ((0x3f & cccc.charCodeAt(1)) << 12)\n                | ((0x3f & cccc.charCodeAt(2)) << 6)\n                | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n            return (_fromCC((offset >>> 10) + 0xD800)\n                + _fromCC((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\n                | (0x3f & cccc.charCodeAt(2)));\n        default:\n            return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                | (0x3f & cccc.charCodeAt(1)));\n    }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = (b) => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = (asc) => {\n    // console.log('polyfilled');\n    asc = asc.replace(/\\s+/g, '');\n    if (!b64re.test(asc))\n        throw new TypeError('malformed base64.');\n    asc += '=='.slice(2 - (asc.length & 3));\n    let u24, bin = '', r1, r2;\n    for (let i = 0; i < asc.length;) {\n        u24 = b64tab[asc.charAt(i++)] << 18\n            | b64tab[asc.charAt(i++)] << 12\n            | (r1 = b64tab[asc.charAt(i++)]) << 6\n            | (r2 = b64tab[asc.charAt(i++)]);\n        bin += r1 === 64 ? _fromCC(u24 >> 16 & 255)\n            : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255)\n                : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);\n    }\n    return bin;\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = typeof atob === 'function' ? (asc) => atob(_tidyB64(asc))\n    : _hasBuffer ? (asc) => Buffer.from(asc, 'base64').toString('binary')\n        : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer\n    ? (a) => _U8Afrom(Buffer.from(a, 'base64'))\n    : (a) => _U8Afrom(_atob(a).split('').map(c => c.charCodeAt(0)));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = (a) => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer\n    ? (a) => Buffer.from(a, 'base64').toString('utf8')\n    : _TD\n        ? (a) => _TD.decode(_toUint8Array(a))\n        : (a) => btou(_atob(a));\nconst _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = (src) => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = (src) => {\n    if (typeof src !== 'string')\n        return false;\n    const s = src.replace(/\\s+/g, '').replace(/={0,2}$/, '');\n    return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = (v) => {\n    return {\n        value: v, enumerable: false, writable: true, configurable: true\n    };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n    const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n    _add('fromBase64', function () { return decode(this); });\n    _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n    _add('toBase64URI', function () { return encode(this, true); });\n    _add('toBase64URL', function () { return encode(this, true); });\n    _add('toUint8Array', function () { return toUint8Array(this); });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n    const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n    _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n    _add('toBase64URI', function () { return fromUint8Array(this, true); });\n    _add('toBase64URL', function () { return fromUint8Array(this, true); });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n    extendString();\n    extendUint8Array();\n};\nconst gBase64 = {\n    version: version,\n    VERSION: VERSION,\n    atob: _atob,\n    atobPolyfill: atobPolyfill,\n    btoa: _btoa,\n    btoaPolyfill: btoaPolyfill,\n    fromBase64: decode,\n    toBase64: encode,\n    encode: encode,\n    encodeURI: encodeURI,\n    encodeURL: encodeURI,\n    utob: utob,\n    btou: btou,\n    decode: decode,\n    isValid: isValid,\n    fromUint8Array: fromUint8Array,\n    toUint8Array: toUint8Array,\n    extendString: extendString,\n    extendUint8Array: extendUint8Array,\n    extendBuiltins: extendBuiltins\n};\n// makecjs:CUT //\nexport { version };\nexport { VERSION };\nexport { _atob as atob };\nexport { atobPolyfill };\nexport { _btoa as btoa };\nexport { btoaPolyfill };\nexport { decode as fromBase64 };\nexport { encode as toBase64 };\nexport { utob };\nexport { encode };\nexport { encodeURI };\nexport { encodeURI as encodeURL };\nexport { btou };\nexport { decode };\nexport { isValid };\nexport { fromUint8Array };\nexport { toUint8Array };\nexport { extendString };\nexport { extendUint8Array };\nexport { extendBuiltins };\n// and finally,\nexport { gBase64 as Base64 };\n","import { QR } from \"./qr-base.js\";\nimport { getOptions, colorToHex, getSVGPath } from \"./utils.js\";\nimport { Base64 } from 'js-base64';\nexport async function getSVG(text, inOptions = {}) {\n    const options = getOptions({ ...inOptions, type: \"svg\" });\n    const matrix = QR(text, options.ec_level, options.parse_url);\n    return createSVG({ matrix, ...options });\n}\nconst te = new TextEncoder();\nexport async function createSVG({ matrix, margin, size, logo, logoWidth, logoHeight, color, bgColor, imageWidth, imageHeight, borderRadius, }) {\n    const actualSize = size || 9;\n    const X = matrix.length + 2 * margin;\n    const XY = X * (actualSize || 1);\n    const imageWidthStr = imageWidth ? ` width=\"${imageWidth}\"` : \"\";\n    const imageHeightStr = imageHeight ? `height=\"${imageWidth}\" ` : \"\";\n    const xmlTag = `<?xml version=\"1.0\" encoding=\"utf-8\"?>`;\n    const svgOpeningTag = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"${imageWidthStr} ${imageHeightStr}viewBox=\"0 0 ${XY} ${XY}\">`;\n    const svgBody = getSVGBody(matrix, {\n        color,\n        bgColor,\n        size: XY,\n        margin,\n        blockSize: actualSize,\n        borderRadius,\n    });\n    const svgEndTag = \"</svg>\";\n    const logoImage = logo ? getLogoImage(logo, XY, logoWidth, logoHeight) : \"\";\n    return te.encode(xmlTag + svgOpeningTag + svgBody + logoImage + svgEndTag);\n}\nfunction getSVGBody(matrix, options) {\n    const path = getSVGPath(matrix, options.blockSize, options.margin * options.blockSize, options.borderRadius);\n    let svgBody = `<rect width=\"${options.size}\" height=\"${options.size}\" ` +\n        `fill=\"${colorToHex(options.bgColor)}\"></rect>`;\n    svgBody += '<path shape-rendering=\"geometricPrecision\" d=\"' + path + '\" fill=\"' + colorToHex(options.color) + '\"/>';\n    return svgBody;\n}\nfunction getLogoImage(logo, XY, logoWidth, logoHeight) {\n    const imageBase64 = `data:image/png;base64,${typeof Buffer !== \"undefined\" && Buffer.isBuffer(logo)\n        ? logo.toString(\"base64\")\n        : Base64.fromUint8Array(new Uint8Array(logo))}`;\n    return (`<image ` +\n        `width=\"${(logoWidth / 100) * XY}\" ` +\n        `height=\"${(logoHeight / 100) * XY}\" ` +\n        `xlink:href=\"${imageBase64}\" ` +\n        `x=\"${XY / 2 - ((logoWidth / 100) * XY) / 2}\" ` +\n        `y=\"${XY / 2 - ((logoHeight / 100) * XY) / 2}\">` +\n        `</image>`);\n}\n//# sourceMappingURL=svg.js.map","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon download-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"DownloadIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon qrcode-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M3,11H5V13H3V11M11,5H13V9H11V5M9,11H13V15H11V13H9V11M15,11H17V13H19V11H21V13H19V15H21V19H19V21H17V19H13V21H11V17H15V15H17V13H15V11M19,19V15H17V19H19M15,3H21V9H15V3M17,5V7H19V5H17M3,3H9V9H3V3M5,5V7H7V5H5M3,15H9V21H3V15M5,17V19H7V17H5Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"QrcodeIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon cake-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M11.5,0.5C12,0.75 13,2.4 13,3.5C13,4.6 12.33,5 11.5,5C10.67,5 10,4.85 10,3.75C10,2.65 11,2 11.5,0.5M18.5,9C21,9 23,11 23,13.5C23,15.06 22.21,16.43 21,17.24V23H12L3,23V17.24C1.79,16.43 1,15.06 1,13.5C1,11 3,9 5.5,9H10V6H13V9H18.5M12,16A2.5,2.5 0 0,0 14.5,13.5H16A2.5,2.5 0 0,0 18.5,16A2.5,2.5 0 0,0 21,13.5A2.5,2.5 0 0,0 18.5,11H5.5A2.5,2.5 0 0,0 3,13.5A2.5,2.5 0 0,0 5.5,16A2.5,2.5 0 0,0 8,13.5H9.5A2.5,2.5 0 0,0 12,16Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"CakeIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon eye-circle-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M12,9.5A2.5,2.5 0 0,0 9.5,12A2.5,2.5 0 0,0 12,14.5A2.5,2.5 0 0,0 14.5,12A2.5,2.5 0 0,0 12,9.5M12,13A1,1 0 0,1 11,12A1,1 0 0,1 12,11A1,1 0 0,1 13,12A1,1 0 0,1 12,13M12,9.5A2.5,2.5 0 0,0 9.5,12A2.5,2.5 0 0,0 12,14.5A2.5,2.5 0 0,0 14.5,12A2.5,2.5 0 0,0 12,9.5M12,13A1,1 0 0,1 11,12A1,1 0 0,1 12,11A1,1 0 0,1 13,12A1,1 0 0,1 12,13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,16C9.37,16 7,14.43 6,12C7.38,8.69 11.19,7.12 14.5,8.5C16.08,9.16 17.34,10.42 18,12C17,14.43 14.63,16 12,16M12,9.5A2.5,2.5 0 0,0 9.5,12A2.5,2.5 0 0,0 12,14.5A2.5,2.5 0 0,0 14.5,12A2.5,2.5 0 0,0 12,9.5M12,13A1,1 0 0,1 11,12A1,1 0 0,1 12,11A1,1 0 0,1 13,12A1,1 0 0,1 12,13Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"EyeCircleIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon folder-multiple-image-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M7,15L11.5,9L15,13.5L17.5,10.5L21,15M22,4H14L12,2H6A2,2 0 0,0 4,4V16A2,2 0 0,0 6,18H22A2,2 0 0,0 24,16V6A2,2 0 0,0 22,4M2,6H0V11H0V20A2,2 0 0,0 2,22H20V20H2V6Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"FolderMultipleImageIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon chevron-left-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"ChevronLeftIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon dots-horizontal-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M16,12A2,2 0 0,1 18,10A2,2 0 0,1 20,12A2,2 0 0,1 18,14A2,2 0 0,1 16,12M10,12A2,2 0 0,1 12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"DotsHorizontalIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"property__row\">\n\t\t<!-- Dummy label to keep the layout -->\n\t\t<div class=\"property__label\" />\n\n\t\t<!-- Extra div container to fix the poper position -->\n\t\t<div class=\"property__value\">\n\t\t\t<Actions menu-align=\"right\"\n\t\t\t\tevent=\"\"\n\t\t\t\ttype=\"secondary\"\n\t\t\t\t:menu-name=\"t('contacts', 'Add more info')\"\n\t\t\t\t@click.native.prevent>\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconAdd :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"!moreActionsOpen\">\n\t\t\t\t\t<ActionButton v-for=\"option in availablePrimaryProperties\"\n\t\t\t\t\t\t:key=\"option.id\"\n\t\t\t\t\t\tclass=\"action--primary\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"addProp(option.id)\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<PropertyTitleIcon :icon=\"option.icon\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ option.name }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton :close-after-click=\"false\"\n\t\t\t\t\t\t@click=\"moreActionsOpen=true\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<DotsHorizontalIcon :title=\"t('contacts', 'More fields')\"\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('contacts', 'More fields') }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"moreActionsOpen\">\n\t\t\t\t\t<ActionButton :close-after-click=\"false\"\n\t\t\t\t\t\t@click=\"moreActionsOpen=false\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<ChevronLeft :title=\"t('contacts', 'More fields')\"\n\t\t\t\t\t\t\t\t:size=\"20\" />\n\t\t\t\t\t\t\t{{ t('contacts', 'More fields') }}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton v-for=\"option in availableSecondaryProperties\"\n\t\t\t\t\t\t:key=\"option.id\"\n\t\t\t\t\t\tclass=\"action--primary\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click.prevent=\"addProp(option.id)\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<PropertyTitleIcon :icon=\"option.icon\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ option.name }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t</template>\n\t\t\t</Actions>\n\t\t</div>\n\n\t\t<!-- Dummy actions to keep the layout -->\n\t\t<div class=\"property__actions\" />\n\t</div>\n</template>\n\n<script>\nimport OrgChartsMixin from '../../mixins/OrgChartsMixin.js'\nimport { NcActions as Actions, NcActionButton as ActionButton } from '@nextcloud/vue'\nimport Contact from '../../models/contact.js'\nimport rfcProps from '../../models/rfcProps.js'\nimport ICAL from 'ical.js'\nimport PropertyTitleIcon from '../Properties/PropertyTitleIcon.vue'\nimport ChevronLeft from 'vue-material-design-icons/ChevronLeft.vue'\nimport DotsHorizontalIcon from 'vue-material-design-icons/DotsHorizontal.vue'\nimport IconAdd from 'vue-material-design-icons/Plus.vue'\n\nexport default {\n\tname: 'ContactDetailsAddNewProp',\n\n\tcomponents: {\n\t\tIconAdd,\n\t\tPropertyTitleIcon,\n\t\tActions,\n\t\tActionButton,\n\t\tChevronLeft,\n\t\tDotsHorizontalIcon,\n\t},\n\n\tmixins: [\n\t\tOrgChartsMixin,\n\t],\n\n\tprops: {\n\t\tcontact: {\n\t\t\ttype: Contact,\n\t\t\tdefault: null,\n\t\t},\n\t\tbus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmoreActionsOpen: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\t/**\n\t\t * Rfc props\n\t\t *\n\t\t * @return {object}\n\t\t */\n\t\tproperties() {\n\t\t\treturn rfcProps.properties\n\t\t},\n\n\t\t/**\n\t\t * Rfc props\n\t\t *\n\t\t * @return string[]\n\t\t */\n\t\tpropertiesOrder() {\n\t\t\treturn rfcProps.fieldOrder\n\t\t},\n\n\t\t/**\n\t\t * List of properties that the contact already have\n\t\t *\n\t\t * @return {string[]}\n\t\t */\n\t\tusedProperties() {\n\t\t\treturn this.contact.jCal[1].map(prop => prop[0])\n\t\t},\n\n\t\t/**\n\t\t * List of every primary properties you are allowed to add\n\t\t * on this contact\n\t\t *\n\t\t * @return {object[]}\n\t\t */\n\t\tavailablePrimaryProperties() {\n\t\t\treturn Object.keys(this.properties)\n\t\t\t\t// show primary or secondary props\n\t\t\t\t.filter(key => this.properties[key].primary)\n\t\t\t\t// usable array of objects\n\t\t\t\t.map(key => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: key,\n\t\t\t\t\t\tname: this.properties[key].readableName,\n\t\t\t\t\t\ticon: this.properties[key].icon,\n\t\t\t\t\t}\n\t\t\t\t}).sort((a, b) => this.propertiesOrder.indexOf(a.id) - this.propertiesOrder.indexOf(b.id))\n\t\t},\n\t\t/**\n\t\t * List of every secondary properties you are allowed to add\n\t\t * on this contact\n\t\t *\n\t\t * @return {object[]}\n\t\t */\n\t\tavailableSecondaryProperties() {\n\t\t\treturn Object.keys(this.properties)\n\t\t\t\t// show primary or secondary props\n\t\t\t\t.filter(key => !this.properties[key].primary)\n\t\t\t\t// usable array of objects\n\t\t\t\t.map(key => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: key,\n\t\t\t\t\t\tname: this.properties[key].readableName,\n\t\t\t\t\t\ticon: this.properties[key].icon,\n\t\t\t\t\t}\n\t\t\t\t}).sort((a, b) => a.name.localeCompare(b.name))\n\t\t},\n\t},\n\n\tcreated() {\n\t\tthis.bus.on('add-prop', this.addProp)\n\t},\n\n\tdestroyed() {\n\t\tthis.bus.off('add-prop', this.addProp)\n\t},\n\n\tmethods: {\n\t\t/**\n\t\t * Add a new prop to the contact\n\t\t *\n\t\t * @param {string} id the id of the property. e.g fn\n\t\t */\n\t\tasync addProp(id) {\n\t\t\tif (this.usedProperties.includes(id) && !this.properties[id].multiple) {\n\t\t\t\tthis.bus.emit('focus-prop', id)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (id === 'x-managersname') {\n\t\t\t\tconst others = this.otherContacts(this.contact)\n\t\t\t\tif (others.length === 1) {\n\t\t\t\t\t// Pick the first and only other contact\n\t\t\t\t\tawait this.contact.vCard.addPropertyWithValue(id, others[0].key)\n\t\t\t\t\tawait this.$store.dispatch('updateContact', this.contact)\n\t\t\t\t} else {\n\t\t\t\t\tawait this.contact.vCard.addPropertyWithValue(id, '')\n\t\t\t\t}\n\t\t\t} else if (this.properties[id] && this.properties[id].defaultjCal\n\t\t\t\t&& this.properties[id].defaultjCal[this.contact.version]) {\n\t\t\t\tconst defaultjCal = this.properties[id].defaultjCal[this.contact.version]\n\t\t\t\tconst property = new ICAL.Property([id, ...defaultjCal])\n\t\t\t\tawait this.contact.vCard.addProperty(property)\n\t\t\t} else {\n\t\t\t\tconst defaultData = this.properties[id].defaultValue\n\t\t\t\tlet defaultValue = defaultData ? defaultData.value : ''\n\t\t\t\tif (Array.isArray(defaultValue)) {\n\t\t\t\t\tdefaultValue = [...defaultValue]\n\t\t\t\t}\n\t\t\t\tconst property = await this.contact.vCard.addPropertyWithValue(id, defaultValue)\n\t\t\t\tif (defaultData && defaultData.type) {\n\t\t\t\t\tproperty.setParameter('type', defaultData.type)\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.moreActionsOpen = false\n\t\t\tthis.bus.emit('focus-prop', id)\n\t\t},\n\t},\n}\n</script>\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon cloud-download-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M6.5 20Q4.22 20 2.61 18.43 1 16.85 1 14.58 1 12.63 2.17 11.1 3.35 9.57 5.25 9.15 5.83 7.13 7.39 5.75 8.95 4.38 11 4.08V12.15L9.4 10.6L8 12L12 16L16 12L14.6 10.6L13 12.15V4.08Q15.58 4.43 17.29 6.39 19 8.35 19 11 20.73 11.2 21.86 12.5 23 13.78 23 15.5 23 17.38 21.69 18.69 20.38 20 18.5 20Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"CloudDownloadIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon upload-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"UploadIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon folder-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"FolderIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon image-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"ImageIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","/*!\n * Cropper.js v1.5.13\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2022-11-20T05:30:46.114Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Cropper = factory());\n})(this, (function () { 'use strict';\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      enumerableOnly && (symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      })), keys.push.apply(keys, symbols);\n    }\n    return keys;\n  }\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = null != arguments[i] ? arguments[i] : {};\n      i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n    return target;\n  }\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n      return typeof obj;\n    } : function (obj) {\n      return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    }, _typeof(obj);\n  }\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n  }\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n    return arr2;\n  }\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'cropper';\n\n  // Actions\n  var ACTION_ALL = 'all';\n  var ACTION_CROP = 'crop';\n  var ACTION_MOVE = 'move';\n  var ACTION_ZOOM = 'zoom';\n  var ACTION_EAST = 'e';\n  var ACTION_WEST = 'w';\n  var ACTION_SOUTH = 's';\n  var ACTION_NORTH = 'n';\n  var ACTION_NORTH_EAST = 'ne';\n  var ACTION_NORTH_WEST = 'nw';\n  var ACTION_SOUTH_EAST = 'se';\n  var ACTION_SOUTH_WEST = 'sw';\n\n  // Classes\n  var CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\n  var CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\n  var CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\");\n\n  // Data keys\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n  var DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\");\n\n  // Drag modes\n  var DRAG_MODE_CROP = 'crop';\n  var DRAG_MODE_MOVE = 'move';\n  var DRAG_MODE_NONE = 'none';\n\n  // Events\n  var EVENT_CROP = 'crop';\n  var EVENT_CROP_END = 'cropend';\n  var EVENT_CROP_MOVE = 'cropmove';\n  var EVENT_CROP_START = 'cropstart';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_READY = 'ready';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_WHEEL = 'wheel';\n  var EVENT_ZOOM = 'zoom';\n\n  // Mime types\n  var MIME_TYPE_JPEG = 'image/jpeg';\n\n  // RegExps\n  var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;\n  var REGEXP_DATA_URL = /^data:/;\n  var REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n  var REGEXP_TAG_NAME = /^img|canvas$/i;\n\n  // Misc\n  // Inspired by the default width and height of a canvas element.\n  var MIN_CONTAINER_WIDTH = 200;\n  var MIN_CONTAINER_HEIGHT = 100;\n\n  var DEFAULTS = {\n    // Define the view mode of the cropper\n    viewMode: 0,\n    // 0, 1, 2, 3\n\n    // Define the dragging mode of the cropper\n    dragMode: DRAG_MODE_CROP,\n    // 'crop', 'move' or 'none'\n\n    // Define the initial aspect ratio of the crop box\n    initialAspectRatio: NaN,\n    // Define the aspect ratio of the crop box\n    aspectRatio: NaN,\n    // An object with the previous cropping result data\n    data: null,\n    // A selector for adding extra containers to preview\n    preview: '',\n    // Re-render the cropper when resize the window\n    responsive: true,\n    // Restore the cropped area after resize the window\n    restore: true,\n    // Check if the current image is a cross-origin image\n    checkCrossOrigin: true,\n    // Check the current image's Exif Orientation information\n    checkOrientation: true,\n    // Show the black modal\n    modal: true,\n    // Show the dashed lines for guiding\n    guides: true,\n    // Show the center indicator for guiding\n    center: true,\n    // Show the white modal to highlight the crop box\n    highlight: true,\n    // Show the grid background\n    background: true,\n    // Enable to crop the image automatically when initialize\n    autoCrop: true,\n    // Define the percentage of automatic cropping area when initializes\n    autoCropArea: 0.8,\n    // Enable to move the image\n    movable: true,\n    // Enable to rotate the image\n    rotatable: true,\n    // Enable to scale the image\n    scalable: true,\n    // Enable to zoom the image\n    zoomable: true,\n    // Enable to zoom the image by dragging touch\n    zoomOnTouch: true,\n    // Enable to zoom the image by wheeling mouse\n    zoomOnWheel: true,\n    // Define zoom ratio when zoom the image by wheeling mouse\n    wheelZoomRatio: 0.1,\n    // Enable to move the crop box\n    cropBoxMovable: true,\n    // Enable to resize the crop box\n    cropBoxResizable: true,\n    // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n    toggleDragModeOnDblclick: true,\n    // Size limitation\n    minCanvasWidth: 0,\n    minCanvasHeight: 0,\n    minCropBoxWidth: 0,\n    minCropBoxHeight: 0,\n    minContainerWidth: MIN_CONTAINER_WIDTH,\n    minContainerHeight: MIN_CONTAINER_HEIGHT,\n    // Shortcuts of events\n    ready: null,\n    cropstart: null,\n    cropmove: null,\n    cropend: null,\n    crop: null,\n    zoom: null\n  };\n\n  var TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n\n  /**\n   * Check if the given value is not a number.\n   */\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n\n  /**\n   * Check if the given value is a positive number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n   */\n  var isPositiveNumber = function isPositiveNumber(value) {\n    return value > 0 && value < Infinity;\n  };\n\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  var slice = Array.prototype.slice;\n\n  /**\n   * Convert array-like or iterable object to an array.\n   * @param {*} value - The value to convert.\n   * @returns {Array} Returns a new array.\n   */\n  function toArray(value) {\n    return Array.from ? Array.from(value) : slice.call(value);\n  }\n\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length) /* array-like */) {\n        toArray(data).forEach(function (value, key) {\n          callback.call(data, value, key, data);\n        });\n      } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n    return data;\n  }\n\n  /**\n   * Extend the given object.\n   * @param {*} target - The target object to extend.\n   * @param {*} args - The rest objects for merging to the target object.\n   * @returns {Object} The extended object.\n   */\n  var assign = Object.assign || function assign(target) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (isObject(target) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            target[key] = arg[key];\n          });\n        }\n      });\n    }\n    return target;\n  };\n  var REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n\n  /**\n   * Normalize decimal number.\n   * Check out {@link https://0.30000000000000004.com/}\n   * @param {number} value - The value to normalize.\n   * @param {number} [times=100000000000] - The times for normalizing.\n   * @returns {number} Returns the normalized number.\n   */\n  function normalizeDecimalNumber(value) {\n    var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n    return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n  }\n  var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value = \"\".concat(value, \"px\");\n      }\n      style[property] = value;\n    });\n  }\n\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n  function hasClass(element, value) {\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n  function addClass(element, value) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n    var className = element.className.trim();\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    }\n\n    // IE10-11 doesn't support the second parameter of `classList.toggle`\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n  function toParamCase(value) {\n    return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n  }\n\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n    return element.getAttribute(\"data-\".concat(toParamCase(name)));\n  }\n\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n    }\n  }\n\n  /**\n   * Remove data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to remove.\n   */\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      try {\n        delete element[name];\n      } catch (error) {\n        element[name] = undefined;\n      }\n    } else if (element.dataset) {\n      // #128 Safari not allows to delete dataset property\n      try {\n        delete element.dataset[name];\n      } catch (error) {\n        element.dataset[name] = undefined;\n      }\n    } else {\n      element.removeAttribute(\"data-\".concat(toParamCase(name)));\n    }\n  }\n  var REGEXP_SPACES = /\\s\\s*/;\n  var onceSupported = function () {\n    var supported = false;\n    if (IS_BROWSER) {\n      var once = false;\n      var listener = function listener() {};\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n    return supported;\n  }();\n\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n      element.removeEventListener(event, handler, options);\n    });\n  }\n\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n          listeners = _element$listeners === void 0 ? {} : _element$listeners;\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n          listener.apply(element, args);\n        };\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n      element.addEventListener(event, _handler, options);\n    });\n  }\n\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n  function dispatchEvent(element, type, data) {\n    var event;\n\n    // Event and CustomEvent on IE9-11 are global objects, not constructors\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, {\n        detail: data,\n        bubbles: true,\n        cancelable: true\n      });\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n    return element.dispatchEvent(event);\n  }\n\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  var location = WINDOW.location;\n  var REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n\n  /**\n   * Check if the given URL is a cross origin URL.\n   * @param {string} url - The target URL.\n   * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n   */\n  function isCrossOriginURL(url) {\n    var parts = url.match(REGEXP_ORIGINS);\n    return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n  }\n\n  /**\n   * Add timestamp to the given URL.\n   * @param {string} url - The target URL.\n   * @returns {string} The result URL.\n   */\n  function addTimestamp(url) {\n    var timestamp = \"timestamp=\".concat(new Date().getTime());\n    return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n  }\n\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      translateX = _ref.translateX,\n      translateY = _ref.translateY;\n    var values = [];\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    }\n\n    // Rotate should come first before scale to match orientation transform\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n    var maxRatio = 0;\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        if (Math.abs(ratio) > Math.abs(maxRatio)) {\n          maxRatio = ratio;\n        }\n      });\n    });\n    return maxRatio;\n  }\n\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n      pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n        startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  /**\n   * Get the max sizes in a rectangle under the given aspect ratio.\n   * @param {Object} data - The original sizes.\n   * @param {string} [type='contain'] - The adjust type.\n   * @returns {Object} The result sizes.\n   */\n  function getAdjustedSizes(_ref4) {\n    var aspectRatio = _ref4.aspectRatio,\n      height = _ref4.height,\n      width = _ref4.width;\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n    var isValidWidth = isPositiveNumber(width);\n    var isValidHeight = isPositiveNumber(height);\n    if (isValidWidth && isValidHeight) {\n      var adjustedWidth = height * aspectRatio;\n      if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n        height = width / aspectRatio;\n      } else {\n        width = height * aspectRatio;\n      }\n    } else if (isValidWidth) {\n      height = width / aspectRatio;\n    } else if (isValidHeight) {\n      width = height * aspectRatio;\n    }\n    return {\n      width: width,\n      height: height\n    };\n  }\n\n  /**\n   * Get the new sizes of a rectangle after rotated.\n   * @param {Object} data - The original sizes.\n   * @returns {Object} The result sizes.\n   */\n  function getRotatedSizes(_ref5) {\n    var width = _ref5.width,\n      height = _ref5.height,\n      degree = _ref5.degree;\n    degree = Math.abs(degree) % 180;\n    if (degree === 90) {\n      return {\n        width: height,\n        height: width\n      };\n    }\n    var arc = degree % 90 * Math.PI / 180;\n    var sinArc = Math.sin(arc);\n    var cosArc = Math.cos(arc);\n    var newWidth = width * cosArc + height * sinArc;\n    var newHeight = width * sinArc + height * cosArc;\n    return degree > 90 ? {\n      width: newHeight,\n      height: newWidth\n    } : {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n\n  /**\n   * Get a canvas which drew the given image.\n   * @param {HTMLImageElement} image - The image for drawing.\n   * @param {Object} imageData - The image data.\n   * @param {Object} canvasData - The canvas data.\n   * @param {Object} options - The options.\n   * @returns {HTMLCanvasElement} The result canvas.\n   */\n  function getSourceCanvas(image, _ref6, _ref7, _ref8) {\n    var imageAspectRatio = _ref6.aspectRatio,\n      imageNaturalWidth = _ref6.naturalWidth,\n      imageNaturalHeight = _ref6.naturalHeight,\n      _ref6$rotate = _ref6.rotate,\n      rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n      _ref6$scaleX = _ref6.scaleX,\n      scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n      _ref6$scaleY = _ref6.scaleY,\n      scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n    var aspectRatio = _ref7.aspectRatio,\n      naturalWidth = _ref7.naturalWidth,\n      naturalHeight = _ref7.naturalHeight;\n    var _ref8$fillColor = _ref8.fillColor,\n      fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n      _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n      imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n      _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n      imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n      _ref8$maxWidth = _ref8.maxWidth,\n      maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n      _ref8$maxHeight = _ref8.maxHeight,\n      maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n      _ref8$minWidth = _ref8.minWidth,\n      minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n      _ref8$minHeight = _ref8.minHeight,\n      minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n    var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight));\n\n    // Note: should always use image's natural sizes for drawing as\n    // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n    var destMaxSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var destMinSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n    var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n    var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = fillColor;\n    context.fillRect(0, 0, width, height);\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.rotate(rotate * Math.PI / 180);\n    context.scale(scaleX, scaleY);\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n    context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    context.restore();\n    return canvas;\n  }\n  var fromCharCode = String.fromCharCode;\n\n  /**\n   * Get string from char code in data view.\n   * @param {DataView} dataView - The data view for read.\n   * @param {number} start - The start index.\n   * @param {number} length - The read length.\n   * @returns {string} The read result.\n   */\n  function getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    length += start;\n    for (var i = start; i < length; i += 1) {\n      str += fromCharCode(dataView.getUint8(i));\n    }\n    return str;\n  }\n  var REGEXP_DATA_URL_HEAD = /^data:.*,/;\n\n  /**\n   * Transform Data URL to array buffer.\n   * @param {string} dataURL - The Data URL to transform.\n   * @returns {ArrayBuffer} The result array buffer.\n   */\n  function dataURLToArrayBuffer(dataURL) {\n    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n    var binary = atob(base64);\n    var arrayBuffer = new ArrayBuffer(binary.length);\n    var uint8 = new Uint8Array(arrayBuffer);\n    forEach(uint8, function (value, i) {\n      uint8[i] = binary.charCodeAt(i);\n    });\n    return arrayBuffer;\n  }\n\n  /**\n   * Transform array buffer to Data URL.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n   * @param {string} mimeType - The mime type of the Data URL.\n   * @returns {string} The result Data URL.\n   */\n  function arrayBufferToDataURL(arrayBuffer, mimeType) {\n    var chunks = [];\n\n    // Chunk Typed Array for better performance (#435)\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n    while (uint8.length > 0) {\n      // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n      // eslint-disable-next-line prefer-spread\n      chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n      uint8 = uint8.subarray(chunkSize);\n    }\n    return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n  }\n\n  /**\n   * Get orientation value from given array buffer.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n   * @returns {number} The read orientation value.\n   */\n  function resetAndGetOrientation(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var orientation;\n\n    // Ignores range error when the image does not have correct Exif information\n    try {\n      var littleEndian;\n      var app1Start;\n      var ifdStart;\n\n      // Only handle JPEG image (start by 0xFFD8)\n      if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n        var length = dataView.byteLength;\n        var offset = 2;\n        while (offset + 1 < length) {\n          if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n            app1Start = offset;\n            break;\n          }\n          offset += 1;\n        }\n      }\n      if (app1Start) {\n        var exifIDCode = app1Start + 4;\n        var tiffOffset = app1Start + 10;\n        if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n          var endianness = dataView.getUint16(tiffOffset);\n          littleEndian = endianness === 0x4949;\n          if (littleEndian || endianness === 0x4D4D /* bigEndian */) {\n            if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n              var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n              if (firstIFDOffset >= 0x00000008) {\n                ifdStart = tiffOffset + firstIFDOffset;\n              }\n            }\n          }\n        }\n      }\n      if (ifdStart) {\n        var _length = dataView.getUint16(ifdStart, littleEndian);\n        var _offset;\n        var i;\n        for (i = 0; i < _length; i += 1) {\n          _offset = ifdStart + i * 12 + 2;\n          if (dataView.getUint16(_offset, littleEndian) === 0x0112 /* Orientation */) {\n            // 8 is the offset of the current tag's value\n            _offset += 8;\n\n            // Get the original orientation value\n            orientation = dataView.getUint16(_offset, littleEndian);\n\n            // Override the orientation with its default value\n            dataView.setUint16(_offset, 1, littleEndian);\n            break;\n          }\n        }\n      }\n    } catch (error) {\n      orientation = 1;\n    }\n    return orientation;\n  }\n\n  /**\n   * Parse Exif Orientation value.\n   * @param {number} orientation - The orientation to parse.\n   * @returns {Object} The parsed result.\n   */\n  function parseOrientation(orientation) {\n    var rotate = 0;\n    var scaleX = 1;\n    var scaleY = 1;\n    switch (orientation) {\n      // Flip horizontal\n      case 2:\n        scaleX = -1;\n        break;\n\n      // Rotate left 180\n      case 3:\n        rotate = -180;\n        break;\n\n      // Flip vertical\n      case 4:\n        scaleY = -1;\n        break;\n\n      // Flip vertical and rotate right 90\n      case 5:\n        rotate = 90;\n        scaleY = -1;\n        break;\n\n      // Rotate right 90\n      case 6:\n        rotate = 90;\n        break;\n\n      // Flip horizontal and rotate right 90\n      case 7:\n        rotate = 90;\n        scaleX = -1;\n        break;\n\n      // Rotate left 90\n      case 8:\n        rotate = -90;\n        break;\n    }\n    return {\n      rotate: rotate,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initCanvas();\n      this.initCropBox();\n      this.renderCanvas();\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    },\n    initContainer: function initContainer() {\n      var element = this.element,\n        options = this.options,\n        container = this.container,\n        cropper = this.cropper;\n      var minWidth = Number(options.minContainerWidth);\n      var minHeight = Number(options.minContainerHeight);\n      addClass(cropper, CLASS_HIDDEN);\n      removeClass(element, CLASS_HIDDEN);\n      var containerData = {\n        width: Math.max(container.offsetWidth, minWidth >= 0 ? minWidth : MIN_CONTAINER_WIDTH),\n        height: Math.max(container.offsetHeight, minHeight >= 0 ? minHeight : MIN_CONTAINER_HEIGHT)\n      };\n      this.containerData = containerData;\n      setStyle(cropper, {\n        width: containerData.width,\n        height: containerData.height\n      });\n      addClass(element, CLASS_HIDDEN);\n      removeClass(cropper, CLASS_HIDDEN);\n    },\n    // Canvas (image wrapper)\n    initCanvas: function initCanvas() {\n      var containerData = this.containerData,\n        imageData = this.imageData;\n      var viewMode = this.options.viewMode;\n      var rotated = Math.abs(imageData.rotate) % 180 === 90;\n      var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n      var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var canvasWidth = containerData.width;\n      var canvasHeight = containerData.height;\n      if (containerData.height * aspectRatio > containerData.width) {\n        if (viewMode === 3) {\n          canvasWidth = containerData.height * aspectRatio;\n        } else {\n          canvasHeight = containerData.width / aspectRatio;\n        }\n      } else if (viewMode === 3) {\n        canvasHeight = containerData.width / aspectRatio;\n      } else {\n        canvasWidth = containerData.height * aspectRatio;\n      }\n      var canvasData = {\n        aspectRatio: aspectRatio,\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        width: canvasWidth,\n        height: canvasHeight\n      };\n      this.canvasData = canvasData;\n      this.limited = viewMode === 1 || viewMode === 2;\n      this.limitCanvas(true, true);\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      canvasData.left = (containerData.width - canvasData.width) / 2;\n      canvasData.top = (containerData.height - canvasData.height) / 2;\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      this.initialCanvasData = assign({}, canvasData);\n    },\n    limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n      var options = this.options,\n        containerData = this.containerData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var viewMode = options.viewMode;\n      var aspectRatio = canvasData.aspectRatio;\n      var cropped = this.cropped && cropBoxData;\n      if (sizeLimited) {\n        var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n        var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n          minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (viewMode > 0) {\n          if (minCanvasWidth) {\n            minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n          } else if (minCanvasHeight) {\n            minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n          } else if (cropped) {\n            minCanvasWidth = cropBoxData.width;\n            minCanvasHeight = cropBoxData.height;\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        }\n        var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: minCanvasWidth,\n          height: minCanvasHeight\n        });\n        minCanvasWidth = _getAdjustedSizes.width;\n        minCanvasHeight = _getAdjustedSizes.height;\n        canvasData.minWidth = minCanvasWidth;\n        canvasData.minHeight = minCanvasHeight;\n        canvasData.maxWidth = Infinity;\n        canvasData.maxHeight = Infinity;\n      }\n      if (positionLimited) {\n        if (viewMode > (cropped ? 0 : 1)) {\n          var newCanvasLeft = containerData.width - canvasData.width;\n          var newCanvasTop = containerData.height - canvasData.height;\n          canvasData.minLeft = Math.min(0, newCanvasLeft);\n          canvasData.minTop = Math.min(0, newCanvasTop);\n          canvasData.maxLeft = Math.max(0, newCanvasLeft);\n          canvasData.maxTop = Math.max(0, newCanvasTop);\n          if (cropped && this.limited) {\n            canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n            canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n            canvasData.maxLeft = cropBoxData.left;\n            canvasData.maxTop = cropBoxData.top;\n            if (viewMode === 2) {\n              if (canvasData.width >= containerData.width) {\n                canvasData.minLeft = Math.min(0, newCanvasLeft);\n                canvasData.maxLeft = Math.max(0, newCanvasLeft);\n              }\n              if (canvasData.height >= containerData.height) {\n                canvasData.minTop = Math.min(0, newCanvasTop);\n                canvasData.maxTop = Math.max(0, newCanvasTop);\n              }\n            }\n          }\n        } else {\n          canvasData.minLeft = -canvasData.width;\n          canvasData.minTop = -canvasData.height;\n          canvasData.maxLeft = containerData.width;\n          canvasData.maxTop = containerData.height;\n        }\n      }\n    },\n    renderCanvas: function renderCanvas(changed, transformed) {\n      var canvasData = this.canvasData,\n        imageData = this.imageData;\n      if (transformed) {\n        var _getRotatedSizes = getRotatedSizes({\n            width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n            height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n            degree: imageData.rotate || 0\n          }),\n          naturalWidth = _getRotatedSizes.width,\n          naturalHeight = _getRotatedSizes.height;\n        var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n        var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n        canvasData.left -= (width - canvasData.width) / 2;\n        canvasData.top -= (height - canvasData.height) / 2;\n        canvasData.width = width;\n        canvasData.height = height;\n        canvasData.aspectRatio = naturalWidth / naturalHeight;\n        canvasData.naturalWidth = naturalWidth;\n        canvasData.naturalHeight = naturalHeight;\n        this.limitCanvas(true, false);\n      }\n      if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n        canvasData.left = canvasData.oldLeft;\n      }\n      if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n        canvasData.top = canvasData.oldTop;\n      }\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      this.limitCanvas(false, true);\n      canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n      canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      setStyle(this.canvas, assign({\n        width: canvasData.width,\n        height: canvasData.height\n      }, getTransforms({\n        translateX: canvasData.left,\n        translateY: canvasData.top\n      })));\n      this.renderImage(changed);\n      if (this.cropped && this.limited) {\n        this.limitCropBox(true, true);\n      }\n    },\n    renderImage: function renderImage(changed) {\n      var canvasData = this.canvasData,\n        imageData = this.imageData;\n      var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n      var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n      assign(imageData, {\n        width: width,\n        height: height,\n        left: (canvasData.width - width) / 2,\n        top: (canvasData.height - height) / 2\n      });\n      setStyle(this.image, assign({\n        width: imageData.width,\n        height: imageData.height\n      }, getTransforms(assign({\n        translateX: imageData.left,\n        translateY: imageData.top\n      }, imageData))));\n      if (changed) {\n        this.output();\n      }\n    },\n    initCropBox: function initCropBox() {\n      var options = this.options,\n        canvasData = this.canvasData;\n      var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n      var autoCropArea = Number(options.autoCropArea) || 0.8;\n      var cropBoxData = {\n        width: canvasData.width,\n        height: canvasData.height\n      };\n      if (aspectRatio) {\n        if (canvasData.height * aspectRatio > canvasData.width) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n      this.cropBoxData = cropBoxData;\n      this.limitCropBox(true, true);\n\n      // Initialize auto crop area\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n\n      // The width/height of auto crop area must large than \"minWidth/Height\"\n      cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n      cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n      cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n      cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      this.initialCropBoxData = assign({}, cropBoxData);\n    },\n    limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n      var options = this.options,\n        containerData = this.containerData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData,\n        limited = this.limited;\n      var aspectRatio = options.aspectRatio;\n      if (sizeLimited) {\n        var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n        var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n        var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n        var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height;\n\n        // The min/maxCropBoxWidth/Height must be less than container's width/height\n        minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n        minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n        if (aspectRatio) {\n          if (minCropBoxWidth && minCropBoxHeight) {\n            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n              minCropBoxHeight = minCropBoxWidth / aspectRatio;\n            } else {\n              minCropBoxWidth = minCropBoxHeight * aspectRatio;\n            }\n          } else if (minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else if (minCropBoxHeight) {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n          } else {\n            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n          }\n        }\n\n        // The minWidth/Height must be less than maxWidth/Height\n        cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n        cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n        cropBoxData.maxWidth = maxCropBoxWidth;\n        cropBoxData.maxHeight = maxCropBoxHeight;\n      }\n      if (positionLimited) {\n        if (limited) {\n          cropBoxData.minLeft = Math.max(0, canvasData.left);\n          cropBoxData.minTop = Math.max(0, canvasData.top);\n          cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n          cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n        } else {\n          cropBoxData.minLeft = 0;\n          cropBoxData.minTop = 0;\n          cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n          cropBoxData.maxTop = containerData.height - cropBoxData.height;\n        }\n      }\n    },\n    renderCropBox: function renderCropBox() {\n      var options = this.options,\n        containerData = this.containerData,\n        cropBoxData = this.cropBoxData;\n      if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n        cropBoxData.left = cropBoxData.oldLeft;\n      }\n      if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n        cropBoxData.top = cropBoxData.oldTop;\n      }\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n      this.limitCropBox(false, true);\n      cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n      cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      if (options.movable && options.cropBoxMovable) {\n        // Turn to move the canvas when the crop box is equal to the container\n        setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n      }\n      setStyle(this.cropBox, assign({\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      }, getTransforms({\n        translateX: cropBoxData.left,\n        translateY: cropBoxData.top\n      })));\n      if (this.cropped && this.limited) {\n        this.limitCanvas(true, true);\n      }\n      if (!this.disabled) {\n        this.output();\n      }\n    },\n    output: function output() {\n      this.preview();\n      dispatchEvent(this.element, EVENT_CROP, this.getData());\n    }\n  };\n\n  var preview = {\n    initPreview: function initPreview() {\n      var element = this.element,\n        crossOrigin = this.crossOrigin;\n      var preview = this.options.preview;\n      var url = crossOrigin ? this.crossOriginUrl : this.url;\n      var alt = element.alt || 'The image to preview';\n      var image = document.createElement('img');\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n      image.src = url;\n      image.alt = alt;\n      this.viewBox.appendChild(image);\n      this.viewBoxImage = image;\n      if (!preview) {\n        return;\n      }\n      var previews = preview;\n      if (typeof preview === 'string') {\n        previews = element.ownerDocument.querySelectorAll(preview);\n      } else if (preview.querySelector) {\n        previews = [preview];\n      }\n      this.previews = previews;\n      forEach(previews, function (el) {\n        var img = document.createElement('img');\n\n        // Save the original size for recover\n        setData(el, DATA_PREVIEW, {\n          width: el.offsetWidth,\n          height: el.offsetHeight,\n          html: el.innerHTML\n        });\n        if (crossOrigin) {\n          img.crossOrigin = crossOrigin;\n        }\n        img.src = url;\n        img.alt = alt;\n\n        /**\n         * Override img element styles\n         * Add `display:block` to avoid margin top issue\n         * Add `height:auto` to override `height` attribute on IE8\n         * (Occur only when margin-top <= -height)\n         */\n        img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n        el.innerHTML = '';\n        el.appendChild(img);\n      });\n    },\n    resetPreview: function resetPreview() {\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        setStyle(element, {\n          width: data.width,\n          height: data.height\n        });\n        element.innerHTML = data.html;\n        removeData(element, DATA_PREVIEW);\n      });\n    },\n    preview: function preview() {\n      var imageData = this.imageData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var cropBoxWidth = cropBoxData.width,\n        cropBoxHeight = cropBoxData.height;\n      var width = imageData.width,\n        height = imageData.height;\n      var left = cropBoxData.left - canvasData.left - imageData.left;\n      var top = cropBoxData.top - canvasData.top - imageData.top;\n      if (!this.cropped || this.disabled) {\n        return;\n      }\n      setStyle(this.viewBoxImage, assign({\n        width: width,\n        height: height\n      }, getTransforms(assign({\n        translateX: -left,\n        translateY: -top\n      }, imageData))));\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        var originalWidth = data.width;\n        var originalHeight = data.height;\n        var newWidth = originalWidth;\n        var newHeight = originalHeight;\n        var ratio = 1;\n        if (cropBoxWidth) {\n          ratio = originalWidth / cropBoxWidth;\n          newHeight = cropBoxHeight * ratio;\n        }\n        if (cropBoxHeight && newHeight > originalHeight) {\n          ratio = originalHeight / cropBoxHeight;\n          newWidth = cropBoxWidth * ratio;\n          newHeight = originalHeight;\n        }\n        setStyle(element, {\n          width: newWidth,\n          height: newHeight\n        });\n        setStyle(element.getElementsByTagName('img')[0], assign({\n          width: width * ratio,\n          height: height * ratio\n        }, getTransforms(assign({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, imageData))));\n      });\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var element = this.element,\n        options = this.options,\n        cropper = this.cropper;\n      if (isFunction(options.cropstart)) {\n        addListener(element, EVENT_CROP_START, options.cropstart);\n      }\n      if (isFunction(options.cropmove)) {\n        addListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n      if (isFunction(options.cropend)) {\n        addListener(element, EVENT_CROP_END, options.cropend);\n      }\n      if (isFunction(options.crop)) {\n        addListener(element, EVENT_CROP, options.crop);\n      }\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom);\n      }\n      addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleDragModeOnDblclick) {\n        addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n      addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n      addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n      if (options.responsive) {\n        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var element = this.element,\n        options = this.options,\n        cropper = this.cropper;\n      if (isFunction(options.cropstart)) {\n        removeListener(element, EVENT_CROP_START, options.cropstart);\n      }\n      if (isFunction(options.cropmove)) {\n        removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n      if (isFunction(options.cropend)) {\n        removeListener(element, EVENT_CROP_END, options.cropend);\n      }\n      if (isFunction(options.crop)) {\n        removeListener(element, EVENT_CROP, options.crop);\n      }\n      if (isFunction(options.zoom)) {\n        removeListener(element, EVENT_ZOOM, options.zoom);\n      }\n      removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(cropper, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleDragModeOnDblclick) {\n        removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n      }\n      removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n      removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n      if (options.responsive) {\n        removeListener(window, EVENT_RESIZE, this.onResize);\n      }\n    }\n  };\n\n  var handlers = {\n    resize: function resize() {\n      if (this.disabled) {\n        return;\n      }\n      var options = this.options,\n        container = this.container,\n        containerData = this.containerData;\n      var ratioX = container.offsetWidth / containerData.width;\n      var ratioY = container.offsetHeight / containerData.height;\n      var ratio = Math.abs(ratioX - 1) > Math.abs(ratioY - 1) ? ratioX : ratioY;\n\n      // Resize when width changed or height changed\n      if (ratio !== 1) {\n        var canvasData;\n        var cropBoxData;\n        if (options.restore) {\n          canvasData = this.getCanvasData();\n          cropBoxData = this.getCropBoxData();\n        }\n        this.render();\n        if (options.restore) {\n          this.setCanvasData(forEach(canvasData, function (n, i) {\n            canvasData[i] = n * ratio;\n          }));\n          this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n            cropBoxData[i] = n * ratio;\n          }));\n        }\n      }\n    },\n    dblclick: function dblclick() {\n      if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n        return;\n      }\n      this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n    },\n    wheel: function wheel(event) {\n      var _this = this;\n      var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n      var delta = 1;\n      if (this.disabled) {\n        return;\n      }\n      event.preventDefault();\n\n      // Limit wheel speed to prevent zoom too fast (#21)\n      if (this.wheeling) {\n        return;\n      }\n      this.wheeling = true;\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n      this.zoom(-delta * ratio, event);\n    },\n    cropStart: function cropStart(event) {\n      var buttons = event.buttons,\n        button = event.button;\n      if (this.disabled\n\n      // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && (\n      // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0\n\n      // Open context menu\n      || event.ctrlKey)) {\n        return;\n      }\n      var options = this.options,\n        pointers = this.pointers;\n      var action;\n      if (event.changedTouches) {\n        // Handle touch event\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        // Handle mouse event and pointer event\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n      if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n        action = ACTION_ZOOM;\n      } else {\n        action = getData(event.target, DATA_ACTION);\n      }\n      if (!REGEXP_ACTIONS.test(action)) {\n        return;\n      }\n      if (dispatchEvent(this.element, EVENT_CROP_START, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n\n      // This line is required for preventing page zooming in iOS browsers\n      event.preventDefault();\n      this.action = action;\n      this.cropping = false;\n      if (action === ACTION_CROP) {\n        this.cropping = true;\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n    },\n    cropMove: function cropMove(event) {\n      var action = this.action;\n      if (this.disabled || !action) {\n        return;\n      }\n      var pointers = this.pointers;\n      event.preventDefault();\n      if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          // The first parameter should not be undefined (#432)\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n      this.change(event);\n    },\n    cropEnd: function cropEnd(event) {\n      if (this.disabled) {\n        return;\n      }\n      var action = this.action,\n        pointers = this.pointers;\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          delete pointers[touch.identifier];\n        });\n      } else {\n        delete pointers[event.pointerId || 0];\n      }\n      if (!action) {\n        return;\n      }\n      event.preventDefault();\n      if (!Object.keys(pointers).length) {\n        this.action = '';\n      }\n      if (this.cropping) {\n        this.cropping = false;\n        toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n      }\n      dispatchEvent(this.element, EVENT_CROP_END, {\n        originalEvent: event,\n        action: action\n      });\n    }\n  };\n\n  var change = {\n    change: function change(event) {\n      var options = this.options,\n        canvasData = this.canvasData,\n        containerData = this.containerData,\n        cropBoxData = this.cropBoxData,\n        pointers = this.pointers;\n      var action = this.action;\n      var aspectRatio = options.aspectRatio;\n      var left = cropBoxData.left,\n        top = cropBoxData.top,\n        width = cropBoxData.width,\n        height = cropBoxData.height;\n      var right = left + width;\n      var bottom = top + height;\n      var minLeft = 0;\n      var minTop = 0;\n      var maxWidth = containerData.width;\n      var maxHeight = containerData.height;\n      var renderable = true;\n      var offset;\n\n      // Locking aspect ratio in \"free mode\" by holding shift key\n      if (!aspectRatio && event.shiftKey) {\n        aspectRatio = width && height ? width / height : 1;\n      }\n      if (this.limited) {\n        minLeft = cropBoxData.minLeft;\n        minTop = cropBoxData.minTop;\n        maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n        maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n      }\n      var pointer = pointers[Object.keys(pointers)[0]];\n      var range = {\n        x: pointer.endX - pointer.startX,\n        y: pointer.endY - pointer.startY\n      };\n      var check = function check(side) {\n        switch (side) {\n          case ACTION_EAST:\n            if (right + range.x > maxWidth) {\n              range.x = maxWidth - right;\n            }\n            break;\n          case ACTION_WEST:\n            if (left + range.x < minLeft) {\n              range.x = minLeft - left;\n            }\n            break;\n          case ACTION_NORTH:\n            if (top + range.y < minTop) {\n              range.y = minTop - top;\n            }\n            break;\n          case ACTION_SOUTH:\n            if (bottom + range.y > maxHeight) {\n              range.y = maxHeight - bottom;\n            }\n            break;\n        }\n      };\n      switch (action) {\n        // Move crop box\n        case ACTION_ALL:\n          left += range.x;\n          top += range.y;\n          break;\n\n        // Resize crop box\n        case ACTION_EAST:\n          if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_EAST);\n          width += range.x;\n          if (width < 0) {\n            action = ACTION_WEST;\n            width = -width;\n            left -= width;\n          }\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n          break;\n        case ACTION_NORTH:\n          if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n          if (height < 0) {\n            action = ACTION_SOUTH;\n            height = -height;\n            top -= height;\n          }\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n          break;\n        case ACTION_WEST:\n          if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n          if (width < 0) {\n            action = ACTION_EAST;\n            width = -width;\n            left -= width;\n          }\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n          break;\n        case ACTION_SOUTH:\n          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_SOUTH);\n          height += range.y;\n          if (height < 0) {\n            action = ACTION_NORTH;\n            height = -height;\n            top -= height;\n          }\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n          break;\n        case ACTION_NORTH_EAST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_EAST);\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_NORTH_WEST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n            left += cropBoxData.width - width;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_WEST);\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_SOUTH_WEST:\n          if (aspectRatio) {\n            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_WEST);\n            width -= range.x;\n            left += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_WEST);\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_SOUTH_EAST:\n          if (aspectRatio) {\n            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_EAST);\n            width += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_EAST);\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            top -= height;\n          }\n          break;\n\n        // Move canvas\n        case ACTION_MOVE:\n          this.move(range.x, range.y);\n          renderable = false;\n          break;\n\n        // Zoom canvas\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), event);\n          renderable = false;\n          break;\n\n        // Create crop box\n        case ACTION_CROP:\n          if (!range.x || !range.y) {\n            renderable = false;\n            break;\n          }\n          offset = getOffset(this.cropper);\n          left = pointer.startX - offset.left;\n          top = pointer.startY - offset.top;\n          width = cropBoxData.minWidth;\n          height = cropBoxData.minHeight;\n          if (range.x > 0) {\n            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n          } else if (range.x < 0) {\n            left -= width;\n            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n          }\n          if (range.y < 0) {\n            top -= height;\n          }\n\n          // Show the crop box if is hidden\n          if (!this.cropped) {\n            removeClass(this.cropBox, CLASS_HIDDEN);\n            this.cropped = true;\n            if (this.limited) {\n              this.limitCropBox(true, true);\n            }\n          }\n          break;\n      }\n      if (renderable) {\n        cropBoxData.width = width;\n        cropBoxData.height = height;\n        cropBoxData.left = left;\n        cropBoxData.top = top;\n        this.action = action;\n        this.renderCropBox();\n      }\n\n      // Override\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    }\n  };\n\n  var methods = {\n    // Show the crop box manually\n    crop: function crop() {\n      if (this.ready && !this.cropped && !this.disabled) {\n        this.cropped = true;\n        this.limitCropBox(true, true);\n        if (this.options.modal) {\n          addClass(this.dragBox, CLASS_MODAL);\n        }\n        removeClass(this.cropBox, CLASS_HIDDEN);\n        this.setCropBoxData(this.initialCropBoxData);\n      }\n      return this;\n    },\n    // Reset the image and crop box to their initial states\n    reset: function reset() {\n      if (this.ready && !this.disabled) {\n        this.imageData = assign({}, this.initialImageData);\n        this.canvasData = assign({}, this.initialCanvasData);\n        this.cropBoxData = assign({}, this.initialCropBoxData);\n        this.renderCanvas();\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n      return this;\n    },\n    // Clear the crop box\n    clear: function clear() {\n      if (this.cropped && !this.disabled) {\n        assign(this.cropBoxData, {\n          left: 0,\n          top: 0,\n          width: 0,\n          height: 0\n        });\n        this.cropped = false;\n        this.renderCropBox();\n        this.limitCanvas(true, true);\n\n        // Render canvas after crop box rendered\n        this.renderCanvas();\n        removeClass(this.dragBox, CLASS_MODAL);\n        addClass(this.cropBox, CLASS_HIDDEN);\n      }\n      return this;\n    },\n    /**\n     * Replace the image's src and rebuild the cropper\n     * @param {string} url - The new URL.\n     * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n     * @returns {Cropper} this\n     */\n    replace: function replace(url) {\n      var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!this.disabled && url) {\n        if (this.isImg) {\n          this.element.src = url;\n        }\n        if (hasSameSize) {\n          this.url = url;\n          this.image.src = url;\n          if (this.ready) {\n            this.viewBoxImage.src = url;\n            forEach(this.previews, function (element) {\n              element.getElementsByTagName('img')[0].src = url;\n            });\n          }\n        } else {\n          if (this.isImg) {\n            this.replaced = true;\n          }\n          this.options.data = null;\n          this.uncreate();\n          this.load(url);\n        }\n      }\n      return this;\n    },\n    // Enable (unfreeze) the cropper\n    enable: function enable() {\n      if (this.ready && this.disabled) {\n        this.disabled = false;\n        removeClass(this.cropper, CLASS_DISABLED);\n      }\n      return this;\n    },\n    // Disable (freeze) the cropper\n    disable: function disable() {\n      if (this.ready && !this.disabled) {\n        this.disabled = true;\n        addClass(this.cropper, CLASS_DISABLED);\n      }\n      return this;\n    },\n    /**\n     * Destroy the cropper and remove the instance from the image\n     * @returns {Cropper} this\n     */\n    destroy: function destroy() {\n      var element = this.element;\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n      element[NAMESPACE] = undefined;\n      if (this.isImg && this.replaced) {\n        element.src = this.originalUrl;\n      }\n      this.uncreate();\n      return this;\n    },\n    /**\n     * Move the canvas with relative offsets\n     * @param {number} offsetX - The relative offset distance on the x-axis.\n     * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n     * @returns {Cropper} this\n     */\n    move: function move(offsetX) {\n      var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n      var _this$canvasData = this.canvasData,\n        left = _this$canvasData.left,\n        top = _this$canvasData.top;\n      return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n    },\n    /**\n     * Move the canvas to an absolute point\n     * @param {number} x - The x-axis coordinate.\n     * @param {number} [y=x] - The y-axis coordinate.\n     * @returns {Cropper} this\n     */\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var canvasData = this.canvasData;\n      var changed = false;\n      x = Number(x);\n      y = Number(y);\n      if (this.ready && !this.disabled && this.options.movable) {\n        if (isNumber(x)) {\n          canvasData.left = x;\n          changed = true;\n        }\n        if (isNumber(y)) {\n          canvasData.top = y;\n          changed = true;\n        }\n        if (changed) {\n          this.renderCanvas(true);\n        }\n      }\n      return this;\n    },\n    /**\n     * Zoom the canvas with a relative ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoom: function zoom(ratio, _originalEvent) {\n      var canvasData = this.canvasData;\n      ratio = Number(ratio);\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n      return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n    },\n    /**\n     * Zoom the canvas to an absolute ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Object} pivot - The zoom pivot point coordinate.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n      var options = this.options,\n        canvasData = this.canvasData;\n      var width = canvasData.width,\n        height = canvasData.height,\n        naturalWidth = canvasData.naturalWidth,\n        naturalHeight = canvasData.naturalHeight;\n      ratio = Number(ratio);\n      if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n        if (dispatchEvent(this.element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: width / naturalWidth,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n        if (_originalEvent) {\n          var pointers = this.pointers;\n          var offset = getOffset(this.cropper);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          };\n\n          // Zoom from the triggering point of the event\n          canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n        } else {\n          // Zoom from the center of the canvas\n          canvasData.left -= (newWidth - width) / 2;\n          canvasData.top -= (newHeight - height) / 2;\n        }\n        canvasData.width = newWidth;\n        canvasData.height = newHeight;\n        this.renderCanvas(true);\n      }\n      return this;\n    },\n    /**\n     * Rotate the canvas with a relative degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotate: function rotate(degree) {\n      return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n    },\n    /**\n     * Rotate the canvas to an absolute degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotateTo: function rotateTo(degree) {\n      degree = Number(degree);\n      if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n        this.imageData.rotate = degree % 360;\n        this.renderCanvas(true, true);\n      }\n      return this;\n    },\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Cropper} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      var scaleY = this.imageData.scaleY;\n      return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n    },\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      var scaleX = this.imageData.scaleX;\n      return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n    },\n    /**\n     * Scale the image\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var imageData = this.imageData;\n      var transformed = false;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n      if (this.ready && !this.disabled && this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          transformed = true;\n        }\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          transformed = true;\n        }\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n      }\n      return this;\n    },\n    /**\n     * Get the cropped area position and size data (base on the original image)\n     * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n     * @returns {Object} The result cropped data.\n     */\n    getData: function getData() {\n      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var options = this.options,\n        imageData = this.imageData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var data;\n      if (this.ready && this.cropped) {\n        data = {\n          x: cropBoxData.left - canvasData.left,\n          y: cropBoxData.top - canvasData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n        var ratio = imageData.width / imageData.naturalWidth;\n        forEach(data, function (n, i) {\n          data[i] = n / ratio;\n        });\n        if (rounded) {\n          // In case rounding off leads to extra 1px in right or bottom border\n          // we should round the top-left corner and the dimension (#343).\n          var bottom = Math.round(data.y + data.height);\n          var right = Math.round(data.x + data.width);\n          data.x = Math.round(data.x);\n          data.y = Math.round(data.y);\n          data.width = right - data.x;\n          data.height = bottom - data.y;\n        }\n      } else {\n        data = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      if (options.rotatable) {\n        data.rotate = imageData.rotate || 0;\n      }\n      if (options.scalable) {\n        data.scaleX = imageData.scaleX || 1;\n        data.scaleY = imageData.scaleY || 1;\n      }\n      return data;\n    },\n    /**\n     * Set the cropped area position and size with new data\n     * @param {Object} data - The new data.\n     * @returns {Cropper} this\n     */\n    setData: function setData(data) {\n      var options = this.options,\n        imageData = this.imageData,\n        canvasData = this.canvasData;\n      var cropBoxData = {};\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        var transformed = false;\n        if (options.rotatable) {\n          if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n            imageData.rotate = data.rotate;\n            transformed = true;\n          }\n        }\n        if (options.scalable) {\n          if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n            imageData.scaleX = data.scaleX;\n            transformed = true;\n          }\n          if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n            imageData.scaleY = data.scaleY;\n            transformed = true;\n          }\n        }\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n        var ratio = imageData.width / imageData.naturalWidth;\n        if (isNumber(data.x)) {\n          cropBoxData.left = data.x * ratio + canvasData.left;\n        }\n        if (isNumber(data.y)) {\n          cropBoxData.top = data.y * ratio + canvasData.top;\n        }\n        if (isNumber(data.width)) {\n          cropBoxData.width = data.width * ratio;\n        }\n        if (isNumber(data.height)) {\n          cropBoxData.height = data.height * ratio;\n        }\n        this.setCropBoxData(cropBoxData);\n      }\n      return this;\n    },\n    /**\n     * Get the container size data.\n     * @returns {Object} The result container data.\n     */\n    getContainerData: function getContainerData() {\n      return this.ready ? assign({}, this.containerData) : {};\n    },\n    /**\n     * Get the image position and size data.\n     * @returns {Object} The result image data.\n     */\n    getImageData: function getImageData() {\n      return this.sized ? assign({}, this.imageData) : {};\n    },\n    /**\n     * Get the canvas position and size data.\n     * @returns {Object} The result canvas data.\n     */\n    getCanvasData: function getCanvasData() {\n      var canvasData = this.canvasData;\n      var data = {};\n      if (this.ready) {\n        forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n          data[n] = canvasData[n];\n        });\n      }\n      return data;\n    },\n    /**\n     * Set the canvas position and size with new data.\n     * @param {Object} data - The new canvas data.\n     * @returns {Cropper} this\n     */\n    setCanvasData: function setCanvasData(data) {\n      var canvasData = this.canvasData;\n      var aspectRatio = canvasData.aspectRatio;\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          canvasData.left = data.left;\n        }\n        if (isNumber(data.top)) {\n          canvasData.top = data.top;\n        }\n        if (isNumber(data.width)) {\n          canvasData.width = data.width;\n          canvasData.height = data.width / aspectRatio;\n        } else if (isNumber(data.height)) {\n          canvasData.height = data.height;\n          canvasData.width = data.height * aspectRatio;\n        }\n        this.renderCanvas(true);\n      }\n      return this;\n    },\n    /**\n     * Get the crop box position and size data.\n     * @returns {Object} The result crop box data.\n     */\n    getCropBoxData: function getCropBoxData() {\n      var cropBoxData = this.cropBoxData;\n      var data;\n      if (this.ready && this.cropped) {\n        data = {\n          left: cropBoxData.left,\n          top: cropBoxData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n      }\n      return data || {};\n    },\n    /**\n     * Set the crop box position and size with new data.\n     * @param {Object} data - The new crop box data.\n     * @returns {Cropper} this\n     */\n    setCropBoxData: function setCropBoxData(data) {\n      var cropBoxData = this.cropBoxData;\n      var aspectRatio = this.options.aspectRatio;\n      var widthChanged;\n      var heightChanged;\n      if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          cropBoxData.left = data.left;\n        }\n        if (isNumber(data.top)) {\n          cropBoxData.top = data.top;\n        }\n        if (isNumber(data.width) && data.width !== cropBoxData.width) {\n          widthChanged = true;\n          cropBoxData.width = data.width;\n        }\n        if (isNumber(data.height) && data.height !== cropBoxData.height) {\n          heightChanged = true;\n          cropBoxData.height = data.height;\n        }\n        if (aspectRatio) {\n          if (widthChanged) {\n            cropBoxData.height = cropBoxData.width / aspectRatio;\n          } else if (heightChanged) {\n            cropBoxData.width = cropBoxData.height * aspectRatio;\n          }\n        }\n        this.renderCropBox();\n      }\n      return this;\n    },\n    /**\n     * Get a canvas drawn the cropped image.\n     * @param {Object} [options={}] - The config options.\n     * @returns {HTMLCanvasElement} - The result canvas.\n     */\n    getCroppedCanvas: function getCroppedCanvas() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!this.ready || !window.HTMLCanvasElement) {\n        return null;\n      }\n      var canvasData = this.canvasData;\n      var source = getSourceCanvas(this.image, this.imageData, canvasData, options);\n\n      // Returns the source canvas if it is not cropped.\n      if (!this.cropped) {\n        return source;\n      }\n      var _this$getData = this.getData(),\n        initialX = _this$getData.x,\n        initialY = _this$getData.y,\n        initialWidth = _this$getData.width,\n        initialHeight = _this$getData.height;\n      var ratio = source.width / Math.floor(canvasData.naturalWidth);\n      if (ratio !== 1) {\n        initialX *= ratio;\n        initialY *= ratio;\n        initialWidth *= ratio;\n        initialHeight *= ratio;\n      }\n      var aspectRatio = initialWidth / initialHeight;\n      var maxSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.maxWidth || Infinity,\n        height: options.maxHeight || Infinity\n      });\n      var minSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.minWidth || 0,\n        height: options.minHeight || 0\n      }, 'cover');\n      var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: options.width || (ratio !== 1 ? source.width : initialWidth),\n          height: options.height || (ratio !== 1 ? source.height : initialHeight)\n        }),\n        width = _getAdjustedSizes.width,\n        height = _getAdjustedSizes.height;\n      width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n      height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = normalizeDecimalNumber(width);\n      canvas.height = normalizeDecimalNumber(height);\n      context.fillStyle = options.fillColor || 'transparent';\n      context.fillRect(0, 0, width, height);\n      var _options$imageSmoothi = options.imageSmoothingEnabled,\n        imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n        imageSmoothingQuality = options.imageSmoothingQuality;\n      context.imageSmoothingEnabled = imageSmoothingEnabled;\n      if (imageSmoothingQuality) {\n        context.imageSmoothingQuality = imageSmoothingQuality;\n      }\n\n      // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n      var sourceWidth = source.width;\n      var sourceHeight = source.height;\n\n      // Source canvas parameters\n      var srcX = initialX;\n      var srcY = initialY;\n      var srcWidth;\n      var srcHeight;\n\n      // Destination canvas parameters\n      var dstX;\n      var dstY;\n      var dstWidth;\n      var dstHeight;\n      if (srcX <= -initialWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n        dstWidth = srcWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n        dstWidth = srcWidth;\n      }\n      if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n        dstHeight = srcHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n        dstHeight = srcHeight;\n      }\n      var params = [srcX, srcY, srcWidth, srcHeight];\n\n      // Avoid \"IndexSizeError\"\n      if (dstWidth > 0 && dstHeight > 0) {\n        var scale = width / initialWidth;\n        params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n      }\n\n      // All the numerical parameters should be integer for `drawImage`\n      // https://github.com/fengyuanchen/cropper/issues/476\n      context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n        return Math.floor(normalizeDecimalNumber(param));\n      }))));\n      return canvas;\n    },\n    /**\n     * Change the aspect ratio of the crop box.\n     * @param {number} aspectRatio - The new aspect ratio.\n     * @returns {Cropper} this\n     */\n    setAspectRatio: function setAspectRatio(aspectRatio) {\n      var options = this.options;\n      if (!this.disabled && !isUndefined(aspectRatio)) {\n        // 0 -> NaN\n        options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n        if (this.ready) {\n          this.initCropBox();\n          if (this.cropped) {\n            this.renderCropBox();\n          }\n        }\n      }\n      return this;\n    },\n    /**\n     * Change the drag mode.\n     * @param {string} mode - The new drag mode.\n     * @returns {Cropper} this\n     */\n    setDragMode: function setDragMode(mode) {\n      var options = this.options,\n        dragBox = this.dragBox,\n        face = this.face;\n      if (this.ready && !this.disabled) {\n        var croppable = mode === DRAG_MODE_CROP;\n        var movable = options.movable && mode === DRAG_MODE_MOVE;\n        mode = croppable || movable ? mode : DRAG_MODE_NONE;\n        options.dragMode = mode;\n        setData(dragBox, DATA_ACTION, mode);\n        toggleClass(dragBox, CLASS_CROP, croppable);\n        toggleClass(dragBox, CLASS_MOVE, movable);\n        if (!options.cropBoxMovable) {\n          // Sync drag mode to crop box when it is not movable\n          setData(face, DATA_ACTION, mode);\n          toggleClass(face, CLASS_CROP, croppable);\n          toggleClass(face, CLASS_MOVE, movable);\n        }\n      }\n      return this;\n    }\n  };\n\n  var AnotherCropper = WINDOW.Cropper;\n  var Cropper = /*#__PURE__*/function () {\n    /**\n     * Create a new Cropper.\n     * @param {Element} element - The target element for cropping.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Cropper(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      _classCallCheck(this, Cropper);\n      if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n        throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n      }\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.cropped = false;\n      this.disabled = false;\n      this.pointers = {};\n      this.ready = false;\n      this.reloading = false;\n      this.replaced = false;\n      this.sized = false;\n      this.sizing = false;\n      this.init();\n    }\n    _createClass(Cropper, [{\n      key: \"init\",\n      value: function init() {\n        var element = this.element;\n        var tagName = element.tagName.toLowerCase();\n        var url;\n        if (element[NAMESPACE]) {\n          return;\n        }\n        element[NAMESPACE] = this;\n        if (tagName === 'img') {\n          this.isImg = true;\n\n          // e.g.: \"img/picture.jpg\"\n          url = element.getAttribute('src') || '';\n          this.originalUrl = url;\n\n          // Stop when it's a blank image\n          if (!url) {\n            return;\n          }\n\n          // e.g.: \"https://example.com/img/picture.jpg\"\n          url = element.src;\n        } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n          url = element.toDataURL();\n        }\n        this.load(url);\n      }\n    }, {\n      key: \"load\",\n      value: function load(url) {\n        var _this = this;\n        if (!url) {\n          return;\n        }\n        this.url = url;\n        this.imageData = {};\n        var element = this.element,\n          options = this.options;\n        if (!options.rotatable && !options.scalable) {\n          options.checkOrientation = false;\n        }\n\n        // Only IE10+ supports Typed Arrays\n        if (!options.checkOrientation || !window.ArrayBuffer) {\n          this.clone();\n          return;\n        }\n\n        // Detect the mime type of the image directly if it is a Data URL\n        if (REGEXP_DATA_URL.test(url)) {\n          // Read ArrayBuffer from Data URL of JPEG images directly for better performance\n          if (REGEXP_DATA_URL_JPEG.test(url)) {\n            this.read(dataURLToArrayBuffer(url));\n          } else {\n            // Only a JPEG image may contains Exif Orientation information,\n            // the rest types of Data URLs are not necessary to check orientation at all.\n            this.clone();\n          }\n          return;\n        }\n\n        // 1. Detect the mime type of the image by a XMLHttpRequest.\n        // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.\n        var xhr = new XMLHttpRequest();\n        var clone = this.clone.bind(this);\n        this.reloading = true;\n        this.xhr = xhr;\n\n        // 1. Cross origin requests are only supported for protocol schemes:\n        // http, https, data, chrome, chrome-extension.\n        // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy\n        // in some browsers as IE11 and Safari.\n        xhr.onabort = clone;\n        xhr.onerror = clone;\n        xhr.ontimeout = clone;\n        xhr.onprogress = function () {\n          // Abort the request directly if it not a JPEG image for better performance\n          if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n            xhr.abort();\n          }\n        };\n        xhr.onload = function () {\n          _this.read(xhr.response);\n        };\n        xhr.onloadend = function () {\n          _this.reloading = false;\n          _this.xhr = null;\n        };\n\n        // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n        if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n          url = addTimestamp(url);\n        }\n\n        // The third parameter is required for avoiding side-effect (#682)\n        xhr.open('GET', url, true);\n        xhr.responseType = 'arraybuffer';\n        xhr.withCredentials = element.crossOrigin === 'use-credentials';\n        xhr.send();\n      }\n    }, {\n      key: \"read\",\n      value: function read(arrayBuffer) {\n        var options = this.options,\n          imageData = this.imageData;\n\n        // Reset the orientation value to its default value 1\n        // as some iOS browsers will render image with its orientation\n        var orientation = resetAndGetOrientation(arrayBuffer);\n        var rotate = 0;\n        var scaleX = 1;\n        var scaleY = 1;\n        if (orientation > 1) {\n          // Generate a new URL which has the default orientation value\n          this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n          var _parseOrientation = parseOrientation(orientation);\n          rotate = _parseOrientation.rotate;\n          scaleX = _parseOrientation.scaleX;\n          scaleY = _parseOrientation.scaleY;\n        }\n        if (options.rotatable) {\n          imageData.rotate = rotate;\n        }\n        if (options.scalable) {\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n        }\n        this.clone();\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        var element = this.element,\n          url = this.url;\n        var crossOrigin = element.crossOrigin;\n        var crossOriginUrl = url;\n        if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n          if (!crossOrigin) {\n            crossOrigin = 'anonymous';\n          }\n\n          // Bust cache when there is not a \"crossOrigin\" property (#519)\n          crossOriginUrl = addTimestamp(url);\n        }\n        this.crossOrigin = crossOrigin;\n        this.crossOriginUrl = crossOriginUrl;\n        var image = document.createElement('img');\n        if (crossOrigin) {\n          image.crossOrigin = crossOrigin;\n        }\n        image.src = crossOriginUrl || url;\n        image.alt = element.alt || 'The image to crop';\n        this.image = image;\n        image.onload = this.start.bind(this);\n        image.onerror = this.stop.bind(this);\n        addClass(image, CLASS_HIDE);\n        element.parentNode.insertBefore(image, element.nextSibling);\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this2 = this;\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        this.sizing = true;\n\n        // Match all browsers that use WebKit as the layout engine in iOS devices,\n        // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n        var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);\n        var done = function done(naturalWidth, naturalHeight) {\n          assign(_this2.imageData, {\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            aspectRatio: naturalWidth / naturalHeight\n          });\n          _this2.initialImageData = assign({}, _this2.imageData);\n          _this2.sizing = false;\n          _this2.sized = true;\n          _this2.build();\n        };\n\n        // Most modern browsers (excepts iOS WebKit)\n        if (image.naturalWidth && !isIOSWebKit) {\n          done(image.naturalWidth, image.naturalHeight);\n          return;\n        }\n        var sizingImage = document.createElement('img');\n        var body = document.body || document.documentElement;\n        this.sizingImage = sizingImage;\n        sizingImage.onload = function () {\n          done(sizingImage.width, sizingImage.height);\n          if (!isIOSWebKit) {\n            body.removeChild(sizingImage);\n          }\n        };\n        sizingImage.src = image.src;\n\n        // iOS WebKit will convert the image automatically\n        // with its orientation once append it into DOM (#279)\n        if (!isIOSWebKit) {\n          sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n          body.appendChild(sizingImage);\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (!this.sized || this.ready) {\n          return;\n        }\n        var element = this.element,\n          options = this.options,\n          image = this.image;\n\n        // Create cropper elements\n        var container = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n        var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n        var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n        this.container = container;\n        this.cropper = cropper;\n        this.canvas = canvas;\n        this.dragBox = dragBox;\n        this.cropBox = cropBox;\n        this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n        this.face = face;\n        canvas.appendChild(image);\n\n        // Hide the original image\n        addClass(element, CLASS_HIDDEN);\n\n        // Inserts the cropper after to the current image\n        container.insertBefore(cropper, element.nextSibling);\n\n        // Show the hidden image\n        removeClass(image, CLASS_HIDE);\n        this.initPreview();\n        this.bind();\n        options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n        options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n        options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n        addClass(cropBox, CLASS_HIDDEN);\n        if (!options.guides) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n        }\n        if (!options.center) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n        }\n        if (options.background) {\n          addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n        }\n        if (!options.highlight) {\n          addClass(face, CLASS_INVISIBLE);\n        }\n        if (options.cropBoxMovable) {\n          addClass(face, CLASS_MOVE);\n          setData(face, DATA_ACTION, ACTION_ALL);\n        }\n        if (!options.cropBoxResizable) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n        }\n        this.render();\n        this.ready = true;\n        this.setDragMode(options.dragMode);\n        if (options.autoCrop) {\n          this.crop();\n        }\n        this.setData(options.data);\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n        dispatchEvent(element, EVENT_READY);\n      }\n    }, {\n      key: \"unbuild\",\n      value: function unbuild() {\n        if (!this.ready) {\n          return;\n        }\n        this.ready = false;\n        this.unbind();\n        this.resetPreview();\n        var parentNode = this.cropper.parentNode;\n        if (parentNode) {\n          parentNode.removeChild(this.cropper);\n        }\n        removeClass(this.element, CLASS_HIDDEN);\n      }\n    }, {\n      key: \"uncreate\",\n      value: function uncreate() {\n        if (this.ready) {\n          this.unbuild();\n          this.ready = false;\n          this.cropped = false;\n        } else if (this.sizing) {\n          this.sizingImage.onload = null;\n          this.sizing = false;\n          this.sized = false;\n        } else if (this.reloading) {\n          this.xhr.onabort = null;\n          this.xhr.abort();\n        } else if (this.image) {\n          this.stop();\n        }\n      }\n\n      /**\n       * Get the no conflict cropper class.\n       * @returns {Cropper} The cropper class.\n       */\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Cropper = AnotherCropper;\n        return Cropper;\n      }\n\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n    return Cropper;\n  }();\n  assign(Cropper.prototype, render, preview, events, handlers, change, methods);\n\n  return Cropper;\n\n}));\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _cropperjs = require('cropperjs');\n\nvar _cropperjs2 = _interopRequireDefault(_cropperjs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar previewPropType = typeof window === 'undefined' ? [String, Array] : [String, Array, Element, NodeList];\n\nexports.default = {\n  render: function render(h) {\n    var crossorigin = this.crossorigin || undefined;\n\n    return h('div', { style: this.containerStyle }, [h('img', {\n      ref: 'img',\n      attrs: {\n        src: this.src,\n        alt: this.alt || 'image',\n        style: 'max-width: 100%',\n        crossorigin: crossorigin\n      },\n      on: this.$listeners,\n      style: this.imgStyle\n    })]);\n  },\n\n  props: {\n    containerStyle: Object,\n    src: {\n      type: String,\n      default: ''\n    },\n    alt: String,\n    imgStyle: Object,\n\n    viewMode: Number,\n    dragMode: String,\n    initialAspectRatio: Number,\n    aspectRatio: Number,\n    data: Object,\n    preview: previewPropType,\n    responsive: {\n      type: Boolean,\n      default: true\n    },\n    restore: {\n      type: Boolean,\n      default: true\n    },\n    checkCrossOrigin: {\n      type: Boolean,\n      default: true\n    },\n    checkOrientation: {\n      type: Boolean,\n      default: true\n    },\n    crossorigin: {\n      type: String\n    },\n    modal: {\n      type: Boolean,\n      default: true\n    },\n    guides: {\n      type: Boolean,\n      default: true\n    },\n    center: {\n      type: Boolean,\n      default: true\n    },\n    highlight: {\n      type: Boolean,\n      default: true\n    },\n    background: {\n      type: Boolean,\n      default: true\n    },\n    autoCrop: {\n      type: Boolean,\n      default: true\n    },\n    autoCropArea: Number,\n    movable: {\n      type: Boolean,\n      default: true\n    },\n    rotatable: {\n      type: Boolean,\n      default: true\n    },\n    scalable: {\n      type: Boolean,\n      default: true\n    },\n    zoomable: {\n      type: Boolean,\n      default: true\n    },\n    zoomOnTouch: {\n      type: Boolean,\n      default: true\n    },\n    zoomOnWheel: {\n      type: Boolean,\n      default: true\n    },\n    wheelZoomRatio: Number,\n    cropBoxMovable: {\n      type: Boolean,\n      default: true\n    },\n    cropBoxResizable: {\n      type: Boolean,\n      default: true\n    },\n    toggleDragModeOnDblclick: {\n      type: Boolean,\n      default: true\n    },\n\n    minCanvasWidth: Number,\n    minCanvasHeight: Number,\n    minCropBoxWidth: Number,\n    minCropBoxHeight: Number,\n    minContainerWidth: Number,\n    minContainerHeight: Number,\n\n    ready: Function,\n    cropstart: Function,\n    cropmove: Function,\n    cropend: Function,\n    crop: Function,\n    zoom: Function\n  },\n  mounted: function mounted() {\n    var _$options$props = this.$options.props,\n        containerStyle = _$options$props.containerStyle,\n        src = _$options$props.src,\n        alt = _$options$props.alt,\n        imgStyle = _$options$props.imgStyle,\n        data = _objectWithoutProperties(_$options$props, ['containerStyle', 'src', 'alt', 'imgStyle']);\n\n    var props = {};\n\n    for (var key in data) {\n      if (this[key] !== undefined) {\n        props[key] = this[key];\n      }\n    }\n\n    this.cropper = new _cropperjs2.default(this.$refs.img, props);\n  },\n\n  methods: {\n    reset: function reset() {\n      return this.cropper.reset();\n    },\n    clear: function clear() {\n      return this.cropper.clear();\n    },\n    initCrop: function initCrop() {\n      return this.cropper.crop();\n    },\n    replace: function replace(url) {\n      var onlyColorChanged = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      return this.cropper.replace(url, onlyColorChanged);\n    },\n    enable: function enable() {\n      return this.cropper.enable();\n    },\n    disable: function disable() {\n      return this.cropper.disable();\n    },\n    destroy: function destroy() {\n      return this.cropper.destroy();\n    },\n    move: function move(offsetX, offsetY) {\n      return this.cropper.move(offsetX, offsetY);\n    },\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n\n      return this.cropper.moveTo(x, y);\n    },\n    relativeZoom: function relativeZoom(ratio, _originalEvent) {\n      return this.cropper.zoom(ratio, _originalEvent);\n    },\n    zoomTo: function zoomTo(ratio, _originalEvent) {\n      return this.cropper.zoomTo(ratio, _originalEvent);\n    },\n    rotate: function rotate(degree) {\n      return this.cropper.rotate(degree);\n    },\n    rotateTo: function rotateTo(degree) {\n      return this.cropper.rotateTo(degree);\n    },\n    scaleX: function scaleX(_scaleX) {\n      return this.cropper.scaleX(_scaleX);\n    },\n    scaleY: function scaleY(_scaleY) {\n      return this.cropper.scaleY(_scaleY);\n    },\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n\n      return this.cropper.scale(scaleX, scaleY);\n    },\n    getData: function getData() {\n      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      return this.cropper.getData(rounded);\n    },\n    setData: function setData(data) {\n      return this.cropper.setData(data);\n    },\n    getContainerData: function getContainerData() {\n      return this.cropper.getContainerData();\n    },\n    getImageData: function getImageData() {\n      return this.cropper.getImageData();\n    },\n    getCanvasData: function getCanvasData() {\n      return this.cropper.getCanvasData();\n    },\n    setCanvasData: function setCanvasData(data) {\n      return this.cropper.setCanvasData(data);\n    },\n    getCropBoxData: function getCropBoxData() {\n      return this.cropper.getCropBoxData();\n    },\n    setCropBoxData: function setCropBoxData(data) {\n      return this.cropper.setCropBoxData(data);\n    },\n    getCroppedCanvas: function getCroppedCanvas() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      return this.cropper.getCroppedCanvas(options);\n    },\n    setAspectRatio: function setAspectRatio(aspectRatio) {\n      return this.cropper.setAspectRatio(aspectRatio);\n    },\n    setDragMode: function setDragMode(mode) {\n      return this.cropper.setDragMode(mode);\n    }\n  }\n};","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div v-click-outside=\"closeMenu\" class=\"contact-header-avatar__wrapper\">\n\t\t<input id=\"contact-avatar-upload\"\n\t\t\tref=\"uploadInput\"\n\t\t\ttype=\"file\"\n\t\t\tclass=\"hidden\"\n\t\t\taccept=\"image/*\"\n\t\t\t@change=\"handleUploadedFile\">\n\n\t\t<!-- Avatar display -->\n\t\t<Avatar :disable-tooltip=\"true\"\n\t\t\t:display-name=\"contact.displayName\"\n\t\t\t:is-no-user=\"true\"\n\t\t\t:size=\"75\"\n\t\t\t:url=\"photoUrl\"\n\t\t\tclass=\"contact-header-avatar__photo\" />\n\n\t\t<NcModal :show.sync=\"showCropper\" size=\"small\" @close=\"cancel\">\n\t\t\t<div class=\"avatar__container\">\n\t\t\t\t<h2>{{ t('contacts', 'Crop contact photo') }}</h2>\n\t\t\t\t<VueCropper ref=\"cropper\"\n\t\t\t\t\tclass=\"avatar__cropper\"\n\t\t\t\t\tv-bind=\"cropperOptions\" />\n\t\t\t\t<div class=\"avatar__cropper-buttons\">\n\t\t\t\t\t<NcButton type=\"tertiary\" @click=\"cancel\">\n\t\t\t\t\t\t{{ t('contacts', 'Cancel') }}\n\t\t\t\t\t</NcButton>\n\t\t\t\t\t<NcButton type=\"primary\"\n\t\t\t\t\t\t@click=\"saveAvatar\">\n\t\t\t\t\t\t{{ t('contacts', 'Save') }}\n\t\t\t\t\t</NcButton>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</NcModal>\n\n\t\t<Actions v-if=\"!isReadOnly\"\n\t\t\t:force-menu=\"true\"\n\t\t\t:open.sync=\"opened\"\n\t\t\tclass=\"contact-header-avatar__menu\">\n\t\t\t<template #icon>\n\t\t\t\t<IconImage :size=\"20\" fill-color=\"#fff\" />\n\t\t\t</template>\n\t\t\t<ActionButton @click.stop.prevent=\"selectFileInput\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconUpload :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('contacts', 'Upload a new picture') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton @click=\"selectFilePicker\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconFolder :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('contacts', 'Choose from Files') }}\n\t\t\t</ActionButton>\n\t\t\t<ActionButton v-for=\"network in supportedSocial\"\n\t\t\t\t:key=\"network\"\n\t\t\t\t@click=\"getSocialAvatar(network)\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconCloudDownload :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('contacts', 'Get from ' + network) }}\n\t\t\t</ActionButton>\n\n\t\t\t<template v-if=\"contact.photo\">\n\t\t\t\t<!-- FIXME: the link seems to have a bigger font size than the button caption -->\n\t\t\t\t<ActionLink :href=\"`${contact.url}?photo`\"\n\t\t\t\t\ttarget=\"_blank\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconDownload :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Download picture') }}\n\t\t\t\t</ActionLink>\n\t\t\t\t<ActionButton @click=\"removePhoto\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconDelete :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Delete picture') }}\n\t\t\t\t</ActionButton>\n\t\t\t</template>\n\t\t</Actions>\n\t</div>\n</template>\n\n<script>\nimport {\n\tNcAvatar as Avatar,\n\tNcActions as Actions,\n\tNcActionButton as ActionButton,\n\tNcActionLink as ActionLink,\n\tNcButton,\n\tNcModal,\n} from '@nextcloud/vue'\nimport IconDownload from 'vue-material-design-icons/Download.vue'\nimport IconCloudDownload from 'vue-material-design-icons/CloudDownload.vue'\nimport IconDelete from 'vue-material-design-icons/Delete.vue'\nimport IconUpload from 'vue-material-design-icons/Upload.vue'\nimport IconFolder from 'vue-material-design-icons/Folder.vue'\nimport IconImage from 'vue-material-design-icons/Image.vue'\nimport VueCropper from 'vue-cropperjs'\n// eslint-disable-next-line n/no-extraneous-import\nimport 'cropperjs/dist/cropper.css'\n\nimport { showError, showInfo, getFilePickerBuilder, showSuccess } from '@nextcloud/dialogs'\nimport { generateUrl, generateRemoteUrl } from '@nextcloud/router'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { loadState } from '@nextcloud/initial-state'\nimport sanitizeSVG from '@mattkrick/sanitize-svg'\nimport axios from '@nextcloud/axios'\n\nimport logger from '../../services/logger.js'\n\nconst supportedNetworks = loadState('contacts', 'supportedNetworks')\n\nexport default {\n\tname: 'ContactDetailsAvatar',\n\n\tcomponents: {\n\t\tActionButton,\n\t\tActionLink,\n\t\tActions,\n\t\tAvatar,\n\t\tIconCloudDownload,\n\t\tIconDownload,\n\t\tIconDelete,\n\t\tIconUpload,\n\t\tIconFolder,\n\t\tIconImage,\n\t\tNcButton,\n\t\tVueCropper,\n\t\tNcModal,\n\t},\n\n\tprops: {\n\t\tcontact: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tisReadOnly: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\treloadBus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\topened: false,\n\t\t\tloading: false,\n\t\t\tphotoUrl: undefined,\n\t\t\troot: generateRemoteUrl(`dav/files/${getCurrentUser().uid}`),\n\t\t\tshowCropper: false,\n\t\t\tcropperOptions: {\n\t\t\t\taspectRatio: 1 / 1,\n\t\t\t\tviewMode: 3,\n\t\t\t\tguides: false,\n\t\t\t\tcenter: false,\n\t\t\t\thighlight: false,\n\t\t\t\tautoCropArea: 1,\n\t\t\t\tdragMode: 'move',\n\t\t\t\tminContainerWidth: 100,\n\t\t\t\tminContainerHeight: 100,\n\t\t\t},\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tsupportedSocial() {\n\t\t\tconst emails = this.contact.vCard.getAllProperties('email')\n\t\t\t// get social networks set for the current contact\n\t\t\tconst availableSocial = this.contact.vCard.getAllProperties('x-socialprofile')\n\t\t\t\t.map(a => a.jCal[1].type.toString().toLowerCase())\n\t\t\tconst availableMessenger = this.contact.vCard.getAllProperties('impp')\n\t\t\t\t.map(a => a.jCal[1].type.toString().toLowerCase())\n\t\t\tconst available = [].concat(availableSocial, availableMessenger)\n\t\t\t// get list of social networks that allow for avatar download\n\t\t\tconst supported = supportedNetworks.map(v => v.toLowerCase())\n\t\t\tif (emails.length) {\n\t\t\t\tavailable.push('gravatar')\n\t\t\t}\n\t\t\t// return supported social networks which are set\n\t\t\treturn supported.filter(i => available.includes(i))\n\t\t\t\t.map(j => this.capitalize(j))\n\t\t},\n\t},\n\n\twatch: {\n\t\tasync contact() {\n\t\t\tawait this.loadPhotoUrl()\n\t\t},\n\t},\n\n\tasync mounted() {\n\t\tawait this.loadPhotoUrl()\n\t},\n\n\tmethods: {\n\t\tonLoad(...args) {\n\t\t\tconsole.debug(...args)\n\t\t},\n\n\t\t/**\n\t\t * Checks the selected image for mimetype\n\t\t * and open the cropper if valid, else show error\n\t\t *\n\t\t * @param {Buffer} data the image\n\t\t * @return {boolean}\n\t\t */\n\t\tasync processPicture(data) {\n\n\t\t\tconst type = this.getMimetype(data)\n\n\t\t\tif (!type.startsWith('image/')) {\n\t\t\t\tshowError(t('contacts', 'Please select a valid format'))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tif (type === 'image/svg') {\n\t\t\t\tconst imageSvg = atob(data.toString('base64'))\n\t\t\t\tconst cleanSvg = await sanitizeSVG(imageSvg)\n\t\t\t\tif (!cleanSvg) {\n\t\t\t\t\tthrow new Error('Unsafe svg image', imageSvg)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.openCropper(data, type)\n\t\t\treturn true\n\t\t},\n\n\t\t/**\n\t\t * Open the cropper-modal with the provided data\n\t\t *\n\t\t * @param {Buffer} data the image\n\t\t * @param {string} type of the image\n\t\t */\n\t\topenCropper(data, type) {\n\t\t\tconst ccc = `data:${type};base64,${data.toString('base64')}`\n\t\t\tthis.$refs.cropper.replace(ccc)\n\t\t\tthis.showCropper = true\n\t\t},\n\n\t\t/**\n\t\t * Handle the uploaded file\n\t\t *\n\t\t * @param {object} event the event object containing the image\n\t\t */\n\t\thandleUploadedFile(event) {\n\t\t\tif (event.target.files && !this.loading) {\n\t\t\t\tthis.closeMenu()\n\n\t\t\t\tconst file = event.target.files[0]\n\n\t\t\t\tconst reader = new FileReader()\n\n\t\t\t\treader.onload = (e) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (typeof e.target.result === 'object') {\n\n\t\t\t\t\t\t\tconst data = Buffer.from(e.target.result, 'binary')\n\n\t\t\t\t\t\t\tif (this.processPicture(data)) {\n\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthrow new Error('Wrong image mimetype')\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error(error)\n\t\t\t\t\t\tshowError(t('contacts', 'Invalid image'))\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.resetPicker()\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treader.readAsArrayBuffer(file)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Reset image pciker input\n\t\t */\n\t\tresetPicker() {\n\t\t\t// reset input\n\t\t\tthis.$refs.uploadInput.value = ''\n\t\t\tthis.loading = false\n\t\t},\n\t\t/**\n\t\t * Return the word with (only) the first letter capitalized\n\t\t *\n\t\t * @param {string} word the word to handle\n\t\t * @return {string} the word with the first letter capitalized\n\t\t */\n\t\tcapitalize(word) {\n\t\t\treturn word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()\n\t\t},\n\t\t/**\n\t\t * Return the mimetype based on the first 4 byte\n\t\t *\n\t\t * @param {Uint8Array} uint content\n\t\t * @return {string} the mimetype\n\t\t */\n\t\tgetMimetype(uint) {\n\t\t\tconst bytes = []\n\t\t\tuint.slice(0, 12).forEach((byte) => {\n\t\t\t\tbytes.push(byte.toString(16).padStart(2, '0'))\n\t\t\t})\n\t\t\tconst hex = bytes.join('').toUpperCase()\n\n\t\t\tconst nextcloudMajorVersion = parseInt(window.OC.config.version.split('.')[0])\n\t\t\tif (nextcloudMajorVersion >= 31\n\t\t\t\t&& hex.slice(0, 8) === '52494646'\n\t\t\t\t&& hex.slice(16, 24) === '57454250'\n\t\t\t) {\n\t\t\t\treturn 'image/webp'\n\t\t\t}\n\n\t\t\tif (nextcloudMajorVersion >= 32 && hex.slice(8, 24) === '6674797061766966') {\n\t\t\t\treturn 'image/avif'\n\t\t\t}\n\n\t\t\tswitch (hex.slice(0, 8)) {\n\t\t\tcase '89504E47':\n\t\t\t\treturn 'image/png'\n\t\t\tcase '47494638':\n\t\t\t\treturn 'image/gif'\n\t\t\tcase '3C3F786D':\n\t\t\tcase '3C737667':\n\t\t\t\treturn 'image/svg+xml'\n\t\t\tcase 'FFD8FFDB':\n\t\t\tcase 'FFD8FFE0':\n\t\t\tcase 'FFD8FFE1':\n\t\t\t\treturn 'image/jpeg'\n\t\t\tdefault:\n\t\t\t\treturn 'application/octet-stream'\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Update the contact photo\n\t\t *\n\t\t * @param {string} data the photo as base64 binary string\n\t\t * @param {string} type mimetype\n\t\t */\n\t\tasync setPhoto(data, type) {\n\t\t\t// Init with empty data\n\t\t\tif (this.contact.photo) {\n\t\t\t\tthis.contact.vCard.addPropertyWithValue('photo', '')\n\t\t\t}\n\n\t\t\t// Vcard 3 and 4 have different syntax\n\t\t\t// https://tools.ietf.org/html/rfc2426#page-11\n\t\t\tif (this.contact.version === '3.0') {\n\t\t\t\t// eslint-disable-next-line vue/no-mutating-props\n\t\t\t\tthis.contact.photo = data\n\n\t\t\t\tconst photo = this.contact.vCard.getFirstProperty('photo')\n\t\t\t\tphoto.setParameter('encoding', 'b')\n\t\t\t\tif (type) {\n\t\t\t\t\tphoto.setParameter('type', type.split('/').pop())\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// https://tools.ietf.org/html/rfc6350#section-6.2.4\n\t\t\t\t// eslint-disable-next-line vue/no-mutating-props\n\t\t\t\tthis.contact.photo = `data:${type};base64,${data}`\n\t\t\t}\n\n\t\t\tawait this.$store.dispatch('updateContact', this.contact)\n\n\t\t\tawait this.loadPhotoUrl()\n\n\t\t\tawait this.reloadBus.emit('reload-avatar', this.contact.key)\n\n\t\t\tthis.loading = false\n\t\t},\n\n\t\tasync loadPhotoUrl() {\n\t\t\tthis.photoUrl = undefined\n\t\t\tif (this.contact.photo) {\n\t\t\t\tconst photoUrl = await this.contact.getPhotoUrl()\n\t\t\t\tif (!photoUrl) {\n\t\t\t\t\tconsole.warn('contact has an invalid photo')\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.photoUrl = photoUrl\n\t\t\t} else if (this.contact.url) {\n\t\t\t\tthis.photoUrl = `${this.contact.url}?photo`\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Save the cropped image\n\t\t */\n\t\tsaveAvatar() {\n\t\t\tthis.showCropper = false\n\t\t\tthis.loading = true\n\n\t\t\tthis.$refs.cropper.getCroppedCanvas({\n\t\t\t\tminWidth: 16,\n\t\t\t\tminHeight: 16,\n\t\t\t\tmaxWidth: 512,\n\t\t\t\tmaxHeight: 512,\n\t\t\t}).toBlob(async (blob) => {\n\t\t\t\tif (blob === null) {\n\t\t\t\t\tshowError(t('contacts', 'Error cropping picture'))\n\t\t\t\t\tthis.cancel()\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tconst reader = new FileReader()\n\t\t\t\treader.readAsDataURL(blob)\n\t\t\t\treader.onloadend = () => {\n\t\t\t\t\tconst base64data = reader.result\n\t\t\t\t\tthis.setPhoto(base64data.split(',').pop(), blob.type)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * Remove the contact's picture\n\t\t */\n\t\tremovePhoto() {\n\t\t\tthis.contact.vCard.removeAllProperties('photo')\n\t\t\tthis.$store.dispatch('updateContact', this.contact)\n\t\t\t// somehow the avatarUrl is not unavailable immediately, so we just set undefined\n\t\t\tthis.photoUrl = undefined\n\t\t\tthis.reloadBus.emit('delete-avatar', this.contact.key)\n\t\t},\n\n\t\t/**\n\t\t * Cancel cropping\n\t\t */\n\t\tcancel() {\n\t\t\tthis.showCropper = false\n\t\t\tthis.loading = false\n\t\t},\n\n\t\t/**\n\t\t * Picker handlers Upload\n\t\t */\n\t\tselectFileInput() {\n\t\t\tif (!this.loading) {\n\t\t\t\tthis.$refs.uploadInput.click()\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Picker handlers from Files\n\t\t */\n\t\tasync selectFilePicker() {\n\t\t\tif (!this.loading) {\n\t\t\t\tthis.closeMenu()\n\n\t\t\t\tconst picker = getFilePickerBuilder(t('contacts', 'Pick an avatar'))\n\t\t\t\t\t.setMimeTypeFilter([\n\t\t\t\t\t\t'image/png',\n\t\t\t\t\t\t'image/jpeg',\n\t\t\t\t\t\t'image/gif',\n\t\t\t\t\t\t'image/x-xbitmap',\n\t\t\t\t\t\t'image/bmp',\n\t\t\t\t\t\t'image/svg+xml',\n\t\t\t\t\t]).addButton({\n\t\t\t\t\t\tlabel: t('calendar', 'Pick'),\n\t\t\t\t\t\ttype: 'primary',\n\t\t\t\t\t\tcallback: (nodes) => logger.debug('Picked avatar', { nodes }),\n\t\t\t\t\t})\n\t\t\t\t\t.build()\n\n\t\t\t\tconst file = await picker.pick()\n\n\t\t\t\tif (file) {\n\t\t\t\t\tthis.loading = true\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tconst response = await axios.get(`${this.root}${file}`, {\n\t\t\t\t\t\t\tresponseType: 'arraybuffer',\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tconst data = Buffer.from(response.data, 'binary')\n\n\t\t\t\t\t\tthis.processPicture(data)\n\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tshowError(t('contacts', 'Error while processing the picture.'))\n\t\t\t\t\t\tconsole.error(error)\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.resetPicker()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Downloads the Avatar from social media\n\t\t *\n\t\t * @param {string} network the social network to use (or 'any' for first match)\n\t\t */\n\t\tasync getSocialAvatar(network) {\n\n\t\t\tif (!this.loading) {\n\n\t\t\t\tthis.loading = true\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await axios.put(generateUrl('/apps/contacts/api/v1/social/avatar/{network}/{id}/{uid}', {\n\t\t\t\t\t\tnetwork: network.toLowerCase(),\n\t\t\t\t\t\tid: this.contact.addressbook.id,\n\t\t\t\t\t\tuid: this.contact.uid,\n\t\t\t\t\t}))\n\t\t\t\t\tif (response?.status !== 200) {\n\t\t\t\t\t\tthrow new URIError('Download of social profile avatar failed')\n\t\t\t\t\t}\n\n\t\t\t\t\t// Fetch newly updated contact\n\t\t\t\t\tawait this.$store.dispatch('fetchFullContact', { contact: this.contact, forceReFetch: true })\n\n\t\t\t\t\t// Update local clone\n\t\t\t\t\tconst contact = this.$store.getters.getContact(this.contact.key)\n\t\t\t\t\tawait this.$emit('update-local-contact', contact)\n\n\t\t\t\t\tawait this.loadPhotoUrl()\n\n\t\t\t\t\tawait this.reloadBus.emit('reload-avatar', this.contact.key)\n\n\t\t\t\t\t// Notify user\n\t\t\t\t\tshowSuccess(t('contacts', 'Avatar downloaded from social network'))\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (error?.response?.status === 304) {\n\t\t\t\t\t\tshowInfo(t('contacts', 'Avatar already up to date'))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowError(t('contacts', 'Avatar download failed'))\n\t\t\t\t\t\tconsole.debug(error)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.loading = false\n\t\t},\n\n\t\tcloseMenu() {\n\t\t\tthis.opened = false\n\t\t},\n\n\t},\n\n}\n</script>\n<style lang=\"scss\" scoped>\n.avatar {\n\t&__container {\n\t\tmargin: 0 auto;\n\t\tpadding: 24px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tgap: 16px 0;\n\t\twidth: 300px;\n\n\t\tspan {\n\t\t\tcolor: var(--color-text-lighter);\n\t\t}\n\t}\n\n\t&__preview {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\twidth: 180px;\n\t\theight: 180px;\n\t}\n\n\t&__buttons {\n\t\tdisplay: flex;\n\t\tgap: 0 10px;\n\t}\n\n\t&__cropper {\n\t\toverflow: hidden;\n\n\t\t&-buttons {\n\t\t\twidth: 100%;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t}\n\n\t\t&:deep(.cropper-view-box) {\n\t\t\tborder-radius: 50%;\n\t\t}\n\t}\n}\n\n.contact-header-avatar {\n\t// Wrap and cut\n\t&__wrapper {\n\t\tposition: relative;\n\t\twidth: var(--avatar-size);\n\t\theight: var(--avatar-size);\n\t}\n\t&__background {\n\t\tz-index: 0;\n\t\ttop: 50px;\n\t\tleft: 0;\n\t\topacity: .2;\n\t}\n\n\t&__photo,\n\t&__menu {\n\t\toverflow: hidden;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tborder-radius: 50%;\n\t}\n\n\t&__photo {\n\t\tz-index: 10;\n\t\tcursor: pointer;\n\t\t// White background for avatars with transparency, also in dark theme\n\t\tbackground-color: #fff;\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: center;\n\t\tbackground-size: cover;\n\t}\n\n\t&__menu {\n\t\tz-index: 11;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbackground-color: rgba(0, 0, 0, .2);\n\t\t// Always show max opacity, let the background-color be the visual cue\n\t\t&:deep(.action-item__menutoggle) {\n\t\t\topacity: 1;\n\t\t}\n\t}\n\n\t// Move the menu in the bottom right if there is a picture already\n\t&__photo + &__menu {\n\t\tposition: absolute !important;\n\t\t// bottom right\n\t\ttop: 100%;\n\t\tleft: 100%;\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tmargin: -50%;\n\t\t&:deep {\n\t\t\t.action-item__menutoggle {\n\t\t\t\topacity: .7;\n\t\t\t\tbackground-color: rgba(0, 0, 0, .2);\n\t\t\t}\n\t\t\t&.action-item--open .action-item__menutoggle,\n\t\t\t.action-item__menutoggle:hover,\n\t\t\t.action-item__menutoggle:active,\n\t\t\t.action-item__menutoggle:focus {\n\t\t\t\topacity: 1;\n\t\t\t}\n\t\t}\n\t}\n}\n\n.contact-header-modal {\n\t// We use this nesting of containers and max/width-height\n\t// to make automatically contain the image.\n\t// Because of that, we now fill the modal-container,\n\t// so we need to watch for click on the photo-wrapper to\n\t// close on image click outside.\n\t&:deep(.modal-container) {\n\t\tbackground-color: transparent;\n\t\tbox-shadow: none;\n\n\t\t&,\n\t\t.contact-header-modal__photo-wrapper {\n\t\t\t// center and align nested containers & image\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t}\n\n\t\t.contact-header-modal__photo-wrapper {\n\t\t\t// contain image\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t.contact-header-modal__photo {\n\t\t\t// preserve ratio\n\t\t\tmax-width: 100%;\n\t\t\tmax-height: 100%;\n\t\t\t// animate zooming/resize\n\t\t\ttransition: height 100ms ease,\n\t\t\t\twidth 100ms ease;\n\t\t\tborder-radius: var(--border-radius-large);\n\t\t\t// make sure transparent images are visible\n\t\t\tbackground-color: white;\n\t\t}\n\t}\n}\n\n</style>\n","'use strict';\n\nconst defaultAlphabetIndexMap = [];\n\nfunction isNumberCode(code) {\n  return code >= 48/* '0' */ && code <= 57/* '9' */;\n}\n\nfunction naturalCompare(a, b, opts) {\n  if (typeof a !== 'string') {\n    throw new TypeError(`The first argument must be a string. Received type '${typeof a}'`);\n  }\n  if (typeof b !== 'string') {\n    throw new TypeError(`The second argument must be a string. Received type '${typeof b}'`);\n  }\n\n  const lengthA = a.length;\n  const lengthB = b.length;\n  let indexA = 0;\n  let indexB = 0;\n  let alphabetIndexMap = defaultAlphabetIndexMap;\n  let firstDifferenceInLeadingZeros = 0;\n\n  if (opts) {\n    if (opts.caseInsensitive) {\n      a = a.toLowerCase();\n      b = b.toLowerCase();\n    }\n\n    if (opts.alphabet) {\n      alphabetIndexMap = buildAlphabetIndexMap(opts.alphabet);\n    }\n  }\n\n  while (indexA < lengthA && indexB < lengthB) {\n    let charCodeA = a.charCodeAt(indexA);\n    let charCodeB = b.charCodeAt(indexB);\n\n    if (isNumberCode(charCodeA)) {\n      if (!isNumberCode(charCodeB)) {\n        return charCodeA - charCodeB;\n      }\n\n      let numStartA = indexA;\n      let numStartB = indexB;\n\n      while (charCodeA === 48/* '0' */ && ++numStartA < lengthA) {\n        charCodeA = a.charCodeAt(numStartA);\n      }\n      while (charCodeB === 48/* '0' */ && ++numStartB < lengthB) {\n        charCodeB = b.charCodeAt(numStartB);\n      }\n\n      if (numStartA !== numStartB && firstDifferenceInLeadingZeros === 0) {\n        firstDifferenceInLeadingZeros = numStartA - numStartB;\n      }\n\n      let numEndA = numStartA;\n      let numEndB = numStartB;\n\n      while (numEndA < lengthA && isNumberCode(a.charCodeAt(numEndA))) {\n        ++numEndA;\n      }\n      while (numEndB < lengthB && isNumberCode(b.charCodeAt(numEndB))) {\n        ++numEndB;\n      }\n\n      let difference = numEndA - numStartA - numEndB + numStartB; // numA length - numB length\n      if (difference !== 0) {\n        return difference;\n      }\n\n      while (numStartA < numEndA) {\n        difference = a.charCodeAt(numStartA++) - b.charCodeAt(numStartB++);\n        if (difference !== 0) {\n          return difference;\n        }\n      }\n\n      indexA = numEndA;\n      indexB = numEndB;\n      continue;\n    }\n\n    if (charCodeA !== charCodeB) {\n      if (\n        charCodeA < alphabetIndexMap.length &&\n        charCodeB < alphabetIndexMap.length &&\n        alphabetIndexMap[charCodeA] !== -1 &&\n        alphabetIndexMap[charCodeB] !== -1\n      ) {\n        return alphabetIndexMap[charCodeA] - alphabetIndexMap[charCodeB];\n      }\n\n      return charCodeA - charCodeB;\n    }\n\n    ++indexA;\n    ++indexB;\n  }\n\n  if (indexA < lengthA) { // `b` is a substring of `a`\n    return 1;\n  }\n\n  if (indexB < lengthB) { // `a` is a substring of `b`\n    return -1;\n  }\n\n  return firstDifferenceInLeadingZeros;\n}\n\nconst alphabetIndexMapCache = {};\n\nfunction buildAlphabetIndexMap(alphabet) {\n  const existingMap = alphabetIndexMapCache[alphabet];\n  if (existingMap !== undefined) {\n    return existingMap;\n  }\n\n  const indexMap = [];\n  const maxCharCode = alphabet.split('').reduce((maxCode, char) => {\n    return Math.max(maxCode, char.charCodeAt(0));\n  }, 0);\n\n  for (let i = 0; i <= maxCharCode; i++) {\n    indexMap.push(-1);\n  }\n\n  for (let i = 0; i < alphabet.length; i++) {\n    indexMap[alphabet.charCodeAt(i)] = i;\n  }\n\n  alphabetIndexMapCache[alphabet] = indexMap;\n\n  return indexMap;\n}\n\nmodule.exports = naturalCompare;\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div v-if=\"propModel && showProperty\" class=\"property\">\n\t\t<PropertyTitle icon=\"icon-contacts-dark\"\n\t\t\t:readable-name=\"t('contacts', 'Contact groups')\"\n\t\t\t:is-read-only=\"isReadOnly\" />\n\n\t\t<div class=\"property__row\">\n\t\t\t<div class=\"property__label\">\n\t\t\t\t<span>{{ propModel.readableName }}</span>\n\t\t\t</div>\n\n\t\t\t<!-- multiselect taggable groups -->\n\t\t\t<div class=\"property__value\">\n\t\t\t\t<NcSelect v-if=\"!isReadOnly\"\n\t\t\t\t\tv-model=\"localValue\"\n\t\t\t\t\t:options=\"groups\"\n\t\t\t\t\t:no-wrap=\"true\"\n\t\t\t\t\t:placeholder=\"t('contacts', 'Add contact in group')\"\n\t\t\t\t\t:multiple=\"true\"\n\t\t\t\t\t:close-on-select=\"false\"\n\t\t\t\t\t:clearable=\"true\"\n\t\t\t\t\t:deselect-from-dropdown=\"true\"\n\t\t\t\t\t:taggable=\"true\"\n\t\t\t\t\ttag-placeholder=\"create\"\n\t\t\t\t\t@option:deselected=\"updateValue\"\n\t\t\t\t\t@close=\"updateValue\">\n\t\t\t\t\t<!-- show how many groups are hidden and add tooltip -->\n\t\t\t\t\t<template #limit>\n\t\t\t\t\t\t<span v-tooltip.auto=\"formatGroupsTitle\" class=\"multiselect__limit\">\n\t\t\t\t\t\t\t+{{ localValue.length - 3 }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template #no-options>\n\t\t\t\t\t\t<span>{{ t('contacts', 'No results') }}</span>\n\t\t\t\t\t</template>\n\t\t\t\t</NcSelect>\n\t\t\t\t<div v-else>\n\t\t\t\t\t<span v-if=\"localValue.length === 0\">{{ t('contacts','None') }}</span>\n\n\t\t\t\t\t<div v-else class=\"group__list\">\n\t\t\t\t\t\t<span v-for=\"(group, index) in localValue\" :key=\"index\">\n\t\t\t\t\t\t\t{{ group }}{{ index === (localValue.length - 1) ? '' : ',&nbsp;' }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- empty actions to keep the layout -->\n\t\t\t<div class=\"property__actions\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { NcSelect } from '@nextcloud/vue'\nimport Contact from '../../models/contact.js'\nimport PropertyTitle from './PropertyTitle.vue'\nimport naturalCompare from 'string-natural-compare'\n\nexport default {\n\tname: 'PropertyGroups',\n\n\tcomponents: {\n\t\tPropertyTitle,\n\t\tNcSelect,\n\t},\n\n\tprops: {\n\t\tpropModel: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t\trequired: true,\n\t\t},\n\t\tcontact: {\n\t\t\ttype: Contact,\n\t\t\tdefault: null,\n\t\t\trequired: true,\n\t\t},\n\t\t// Is it read-only?\n\t\tisReadOnly: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tlocalValue: [...this.value].sort(),\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tshowAsText() {\n\t\t\treturn this.isReadOnly && this.localValue.length <= 1\n\t\t},\n\t\tshowProperty() {\n\t\t\treturn (this.isReadOnly && this.localValue.length > 0) || !this.isReadOnly\n\t\t},\n\t\tgroups() {\n\t\t\treturn this.$store.getters.getGroups.slice(0).map(group => group.name)\n\t\t\t\t.sort((a, b) => naturalCompare(a, b, { caseInsensitive: true }))\n\t\t},\n\n\t\t/**\n\t\t * Format array of groups objects to a string for the popup\n\t\t * Based on the ultiselect limit\n\t\t *\n\t\t * @return {string} the additional groups\n\t\t */\n\t\tformatGroupsTitle() {\n\t\t\treturn this.localValue.slice(3).join(', ')\n\t\t},\n\n\t},\n\n\twatch: {\n\t\t/**\n\t\t * Since we're updating a local data based on the value prop,\n\t\t * we need to make sure to update the local data on pop change\n\t\t * TODO: check if this create performance drop\n\t\t */\n\t\tvalue() {\n\t\t\tthis.localValue = this.value\n\t\t},\n\t\tselectType() {\n\t\t\tthis.localType = this.selectType\n\t\t},\n\t},\n\n\tmethods: {\n\n\t\t/**\n\t\t * Send update event to parent\n\t\t */\n\t\tupdateValue() {\n\t\t\tthis.$emit('update:value', this.localValue)\n\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.group__list {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"property property--rev\">\n\t\t<div class=\"property__row\">\n\t\t\t<div class=\"property__label\" />\n\n\t\t\t<div class=\"property__value\">\n\t\t\t\t{{ t('contacts', 'Last modified') }} {{ relativeDate }}\n\t\t\t</div>\n\n\t\t\t<div class=\"property__actions\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport moment from '@nextcloud/moment'\n\nexport default {\n\tname: 'PropertyRev',\n\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\trelativeDate() {\n\t\t\treturn moment.unix(this.value.toUnixTime()).fromNow()\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.property {\n\t&__value {\n\t\topacity: .5;\n\t\tcolor: var(--color-text-lighter);\n\t\tline-height: 44px;\n\t}\n}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { loadState } from '@nextcloud/initial-state'\n\nconst isTalkEnabled = loadState('contacts', 'isTalkEnabled', false)\nexport default isTalkEnabled\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<AppContentDetails>\n\t\t<!-- nothing selected or contact not found -->\n\t\t<EmptyContent v-if=\"!contact\"\n\t\t\tclass=\"empty-content\"\n\t\t\t:name=\"t('contacts', 'No contact selected')\"\n\t\t\t:description=\"t('contacts', 'Select a contact on the list to begin')\">\n\t\t\t<template #icon>\n\t\t\t\t<IconContact :size=\"20\" />\n\t\t\t</template>\n\t\t</EmptyContent>\n\n\t\t<!-- TODO: add empty content while this.loadingData === true -->\n\t\t<template v-else>\n\t\t\t<!-- contact header -->\n\t\t\t<DetailsHeader>\n\t\t\t\t<!-- avatar and upload photo -->\n\t\t\t\t<template #avatar>\n\t\t\t\t\t<ContactAvatar :contact=\"contact\"\n\t\t\t\t\t\t:is-read-only=\"isReadOnly\"\n\t\t\t\t\t\t:reload-bus=\"reloadBus\"\n\t\t\t\t\t\t@update-local-contact=\"updateLocalContact\" />\n\t\t\t\t</template>\n\n\t\t\t\t<!-- fullname -->\n\t\t\t\t<template #title>\n\t\t\t\t\t<div v-if=\"isReadOnly\" class=\"contact-title\">\n\t\t\t\t\t\t{{ contact.fullName }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input v-else\n\t\t\t\t\t\tid=\"contact-fullname\"\n\t\t\t\t\t\tref=\"fullname\"\n\t\t\t\t\t\tv-model=\"contact.fullName\"\n\t\t\t\t\t\t:placeholder=\"t('contacts', 'Name')\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tautocorrect=\"off\"\n\t\t\t\t\t\tspellcheck=\"false\"\n\t\t\t\t\t\tname=\"fullname\"\n\t\t\t\t\t\t@click=\"selectInput\">\n\t\t\t\t</template>\n\n\t\t\t\t<!-- org, title -->\n\t\t\t\t<template #subtitle>\n\t\t\t\t\t<template v-if=\"isReadOnly\">\n\t\t\t\t\t\t<span v-html=\"formattedSubtitle\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<input id=\"contact-title\"\n\t\t\t\t\t\t\tv-model=\"contact.title\"\n\t\t\t\t\t\t\t:placeholder=\"t('contacts', 'Title')\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\t\tautocorrect=\"off\"\n\t\t\t\t\t\t\tspellcheck=\"false\"\n\t\t\t\t\t\t\tname=\"title\">\n\t\t\t\t\t\t<input id=\"contact-org\"\n\t\t\t\t\t\t\tv-model=\"contact.org\"\n\t\t\t\t\t\t\t:placeholder=\"t('contacts', 'Company')\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\t\tautocorrect=\"off\"\n\t\t\t\t\t\t\tspellcheck=\"false\"\n\t\t\t\t\t\t\tname=\"org\">\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\n\t\t\t\t<template #quick-actions>\n\t\t\t\t\t<div v-if=\"!editMode && !loadingData\">\n\t\t\t\t\t\t<Actions :inline=\"6\"\n\t\t\t\t\t\t\ttype=\"secondary\">\n\t\t\t\t\t\t\t<ActionButton v-if=\"isTalkEnabled && isInSystemAddressBook\"\n\t\t\t\t\t\t\t\t:aria-label=\"(t('contacts', 'Go to talk conversation'))\"\n\t\t\t\t\t\t\t\t:name=\"(t('contacts', 'Go to talk conversation'))\"\n\t\t\t\t\t\t\t\tclass=\"icon-talk quick-action\"\n\t\t\t\t\t\t\t\t:href=\"callUrl\" />\n\t\t\t\t\t\t\t<ActionButton v-if=\"profilePageLink\"\n\t\t\t\t\t\t\t\tclass=\"quick-action\"\n\t\t\t\t\t\t\t\t:aria-label=\"(t('contacts','View profile'))\"\n\t\t\t\t\t\t\t\t:name=\"(t('contacts','View profile'))\"\n\t\t\t\t\t\t\t\t:href=\"profilePageLink\">\n\t\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t\t<IconAccount :size=\"20\" />\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t\t<ActionLink v-for=\"emailAddress in emailAddressList\"\n\t\t\t\t\t\t\t\t:key=\"emailAddress\"\n\t\t\t\t\t\t\t\tclass=\"quick-action\"\n\t\t\t\t\t\t\t\t:href=\"'mailto:' + emailAddress\">\n\t\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t\t<IconMail :size=\"20\" />\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t{{ emailAddress }}\n\t\t\t\t\t\t\t</ActionLink>\n\t\t\t\t\t\t\t<ActionLink v-for=\"phoneNumber in phoneNumberList\"\n\t\t\t\t\t\t\t\t:key=\"phoneNumber\"\n\t\t\t\t\t\t\t\tclass=\"quick-action\"\n\t\t\t\t\t\t\t\t:href=\"'tel:' + phoneNumber\">\n\t\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t\t<IconCall :size=\"20\" />\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t{{ phoneNumber }}\n\t\t\t\t\t\t\t</ActionLink>\n\t\t\t\t\t\t</Actions>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\n\t\t\t\t<!-- actions -->\n\t\t\t\t<template #actions>\n\t\t\t\t\t<!-- warning message -->\n\t\t\t\t\t<component :is=\"warning.icon\"\n\t\t\t\t\t\tv-if=\"warning\"\n\t\t\t\t\t\tv-tooltip.bottom=\"{\n\t\t\t\t\t\t\tcontent: warning ? warning.msg : '',\n\t\t\t\t\t\t\ttrigger: 'hover focus'\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\tclass=\"header-icon\"\n\t\t\t\t\t\t:classes=\"warning.classes\" />\n\n\t\t\t\t\t<!-- conflict message -->\n\t\t\t\t\t<div v-if=\"conflict\"\n\t\t\t\t\t\tv-tooltip=\"{\n\t\t\t\t\t\t\tcontent: conflict,\n\t\t\t\t\t\t\tshow: true,\n\t\t\t\t\t\t\ttrigger: 'manual',\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\tclass=\"header-icon header-icon--pulse icon-history\"\n\t\t\t\t\t\t@click=\"refreshContact\" />\n\n\t\t\t\t\t<!-- repaired contact message -->\n\t\t\t\t\t<div v-if=\"fixed\"\n\t\t\t\t\t\tv-tooltip=\"{\n\t\t\t\t\t\t\tcontent: t('contacts', 'This contact was broken and received a fix. Please review the content and click here to save it.'),\n\t\t\t\t\t\t\tshow: true,\n\t\t\t\t\t\t\ttrigger: 'manual',\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\tclass=\"header-icon header-icon--pulse icon-up\"\n\t\t\t\t\t\t@click=\"updateContact\" />\n\n\t\t\t\t\t<!-- edit and save buttons -->\n\t\t\t\t\t<template v-if=\"!addressbookIsReadOnly\">\n\t\t\t\t\t\t<NcButton v-if=\"!editMode\"\n\t\t\t\t\t\t\t:type=\"isMobile ? 'secondary' : 'tertiary'\"\n\t\t\t\t\t\t\t@click=\"editMode = true\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<PencilIcon :size=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t('contacts', 'Edit') }}\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t<NcButton v-else\n\t\t\t\t\t\t\ttype=\"secondary\"\n\t\t\t\t\t\t\t:disabled=\"loadingUpdate || !isDataValid\"\n\t\t\t\t\t\t\t@click=\"onSave\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconLoading v-if=\"loadingUpdate\" :size=\"20\" />\n\t\t\t\t\t\t\t\t<CheckIcon v-else :size=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t('contacts', 'Save') }}\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t\t<!-- menu actions -->\n\t\t\t\t<template #actions-menu>\n\t\t\t\t\t<ActionLink :href=\"contact.url\"\n\t\t\t\t\t\t:download=\"`${contact.displayName}.vcf`\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconDownload :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('contacts', 'Download') }}\n\t\t\t\t\t</ActionLink>\n\t\t\t\t\t<!-- user can clone if there is at least one option available -->\n\t\t\t\t\t<ActionButton v-if=\"isReadOnly && addressbooksOptions.length > 0\"\n\t\t\t\t\t\tref=\"cloneAction\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click=\"cloneContact\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconCopy :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('contacts', 'Clone contact') }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton :close-after-click=\"true\" @click=\"showQRcode\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconQr :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('contacts', 'Generate QR Code') }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton v-if=\"enableToggleBirthdayExclusion\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click=\"toggleBirthdayExclusionForContact\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<CakeIcon :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ excludeFromBirthdayLabel }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton v-if=\"!addressbookIsReadOnly\"\n\t\t\t\t\t\t@click=\"deleteContact\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconDelete :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('contacts', 'Delete') }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t</template>\n\t\t\t</DetailsHeader>\n\n\t\t\t<!-- qrcode -->\n\t\t\t<Modal v-if=\"qrcode\"\n\t\t\t\tid=\"qrcode-modal\"\n\t\t\t\tsize=\"small\"\n\t\t\t\t:clear-view-delay=\"-1\"\n\t\t\t\t:name=\"contact.displayName\"\n\t\t\t\t:close-button-contained=\"false\"\n\t\t\t\t@close=\"closeQrModal\">\n\t\t\t\t<img :src=\"`data:image/svg+xml;base64,${qrcode}`\"\n\t\t\t\t\t:alt=\"t('contacts', 'Contact vCard as QR code')\"\n\t\t\t\t\tclass=\"qrcode\"\n\t\t\t\t\twidth=\"400\">\n\t\t\t</Modal>\n\n\t\t\t<!-- pick addressbook when cloning contact -->\n\t\t\t<Modal v-if=\"showPickAddressbookModal\"\n\t\t\t\tid=\"pick-addressbook-modal\"\n\t\t\t\t:clear-view-delay=\"-1\"\n\t\t\t\t:name=\"t('contacts', 'Pick an address book')\"\n\t\t\t\t@close=\"closePickAddressbookModal\">\n\t\t\t\t<NcSelect ref=\"pickAddressbook\"\n\t\t\t\t\tv-model=\"pickedAddressbook\"\n\t\t\t\t\tclass=\"address-book\"\n\t\t\t\t\t:allow-empty=\"false\"\n\t\t\t\t\t:options=\"copyableAddressbooksOptions\"\n\t\t\t\t\t:placeholder=\"t('contacts', 'Select address book')\"\n\t\t\t\t\ttrack-by=\"id\"\n\t\t\t\t\tlabel=\"name\" />\n\t\t\t\t<button @click=\"closePickAddressbookModal\">\n\t\t\t\t\t{{ t('contacts', 'Cancel') }}\n\t\t\t\t</button>\n\t\t\t\t<button class=\"primary\" @click=\"cloneContact\">\n\t\t\t\t\t{{ t('contacts', 'Clone contact') }}\n\t\t\t\t</button>\n\t\t\t</Modal>\n\n\t\t\t<!-- contact details loading -->\n\t\t\t<IconLoading v-if=\"loadingData\" :size=\"20\" class=\"contact-details\" />\n\t\t\t<!-- quick actions -->\n\t\t\t<div v-else-if=\"!loadingData\" class=\"contact-details-wrapper\">\n\t\t\t\t<!-- contact details -->\n\t\t\t\t<section class=\"contact-details\">\n\t\t\t\t\t<!-- properties iteration -->\n\t\t\t\t\t<!-- using contact.key in the key and index as key to avoid conflicts between similar data and exact key -->\n\n\t\t\t\t\t<!-- Special handling for lifeEvents -->\n\t\t\t\t\t<div v-if=\"name === 'lifeEvents'\" class=\"life-events-group\">\n\t\t\t\t\t\t<ContactDetailsProperty v-for=\"(property, index) in properties\"\n\t\t\t\t\t\t\t:key=\"`${index}-${contact.key}-${property.name}`\"\n\t\t\t\t\t\t\t:is-first-property=\"index===0\"\n\t\t\t\t\t\t\t:is-last-property=\"index === properties.length - 1\"\n\t\t\t\t\t\t\t:property=\"property\"\n\t\t\t\t\t\t\t:contact=\"contact\"\n\t\t\t\t\t\t\t:local-contact=\"localContact\"\n\t\t\t\t\t\t\t:contacts=\"contacts\"\n\t\t\t\t\t\t\t:bus=\"bus\"\n\t\t\t\t\t\t\t:is-read-only=\"isReadOnly\" />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div v-for=\"(properties, name) in groupedProperties\"\n\t\t\t\t\t\t:key=\"name\">\n\t\t\t\t\t\t<ContactDetailsProperty v-for=\"(property, index) in properties\"\n\t\t\t\t\t\t\t:key=\"`${index}-${contact.key}-${property.name}`\"\n\t\t\t\t\t\t\t:is-first-property=\"index===0\"\n\t\t\t\t\t\t\t:is-last-property=\"index === properties.length - 1\"\n\t\t\t\t\t\t\t:property=\"property\"\n\t\t\t\t\t\t\t:contact=\"contact\"\n\t\t\t\t\t\t\t:local-contact=\"localContact\"\n\t\t\t\t\t\t\t:contacts=\"contacts\"\n\t\t\t\t\t\t\t:bus=\"bus\"\n\t\t\t\t\t\t\t:is-read-only=\"isReadOnly\" />\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\n\t\t\t\t<!-- addressbook change select - no last property because class is not applied here,\n\t\t\t\t\tempty property because this is a required prop on regular property-select. But since\n\t\t\t\t\twe are hijacking this... (this is supposed to be used with a ICAL.property, but to avoid code\n\t\t\t\t\tduplication, we created a fake propModel and property with our own options here) -->\n\t\t\t\t<PropertySelect :prop-model=\"addressbookModel\"\n\t\t\t\t\t:options=\"addressbooksOptions\"\n\t\t\t\t\t:value=\"addressbook\"\n\t\t\t\t\t:is-first-property=\"true\"\n\t\t\t\t\t:is-last-property=\"true\"\n\t\t\t\t\t:property=\"{}\"\n\t\t\t\t\t:hide-actions=\"true\"\n\t\t\t\t\t:is-read-only=\"isReadOnly\"\n\t\t\t\t\tclass=\"property--addressbooks property--last\"\n\t\t\t\t\t@update:value=\"updateAddressbook\" />\n\n\t\t\t\t<!-- Groups always visible -->\n\t\t\t\t<PropertyGroups :prop-model=\"groupsModel\"\n\t\t\t\t\t:value.sync=\"localContact.groups\"\n\t\t\t\t\t:contact=\"contact\"\n\t\t\t\t\t:is-read-only=\"isReadOnly\"\n\t\t\t\t\tclass=\"property--groups property--last\"\n\t\t\t\t\t@update:value=\"updateGroups\" />\n\t\t\t</div>\n\t\t\t<div v-if=\"nextcloudVersionAtLeast28 && !editMode\" class=\"related-resources\">\n\t\t\t\t<NcRelatedResourcesPanel v-if=\"!filesPanelHasError\"\n\t\t\t\t\tprovider-id=\"account\"\n\t\t\t\t\tresource-type=\"files\"\n\t\t\t\t\t:description=\"desc\"\n\t\t\t\t\t:limit=\"5\"\n\t\t\t\t\t:header=\"t('contacts', 'Media shares with you')\"\n\t\t\t\t\t:item-id=\"contact.uid\"\n\t\t\t\t\t:primary=\"true\"\n\t\t\t\t\t@has-resources=\"value => hasFilesResources = value\"\n\t\t\t\t\t@has-error=\"value => filesPanelHasError = value\" />\n\t\t\t\t<NcRelatedResourcesPanel v-if=\"!talkPanelHasError\"\n\t\t\t\t\tprovider-id=\"account\"\n\t\t\t\t\tresource-type=\"talk\"\n\t\t\t\t\t:description=\"desc\"\n\t\t\t\t\t:limit=\"5\"\n\t\t\t\t\t:header=\"t('contacts', 'Talk conversations with you')\"\n\t\t\t\t\t:item-id=\"contact.uid\"\n\t\t\t\t\t:primary=\"true\"\n\t\t\t\t\t@has-resources=\"value => hasTalkResources = value\"\n\t\t\t\t\t@has-error=\"value => talkPanelHasError = value\" />\n\t\t\t\t<NcRelatedResourcesPanel v-if=\"!calendarPanelHasError\"\n\t\t\t\t\tprovider-id=\"account\"\n\t\t\t\t\tresource-type=\"calendar\"\n\t\t\t\t\t:description=\"desc\"\n\t\t\t\t\t:limit=\"5\"\n\t\t\t\t\t:header=\"t('contacts', 'Calendar events with you')\"\n\t\t\t\t\t:item-id=\"contact.uid\"\n\t\t\t\t\t:primary=\"true\"\n\t\t\t\t\t@has-resources=\"value => hasCalendarResources = value\"\n\t\t\t\t\t@has-error=\"value => calendarPanelHasError = value\" />\n\t\t\t\t<NcRelatedResourcesPanel v-if=\"!deckPanelHasError\"\n\t\t\t\t\tprovider-id=\"account\"\n\t\t\t\t\tresource-type=\"deck\"\n\t\t\t\t\t:description=\"desc\"\n\t\t\t\t\t:limit=\"5\"\n\t\t\t\t\t:header=\"t('contacts', 'Deck cards with you')\"\n\t\t\t\t\t:item-id=\"contact.uid\"\n\t\t\t\t\t:primary=\"true\"\n\t\t\t\t\t@has-resources=\"value => hasDeckResources = value\"\n\t\t\t\t\t@has-error=\"value => deckPanelHasError = value\" />\n\t\t\t\t<NcEmptyContent v-if=\"!hasRelatedResources && !loadingData\"\n\t\t\t\t\t:name=\"t('contacts', 'No shared items with this contact')\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<FolderMultipleImage :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcEmptyContent>\n\t\t\t</div>\n\t\t\t<!-- new property select -->\n\t\t\t<AddNewProp v-if=\"!isReadOnly\"\n\t\t\t\tclass=\"last-edit\"\n\t\t\t\t:bus=\"bus\"\n\t\t\t\t:contact=\"contact\" />\n\n\t\t\t<!-- Last modified-->\n\t\t\t<PropertyRev v-if=\"contact.rev\" :value=\"contact.rev\" class=\"last-edit\" />\n\t\t</template>\n\t</AppContentDetails>\n</template>\n\n<script>\nimport { showError } from '@nextcloud/dialogs'\n\nimport ICAL from 'ical.js'\nimport { getSVG } from '@shortcm/qr-image/lib/svg'\nimport mitt from 'mitt'\nimport {\n\tisMobile,\n\tNcActionButton as ActionButton,\n\tNcActionLink as ActionLink,\n\tNcActions as Actions,\n\tNcAppContentDetails as AppContentDetails,\n\tNcButton,\n\tNcEmptyContent as EmptyContent,\n\tNcEmptyContent,\n\tNcLoadingIcon as IconLoading,\n\tNcModal as Modal,\n\tNcRelatedResourcesPanel,\n\tNcSelect,\n} from '@nextcloud/vue'\nimport IconContact from 'vue-material-design-icons/AccountMultiple.vue'\nimport IconDownload from 'vue-material-design-icons/Download.vue'\nimport IconDelete from 'vue-material-design-icons/Delete.vue'\nimport IconQr from 'vue-material-design-icons/Qrcode.vue'\nimport CakeIcon from 'vue-material-design-icons/Cake.vue'\nimport IconMail from 'vue-material-design-icons/Email.vue'\nimport IconCall from 'vue-material-design-icons/Phone.vue'\nimport IconMessage from 'vue-material-design-icons/MessageProcessing.vue'\nimport IconAccount from 'vue-material-design-icons/Account.vue'\nimport IconCopy from 'vue-material-design-icons/ContentCopy.vue'\nimport PencilIcon from 'vue-material-design-icons/Pencil.vue'\nimport CheckIcon from 'vue-material-design-icons/Check.vue'\nimport EyeCircleIcon from 'vue-material-design-icons/EyeCircle.vue'\nimport FolderMultipleImage from 'vue-material-design-icons/FolderMultipleImage.vue'\n\nimport rfcProps from '../models/rfcProps.js'\nimport validate from '../services/validate.js'\n\nimport AddNewProp from './ContactDetails/ContactDetailsAddNewProp.vue'\nimport ContactAvatar from './ContactDetails/ContactDetailsAvatar.vue'\nimport ContactDetailsProperty from './ContactDetails/ContactDetailsProperty.vue'\nimport DetailsHeader from './DetailsHeader.vue'\nimport PropertyGroups from './Properties/PropertyGroups.vue'\nimport PropertyRev from './Properties/PropertyRev.vue'\nimport PropertySelect from './Properties/PropertySelect.vue'\nimport { generateUrl } from '@nextcloud/router'\nimport { loadState } from '@nextcloud/initial-state'\nimport isTalkEnabled from '../services/isTalkEnabled.js'\nimport Vue from 'vue'\n\nconst { profileEnabled } = loadState('user_status', 'profileEnabled', false)\n\nexport default {\n\tname: 'ContactDetails',\n\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tActionLink,\n\t\tAddNewProp,\n\t\tAppContentDetails,\n\t\tContactAvatar,\n\t\tContactDetailsProperty,\n\t\tDetailsHeader,\n\t\tEmptyContent,\n\t\tIconContact,\n\t\tIconMail,\n\t\tIconMessage,\n\t\tIconCall,\n\t\tIconAccount,\n\t\tIconDownload,\n\t\tIconDelete,\n\t\tIconQr,\n\t\tCakeIcon,\n\t\tIconCopy,\n\t\tIconLoading,\n\t\tPencilIcon,\n\t\tCheckIcon,\n\t\tModal,\n\t\tNcSelect,\n\t\tPropertyGroups,\n\t\tPropertyRev,\n\t\tPropertySelect,\n\t\tNcButton,\n\t\tNcRelatedResourcesPanel,\n\t\tNcEmptyContent,\n\t\tFolderMultipleImage,\n\t},\n\n\tmixins: [isMobile],\n\tprovide() {\n\t\treturn {\n\t\t\tsharedState: this.sharedState,\n\t\t}\n\t},\n\n\tprops: {\n\t\tcontactKey: {\n\t\t\ttype: String,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tcontacts: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t\treloadBus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdesc: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\t// if true, the local contact have been fixed and requires a push\n\t\t\tfixed: false,\n\t\t\t/**\n\t\t\t * Local off-store clone of the selected contact for edition\n\t\t\t * because we can't edit contacts data outside the store.\n\t\t\t * Every change will be dispatched and updated on the real\n\t\t\t * store contact after a debounce.\n\t\t\t */\n\t\t\tlocalContact: undefined,\n\t\t\tloadingData: true,\n\t\t\tloadingUpdate: false,\n\t\t\tqrcode: '',\n\t\t\tshowPickAddressbookModal: false,\n\t\t\tpickedAddressbook: null,\n\t\t\teditMode: false,\n\t\t\tnewGroupsValue: [],\n\t\t\tnewAddressBook: null,\n\t\t\tcontactDetailsSelector: '.contact-details',\n\t\t\texcludeFromBirthdayKey: 'x-nc-exclude-from-birthday-calendar',\n\n\t\t\t// communication for ContactDetailsAddNewProp and ContactDetailsProperty\n\t\t\tbus: mitt(),\n\t\t\tshowMenuPopover: false,\n\t\t\tprofileEnabled,\n\t\t\tisTalkEnabled,\n\t\t\thasFilesResources: false,\n\t\t\thasTalkResources: false,\n\t\t\thasCalendarResources: false,\n\t\t\thasDeckResources: false,\n\t\t\tdeckPanelHasError: false,\n\t\t\tfilesPanelHasError: false,\n\t\t\ttalkPanelHasError: false,\n\t\t\tcalendarPanelHasError: false,\n\t\t\tsharedState: Vue.observable({ validEmail: true }),\n\n\t\t}\n\t},\n\n\tcomputed: {\n\t\thasRelatedResources() {\n\t\t\treturn this.hasFilesResources || this.hasTalkResources || this.hasCalendarResources || this.hasDeckResources\n\t\t},\n\t\t/**\n\t\t * The address book is read-only (e.g. shared with me).\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\taddressbookIsReadOnly() {\n\t\t\treturn this.contact.addressbook?.readOnly\n\t\t},\n\n\t\t/**\n\t\t * The address book is read-only or the contact is in read-only mode.\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisReadOnly() {\n\t\t\treturn this.addressbookIsReadOnly || !this.editMode\n\t\t},\n\n\t\tisDataValid() {\n\t\t\treturn this.sharedState.validEmail\n\t\t},\n\n\t\t/**\n\t\t * Warning messages\n\t\t *\n\t\t * @return {object | boolean}\n\t\t */\n\t\twarning() {\n\t\t\tif (this.addressbookIsReadOnly) {\n\t\t\t\treturn {\n\t\t\t\t\ticon: EyeCircleIcon,\n\t\t\t\t\tclasses: [],\n\t\t\t\t\tmsg: t('contacts', 'This contact is in read-only mode. You do not have permission to edit this contact.'),\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\n\t\t/**\n\t\t * Conflict message\n\t\t *\n\t\t * @return {string|boolean}\n\t\t */\n\t\tconflict() {\n\t\t\tif (this.contact.conflict) {\n\t\t\t\treturn t('contacts', 'The contact you were trying to edit has changed. Please manually refresh the contact. Any further edits will be discarded.')\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\n\t\t/**\n\t\t * Contact properties copied and sorted by rfcProps.fieldOrder\n\t\t *\n\t\t * @return {Array}\n\t\t */\n\t\tsortedProperties() {\n\t\t\treturn this.localContact.properties\n\t\t\t\t.slice(0)\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tconst nameA = a.name.split('.').pop()\n\t\t\t\t\tconst nameB = b.name.split('.').pop()\n\t\t\t\t\treturn rfcProps.fieldOrder.indexOf(nameA) - rfcProps.fieldOrder.indexOf(nameB)\n\t\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * Contact properties filtered and grouped by rfcProps.fieldOrder\n\t\t *\n\t\t * @return {object}\n\t\t */\n\t\tgroupedProperties() {\n\t\t\treturn this.sortedProperties\n\t\t\t\t.reduce((list, property) => {\n\t\t\t\t\t// If there is no component to display this prop, ignore it\n\t\t\t\t\tif (!this.canDisplay(property)) {\n\t\t\t\t\t\treturn list\n\t\t\t\t\t}\n\n\t\t\t\t\t// Group bday and deathdate together under 'lifeEvents'\n\t\t\t\t\tif (property.name === 'bday' || property.name === 'deathdate' || property.name === 'anniversary') {\n\t\t\t\t\t\tif (!list.lifeEvents) {\n\t\t\t\t\t\t\tlist.lifeEvents = []\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlist.lifeEvents.push(property)\n\t\t\t\t\t\treturn list\n\t\t\t\t\t}\n\n\t\t\t\t\t// Init if needed\n\t\t\t\t\tif (!list[property.name]) {\n\t\t\t\t\t\tlist[property.name] = []\n\t\t\t\t\t}\n\n\t\t\t\t\tlist[property.name].push(property)\n\t\t\t\t\treturn list\n\t\t\t\t}, {})\n\t\t},\n\n\t\t/**\n\t\t * Fake model to use the propertySelect component\n\t\t *\n\t\t * @return {object}\n\t\t */\n\t\taddressbookModel() {\n\t\t\treturn {\n\t\t\t\treadableName: t('contacts', 'Address book'),\n\t\t\t\ticon: 'icon-address-book',\n\t\t\t\toptions: this.addressbooksOptions,\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Usable addressbook object linked to the local contact\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\taddressbook() {\n\t\t\treturn this.contact.addressbook.id\n\t\t},\n\n\t\t/**\n\t\t * Fake model to use the propertyGroups component\n\t\t *\n\t\t * @return {object}\n\t\t */\n\t\tgroupsModel() {\n\t\t\treturn {\n\t\t\t\treadableName: t('contacts', 'Contact groups'),\n\t\t\t\ticon: 'icon-contacts-dark',\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Store getters filtered and mapped to usable object\n\t\t * This is the list of addressbooks that are available\n\t\t *\n\t\t * @return {{id: string, name: string, readOnly: boolean}[]}\n\t\t */\n\t\taddressbooksOptions() {\n\t\t\treturn this.addressbooks\n\t\t\t\t.filter(addressbook => addressbook.enabled)\n\t\t\t\t.map(addressbook => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: addressbook.id,\n\t\t\t\t\t\tname: addressbook.displayName,\n\t\t\t\t\t\treadOnly: addressbook.readOnly,\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * Store getters filtered and mapped to usable object\n\t\t * This is the list of addressbooks that are available to copy to\n\t\t *\n\t\t * @return {{id: string, name: string}[]}\n\t\t */\n\t\tcopyableAddressbooksOptions() {\n\t\t\treturn this.addressbooksOptions\n\t\t\t\t.filter(option => !option.readOnly)\n\t\t\t\t.filter(option => option.id !== this.contact.addressbook.id)\n\t\t\t\t.map(addressbook => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: addressbook.id,\n\t\t\t\t\t\tname: addressbook.name,\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\n\t\t// store getter\n\t\taddressbooks() {\n\t\t\treturn this.$store.getters.getAddressbooks\n\t\t},\n\t\tcontact() {\n\t\t\treturn this.$store.getters.getContact(this.contactKey)\n\t\t},\n\n\t\texcludeFromBirthdayLabel() {\n\t\t\treturn this.localContact.vCard.hasProperty(this.excludeFromBirthdayKey)\n\t\t\t\t? t('contacts', 'Add contact to Birthday Calendar')\n\t\t\t\t: t('contacts', 'Exclude contact from Birthday Calendar')\n\t\t},\n\n\t\tenableToggleBirthdayExclusion() {\n\t\t\treturn parseInt(window.OC.config.version.split('.')[0]) >= 26\n\t\t\t\t&& this.localContact?.vCard // Wait until localContact was fetched\n\t\t},\n\n\t\t/**\n\t\t * Read-only representation of the contact title and organization.\n\t\t *\n\t\t * @return {string}\n\t\t */\n\t\tformattedSubtitle() {\n\t\t\tconst title = this.contact.title\n\t\t\tconst organization = this.contact.org\n\n\t\t\tif (title && organization) {\n\t\t\t\treturn t('contacts', '{title} at {organization}', {\n\t\t\t\t\ttitle,\n\t\t\t\t\torganization,\n\t\t\t\t})\n\t\t\t} else if (title) {\n\t\t\t\treturn title\n\t\t\t} else if (organization) {\n\t\t\t\treturn organization\n\t\t\t}\n\n\t\t\treturn ''\n\t\t},\n\t\tprofilePageLink() {\n\t\t\treturn this.contact.socialLink('NEXTCLOUD')\n\t\t},\n\t\temailAddressProperties() {\n\t\t\treturn this.localContact.properties.find(property => property.name === 'email')\n\t\t},\n\t\temailAddress() {\n\t\t\treturn this.emailAddressProperties?.getFirstValue()\n\t\t},\n\t\tphoneNumberProperties() {\n\t\t\treturn this.localContact.properties.find(property => property.name === 'tel')\n\t\t},\n\t\tphoneNumberList() {\n\t\t\treturn this.groupedProperties?.tel?.map(prop => prop.getFirstValue()).filter(tel => !!tel)\n\t\t},\n\t\temailAddressList() {\n\t\t\treturn this.groupedProperties?.email?.map(prop => prop.getFirstValue()).filter(address => !!address)\n\t\t},\n\t\tcallUrl() {\n\t\t\treturn generateUrl('/apps/spreed/?callUser={uid}', { uid: this.contact.uid })\n\t\t},\n\t\tisInSystemAddressBook() {\n\t\t\treturn this.contact.addressbook.id === 'z-server-generated--system'\n\t\t},\n\t\tnextcloudVersionAtLeast28() {\n\t\t\treturn parseInt(window.OC.config.version.split('.')[0]) >= 28\n\t\t},\n\t},\n\n\twatch: {\n\t\tcontact(newContact, oldContact) {\n\t\t\tif (this.contactKey && newContact !== oldContact) {\n\t\t\t\tthis.selectContact(this.contactKey)\n\t\t\t}\n\t\t},\n\t},\n\n\tbeforeMount() {\n\t\t// load the desired data if we already selected a contact\n\t\tif (this.contactKey) {\n\t\t\tthis.selectContact(this.contactKey)\n\t\t}\n\n\t\t// capture ctrl+s\n\t\tdocument.addEventListener('keydown', this.onCtrlSave)\n\t},\n\n\tbeforeDestroy() {\n\t\t// unbind capture ctrl+s\n\t\tdocument.removeEventListener('keydown', this.onCtrlSave)\n\t},\n\n\tmethods: {\n\t\tupdateGroups(value) {\n\t\t\tthis.newGroupsValue = value\n\t\t},\n\t\tupdateAddressbook(value) {\n\t\t\tthis.newAddressBook = value\n\t\t},\n\t\t/**\n\t\t * Send the local clone of contact to the store\n\t\t */\n\t\tasync updateContact() {\n\t\t\tthis.fixed = false\n\t\t\tthis.loadingUpdate = true\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('updateContact', this.localContact)\n\t\t\t} finally {\n\t\t\t\tthis.loadingUpdate = false\n\t\t\t}\n\n\t\t\t// if we just created the contact, we need to force update the\n\t\t\t// localContact to match the proper store contact\n\t\t\tif (!this.localContact.dav) {\n\t\t\t\tthis.logger.debug('New contact synced!', { localContact: this.localContact })\n\t\t\t\t// fetching newly created & storred contact\n\t\t\t\tconst contact = this.$store.getters.getContact(this.localContact.key)\n\t\t\t\tawait this.updateLocalContact(contact)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Generate a qrcode for the contact\n\t\t */\n\t\tasync showQRcode() {\n\t\t\tconst jCal = this.contact.jCal.slice(0)\n\t\t\t// do not encode photo\n\t\t\tjCal[1] = jCal[1].filter(props => props[0] !== 'photo')\n\n\t\t\tconst data = ICAL.stringify(jCal)\n\t\t\tif (data.length > 0) {\n\t\t\t\tconst svgBytes = await getSVG(data)\n\t\t\t\tconst svgString = new TextDecoder().decode(svgBytes)\n\t\t\t\tthis.qrcode = btoa(svgString)\n\t\t\t}\n\t\t},\n\n\t\tasync toggleBirthdayExclusionForContact() {\n\t\t\tif (!this.localContact.vCard.hasProperty(this.excludeFromBirthdayKey)) {\n\t\t\t\tthis.localContact.vCard.addPropertyWithValue(this.excludeFromBirthdayKey, true)\n\t\t\t} else {\n\t\t\t\tthis.localContact.vCard.removeProperty(this.excludeFromBirthdayKey)\n\t\t\t}\n\n\t\t\tawait this.updateContact()\n\t\t},\n\n\t\t/**\n\t\t * Select the text in the input if it is still set to 'Name'\n\t\t */\n\t\tselectInput() {\n\t\t\tif (this.$refs.fullname && this.$refs.fullname.value === t('contacts', 'Name')) {\n\t\t\t\tthis.$refs.fullname.select()\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Select a contact, and update the localContact\n\t\t * Fetch updated data if necessary\n\t\t * Scroll to the selected contact if exists\n\t\t *\n\t\t * @param {string} key the contact key\n\t\t */\n\t\tasync selectContact(key) {\n\t\t\tthis.loadingData = true\n\t\t\tthis.editMode = false\n\n\t\t\t// local version of the contact\n\t\t\tconst contact = this.$store.getters.getContact(key)\n\n\t\t\tif (contact) {\n\t\t\t\t// if contact exists AND if exists on server\n\t\t\t\tif (contact.dav) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait this.$store.dispatch('fetchFullContact', { contact })\n\t\t\t\t\t\t// clone to a local editable variable\n\t\t\t\t\t\tawait this.updateLocalContact(contact)\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tif (error.name === 'ParserError') {\n\t\t\t\t\t\t\tshowError(t('contacts', 'Syntax error. Cannot open the contact.'))\n\t\t\t\t\t\t} else if (error?.status === 404) {\n\t\t\t\t\t\t\tshowError(t('contacts', 'The contact does not exist on the server anymore.'))\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tshowError(t('contacts', 'Unable to retrieve the contact from the server, please check your network connection.'))\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.error(error)\n\t\t\t\t\t\t// trigger a local deletion from the store only\n\t\t\t\t\t\tthis.$store.dispatch('deleteContact', { contact: this.contact, dav: false })\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// clone to a local editable variable\n\t\t\t\t\tawait this.updateLocalContact(contact)\n\n\t\t\t\t\t// enable edit mode by default when creating a new contact\n\t\t\t\t\tthis.editMode = true\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.loadingData = false\n\t\t},\n\n\t\t/**\n\t\t * Dispatch contact deletion request\n\t\t */\n\t\tdeleteContact() {\n\t\t\tthis.$store.dispatch('deleteContact', { contact: this.contact })\n\t\t},\n\n\t\t/**\n\t\t * Move contact to the specified addressbook\n\t\t *\n\t\t * @param {string} addressbookId the desired addressbook ID\n\t\t */\n\t\tasync moveContactToAddressbook(addressbookId) {\n\t\t\tconst addressbook = this.addressbooks.find(search => search.id === addressbookId)\n\t\t\tthis.loadingUpdate = true\n\t\t\tif (addressbook) {\n\t\t\t\ttry {\n\t\t\t\t\tconst contact = await this.$store.dispatch('moveContactToAddressbook', {\n\t\t\t\t\t\t// we need to use the store contact, not the local contact\n\t\t\t\t\t\t// using this.contact and not this.localContact\n\t\t\t\t\t\tcontact: this.contact,\n\t\t\t\t\t\taddressbook,\n\t\t\t\t\t})\n\t\t\t\t\t// select the contact again\n\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\tname: 'contact',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tselectedGroup: this.$route.params.selectedGroup,\n\t\t\t\t\t\t\tselectedContact: contact.key,\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t\tshowError(t('contacts', 'An error occurred while trying to move the contact'))\n\t\t\t\t} finally {\n\t\t\t\t\tthis.loadingUpdate = false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Copy contact to the specified addressbook\n\t\t *\n\t\t * @param {string} addressbookId the desired addressbook ID\n\t\t */\n\t\tasync copyContactToAddressbook(addressbookId) {\n\t\t\tconst addressbook = this.addressbooks.find(search => search.id === addressbookId)\n\t\t\tthis.loadingUpdate = true\n\t\t\tif (addressbook) {\n\t\t\t\ttry {\n\t\t\t\t\tconst contact = await this.$store.dispatch('copyContactToAddressbook', {\n\t\t\t\t\t\t// we need to use the store contact, not the local contact\n\t\t\t\t\t\t// using this.contact and not this.localContact\n\t\t\t\t\t\tcontact: this.contact,\n\t\t\t\t\t\taddressbook,\n\t\t\t\t\t})\n\t\t\t\t\t// select the contact again\n\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\tname: 'contact',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tselectedGroup: this.$route.params.selectedGroup,\n\t\t\t\t\t\t\tselectedContact: contact.key,\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t\tshowError(t('contacts', 'An error occurred while trying to copy the contact'))\n\t\t\t\t} finally {\n\t\t\t\t\tthis.loadingUpdate = false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Refresh the data of a contact\n\t\t */\n\t\trefreshContact() {\n\t\t\tthis.$store.dispatch('fetchFullContact', { contact: this.contact, etag: this.conflict })\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.contact.conflict = false\n\t\t\t\t})\n\t\t},\n\n\t\t// reset the current qrcode\n\t\tcloseQrModal() {\n\t\t\tthis.qrcode = ''\n\t\t},\n\n\t\t/**\n\t\t *  Update this.localContact and set this.fixed\n\t\t *\n\t\t * @param {Contact} contact the contact to clone\n\t\t */\n\t\tasync updateLocalContact(contact) {\n\t\t\t// create empty contact and copy inner data\n\t\t\tconst localContact = Object.assign(\n\t\t\t\tObject.create(Object.getPrototypeOf(contact)),\n\t\t\t\tcontact,\n\t\t\t)\n\n\t\t\tthis.fixed = validate(localContact)\n\n\t\t\tthis.localContact = localContact\n\t\t\tthis.newGroupsValue = [...this.localContact.groups]\n\t\t},\n\n\t\tonCtrlSave(e) {\n\t\t\tif (!this.editMode) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (e.keyCode === 83 && (navigator.platform.match('Mac') ? e.metaKey : e.ctrlKey)) {\n\t\t\t\te.preventDefault()\n\t\t\t\tthis.onSave()\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Clone the current contact to another addressbook\n\t\t */\n\t\tasync cloneContact() {\n\t\t\t// only one addressbook, let's clone it there\n\t\t\tif (this.pickedAddressbook && this.addressbooks.find(addressbook => addressbook.id === this.pickedAddressbook.id)) {\n\t\t\t\tthis.logger.debug('Cloning contact to', { name: this.pickedAddressbook.name })\n\t\t\t\tawait this.copyContactToAddressbook(this.pickedAddressbook.id)\n\t\t\t\tthis.closePickAddressbookModal()\n\t\t\t} else if (this.addressbooksOptions.length === 1) {\n\t\t\t\tthis.logger.debug('Cloning contact to', { name: this.addressbooksOptions[0].name })\n\t\t\t\tawait this.copyContactToAddressbook(this.addressbooksOptions[0].id)\n\t\t\t} else {\n\t\t\t\tthis.showPickAddressbookModal = true\n\t\t\t}\n\t\t},\n\n\t\tclosePickAddressbookModal() {\n\t\t\tthis.showPickAddressbookModal = false\n\t\t\tthis.pickedAddressbook = null\n\t\t},\n\n\t\t/**\n\t\t * Should display the property\n\t\t *\n\t\t * @param {Property} property the property to check\n\t\t * @return {boolean}\n\t\t */\n\t\tcanDisplay(property) {\n\t\t\t// Make sure we have some model for the property and check for ITEM.PROP custom label format\n\t\t\tconst propModel = rfcProps.properties[property.name.split('.').pop()]\n\n\t\t\tconst propType = propModel && propModel.force\n\t\t\t\t? propModel.force\n\t\t\t\t: property.getDefaultType()\n\n\t\t\treturn propModel && propType !== 'unknown'\n\t\t},\n\n\t\t/**\n\t\t * Save the contact. This handler is triggered by the save button.\n\t\t */\n\t\tasync onSave() {\n\t\t\ttry {\n\t\t\t\tthis.localContact.groups = [...this.newGroupsValue]\n\t\t\t\tawait this.$store.dispatch('updateContactGroups', {\n\t\t\t\t\tgroupNames: this.newGroupsValue,\n\t\t\t\t\tcontact: this.contact,\n\t\t\t\t})\n\t\t\t\tawait this.updateContact()\n\t\t\t\tif (this.newAddressBook && this.newAddressBook !== this.contact.addressbook.id) {\n\t\t\t\t\tthis.moveContactToAddressbook(this.newAddressBook)\n\t\t\t\t\tthis.newAddressBook = null\n\t\t\t\t}\n\t\t\t\tthis.editMode = false\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('contacts', 'Unable to update contact'))\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// List of all properties\n.contact-details-wrapper {\n\tdisplay: inline;\n\talign-items: flex-start;\n\tpadding-bottom: calc(var(--default-grid-baseline) * 5);\n\tgap: calc(var(--default-grid-baseline) * 4);\n\tfloat: left;\n}\n@media only screen and (max-width: 600px) {\n\t.contact-details-wrapper {\n\t\tdisplay: block;\n\t}\n}\n\nsection.contact-details {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 10px;\n}\n\n#qrcode-modal {\n\t:deep(.modal-container) {\n\t\tdisplay: flex;\n\t\tpadding: 10px;\n\t\tbackground-color: #fff;\n\t\t.qrcode {\n\t\t\tmax-width: 100%;\n\t\t}\n\t}\n}\n\n:deep(.v-select.select) {\n\tmin-width: 0;\n\tflex: 1 auto;\n}\n\n:deep(.v-select.select .vs__selected-options), :deep(.vs__search) {\n\tmin-height: unset;\n\tmargin: 0 !important;\n}\n\n:deep(.vs__selected) {\n\theight: calc(var(--default-clickable-area) - var(--default-grid-baseline)) !important;\n\tmargin: calc(var(--default-grid-baseline) / 2);\n}\n\n#pick-addressbook-modal {\n\t:deep(.modal-container) {\n\t\tdisplay: flex;\n\t\toverflow: visible;\n\t\tflex-wrap: wrap;\n\t\tjustify-content: space-evenly;\n\t\tmargin-bottom: 20px;\n\t\tpadding: 10px;\n\t\tbackground-color: #fff;\n\t\t.multiselect {\n\t\t\tflex: 1 1 100%;\n\t\t\twidth: 100%;\n\t\t\tmargin-bottom: 20px;\n\t\t}\n\t}\n}\n\n.action-item {\n\tbackground-color: var(--color-primary-element-light);\n\tborder-radius: var(--border-radius-rounded);\n}\n\n:deep(.button-vue--vue-tertiary:hover),\n:deep(.button-vue--vue-tertiary:active) {\n\tbackground-color: var(--color-primary-element-light-hover) !important;\n}\n\n.related-resources {\n\tdisplay:inline-grid;\n\tmargin-top: 88px;\n\tflex-direction: column;\n\tmargin-bottom: -30px;\n}\n@media only screen and (max-width: 1600px) {\n\t.related-resources {\n\t\tfloat: left;\n\t\tdisplay: inline-grid;\n\t\tmargin-left: 80px;\n\t\tflex-direction: column;\n\t\tmargin-bottom: 0;\n\t\tmargin-top: 40px;\n\t}\n}\n\n.last-edit {\n\tdisplay: inline-flex;\n}\n// forcing the size only for contacts app to fit the text size of the contacts app\n:deep(.related-resources__header h5) {\n\tfont-size: medium;\n\topacity: .7;\n\tcolor: var(--color-primary-element);\n}\n\n.address-book {\n\tmin-width: 260px !important;\n}\n\n.empty-content {\n\theight: 100%;\n}\n\n.contact-title {\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div class=\"contacts-list__item-wrapper\"\n\t\t:draggable=\"isDraggable\"\n\t\t@dragstart=\"startDrag($event, source)\">\n\t\t<ListItem :id=\"id\"\n\t\t\t:key=\"source.key\"\n\t\t\tclass=\"list-item-style envelope\"\n\t\t\t:name=\"source.displayName\"\n\t\t\t:to=\"{ name: 'contact', params: { selectedGroup: selectedGroup, selectedContact: source.key } }\">\n\t\t\t<!-- @slot Icon slot -->\n\n\t\t\t<template #icon>\n\t\t\t\t<div class=\"app-content-list-item-icon\">\n\t\t\t\t\t<BaseAvatar :display-name=\"source.displayName\" :url=\"avatarUrl\" :size=\"40\" />\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template #subname>\n\t\t\t\t<div class=\"envelope__subtitle\">\n\t\t\t\t\t<span class=\"envelope__subtitle__subject\">\n\t\t\t\t\t\t{{ source.email ? source.email : getTel }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</ListItem>\n\t</div>\n</template>\n\n<script>\nimport {\n\tNcListItem as ListItem,\n\tNcAvatar as BaseAvatar,\n} from '@nextcloud/vue'\n\nexport default {\n\tname: 'ContactsListItem',\n\n\tcomponents: {\n\t\tListItem,\n\t\tBaseAvatar,\n\t},\n\n\tprops: {\n\t\tindex: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tsource: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\treloadBus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tavatarUrl: undefined,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tselectedGroup() {\n\t\t\treturn this.$route.params.selectedGroup\n\t\t},\n\t\tselectedContact() {\n\t\t\treturn this.$route.params.selectedContact\n\t\t},\n\t\t// contact is not draggable when it has not been saved on server as it can't be added to groups/circles before\n\t\tisDraggable() {\n\t\t\treturn !!this.source.dav && this.source.addressbook.id !== 'z-server-generated--system'\n\t\t},\n\t\t// usable and valid html id for scrollTo\n\t\tid() {\n\t\t\treturn window.btoa(this.source.key).slice(0, -2)\n\t\t},\n\t\tgetTel() {\n\t\t\treturn this.source.properties.find(property => property.name === 'tel')?.getFirstValue()\n\t\t},\n\t},\n\n\tcreated() {\n\t\tthis.reloadBus.on('reload-avatar', this.reloadAvatarUrl)\n\t\tthis.reloadBus.on('delete-avatar', this.deleteAvatar)\n\t},\n\tdestroyed() {\n\t\tthis.reloadBus.off('reload-avatar', this.reloadAvatarUrl)\n\t\tthis.reloadBus.off('delete-avatar', this.deleteAvatar)\n\t},\n\tasync mounted() {\n\t\tawait this.loadAvatarUrl()\n\t},\n\tmethods: {\n\t\tstartDrag(evt, item) {\n\t\t\tevt.dataTransfer.dropEffect = 'move'\n\t\t\tevt.dataTransfer.effectAllowed = 'move'\n\t\t\tevt.dataTransfer.setData('item', JSON.stringify({\n\t\t\t\taddressbookId: item.addressbook.id,\n\t\t\t\tdisplayName: item.displayName,\n\t\t\t\tgroups: item.groups,\n\t\t\t\turl: item.url,\n\t\t\t\tuid: item.uid,\n\t\t\t}))\n\t\t},\n\n\t\t/**\n\t\t * Is called on save in ContactDetails to reload Avatar,\n\t\t * url does not change, so trigger on source change don't work\n\t\t *\n\t\t * @param {string} key from contact\n\t\t */\n\t\treloadAvatarUrl(key) {\n\t\t\tif (key === this.source.key) {\n\t\t\t\tthis.loadAvatarUrl()\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Is called on save in ContactDetails to delete Avatar,\n\t\t * somehow the avatarUrl is not unavailable immediately, so we just set undefined\n\t\t *\n\t\t * @param {string} key from contact\n\t\t */\n\t\tdeleteAvatar(key) {\n\t\t\tif (key === this.source.key) {\n\t\t\t\tthis.avatarUrl = undefined\n\t\t\t}\n\t\t},\n\n\t\tasync loadAvatarUrl() {\n\t\t\tthis.avatarUrl = undefined\n\t\t\tif (this.source.photo) {\n\t\t\t\tconst photoUrl = await this.source.getPhotoUrl()\n\t\t\t\tif (!photoUrl) {\n\t\t\t\t\tconsole.warn('contact has an invalid photo')\n\t\t\t\t\t// Invalid photo data\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.avatarUrl = photoUrl\n\t\t\t} else if (this.source.hasPhoto && this.source.url) {\n\t\t\t\tthis.avatarUrl = `${this.source.url}?photo`\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Select this contact within the list\n\t\t */\n\t\tselectContact() {\n\t\t\t// change url with router\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'contact',\n\t\t\t\tparams: { selectedGroup: this.selectedGroup, selectedContact: this.source.key },\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n\n.envelope {\n\t.app-content-list-item-icon {\n\t\theight: 40px; // To prevent some unexpected spacing below the avatar\n\t}\n\n\t&__subtitle {\n\t\tdisplay: flex;\n\t\tgap: var(--default-grid-baseline);\n\n\t\t&__subject {\n\t\t\tline-height: 130%;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t}\n\t}\n}\n\n:deep(.list-item) {\n\tlist-style: none;\n\tpadding-inline: calc(var(--default-grid-baseline) * 3);\n\tpadding-block: calc(var(--default-grid-baseline) * 2);\n}\n\n</style>\n<style lang=\"scss\">\n.contacts-list__item-wrapper {\n\t&[draggable='true'] .avatardiv * {\n\t\tcursor: move !important;\n\t}\n\n\t&[draggable='false'] .avatardiv * {\n\t\tcursor: not-allowed !important;\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<AppContentList class=\"content-list\">\n\t\t<div class=\"contacts-list__header\">\n\t\t\t<div class=\"search-contacts-field\">\n\t\t\t\t<input v-model=\"query\" type=\"text\" :placeholder=\"t('contacts', 'Search contacts ')\">\n\t\t\t</div>\n\t\t</div>\n\t\t<VirtualList ref=\"scroller\"\n\t\t\tclass=\"contacts-list\"\n\t\t\tdata-key=\"key\"\n\t\t\t:data-sources=\"filteredList\"\n\t\t\t:data-component=\"ContactsListItem\"\n\t\t\t:estimate-size=\"68\"\n\t\t\t:extra-props=\"{reloadBus}\" />\n\t</AppContentList>\n</template>\n\n<script>\nimport { NcAppContentList as AppContentList } from '@nextcloud/vue'\nimport ContactsListItem from './ContactsList/ContactsListItem.vue'\nimport VirtualList from 'vue-virtual-scroll-list'\n\nexport default {\n\tname: 'ContactsList',\n\n\tcomponents: {\n\t\tAppContentList,\n\t\tVirtualList,\n\t},\n\n\tprops: {\n\t\tlist: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tcontacts: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tsearchQuery: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\treloadBus: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tContactsListItem,\n\t\t\tquery: '',\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tselectedContact() {\n\t\t\treturn this.$route.params.selectedContact\n\t\t},\n\t\tselectedGroup() {\n\t\t\treturn this.$route.params.selectedGroup\n\t\t},\n\t\tfilteredList() {\n\t\t\treturn this.list\n\t\t\t\t.filter(item => this.matchSearch(this.contacts[item.key]))\n\t\t\t\t.map(item => this.contacts[item.key])\n\t\t},\n\t},\n\n\twatch: {\n\t\tselectedContact(key) {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.scrollToContact(key)\n\t\t\t})\n\t\t},\n\t\tlist(val, old) {\n\t\t\t// we just loaded the list and the url already have a selected contact\n\t\t\t// if not, the selectedContact watcher will take over\n\t\t\t// to select the first entry\n\t\t\tif (val.length !== 0 && old.length === 0 && this.selectedContact) {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.scrollToContact(this.selectedContact)\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t},\n\n\tmounted() {\n\t\tthis.query = this.searchQuery\n\t},\n\n\tmethods: {\n\t\t// Select closest contact on deletion\n\t\tselectContact(oldIndex) {\n\t\t\tif (this.list.length > 0 && oldIndex < this.list.length) {\n\t\t\t\t// priority to the one above then the one after\n\t\t\t\tconst newContact = oldIndex === 0 ? this.list[oldIndex + 1] : this.list[oldIndex - 1]\n\t\t\t\tif (newContact) {\n\t\t\t\t\tthis.$router.push({ name: 'contact', params: { selectedGroup: this.selectedGroup, selectedContact: newContact.key } })\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Scroll to the desired contact if in the list and not visible\n\t\t *\n\t\t * @param {string} key the contact unique key\n\t\t */\n\t\tscrollToContact(key) {\n\t\t\tconst item = this.$el.querySelector('#' + btoa(key).slice(0, -2))\n\n\t\t\t// if the item is not visible in the list or barely visible\n\t\t\tif (!(item && item.getBoundingClientRect().y > 50)) { // header height\n\t\t\t\tconst index = this.list.findIndex(contact => contact.key === key)\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tthis.$refs.scroller.scrollToIndex(index)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// if item is a bit out (bottom) of the list, let's just scroll a bit to the top\n\t\t\tif (item) {\n\t\t\t\tconst pos = item.getBoundingClientRect().y + this.itemHeight - (this.$el.offsetHeight + 50)\n\t\t\t\tif (pos > 0) {\n\t\t\t\t\tconst scroller = this.$refs.scroller.$el\n\t\t\t\t\tscroller.scrollToOffset(scroller.scrollTop + pos)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Is this matching the current search ?\n\t\t *\n\t\t * @param {Contact} contact the contact to search\n\t\t * @return {boolean}\n\t\t */\n\t\tmatchSearch(contact) {\n\t\t\tif (this.query.trim() !== '') {\n\t\t\t\treturn contact.searchData.toString().toLowerCase().search(this.query.trim().toLowerCase()) !== -1\n\t\t\t}\n\t\t\treturn true\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// Make virtual scroller scrollable\n.contacts-list {\n\tmax-height: calc(100vh - var(--header-height) - 48px);\n\toverflow: auto;\n}\n\n// Add empty header to contacts-list that solves overlapping of contacts with app-navigation-toogle\n.contacts-list__header {\n\tmin-height: calc(var(--default-grid-baseline) * 12)\n}\n\n// Search field\n.search-contacts-field {\n\tpadding: var(--default-grid-baseline) calc(var(--default-grid-baseline) * 2) var(--default-grid-baseline) calc(var(--default-grid-baseline) * 12);\n\n\t> input {\n\t\twidth: 100%;\n\t}\n}\n\n.content-list {\n\toverflow-y: auto;\n\tpadding: 0 var(--default-grid-baseline);\n}\n\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<AppContent v-if=\"loading\">\n\t\t<EmptyContent class=\"empty-content\" :name=\"t('contacts', 'Loading contacts ')\">\n\t\t\t<template #icon>\n\t\t\t\t<IconLoading :size=\"20\" />\n\t\t\t</template>\n\t\t</EmptyContent>\n\t</AppContent>\n\n\t<AppContent v-else-if=\"isEmptyGroup && !isRealGroup\">\n\t\t<EmptyContent class=\"empty-content\" :name=\"t('contacts', 'There are no contacts yet')\">\n\t\t\t<template #icon>\n\t\t\t\t<IconContact :size=\"20\" />\n\t\t\t</template>\n\t\t\t<template #desc>\n\t\t\t\t<Button type=\"primary\" @click=\"newContact\">\n\t\t\t\t\t{{ t('contacts', 'Create contact') }}\n\t\t\t\t</Button>\n\t\t\t</template>\n\t\t</EmptyContent>\n\t</AppContent>\n\n\t<AppContent v-else-if=\"isEmptyGroup && isRealGroup\">\n\t\t<EmptyContent class=\"empty-content\" :name=\" t('contacts', 'There are no contacts in this group')\">\n\t\t\t<template #icon>\n\t\t\t\t<IconContact :size=\"20\" />\n\t\t\t</template>\n\t\t\t<template #desc>\n\t\t\t\t<Button v-if=\"contacts.length === 0\" type=\"primary\" @click=\"addContactsToGroup(selectedGroup)\">\n\t\t\t\t\t{{ t('contacts', 'Create contacts') }}\n\t\t\t\t</Button>\n\t\t\t\t<Button v-else type=\"primary\" @click=\"addContactsToGroup(selectedGroup)\">\n\t\t\t\t\t{{ t('contacts', 'Add contacts') }}\n\t\t\t\t</Button>\n\t\t\t</template>\n\t\t</EmptyContent>\n\t</AppContent>\n\n\t<AppContent v-else :show-details=\"showDetails\" @update:showDetails=\"hideDetails\">\n\t\t<!-- contacts list -->\n\t\t<template #list>\n\t\t\t<ContactsList :list=\"contactsList\"\n\t\t\t\t:contacts=\"contacts\"\n\t\t\t\t:search-query=\"searchQuery\"\n\t\t\t\t:reload-bus=\"reloadBus\" />\n\t\t</template>\n\n\t\t<!-- main contacts details -->\n\t\t<ContactDetails :contact-key=\"selectedContact\" :contacts=\"sortedContacts\" :reload-bus=\"reloadBus\" />\n\t</AppContent>\n</template>\n<script>\nimport { emit } from '@nextcloud/event-bus'\nimport {\n\tNcAppContent as AppContent,\n\tNcButton as Button,\n\tNcEmptyContent as EmptyContent,\n\tNcLoadingIcon as IconLoading,\n} from '@nextcloud/vue'\n\nimport ContactDetails from '../ContactDetails.vue'\nimport ContactsList from '../ContactsList.vue'\nimport IconContact from 'vue-material-design-icons/AccountMultiple.vue'\nimport RouterMixin from '../../mixins/RouterMixin.js'\nimport mitt from 'mitt'\n\nexport default {\n\tname: 'ContactsContent',\n\n\tcomponents: {\n\t\tAppContent,\n\t\tButton,\n\t\tContactDetails,\n\t\tContactsList,\n\t\tEmptyContent,\n\t\tIconContact,\n\t\tIconLoading,\n\t},\n\n\tmixins: [RouterMixin],\n\n\tprops: {\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\n\t\tcontactsList: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tsearchQuery: '',\n\t\t\t// communication for ContactListItem and ContactDetails (reload avatar)\n\t\t\treloadBus: mitt(),\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t// store variables\n\t\tcontacts() {\n\t\t\treturn this.$store.getters.getContacts\n\t\t},\n\t\tgroups() {\n\t\t\treturn this.$store.getters.getGroups\n\t\t},\n\t\tsortedContacts() {\n\t\t\treturn this.$store.getters.getSortedContacts\n\t\t},\n\n\t\tselectedContact() {\n\t\t\treturn this.$route.params.selectedContact\n\t\t},\n\n\t\t/**\n\t\t * Is this a real group ?\n\t\t * Aka not a dynamically generated one like `All contacts`\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisRealGroup() {\n\t\t\treturn this.groups.findIndex(group => group.name === this.selectedGroup) > -1\n\t\t},\n\t\t/**\n\t\t * Is the current group empty\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisEmptyGroup() {\n\t\t\treturn this.contactsList.length === 0\n\t\t},\n\n\t\tshowDetails() {\n\t\t\treturn !!this.selectedContact\n\t\t},\n\t},\n\n\tmethods: {\n\t\t/**\n\t\t * Forward the addContactsToGroup event to the parent\n\t\t *\n\t\t * @param {string} groupName the group name\n\t\t */\n\t\taddContactsToGroup(groupName) {\n\t\t\temit('contacts:group:append', groupName)\n\t\t},\n\n\t\t/**\n\t\t * Forward the newContact event to the parent\n\t\t */\n\t\tnewContact() {\n\t\t\tthis.$emit('new-contact')\n\t\t},\n\n\t\t/**\n\t\t * Show the list and deselect contact\n\t\t */\n\t\thideDetails() {\n\t\t\t// Reset the selected contact\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'group',\n\t\t\t\tparams: {\n\t\t\t\t\tselectedGroup: this.selectedGroup,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n.empty-content {\n\theight: 100%;\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div>\n\t\t<EmptyContent :description=\"desc\"\n\t\t\t:name=\"title\"\n\t\t\tclass=\"processing-screen__wrapper\">\n\t\t\t<template #icon>\n\t\t\t\t<IconContact :size=\"20\" />\n\t\t\t</template>\n\t\t</EmptyContent>\n\t\t<div class=\"processing-screen__progress\">\n\t\t\t<progress :max=\"total\" :value=\"progress\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { NcEmptyContent as EmptyContent } from '@nextcloud/vue'\nimport IconContact from 'vue-material-design-icons/AccountMultiple.vue'\nexport default {\n\tname: 'ProcessingScreen',\n\n\tcomponents: {\n\t\tEmptyContent,\n\t\tIconContact,\n\t},\n\n\tprops: {\n\t\ttotal: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tprogress: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tdesc: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.processing-screen {\n\t&__wrapper {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\twidth: auto;\n\t\tmargin: 50px;\n\t}\n\n\t&__progress {\n\t\tpadding: 0 12px;\n\t}\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div>\n\t\t<ProcessingScreen :progress=\"progress\"\n\t\t\t:total=\"total\"\n\t\t\t:desc=\"failed > 0 ? messageFailed : ''\"\n\t\t\t:title=\"total === progress\n\t\t\t\t? finishedHeader\n\t\t\t\t: progressHeader\" />\n\t\t<div class=\"close__button\">\n\t\t\t<Button v-if=\"total === progress\" class=\"primary\" @click=\"onClose\">\n\t\t\t\t{{ t('contacts', 'Close') }}\n\t\t\t</Button>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport ProcessingScreen from '../../components/ProcessingScreen.vue'\nimport { NcButton as Button } from '@nextcloud/vue'\nexport default {\n\tname: 'AddToGroupView',\n\n\tcomponents: {\n\t\tProcessingScreen,\n\t\tButton,\n\t},\n\n\tprops: {\n\t\tfailed: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t\tprogress: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t\tsuccess: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t\ttotal: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t\tname: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tprogressHeader() {\n\t\t\treturn n('contacts',\n\t\t\t\t'{success} contact added to {name}',\n\t\t\t\t'{success} contacts added to {name}',\n\t\t\t\tthis.success,\n\t\t\t\t{ success: this.success, name: this.name },\n\t\t\t)\n\t\t},\n\n\t\tfinishedHeader() {\n\t\t\treturn n('contacts',\n\t\t\t\t'Adding {success} contact to {name}',\n\t\t\t\t'Adding {success} contacts to {name}',\n\t\t\t\tthis.success,\n\t\t\t\t{ success: this.success, name: this.name },\n\t\t\t)\n\t\t},\n\n\t\tmessageFailed() {\n\t\t\treturn n('contacts',\n\t\t\t\t'{count} error',\n\t\t\t\t'{count} errors',\n\t\t\t\tthis.failed,\n\t\t\t\t{ count: this.failed },\n\t\t\t)\n\t\t},\n\t},\n\n\tmethods: {\n\t\tonClose() {\n\t\t\tthis.$emit('close')\n\t\t},\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n.close__button {\n\tpadding: 12px;\n\tfloat: right;\n}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport axios from '@nextcloud/axios'\n\n/**\n * Append a group to a contact\n *\n * @param {Contact} contact the contact model\n * @param {string} groupName the group name\n */\nconst appendContactToGroup = async function(contact, groupName) {\n\tconst groups = contact.groups\n\tgroups.push(groupName)\n\n\treturn axios.patch(contact.url, {}, {\n\t\theaders: {\n\t\t\t'X-PROPERTY': 'CATEGORIES',\n\t\t\t'X-PROPERTY-REPLACE': groups.map(groupName => encodeURIComponent(groupName)).join(','),\n\t\t},\n\t})\n}\n\nexport default appendContactToGroup\n","<!--\n  - SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<!-- Bulk contacts edit modal -->\n\t<Modal v-if=\"isProcessing || isProcessDone\"\n\t\t:clear-view-delay=\"-1\"\n\t\t:can-close=\"isProcessDone\"\n\t\t@close=\"closeProcess\">\n\t\t<AddToGroupView v-bind=\"processStatus\" @close=\"closeProcess\" />\n\t</Modal>\n\n\t<!-- contacts picker -->\n\t<EntityPicker v-else-if=\"showPicker\"\n\t\t:confirm-label=\"t('contacts', 'Add to {group}', { group: pickerforGroup.name })\"\n\t\t:data-types=\"pickerTypes\"\n\t\t:data-set=\"pickerData\"\n\t\t@close=\"onContactPickerClose\"\n\t\t@submit=\"onContactPickerPick\" />\n</template>\n\n<script>\nimport { subscribe } from '@nextcloud/event-bus'\nimport pLimit from 'p-limit'\n\nimport { NcModal as Modal } from '@nextcloud/vue'\n\nimport AddToGroupView from '../../views/Processing/AddToGroupView.vue'\nimport appendContactToGroup from '../../services/appendContactToGroup.js'\nimport EntityPicker from './EntityPicker.vue'\n\nexport default {\n\tname: 'ContactsPicker',\n\n\tcomponents: {\n\t\tAddToGroupView,\n\t\tEntityPicker,\n\t\tModal,\n\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\t// Entity picker\n\t\t\tshowPicker: false,\n\t\t\tpickerforGroup: null,\n\t\t\tpickerData: [],\n\t\t\tpickerTypes: [{\n\t\t\t\tid: 'contact',\n\t\t\t\tlabel: t('contacts', 'Contacts'),\n\t\t\t}],\n\n\t\t\t// Bulk processing\n\t\t\tisProcessing: false,\n\t\t\tisProcessDone: false,\n\t\t\tprocessStatus: {\n\t\t\t\tfailed: 0,\n\t\t\t\tprogress: 0,\n\t\t\t\tsuccess: 0,\n\t\t\t\ttotal: 0,\n\t\t\t\tname: '',\n\t\t\t},\n\t\t\tpassedGroupName: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\tcontacts() {\n\t\t\treturn this.$store.getters.getContacts\n\t\t},\n\t\tgroups() {\n\t\t\treturn this.$store.getters.getGroups\n\t\t},\n\t\tsortedContacts() {\n\t\t\treturn this.$store.getters.getSortedContacts\n\t\t},\n\t},\n\n\tmounted() {\n\t\t// Watch for a add-to-group event\n\t\tsubscribe('contacts:group:append', this.addContactsToGroup)\n\t},\n\n\tmethods: {\n\t\t// Bulk contacts group management handlers\n\t\taddContactsToGroup(group) {\n\t\t\tconsole.debug('Contacts picker opened for group', group)\n\n\t\t\tthis.passedGroupName = group.name ? group.name : group\n\t\t\t// Get the full group if we provided the group name only\n\t\t\tif (typeof group === 'string') {\n\t\t\t\tgroup = this.groups.find(a => a.name === group)\n\t\t\t\tif (!group) {\n\t\t\t\t\tconsole.error('Cannot add contact to an undefined group', group)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Init data set\n\t\t\tthis.pickerData = this.sortedContacts\n\t\t\t\t.map(({ key }) => {\n\t\t\t\t\tconst contact = this.contacts[key]\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: contact.key,\n\t\t\t\t\t\tlabel: contact.displayName,\n\t\t\t\t\t\ttype: 'contact',\n\t\t\t\t\t\treadOnly: contact.addressbook.readOnly,\n\t\t\t\t\t\tgroups: contact.groups,\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t// No read only contacts\n\t\t\t\t.filter(contact => !contact.readOnly)\n\t\t\t\t// No contacts already present in group\n\t\t\t\t.filter(contact => contact.groups.indexOf(group.name) === -1)\n\n\t\t\tthis.showPicker = true\n\t\t\tthis.pickerforGroup = group\n\t\t},\n\n\t\tonContactPickerClose() {\n\t\t\tthis.pickerData = []\n\t\t\tthis.showPicker = false\n\t\t},\n\n\t\tonContactPickerPick(selection) {\n\t\t\tconsole.debug('Adding', selection, 'to group', this.pickerforGroup)\n\t\t\tconst groupName = this.pickerforGroup.name\n\n\t\t\tthis.isProcessing = true\n\t\t\tthis.showPicker = false\n\n\t\t\tthis.processStatus.total = selection.length\n\t\t\tthis.processStatus.name = this.pickerforGroup.name\n\t\t\tthis.processStatus.progress = 0\n\t\t\tthis.processStatus.failed = 0\n\n\t\t\t// max simultaneous requests\n\t\t\tconst limit = pLimit(3)\n\t\t\tconst requests = []\n\n\t\t\t// create the array of requests to send\n\t\t\tselection.map(async entity => {\n\t\t\t\ttry {\n\t\t\t\t\t// Get contact\n\t\t\t\t\tconst contact = this.contacts[entity.id]\n\n\t\t\t\t\t// push contact to server and use limit\n\t\t\t\t\trequests.push(limit(() => appendContactToGroup(contact, groupName)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.$store.dispatch('addContactToGroup', { contact, groupName })\n\t\t\t\t\t\t\tthis.processStatus.progress++\n\t\t\t\t\t\t\tthis.processStatus.success++\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tthis.processStatus.progress++\n\t\t\t\t\t\t\tthis.processStatus.error++\n\t\t\t\t\t\t\tconsole.error(error)\n\t\t\t\t\t\t}),\n\t\t\t\t\t))\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tPromise.all(requests).then(() => {\n\t\t\t\tthis.isProcessDone = true\n\t\t\t\tthis.showPicker = false\n\n\t\t\t\t// Select group\n\t\t\t\tthis.$router.push({\n\t\t\t\t\tname: 'group',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tselectedGroup: typeof this.passedGroupName === 'string' ? this.passedGroupName : this.passedGroupName.name,\n\t\t\t\t\t},\n\t\t\t\t})\n\n\t\t\t\t// Auto close after 3 seconds if no errors\n\t\t\t\tif (this.processStatus.failed === 0) {\n\t\t\t\t\tsetTimeout(this.closeProcess, 3000)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\tcloseProcess() {\n\t\t\tthis.pickerforGroup = null\n\t\t\tthis.isProcessing = false\n\t\t\tthis.isProcessDone = false\n\n\t\t\t// Reset\n\t\t\tthis.processStatus.failed = 0\n\t\t\tthis.processStatus.progress = 0\n\t\t\tthis.processStatus.success = 0\n\t\t\tthis.processStatus.total = 0\n\n\t\t\tif (this.passedGroupName === '' || this.passedGroupName === undefined) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\t// Select group\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'group',\n\t\t\t\tparams: {\n\t\t\t\t\tselectedGroup: typeof this.passedGroupName === 'string' ? this.passedGroupName : this.passedGroupName.name,\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div>\n\t\t<ProcessingScreen :progress=\"progress\"\n\t\t\t:total=\"total\"\n\t\t\t:desc=\"failed > 0 ? importFailed : ''\"\n\t\t\t:title=\"total === progress\n\t\t\t\t? importedHeader\n\t\t\t\t: importingHeader\" />\n\t\t<div class=\"close__button\">\n\t\t\t<Button v-if=\"total === progress\" class=\"primary\" @click=\"onClose\">\n\t\t\t\t{{ t('contacts', 'Close') }}\n\t\t\t</Button>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport ProcessingScreen from '../../components/ProcessingScreen.vue'\nimport { NcButton as Button } from '@nextcloud/vue'\nexport default {\n\tname: 'ImportView',\n\n\tcomponents: {\n\t\tProcessingScreen,\n\t\tButton,\n\t},\n\n\tcomputed: {\n\t\timportState() {\n\t\t\treturn this.$store.getters.getImportState\n\t\t},\n\t\taddressbook() {\n\t\t\treturn this.importState.addressbook\n\t\t},\n\t\ttotal() {\n\t\t\treturn this.importState.total\n\t\t},\n\t\taccepted() {\n\t\t\treturn this.importState.accepted\n\t\t},\n\t\tfailed() {\n\t\t\treturn this.importState.denied\n\t\t},\n\t\tprogress() {\n\t\t\treturn this.accepted + this.failed\n\t\t},\n\n\t\timportingHeader() {\n\t\t\treturn n('contacts',\n\t\t\t\t'Importing %n contact into {addressbook}',\n\t\t\t\t'Importing %n contacts into {addressbook}',\n\t\t\t\tthis.total,\n\t\t\t\t{\n\t\t\t\t\taddressbook: this.addressbook,\n\t\t\t\t},\n\t\t\t)\n\t\t},\n\n\t\timportedHeader() {\n\t\t\treturn n('contacts',\n\t\t\t\t'Done importing %n contact into {addressbook}',\n\t\t\t\t'Done importing %n contacts into {addressbook}',\n\t\t\t\tthis.total,\n\t\t\t\t{\n\t\t\t\t\taddressbook: this.addressbook,\n\t\t\t\t},\n\t\t\t)\n\t\t},\n\n\t\timportFailed() {\n\t\t\treturn n('contacts',\n\t\t\t\t'{count} error',\n\t\t\t\t'{count} errors',\n\t\t\t\tthis.failed,\n\t\t\t\t{ count: this.failed },\n\t\t\t)\n\t\t},\n\t},\n\n\tmethods: {\n\t\tonClose() {\n\t\t\tthis.$emit('close')\n\t\t},\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n.close__button {\n\tpadding: 12px;\n\tfloat: right;\n}\n</style>\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon location-enter-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M14 12L10 8V11H2V13H10V16M22 12A10 10 0 0 1 2.46 15H4.59A8 8 0 1 0 4.59 9H2.46A10 10 0 0 1 22 12Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"LocationEnterIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon account-star-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12M5,13.28L7.45,14.77L6.8,11.96L9,10.08L6.11,9.83L5,7.19L3.87,9.83L1,10.08L3.18,11.96L2.5,14.77L5,13.28Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"AccountStarIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon account-group-outline-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M12,5A3.5,3.5 0 0,0 8.5,8.5A3.5,3.5 0 0,0 12,12A3.5,3.5 0 0,0 15.5,8.5A3.5,3.5 0 0,0 12,5M12,7A1.5,1.5 0 0,1 13.5,8.5A1.5,1.5 0 0,1 12,10A1.5,1.5 0 0,1 10.5,8.5A1.5,1.5 0 0,1 12,7M5.5,8A2.5,2.5 0 0,0 3,10.5C3,11.44 3.53,12.25 4.29,12.68C4.65,12.88 5.06,13 5.5,13C5.94,13 6.35,12.88 6.71,12.68C7.08,12.47 7.39,12.17 7.62,11.81C6.89,10.86 6.5,9.7 6.5,8.5C6.5,8.41 6.5,8.31 6.5,8.22C6.2,8.08 5.86,8 5.5,8M18.5,8C18.14,8 17.8,8.08 17.5,8.22C17.5,8.31 17.5,8.41 17.5,8.5C17.5,9.7 17.11,10.86 16.38,11.81C16.5,12 16.63,12.15 16.78,12.3C16.94,12.45 17.1,12.58 17.29,12.68C17.65,12.88 18.06,13 18.5,13C18.94,13 19.35,12.88 19.71,12.68C20.47,12.25 21,11.44 21,10.5A2.5,2.5 0 0,0 18.5,8M12,14C9.66,14 5,15.17 5,17.5V19H19V17.5C19,15.17 14.34,14 12,14M4.71,14.55C2.78,14.78 0,15.76 0,17.5V19H3V17.07C3,16.06 3.69,15.22 4.71,14.55M19.29,14.55C20.31,15.22 21,16.06 21,17.07V19H24V17.5C24,15.76 21.22,14.78 19.29,14.55M12,16C13.53,16 15.24,16.5 16.23,17H7.77C8.76,16.5 10.47,16 12,16Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"AccountGroupOutlineIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<!--\n  - SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<AppNavigationItem :key=\"circle.key\"\n\t\t:name=\"circle.displayName\"\n\t\t:to=\"circle.router\">\n\t\t<template #icon>\n\t\t\t<AccountStar v-if=\"circle.isOwner\" :size=\"20\" />\n\t\t\t<AccountGroup v-else-if=\"circle.isMember\" :size=\"20\" />\n\t\t\t<AccountGroupOutline v-else :size=\"20\" />\n\t\t</template>\n\t\t<template #actions>\n\t\t\t<ActionText v-if=\"loadingAction\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconLoading :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('contacts', 'Loading ') }}\n\t\t\t</ActionText>\n\t\t\t<template v-else>\n\t\t\t\t<ActionButton v-if=\"circle.canManageMembers\"\n\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t@click=\"addMemberToCircle\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconCog :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Manage team') }}\n\t\t\t\t</ActionButton>\n\n\t\t\t\t<!-- copy circle link -->\n\t\t\t\t<ActionLink :href=\"circleUrl\"\n\t\t\t\t\t:icon=\"copyLinkIcon\"\n\t\t\t\t\t@click.stop.prevent=\"copyToClipboard(circleUrl)\">\n\t\t\t\t\t{{ copyButtonText }}\n\t\t\t\t</ActionLink>\n\n\t\t\t\t<!-- leave circle -->\n\t\t\t\t<ActionButton v-if=\"circle.canLeave\"\n\t\t\t\t\t@click=\"confirmLeaveCircle\">\n\t\t\t\t\t{{ t('contacts', 'Leave team') }}\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<ExitToApp :size=\"16\" />\n\t\t\t\t\t</template>\n\t\t\t\t</ActionButton>\n\n\t\t\t\t<!-- join circle -->\n\t\t\t\t<ActionButton v-else-if=\"!circle.isMember && circle.canJoin\"\n\t\t\t\t\t:disabled=\"loadingJoin\"\n\t\t\t\t\t@click=\"joinCircle\">\n\t\t\t\t\t{{ joinButtonTitle }}\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<LocationEnter :size=\"16\" />\n\t\t\t\t\t</template>\n\t\t\t\t</ActionButton>\n\n\t\t\t\t<!-- delete circle -->\n\t\t\t\t<ActionButton v-if=\"circle.canDelete\"\n\t\t\t\t\t@click=\"confirmDeleteCircle\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconDelete :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Delete team') }}\n\t\t\t\t</ActionButton>\n\t\t\t</template>\n\t\t</template>\n\n\t\t<template #counter>\n\t\t\t<NcCounterBubble v-if=\"memberCount > 0\">\n\t\t\t\t{{ memberCount }}\n\t\t\t</NcCounterBubble>\n\t\t</template>\n\t</AppNavigationItem>\n</template>\n\n<script>\nimport {\n\tNcActionButton as ActionButton,\n\tNcActionLink as ActionLink,\n\tNcActionText as ActionText,\n\tNcCounterBubble,\n\tNcAppNavigationItem as AppNavigationItem,\n\tNcLoadingIcon as IconLoading,\n} from '@nextcloud/vue'\n\nimport ExitToApp from 'vue-material-design-icons/ExitToApp.vue'\nimport IconCog from 'vue-material-design-icons/Cog.vue'\nimport IconDelete from 'vue-material-design-icons/Delete.vue'\nimport LocationEnter from 'vue-material-design-icons/LocationEnter.vue'\nimport AccountStar from 'vue-material-design-icons/AccountStar.vue'\nimport AccountGroup from 'vue-material-design-icons/AccountGroup.vue'\nimport AccountGroupOutline from 'vue-material-design-icons/AccountGroupOutline.vue'\n\nimport Circle from '../../models/circle.ts'\nimport CircleActionsMixin from '../../mixins/CircleActionsMixin.js'\n\nexport default {\n\tname: 'CircleNavigationItem',\n\n\tcomponents: {\n\t\tActionButton,\n\t\tActionLink,\n\t\tActionText,\n\t\tNcCounterBubble,\n\t\tAppNavigationItem,\n\t\tExitToApp,\n\t\tIconCog,\n\t\tIconDelete,\n\t\tLocationEnter,\n\t\tAccountStar,\n\t\tAccountGroup,\n\t\tAccountGroupOutline,\n\t\tIconLoading,\n\t},\n\n\tmixins: [CircleActionsMixin],\n\n\tprops: {\n\t\tcircle: {\n\t\t\ttype: Circle,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tmemberCount() {\n\t\t\tconst count = Object.keys(this.circle?.members || []).length\n\n\t\t\t// If member list is empty, let's try the population initial count\n\t\t\tif (count === 0 && this.circle.population > 0) {\n\t\t\t\treturn this.circle.population\n\t\t\t}\n\n\t\t\treturn count\n\t\t},\n\t},\n}\n</script>\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon account-multiple-plus-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M19 17V19H7V17S7 13 13 13 19 17 19 17M16 8A3 3 0 1 0 13 11A3 3 0 0 0 16 8M19.2 13.06A5.6 5.6 0 0 1 21 17V19H24V17S24 13.55 19.2 13.06M18 5A2.91 2.91 0 0 0 17.11 5.14A5 5 0 0 1 17.11 10.86A2.91 2.91 0 0 0 18 11A3 3 0 0 0 18 5M8 10H5V7H3V10H0V12H3V15H5V12H8Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"AccountMultiplePlusIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon share-variant-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"ShareVariantIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { loadState } from '@nextcloud/initial-state'\n\nconst isGroupSharingEnabled = loadState('contacts', 'isGroupSharingEnabled', false)\nexport default isGroupSharingEnabled\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<li class=\"addressbook-sharee\">\n\t\t<IconLoading v-if=\"loading\" :size=\"20\" />\n\t\t<IconGroup v-else-if=\"sharee.isGroup && !loading\" />\n\t\t<IconUser v-else-if=\"!sharee.isGroup && !loading\" />\n\t\t<span class=\"addressbook-sharee__identifier\"\n\t\t\t:title=\"sharee.displayName\">\n\t\t\t{{ sharee.displayName }}\n\t\t</span>\n\t\t<span class=\"addressbook-sharee__utils\">\n\t\t\t<input :id=\"uid\"\n\t\t\t\t:checked=\"writeable\"\n\t\t\t\t:disabled=\"loading\"\n\t\t\t\tclass=\"checkbox\"\n\t\t\t\tname=\"editable\"\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\t@change=\"editSharee\">\n\t\t\t<label :for=\"uid\"\n\t\t\t\t:title=\"t('contacts', 'can edit')\">\n\t\t\t\t{{ t('contacts', 'can edit') }}\n\t\t\t</label>\n\t\t\t<Button :class=\"{'addressbook-sharee__utils--disabled': loading}\"\n\t\t\t\thref=\"#\"\n\t\t\t\ttitle=\"Delete\"\n\t\t\t\t@click=\"deleteSharee\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconDelete :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</Button>\n\t\t</span>\n\t</li>\n</template>\n\n<script>\nimport { showError } from '@nextcloud/dialogs'\nimport IconDelete from 'vue-material-design-icons/Delete.vue'\nimport IconGroup from 'vue-material-design-icons/AccountMultiple.vue'\nimport IconUser from 'vue-material-design-icons/Account.vue'\nimport {\n\tNcButton as Button,\n\tNcLoadingIcon as IconLoading,\n} from '@nextcloud/vue'\n\nexport default {\n\tname: 'SettingsAddressbookSharee',\n\tcomponents: {\n\t\tButton,\n\t\tIconDelete,\n\t\tIconGroup,\n\t\tIconLoading,\n\t\tIconUser,\n\t},\n\n\tprops: {\n\t\taddressbook: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tsharee: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\twriteable() {\n\t\t\treturn this.sharee.writeable\n\t\t},\n\t\t// generated id for this sharee\n\t\tuid() {\n\t\t\treturn this.sharee.id + this.addressbook.id + Math.floor(Math.random() * 1000)\n\t\t},\n\t},\n\n\tmethods: {\n\t\tasync deleteSharee() {\n\t\t\tif (this.loading) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tthis.loading = true\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('removeSharee', {\n\t\t\t\t\taddressbook: this.addressbook,\n\t\t\t\t\turi: this.sharee.uri,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error)\n\t\t\t\tshowError(t('contacts', 'Unable to delete the share'))\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t\tasync editSharee() {\n\t\t\tif (this.loading) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tthis.loading = true\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('toggleShareeWritable', {\n\t\t\t\t\taddressbook: this.addressbook,\n\t\t\t\t\turi: this.sharee.uri,\n\t\t\t\t\twriteable: !this.sharee.writeable,\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error)\n\t\t\t\tshowError(t('contacts', 'Unable to change permissions'))\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n.addressbook-sharee__utils {\n\ttext-overflow: ellipsis;\n}\n\n.addressbook-sharee__utils label {\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twidth: 107px;\n}\n\n:deep(.button-vue--vue-secondary) {\n\tbackground-color: transparent;\n\tborder: none;\n\tbox-shadow: none;\n}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n/**\n * Works like urldecode() from php\n *\n * @see https://www.php.net/manual/en/function.urldecode.php\n * @param {string} url The url to be decoded\n * @return {string} The decoded url\n */\nexport function urldecode(url) {\n\treturn decodeURIComponent(url.replace(/\\+/g, ' '))\n}\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"addressbook-shares\">\n\t\t<NcSelect id=\"users-groups-search\"\n\t\t\t:options=\"usersOrGroups\"\n\t\t\t:searchable=\"true\"\n\t\t\t:internal-search=\"false\"\n\t\t\t:max-height=\"600\"\n\t\t\t:show-no-results=\"true\"\n\t\t\t:placeholder=\"placeholder\"\n\t\t\t:class=\"{ 'showContent': inputGiven, 'icon-loading': isLoading }\"\n\t\t\t:user-select=\"true\"\n\t\t\topen-direction=\"bottom\"\n\t\t\ttrack-by=\"user\"\n\t\t\tlabel=\"displayName\"\n\t\t\t@search=\"findSharee\"\n\t\t\t@input=\"shareAddressbook\" />\n\t\t<!-- list of user or groups addressbook is shared with -->\n\t\t<ul v-if=\"addressbook.shares.length > 0\" class=\"addressbook-shares__list\">\n\t\t\t<address-book-sharee v-for=\"sharee in addressbook.shares\"\n\t\t\t\t:key=\"sharee.uri\"\n\t\t\t\t:sharee=\"sharee\"\n\t\t\t\t:addressbook=\"addressbook\" />\n\t\t</ul>\n\t</div>\n</template>\n\n<script>\nimport { NcSelect } from '@nextcloud/vue'\nimport client from '../../../services/cdav.js'\nimport isGroupSharingEnabled from '../../../services/isGroupSharingEnabled.js'\n\nimport addressBookSharee from './SettingsAddressbookSharee.vue'\nimport debounce from 'debounce'\nimport { urldecode } from '../../../utils/url.js'\n\nexport default {\n\tname: 'SettingsAddressbookShare',\n\n\tcomponents: {\n\t\tNcSelect,\n\t\taddressBookSharee,\n\t},\n\n\tprops: {\n\t\taddressbook: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn {}\n\t\t\t},\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisLoading: false,\n\t\t\tinputGiven: false,\n\t\t\tusersOrGroups: [],\n\t\t}\n\t},\n\tcomputed: {\n\t\tplaceholder() {\n\t\t\tif (isGroupSharingEnabled) {\n\t\t\t\treturn t('contacts', 'Share with users or groups')\n\t\t\t} else {\n\t\t\t\treturn t('contacts', 'Share with users')\n\t\t\t}\n\t\t},\n\t\tnoResult() {\n\t\t\treturn t('contacts', 'No users or groups')\n\t\t},\n\t},\n\tmounted() {\n\t\t// This ensures that the multiselect input is in focus as soon as the user clicks share\n\t\tdocument.getElementById('users-groups-search').focus()\n\t},\n\tmethods: {\n\t\t/**\n\t\t * Share addressbook\n\t\t *\n\t\t * @param {object} data destructuring object\n\t\t * @param {string} data.user the userId\n\t\t * @param {string} data.displayName the displayName\n\t\t * @param {string} data.uri the sharing principalScheme uri\n\t\t * @param {boolean} data.isGroup is this a group ?\n\t\t */\n\t\tshareAddressbook({ user, displayName, uri, isGroup }) {\n\t\t\tthis.$store.dispatch('shareAddressbook', { addressbook: this.addressbook, user, displayName, uri, isGroup })\n\t\t},\n\n\t\t/**\n\t\t * Use the cdav client call to find matches to the query from the existing Users & Groups\n\t\t *\n\t\t * @param {string} query\n\t\t */\n\t\tfindSharee: debounce(async function(query) {\n\t\t\tthis.isLoading = true\n\t\t\tthis.usersOrGroups = []\n\t\t\tif (query.length > 0) {\n\t\t\t\tconst results = await client.principalPropertySearchByDisplayname(query)\n\t\t\t\tthis.usersOrGroups = results\n\t\t\t\t\t.filter((result) => {\n\t\t\t\t\t\tconst allowedCalendarUserTypes = ['INDIVIDUAL']\n\t\t\t\t\t\tif (isGroupSharingEnabled) {\n\t\t\t\t\t\t\tallowedCalendarUserTypes.push('GROUP')\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn allowedCalendarUserTypes.includes(result.calendarUserType)\n\t\t\t\t\t\t\t&& !this.addressbook.shares.some((share) => share.uri === result.principalScheme)\n\t\t\t\t\t})\n\t\t\t\t\t.map((result) => {\n\t\t\t\t\t\tconst isGroup = result.calendarUserType === 'GROUP'\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tuser: urldecode(result[isGroup ? 'groupId' : 'userId']),\n\t\t\t\t\t\t\tdisplayName: result.displayname,\n\t\t\t\t\t\t\ticon: isGroup ? 'icon-group' : 'icon-user',\n\t\t\t\t\t\t\turi: urldecode(result.principalScheme),\n\t\t\t\t\t\t\tisGroup,\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\tthis.isLoading = false\n\t\t\t\tthis.inputGiven = true\n\t\t\t} else {\n\t\t\t\tthis.inputGiven = false\n\t\t\t\tthis.isLoading = false\n\t\t\t}\n\t\t}, 500),\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n.addressbook-shares__list {\n\tmargin-left: calc(var(--default-grid-baseline) * -2);\n\twidth: 282px;\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div class=\"settings-addressbook-list\">\n\t\t<IconContactPlus class=\"settings-line__icon\" />\n\t\t<li :class=\"{'addressbook--disabled': !addressbook.enabled}\" class=\"addressbook\">\n\t\t\t<div class=\"addressbook__content\">\n\t\t\t\t<!-- addressbook name -->\n\t\t\t\t<span class=\"addressbook__name\" :title=\"addressbook.displayName\">\n\t\t\t\t\t{{ addressbook.enabled ? addressbook.displayName : t('contacts', '{addressbookname} (Disabled)', {addressbookname: addressbook.displayName}) }}\n\t\t\t\t</span>\n\n\t\t\t\t<div v-if=\"addressbook.dav.description\" class=\"addressbook__description\">\n\t\t\t\t\t{{ addressbook.dav.description }}\n\t\t\t\t</div>\n\t\t\t\t<!-- counters -->\n\t\t\t\t<div v-if=\"addressbook.enabled\" class=\"addressbook__count-wrapper\">\n\t\t\t\t\t<span class=\"addressbook__count\">{{ n('contacts', '%n contact', '%n contacts', contactsCount) }}</span>\n\t\t\t\t\t<span class=\"addressbook__count\">- {{ n('contacts', '%n group', '%n groups', groupsCount) }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- sharing button -->\n\t\t\t<Button v-if=\"!addressbook.readOnly\"\n\t\t\t\tv-tooltip.top=\"sharedWithTooltip\"\n\t\t\t\t:class=\"{'addressbook__share--shared': hasShares}\"\n\t\t\t\t:name=\"sharedWithTooltip\"\n\t\t\t\thref=\"#\"\n\t\t\t\tclass=\"addressbook__share\"\n\t\t\t\t@click=\"toggleShare\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconShare :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t</Button>\n\n\t\t\t<!-- popovermenu -->\n\t\t\t<Actions class=\"addressbook__menu\" menu-align=\"right\">\n\t\t\t\t<!-- copy addressbook link -->\n\t\t\t\t<ActionLink :href=\"addressbook.url\"\n\t\t\t\t\t:icon=\"copyLinkIcon\"\n\t\t\t\t\t@click.stop.prevent=\"copyToClipboard(addressbookUrl)\">\n\t\t\t\t\t{{ copyButtonText }}\n\t\t\t\t</ActionLink>\n\n\t\t\t\t<!-- download addressbook -->\n\t\t\t\t<ActionLink :href=\"addressbook.url + '?export'\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconDownload :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Download') }}\n\t\t\t\t</ActionLink>\n\n\t\t\t\t<template v-if=\"addressbook.writeProps\">\n\t\t\t\t\t<!-- enable/disable addressbook -->\n\t\t\t\t\t<ActionCheckbox v-if=\"!toggleEnabledLoading\"\n\t\t\t\t\t\t:checked=\"enabled\"\n\t\t\t\t\t\t@change.stop.prevent=\"toggleAddressbookEnabled\">\n\t\t\t\t\t\t{{ t('contacts', 'Show') }}\n\t\t\t\t\t</ActionCheckbox>\n\t\t\t\t\t<ActionButton v-else>\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconLoading :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('contacts', 'Show') }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t</template>\n\n\t\t\t\t<template v-if=\"!addressbook.readOnly\">\n\t\t\t\t\t<!-- rename addressbook -->\n\t\t\t\t\t<ActionButton v-if=\"!editingName\"\n\t\t\t\t\t\t@click.stop.prevent=\"renameAddressbook\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconRename :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('contacts', 'Rename') }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionInput v-else\n\t\t\t\t\t\tref=\"renameInput\"\n\t\t\t\t\t\t:disabled=\"renameLoading\"\n\t\t\t\t\t\t:value=\"addressbook.displayName\"\n\t\t\t\t\t\t@submit=\"updateAddressbookName\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconLoading v-if=\"renameLoading\" :size=\"20\" />\n\t\t\t\t\t\t\t<IconRename :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</ActionInput>\n\t\t\t\t</template>\n\t\t\t\t<!-- delete addressbook -->\n\t\t\t\t<ActionButton v-if=\"hasMultipleAddressbooks && addressbook.owner !== principalUrl && addressbook.owner !== '/remote.php/dav/principals/system/system/'\"\n\t\t\t\t\t@click=\"confirmUnshare\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconLoading v-if=\"deleteAddressbookLoading\" :size=\"20\" />\n\t\t\t\t\t\t<IconDelete :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Unshare from me') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton v-else-if=\"hasMultipleAddressbooks && addressbook.owner !== '/remote.php/dav/principals/system/system/'\"\n\t\t\t\t\t@click=\"confirmDeletion\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconLoading v-if=\"deleteAddressbookLoading\" :size=\"20\" />\n\t\t\t\t\t\t<IconDelete :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Delete') }}\n\t\t\t\t</ActionButton>\n\t\t\t</Actions>\n\t\t\t<!-- sharing input -->\n\t\t\t<ShareAddressBook v-if=\"shareOpen && !addressbook.readOnly\" :addressbook=\"addressbook\" />\n\t\t</li>\n\t</div>\n</template>\n\n<script>\nimport {\n\tNcActions as Actions,\n\tNcActionLink as ActionLink,\n\tNcActionButton as ActionButton,\n\tNcActionInput as ActionInput,\n\tNcActionCheckbox as ActionCheckbox,\n\tNcLoadingIcon as IconLoading,\n\tNcButton as Button,\n} from '@nextcloud/vue'\nimport IconDownload from 'vue-material-design-icons/Download.vue'\nimport IconRename from 'vue-material-design-icons/Pencil.vue'\nimport IconDelete from 'vue-material-design-icons/Delete.vue'\nimport IconContactPlus from 'vue-material-design-icons/AccountMultiplePlus.vue'\nimport IconShare from 'vue-material-design-icons/ShareVariant.vue'\nimport ShareAddressBook from './SettingsAddressbookShare.vue'\nimport { showError } from '@nextcloud/dialogs'\n\nimport CopyToClipboardMixin from '../../../mixins/CopyToClipboardMixin.js'\n\nimport usePrincipalsStore from '../../../store/principals.js'\n\nexport default {\n\tname: 'SettingsAddressbook',\n\n\tcomponents: {\n\t\tActionButton,\n\t\tActionCheckbox,\n\t\tActionInput,\n\t\tActionLink,\n\t\tActions,\n\t\tButton,\n\t\tIconDelete,\n\t\tIconDownload,\n\t\tIconRename,\n\t\tIconContactPlus,\n\t\tIconShare,\n\t\tIconLoading,\n\t\tShareAddressBook,\n\t},\n\n\tmixins: [CopyToClipboardMixin],\n\n\tprops: {\n\t\taddressbook: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn {}\n\t\t\t},\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tdeleteAddressbookLoading: false,\n\t\t\teditingName: false,\n\t\t\tmenuOpen: false,\n\t\t\trenameLoading: false,\n\t\t\tshareOpen: false,\n\t\t\ttoggleEnabledLoading: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tenabled() {\n\t\t\treturn this.addressbook.enabled\n\t\t},\n\t\thasShares() {\n\t\t\treturn this.addressbook.shares.length > 0\n\t\t},\n\t\taddressbooks() {\n\t\t\treturn this.$store.getters.getAddressbooks\n\t\t},\n\t\thasMultipleAddressbooks() {\n\t\t\treturn this.addressbooks.length > 1\n\t\t},\n\n\t\t// info tooltip about number of shares\n\t\tsharedWithTooltip() {\n\t\t\treturn this.hasShares\n\t\t\t\t? n('contacts',\n\t\t\t\t\t'Shared with {num} entity',\n\t\t\t\t\t'Shared with {num} entities',\n\t\t\t\t\tthis.addressbook.shares.length, {\n\t\t\t\t\t\tnum: this.addressbook.shares.length,\n\t\t\t\t\t})\n\t\t\t\t: '' // disable the tooltip\n\t\t},\n\n\t\tcopyButtonText() {\n\t\t\tif (this.copied) {\n\t\t\t\treturn this.copySuccess\n\t\t\t\t\t? t('contacts', 'Copied')\n\t\t\t\t\t: t('contacts', 'Cannot copy')\n\t\t\t}\n\t\t\treturn t('contacts', 'Copy link')\n\t\t},\n\n\t\taddressbookUrl() {\n\t\t\treturn window.location.origin + this.addressbook.url\n\t\t},\n\n\t\tcontacts() {\n\t\t\treturn Object.values(this.addressbook.contacts)\n\t\t},\n\n\t\tgroups() {\n\t\t\tconst allGroups = this.contacts\n\t\t\t\t.flatMap(contact => contact.vCard.getAllProperties('categories').map(prop => prop.getFirstValue()))\n\t\t\t// Deduplicate\n\t\t\treturn [...new Set(allGroups)]\n\t\t},\n\n\t\tcontactsCount() {\n\t\t\treturn this.contacts.length\n\t\t},\n\n\t\tgroupsCount() {\n\t\t\treturn this.groups.length\n\t\t},\n\t\tprincipalUrl() {\n\t\t\tconst principalsStore = usePrincipalsStore()\n\t\t\treturn principalsStore.currentUserPrincipal.principalUrl\n\t\t},\n\t},\n\twatch: {\n\t\tmenuOpen() {\n\t\t\tif (this.menuOpen === false) {\n\t\t\t\tthis.editingName = false\n\t\t\t}\n\t\t},\n\t},\n\tmounted() {\n\t\t// required if popup needs to stay opened after menu click\n\t\tthis.popupItem = this.$el\n\t},\n\tmethods: {\n\t\tcloseMenu() {\n\t\t\tthis.menuOpen = false\n\t\t},\n\t\ttoggleMenu() {\n\t\t\tthis.menuOpen = !this.menuOpen\n\t\t},\n\t\ttoggleShare() {\n\t\t\tthis.shareOpen = !this.shareOpen\n\t\t},\n\t\tasync toggleAddressbookEnabled() {\n\t\t\t// change to loading status\n\t\t\tthis.toggleEnabledLoading = true\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('toggleAddressbookEnabled', this.addressbook)\n\t\t\t} catch (err) {\n\t\t\t\t// error handling\n\t\t\t\tconsole.error(err)\n\t\t\t\tshowError(t('contacts', 'Toggling of address book was not successful'))\n\t\t\t} finally {\n\t\t\t\t// stop loading status regardless of outcome\n\t\t\t\tthis.toggleEnabledLoading = false\n\t\t\t}\n\t\t},\n\t\tconfirmDeletion() {\n\t\t\twindow.OC.dialogs.confirm(\n\t\t\t\tt('contacts', 'This will delete the address book and every contacts within it'),\n\t\t\t\tt('contacts', 'Delete {addressbook}?', { addressbook: this.addressbook.displayName }),\n\t\t\t\tthis.deleteAddressbook,\n\t\t\t\ttrue,\n\t\t\t)\n\t\t},\n\t\tconfirmUnshare() {\n\t\t\twindow.OC.dialogs.confirm(\n\t\t\t\tt('contacts', 'This will unshare the address book and every contacts within it'),\n\t\t\t\tt('contacts', 'Unshare {addressbook}?', { addressbook: this.addressbook.displayName }),\n\t\t\t\tthis.deleteAddressbook,\n\t\t\t\ttrue,\n\t\t\t)\n\t\t},\n\t\tasync deleteAddressbook(confirm) {\n\t\t\tif (confirm) {\n\t\t\t\t// change to loading status\n\t\t\t\tthis.deleteAddressbookLoading = true\n\t\t\t\ttry {\n\t\t\t\t\tawait this.$store.dispatch('deleteAddressbook', this.addressbook)\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// error handling\n\t\t\t\t\tconsole.error(err)\n\t\t\t\t\tshowError(t('contacts', 'Deletion of address book was not successful.'))\n\t\t\t\t} finally {\n\t\t\t\t\t// stop loading status regardless of outcome\n\t\t\t\t\tthis.deleteAddressbookLoading = false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\trenameAddressbook() {\n\t\t\tthis.editingName = true\n\t\t},\n\t\tasync updateAddressbookName() {\n\t\t\tconst addressbook = this.addressbook\n\t\t\t// New name for addressbook - inputed value from form\n\t\t\tconst newName = this.$refs.renameInput.$el.querySelector('input[type=\"text\"]').value\n\t\t\t// change to loading status\n\t\t\tthis.renameLoading = true\n\t\t\ttry {\n\t\t\t\tawait this.$store.dispatch('renameAddressbook', { addressbook, newName })\n\t\t\t} catch (err) {\n\t\t\t\t// error handling\n\t\t\t\tconsole.error(err)\n\t\t\t\tshowError(t('contacts', 'Renaming of address book was not successful.'))\n\t\t\t} finally {\n\t\t\t\tthis.editingName = false\n\t\t\t\t// stop loading status regardless of outcome\n\t\t\t\tthis.renameLoading = false\n\t\t\t\t// close popover menu\n\t\t\t\tthis.menuOpen = false\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.addressbook {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-items: center;\n\twhite-space: nowrap;\n\ttext-overflow: ellipsis;\n\tpadding: var(--default-grid-baseline) 0;\n\n\t> .addressbook__content {\n\t\t+ a,\n\t\t+ div {\n\t\t\t// put actions at the end\n\t\t\tmargin-left: auto;\n\t\t}\n\t}\n\n\t&__name {\n\t\tdisplay: block;\n\t\tflex: 0 1 auto;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\n\t&__content {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tflex-direction: column;\n\t\tflex: 0 1 auto;\n\t\tmax-width: calc(100% - 2 * 44px);\n\t}\n\n\t&__description {\n\t\tcolor: var(--color-text-lighter);\n\t}\n\n\t&__count-wrapper {\n\t\tdisplay: flex;\n\t}\n\n\t&__count {\n\t\tmargin-left: calc(var(--default-grid-baseline) * 0.5);\n\t\tfont-size: smaller;\n\t\tcolor: var(--color-text-lighter);\n\t}\n\n\t&__count:not(:last-child) {\n\t\tmargin-right: var(--default-grid-baseline);\n\t}\n\n\t&__share,\n\t&__menu .icon-more {\n\t\topacity: .5;\n\t\t&:hover,\n\t\t&:focus,\n\t\t&:active {\n\t\t\topacity: .7;\n\t\t}\n\t}\n\t&__share {\n\t\tbackground-color: transparent;\n\t\tborder: none;\n\t\tbox-shadow: none;\n\n\t\t&--shared {\n\t\t\topacity: .7;\n\t\t}\n\t}\n\t&--disabled &__name {\n\t\topacity: .5;\n\t}\n}\n\n.settings-addressbook-list {\n\tdisplay: flex;\n\twidth: 100%;\n\t.material-design-icon {\n\t\tjustify-content: flex-start;\n\t}\n}\n\n.addressbook-shares {\n\tpadding-top: calc(var(--default-grid-baseline) * 2);\n}\n</style>\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon loading-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"LoadingIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"new-addressbook-entry\">\n\t\t<IconLoading v-if=\"loading\" :size=\"20\" />\n\t\t<NcTextField class=\"new-addressbook\"\n\t\t\t:value.sync=\"displayName\"\n\t\t\t:disabled=\"loading\"\n\t\t\t:label=\"t('contacts', 'Add new address book')\"\n\t\t\t:pattern=\"addressBookRegex\"\n\t\t\t:show-trailing-button=\"true\"\n\t\t\t:trailing-button-label=\"t('contacts', 'Add')\"\n\t\t\ttrailing-button-icon=\"arrowRight\"\n\t\t\ttype=\"text\"\n\t\t\tautocomplete=\"off\"\n\t\t\tautocorrect=\"off\"\n\t\t\tspellcheck=\"false\"\n\t\t\t@trailing-button-click=\"addAddressbook\">\n\t\t\t<IconAdd :size=\"20\" />\n\t\t</NcTextField>\n\t</div>\n</template>\n\n<script>\nimport { NcTextField } from '@nextcloud/vue'\nimport { showError } from '@nextcloud/dialogs'\nimport IconAdd from 'vue-material-design-icons/Plus.vue'\nimport IconLoading from 'vue-material-design-icons/Loading.vue'\n\nexport default {\n\tname: 'SettingsNewAddressbook',\n\tcomponents: {\n\t\tNcTextField,\n\t\tIconAdd,\n\t\tIconLoading,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t\tdisplayName: '',\n\t\t\t// no slashes!\n\t\t\t// eslint-disable-next-line\n\t\t\taddressBookRegex: '[^/\\\\\\\\]+'\n\t\t}\n\t},\n\tmethods: {\n\t\t/**\n\t\t * Add a new address book\n\t\t */\n\t\taddAddressbook() {\n\t\t\tif (this.displayName === '') {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.loading = true\n\t\t\tthis.$store.dispatch('appendAddressbook', { displayName: this.displayName })\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.displayName = ''\n\t\t\t\t\tthis.loading = false\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t\tshowError(t('contacts', 'An error occurred, unable to create the address book'))\n\t\t\t\t\tthis.loading = false\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon alert-circle-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"AlertCircleIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"import-contact\">\n\t\t<template v-if=\"!isNoAddressbookAvailable\">\n\t\t\t<Button class=\"import-contact__button-main\" @click=\"toggleModal\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconUpload :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t{{ t('contacts', 'Import contacts') }}\n\t\t\t</Button>\n\t\t\t<Modal v-if=\"isOpened\"\n\t\t\t\tref=\"modal\"\n\t\t\t\tclass=\"import-contact__modal\"\n\t\t\t\t:name=\"t('contacts', 'Import contacts')\"\n\t\t\t\t@close=\"toggleModal\">\n\t\t\t\t<section class=\"import-contact__modal-addressbook\">\n\t\t\t\t\t<h2>{{ t('contacts', 'Import contacts') }}</h2>\n\t\t\t\t\t<NcSelect v-if=\"!isSingleAddressbook\"\n\t\t\t\t\t\tid=\"select-addressbook\"\n\t\t\t\t\t\tv-model=\"selectedAddressbookOption\"\n\t\t\t\t\t\t:allow-empty=\"false\"\n\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t:options=\"options\"\n\t\t\t\t\t\t:disabled=\"isSingleAddressbook || isImporting\"\n\t\t\t\t\t\t:placeholder=\"t('contacts', 'Contacts')\"\n\t\t\t\t\t\tlabel=\"displayName\"\n\t\t\t\t\t\tclass=\"import-contact__modal-addressbook__select\">\n\t\t\t\t\t\t<template #selected-option=\"{ displayName }\">\n\t\t\t\t\t\t\t<span>{{ t('contacts', 'Import into the {addressbookName} address book', { addressbookName: displayName }) }}</span>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcSelect>\n\t\t\t\t</section>\n\t\t\t\t<section class=\"import-contact__modal-pick\">\n\t\t\t\t\t<input id=\"contact-import\"\n\t\t\t\t\t\tref=\"contact-import-input\"\n\t\t\t\t\t\t:disabled=\"loading || isImporting\"\n\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\tclass=\"hidden-visually\"\n\t\t\t\t\t\t@change=\"processFile\">\n\t\t\t\t\t<Button :disabled=\"loading\"\n\t\t\t\t\t\tclass=\"import-contact__button import-contact__button--local\"\n\t\t\t\t\t\t@click=\"clickImportInput\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconUpload :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('contacts', 'Select local file') }}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button type=\"primary\"\n\t\t\t\t\t\t:disabled=\"loading\"\n\t\t\t\t\t\tclass=\"import-contact__button import-contact__button--files\"\n\t\t\t\t\t\t@click=\"openPicker\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconLoading v-if=\"loading\" :size=\"20\" />\n\t\t\t\t\t\t\t<IconFolder :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('contacts', 'Import from files') }}\n\t\t\t\t\t</Button>\n\t\t\t\t</section>\n\t\t\t</Modal>\n\t\t</template>\n\t\t<Button v-else\n\t\t\tid=\"upload\"\n\t\t\tfor=\"contact-import\"\n\t\t\tclass=\"button import-contact__button-disabled import-contact__multiselect-label import-contact__multiselect--no-select\">\n\t\t\t<template #icon>\n\t\t\t\t<IconError :size=\"20\" />\n\t\t\t</template>\n\t\t\t{{ t('contacts', 'Importing is disabled because there are no address books available') }}\n\t\t</Button>\n\t</div>\n</template>\n\n<script>\nimport {\n\tNcButton as Button,\n\tNcModal as Modal,\n\tNcSelect,\n\tNcLoadingIcon as IconLoading,\n} from '@nextcloud/vue'\nimport { encodePath } from '@nextcloud/paths'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { generateRemoteUrl } from '@nextcloud/router'\nimport { getFilePickerBuilder } from '@nextcloud/dialogs'\nimport axios from '@nextcloud/axios'\nimport IconUpload from 'vue-material-design-icons/Upload.vue'\nimport IconError from 'vue-material-design-icons/AlertCircle.vue'\nimport IconFolder from 'vue-material-design-icons/Folder.vue'\n\nconst CancelToken = axios.CancelToken\n\nconst picker = getFilePickerBuilder(t('contacts', 'Choose a vCard file to import'))\n\t.setMultiSelect(false)\n\t.setType(1)\n\t.allowDirectories(false)\n\t.addMimeTypeFilter('text/vcard')\n\t.build()\n\nexport default {\n\tname: 'SettingsImportContacts',\n\n\tcomponents: {\n\t\tButton,\n\t\tModal,\n\t\tNcSelect,\n\t\tIconUpload,\n\t\tIconError,\n\t\tIconFolder,\n\t\tIconLoading,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tcancelRequest: () => {},\n\t\t\timportDestination: false,\n\t\t\tisOpened: false,\n\t\t\tloading: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t// getter for the store addressbooks\n\t\taddressbooks() {\n\t\t\treturn this.$store.getters.getAddressbooks\n\t\t},\n\t\t// filter out disabled and read-only addressbooks\n\t\tavailableAddressbooks() {\n\t\t\treturn this.addressbooks\n\t\t\t\t.filter(addressbook => !addressbook.readOnly && addressbook.enabled)\n\t\t},\n\n\t\t// available options for the multiselect\n\t\toptions() {\n\t\t\treturn this.availableAddressbooks\n\t\t\t\t.map(addressbook => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: addressbook.id,\n\t\t\t\t\t\tdisplayName: addressbook.displayName,\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\tselectedAddressbook: {\n\t\t\tget() {\n\t\t\t\tif (this.importDestination) {\n\t\t\t\t\treturn this.availableAddressbooks.find(addressbook => addressbook.id === this.importDestination.id)\n\t\t\t\t}\n\t\t\t\t// default is first address book of the list\n\t\t\t\treturn this.availableAddressbooks[0]\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis.importDestination = value\n\t\t\t},\n\t\t},\n\n\t\t/**\n\t\t * The selected address book option for the select component.\n\t\t * We can't use the actual address book here as it can't be converted to JSON.\n\t\t */\n\t\tselectedAddressbookOption: {\n\t\t\tget() {\n\t\t\t\treturn this.options.find((option) => option.id === this.selectedAddressbook.id)\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis.selectedAddressbook = this.availableAddressbooks\n\t\t\t\t\t.find((addressbook) => addressbook.id === value.id)\n\t\t\t},\n\t\t},\n\n\t\t// disable multiselect when there is only one address book\n\t\tisSingleAddressbook() {\n\t\t\treturn this.options.length === 1\n\t\t},\n\t\tisNoAddressbookAvailable() {\n\t\t\treturn this.options.length < 1\n\t\t},\n\n\t\t// importing state store getter\n\t\timportState() {\n\t\t\treturn this.$store.getters.getImportState\n\t\t},\n\t\t// are we currently importing ?\n\t\tisImporting() {\n\t\t\treturn this.importState.stage !== 'default'\n\t\t},\n\t},\n\n\tasync mounted() {\n\t\t// Direct import check\n\t\tif (this.$route.name === 'import') {\n\t\t\tconst path = this.$route.query.file\n\t\t\tawait this.processLocalFile(path)\n\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'group',\n\t\t\t\tparams: { selectedGroup: t('contacts', 'All contacts') },\n\t\t\t})\n\t\t}\n\t},\n\n\tmethods: {\n\t\t/**\n\t\t * Process input type file change\n\t\t *\n\t\t * @param {Event} event the input change event\n\t\t */\n\t\tprocessFile(event) {\n\t\t\tthis.loading = true\n\t\t\tthis.$store.dispatch('changeStage', 'parsing')\n\n\t\t\tconst file = event.target.files[0]\n\t\t\tconst reader = new FileReader()\n\n\t\t\tconst addressbook = this.selectedAddressbook\n\t\t\tthis.$store.dispatch('setAddressbook', addressbook.displayName)\n\n\t\t\treader.onload = () => {\n\t\t\t\tthis.isOpened = false\n\t\t\t\tthis.$store.dispatch('importContactsIntoAddressbook', { vcf: reader.result, addressbook })\n\n\t\t\t\t// reset input\n\t\t\t\tevent.target.value = ''\n\t\t\t\tthis.resetState()\n\t\t\t}\n\t\t\treader.readAsText(file)\n\t\t},\n\n\t\tasync processLocalFile(path) {\n\t\t\tconsole.debug('Importing', path)\n\t\t\ttry {\n\t\t\t\tthis.cancelRequest()\n\n\t\t\t\t// prepare cancel token for axios request\n\t\t\t\tconst source = CancelToken.source()\n\t\t\t\tthis.cancelRequest = source.cancel\n\n\t\t\t\tconst file = await axios.get(generateRemoteUrl(`dav/files/${getCurrentUser().uid}`) + encodePath(path), {\n\t\t\t\t\tcancelToken: source.token,\n\t\t\t\t})\n\n\t\t\t\tconst addressbook = this.selectedAddressbook\n\t\t\t\tthis.$store.dispatch('changeStage', 'parsing')\n\t\t\t\tthis.$store.dispatch('setAddressbook', addressbook.displayName)\n\n\t\t\t\tif (file.data) {\n\t\t\t\t\tawait this.$store.dispatch('importContactsIntoAddressbook', { vcf: file.data, addressbook })\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Something wrong happened while processing local file', error)\n\t\t\t}\n\t\t},\n\n\t\ttoggleModal() {\n\t\t\tthis.isOpened = !this.isOpened\n\t\t\t// cancel any ongoing request if closed\n\t\t\tif (!this.isOpened) {\n\t\t\t\tthis.cancelRequest()\n\t\t\t}\n\t\t},\n\n\t\tclickImportInput() {\n\t\t\tthis.$refs['contact-import-input'].click()\n\t\t},\n\n\t\t/**\n\t\t * Open nextcloud file picker\n\t\t */\n\t\tasync openPicker() {\n\t\t\ttry {\n\t\t\t\t// unlikely, but let's cancel any previous request\n\t\t\t\tthis.cancelRequest()\n\n\t\t\t\t// pick, retrieve & process file\n\t\t\t\tconst path = await picker.pick()\n\t\t\t\tif (path) {\n\t\t\t\t\tthis.loading = true\n\t\t\t\t\tawait this.processLocalFile(path)\n\t\t\t\t}\n\t\t\t\tthis.resetState()\n\n\t\t\t} catch (error) {\n\t\t\t\tthis.loading = false\n\t\t\t\tconsole.error('Something wrong happened while picking a file', error)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Reset default component state\n\t\t */\n\t\tresetState() {\n\t\t\tthis.cancelRequest = () => {}\n\t\t\tthis.importDestination = false\n\t\t\tthis.isOpened = false\n\t\t\tthis.loading = false\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.import-contact {\n\t&__modal {\n\t\tsection {\n\t\t\tpadding: 22px;\n\t\t\t// only one padding bewteen sections\n\t\t\t&:not(:last-child) {\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t}\n\t\t&-pick {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tflex-wrap: wrap;\n\t\t\tjustify-content: space-between;\n\t\t\tpadding-top: 0 !important;\n\t\t}\n\t}\n\n\t&__modal-addressbook {\n\t\t&__select {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n\n\t&__button {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 10px;\n\t\twidth: calc(50% - 20px);\n\t\tmargin: 10px 0;\n\t\t&-icon {\n\t\t\twidth: 32px;\n\t\t\theight: 32px;\n\t\t\tmargin-right: 5px;\n\t\t}\n\t\t&-main {\n\t\t\twidth: 100% !important;\n\t\t\tmargin-left: 0 !important;\n\t\t}\n\t\t&-disabled {\n\t\t\t// Wrap warning about disabled button instead of ellipsing it\n\t\t\t:deep(.button-vue__text) {\n\t\t\t\twhite-space: pre-wrap;\n\t\t\t}\n\t\t}\n\t\t&--cancel:not(:focus):not(:hover) {\n\t\t\tborder-color: transparent;\n\t\t\tbackground-color: transparent;\n\t\t}\n\t}\n}\n\n</style>\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon format-list-bulleted-square-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M3,4H7V8H3V4M9,5V7H21V5H9M3,10H7V14H3V10M9,11V13H21V11H9M3,16H7V20H3V16M9,17V19H21V17H9\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"FormatListBulletedSquareIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"sort-contacts\">\n\t\t<IconList class=\"settings-line__icon\" />\n\t\t<NcSelect id=\"sort-by\"\n\t\t\t:value=\"orderKeyOption\"\n\t\t\t:searchable=\"false\"\n\t\t\t:allow-empty=\"false\"\n\t\t\t:options=\"options\"\n\t\t\t:custom-label=\"formatSortByLabel\"\n\t\t\ttrack-by=\"key\"\n\t\t\tlabel=\"label\"\n\t\t\t@input=\"sortContacts\" />\n\t</div>\n</template>\n\n<script>\nimport { NcSelect } from '@nextcloud/vue'\nimport IconList from 'vue-material-design-icons/FormatListBulletedSquare.vue'\n\nexport default {\n\tname: 'SettingsSortContacts',\n\n\tcomponents: {\n\t\tNcSelect,\n\t\tIconList,\n\t},\n\n\tcomputed: {\n\t\t/* Order Keys */\n\t\toptions() {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: t('contacts', 'First name'),\n\t\t\t\t\tkey: 'firstName',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: t('contacts', 'Last name'),\n\t\t\t\t\tkey: 'lastName',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: t('contacts', 'Phonetic first name'),\n\t\t\t\t\tkey: 'phoneticFirstName',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: t('contacts', 'Phonetic last name'),\n\t\t\t\t\tkey: 'phoneticLastName',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: t('contacts', 'Display name'),\n\t\t\t\t\tkey: 'displayName',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: t('contacts', 'Last modified'),\n\t\t\t\t\tkey: 'rev',\n\t\t\t\t},\n\t\t\t]\n\t\t},\n\t\t/* Current order Key */\n\t\torderKey() {\n\t\t\treturn this.$store.getters.getOrderKey\n\t\t},\n\t\torderKeyOption() {\n\t\t\treturn this.options.filter(option => option.key === this.orderKey)[0]\n\t\t},\n\t},\n\tmethods: {\n\t\tsortContacts(orderKey) {\n\t\t\tconst key = orderKey && orderKey.key ? orderKey.key : 'displayName'\n\t\t\tthis.$store.commit('setOrder', key)\n\t\t\tthis.$store.commit('sortContacts')\n\t\t\tlocalStorage.setItem('orderKey', key)\n\t\t},\n\t\tformatSortByLabel(option) {\n\t\t\treturn t('contacts', 'Sort by {sorting}', { sorting: option.label })\n\t\t},\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n.sort-contacts {\n\tdisplay: flex;\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<AppSettingsDialog id=\"app-settings-dialog\"\n\t\t:name=\"t('contacts', 'Contacts settings')\"\n\t\t:show-navigation=\"true\"\n\t\t:open.sync=\"showSettings\">\n\t\t<AppSettingsSection id=\"general-settings\" :name=\"t('contacts', 'General settings')\">\n\t\t\t<CheckboxRadioSwitch :checked=\"enableSocialSync\"\n\t\t\t\t:loading=\"enableSocialSyncLoading\"\n\t\t\t\t:disabled=\"enableSocialSyncLoading\"\n\t\t\t\tclass=\"social-sync__checkbox contacts-settings-modal__form__row\"\n\t\t\t\t@update:checked=\"toggleSocialSync\">\n\t\t\t\t<div class=\"social-sync__checkbox__label\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{ t('contacts', 'Update avatars from social media') }}\n\t\t\t\t\t\t<em>{{ t('contacts', '(refreshed once per week)') }}</em>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</CheckboxRadioSwitch>\n\t\t\t<SettingsSortContacts class=\"contacts-settings-modal__form__row\" />\n\t\t</AppSettingsSection>\n\t\t<AppSettingsSection id=\"address-books\" :name=\"t('contacts', 'Address books')\">\n\t\t\t<div class=\"contacts-settings-modal__form\">\n\t\t\t\t<div class=\"contacts-settings-modal__form__row\">\n\t\t\t\t\t<ul id=\"addressbook-list\" class=\"addressbook-list\">\n\t\t\t\t\t\t<SettingsAddressbook v-for=\"addressbook in addressbooks\" :key=\"addressbook.id\" :addressbook=\"addressbook\" />\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<SettingsNewAddressbook class=\"contacts-settings-modal__form__row settings-new-addressbook\" :addressbooks=\"addressbooks\" />\n\t\t\t\t<SettingsImportContacts :addressbooks=\"addressbooks\"\n\t\t\t\t\tclass=\"contacts-settings-modal__form__row\"\n\t\t\t\t\t@clicked=\"onClickImport\"\n\t\t\t\t\t@file-loaded=\"onLoad\" />\n\t\t\t</div>\n\t\t</AppSettingsSection>\n\t</AppSettingsDialog>\n</template>\n\n<script>\n\nimport axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\nimport { loadState } from '@nextcloud/initial-state'\nimport SettingsAddressbook from './Settings/SettingsAddressbook.vue'\nimport SettingsNewAddressbook from './Settings/SettingsNewAddressbook.vue'\nimport SettingsImportContacts from './Settings/SettingsImportContacts.vue'\nimport SettingsSortContacts from './Settings/SettingsSortContacts.vue'\nimport { NcCheckboxRadioSwitch as CheckboxRadioSwitch, NcAppSettingsDialog as AppSettingsDialog, NcAppSettingsSection as AppSettingsSection } from '@nextcloud/vue'\nimport { CONTACTS_SETTINGS } from '../../models/constants.ts'\n\nexport default {\n\tname: 'ContactsSettings',\n\tcomponents: {\n\t\tAppSettingsDialog,\n\t\tAppSettingsSection,\n\t\tSettingsAddressbook,\n\t\tSettingsNewAddressbook,\n\t\tSettingsImportContacts,\n\t\tSettingsSortContacts,\n\t\tCheckboxRadioSwitch,\n\t},\n\tprops: {\n\t\topen: {\n\t\t\trequired: true,\n\t\t\ttype: Boolean,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tCONTACTS_SETTINGS,\n\t\t\tallowSocialSync: loadState('contacts', 'allowSocialSync') !== 'no',\n\t\t\tenableSocialSync: loadState('contacts', 'enableSocialSync') !== 'no',\n\t\t\tenableSocialSyncLoading: false,\n\t\t\tshowSettings: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\t// store getters\n\t\taddressbooks() {\n\t\t\treturn this.$store.getters.getAddressbooks\n\t\t},\n\t},\n\twatch: {\n\t\tshowSettings(value) {\n\t\t\tif (!value) {\n\t\t\t\tthis.$emit('update:open', value)\n\t\t\t}\n\t\t},\n\t\tasync open(value) {\n\t\t\tif (value) {\n\t\t\t\tawait this.onOpen()\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\tonClickImport(event) {\n\t\t\tthis.$emit('clicked', event)\n\t\t},\n\t\tasync toggleSocialSync() {\n\t\t\tthis.enableSocialSync = !this.enableSocialSync\n\t\t\tthis.enableSocialSyncLoading = true\n\n\t\t\t// store value\n\t\t\tlet setting = 'yes'\n\t\t\tthis.enableSocialSync ? setting = 'yes' : setting = 'no'\n\t\t\ttry {\n\t\t\t\tawait axios.put(generateUrl('apps/contacts/api/v1/social/config/user/enableSocialSync'), {\n\t\t\t\t\tallow: setting,\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.enableSocialSyncLoading = false\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\tthis.$emit('file-loaded', false)\n\t\t},\n\t\tasync onOpen() {\n\t\t\tthis.showSettings = true\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n>>> .app-settings__title {\n\tpadding: 20px 0;\n\tmargin-bottom: 0;\n}\n\n.app-settings-section {\n\tmargin-bottom: 45px;\n\tpadding: 25px 25px 0 25px;\n}\n\n.social-sync__checkbox, .settings-new-addressbook  {\n\tmargin-bottom: 20px;\n}\n\n.contacts-settings-modal__form__row >>> .material-design-icon {\n\tjustify-content: flex-start;\n}\n\n.settings-new-addressbook >>> .new-addressbook-input {\n\tmin-height: 44px;\n\theight: 44px;\n\twidth: 100%;\n}\n\n.settings-new-addressbook >>> .icon-confirm {\n\tmin-height: 44px;\n\theight: 44px;\n\tborder-color: var(--color-border-dark) !important;\n\tborder-left: none;\n}\n\n</style>\n","//download.js v4.2, by dandavis; 2008-2016. [MIT] see http://danml.com/download.html for tests/usage\n// v1 landed a FF+Chrome compat way of downloading strings to local un-named files, upgraded to use a hidden frame and optional mime\n// v2 added named files via a[download], msSaveBlob, IE (10+) support, and window.URL support for larger+faster saves than dataURLs\n// v3 added dataURL and Blob Input, bind-toggle arity, and legacy dataURL fallback was improved with force-download mime and base64 support. 3.1 improved safari handling.\n// v4 adds AMD/UMD, commonJS, and plain browser support\n// v4.1 adds url download capability via solo URL argument (same domain/CORS only)\n// v4.2 adds semantic variable names, long (over 2MB) dataURL support, and hidden by default temp anchors\n// https://github.com/rndme/download\n\n(function (root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// Node. Does not work with strict CommonJS, but\n\t\t// only CommonJS-like environments that support module.exports,\n\t\t// like Node.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals (root is window)\n\t\troot.download = factory();\n  }\n}(this, function () {\n\n\treturn function download(data, strFileName, strMimeType) {\n\n\t\tvar self = window, // this script is only for browsers anyway...\n\t\t\tdefaultMime = \"application/octet-stream\", // this default mime also triggers iframe downloads\n\t\t\tmimeType = strMimeType || defaultMime,\n\t\t\tpayload = data,\n\t\t\turl = !strFileName && !strMimeType && payload,\n\t\t\tanchor = document.createElement(\"a\"),\n\t\t\ttoString = function(a){return String(a);},\n\t\t\tmyBlob = (self.Blob || self.MozBlob || self.WebKitBlob || toString),\n\t\t\tfileName = strFileName || \"download\",\n\t\t\tblob,\n\t\t\treader;\n\t\t\tmyBlob= myBlob.call ? myBlob.bind(self) : Blob ;\n\t  \n\t\tif(String(this)===\"true\"){ //reverse arguments, allowing download.bind(true, \"text/xml\", \"export.xml\") to act as a callback\n\t\t\tpayload=[payload, mimeType];\n\t\t\tmimeType=payload[0];\n\t\t\tpayload=payload[1];\n\t\t}\n\n\n\t\tif(url && url.length< 2048){ // if no filename and no mime, assume a url was passed as the only argument\n\t\t\tfileName = url.split(\"/\").pop().split(\"?\")[0];\n\t\t\tanchor.href = url; // assign href prop to temp anchor\n\t\t  \tif(anchor.href.indexOf(url) !== -1){ // if the browser determines that it's a potentially valid url path:\n        \t\tvar ajax=new XMLHttpRequest();\n        \t\tajax.open( \"GET\", url, true);\n        \t\tajax.responseType = 'blob';\n        \t\tajax.onload= function(e){ \n\t\t\t\t  download(e.target.response, fileName, defaultMime);\n\t\t\t\t};\n        \t\tsetTimeout(function(){ ajax.send();}, 0); // allows setting custom ajax headers using the return:\n\t\t\t    return ajax;\n\t\t\t} // end if valid url?\n\t\t} // end if url?\n\n\n\t\t//go ahead and download dataURLs right away\n\t\tif(/^data:([\\w+-]+\\/[\\w+.-]+)?[,;]/.test(payload)){\n\t\t\n\t\t\tif(payload.length > (1024*1024*1.999) && myBlob !== toString ){\n\t\t\t\tpayload=dataUrlToBlob(payload);\n\t\t\t\tmimeType=payload.type || defaultMime;\n\t\t\t}else{\t\t\t\n\t\t\t\treturn navigator.msSaveBlob ?  // IE10 can't do a[download], only Blobs:\n\t\t\t\t\tnavigator.msSaveBlob(dataUrlToBlob(payload), fileName) :\n\t\t\t\t\tsaver(payload) ; // everyone else can save dataURLs un-processed\n\t\t\t}\n\t\t\t\n\t\t}else{//not data url, is it a string with special needs?\n\t\t\tif(/([\\x80-\\xff])/.test(payload)){\t\t\t  \n\t\t\t\tvar i=0, tempUiArr= new Uint8Array(payload.length), mx=tempUiArr.length;\n\t\t\t\tfor(i;i<mx;++i) tempUiArr[i]= payload.charCodeAt(i);\n\t\t\t \tpayload=new myBlob([tempUiArr], {type: mimeType});\n\t\t\t}\t\t  \n\t\t}\n\t\tblob = payload instanceof myBlob ?\n\t\t\tpayload :\n\t\t\tnew myBlob([payload], {type: mimeType}) ;\n\n\n\t\tfunction dataUrlToBlob(strUrl) {\n\t\t\tvar parts= strUrl.split(/[:;,]/),\n\t\t\ttype= parts[1],\n\t\t\tdecoder= parts[2] == \"base64\" ? atob : decodeURIComponent,\n\t\t\tbinData= decoder( parts.pop() ),\n\t\t\tmx= binData.length,\n\t\t\ti= 0,\n\t\t\tuiArr= new Uint8Array(mx);\n\n\t\t\tfor(i;i<mx;++i) uiArr[i]= binData.charCodeAt(i);\n\n\t\t\treturn new myBlob([uiArr], {type: type});\n\t\t }\n\n\t\tfunction saver(url, winMode){\n\n\t\t\tif ('download' in anchor) { //html5 A[download]\n\t\t\t\tanchor.href = url;\n\t\t\t\tanchor.setAttribute(\"download\", fileName);\n\t\t\t\tanchor.className = \"download-js-link\";\n\t\t\t\tanchor.innerHTML = \"downloading...\";\n\t\t\t\tanchor.style.display = \"none\";\n\t\t\t\tdocument.body.appendChild(anchor);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tanchor.click();\n\t\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\t\tif(winMode===true){setTimeout(function(){ self.URL.revokeObjectURL(anchor.href);}, 250 );}\n\t\t\t\t}, 66);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// handle non-a[download] safari as best we can:\n\t\t\tif(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent)) {\n\t\t\t\tif(/^data:/.test(url))\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t\tif(!window.open(url)){ // popup blocked, offer direct download:\n\t\t\t\t\tif(confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")){ location.href=url; }\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t//do iframe dataURL download (old ch+FF):\n\t\t\tvar f = document.createElement(\"iframe\");\n\t\t\tdocument.body.appendChild(f);\n\n\t\t\tif(!winMode && /^data:/.test(url)){ // force a mime that will download:\n\t\t\t\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t}\n\t\t\tf.src=url;\n\t\t\tsetTimeout(function(){ document.body.removeChild(f); }, 333);\n\n\t\t}//end saver\n\n\n\n\n\t\tif (navigator.msSaveBlob) { // IE10+ : (has Blob, but not a[download] or URL)\n\t\t\treturn navigator.msSaveBlob(blob, fileName);\n\t\t}\n\n\t\tif(self.URL){ // simple fast and modern way using Blob and URL:\n\t\t\tsaver(self.URL.createObjectURL(blob), true);\n\t\t}else{\n\t\t\t// handle non-Blob()+non-URL browsers:\n\t\t\tif(typeof blob === \"string\" || blob.constructor===toString ){\n\t\t\t\ttry{\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \";base64,\"  +  self.btoa(blob)  );\n\t\t\t\t}catch(y){\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \",\" + encodeURIComponent(blob)  );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Blob but not URL support:\n\t\t\treader=new FileReader();\n\t\t\treader.onload=function(e){\n\t\t\t\tsaver(this.result);\n\t\t\t};\n\t\t\treader.readAsDataURL(blob);\n\t\t}\n\t\treturn true;\n\t}; /* end download() */\n}));\n","//! moment.js\n//! version : 2.30.1\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\n//! license : MIT\n//! momentjs.com\n\nvar hookCallback;\n\nfunction hooks() {\n    return hookCallback.apply(null, arguments);\n}\n\n// This is done to register the method called with moment()\n// without creating circular dependencies.\nfunction setHookCallback(callback) {\n    hookCallback = callback;\n}\n\nfunction isArray(input) {\n    return (\n        input instanceof Array ||\n        Object.prototype.toString.call(input) === '[object Array]'\n    );\n}\n\nfunction isObject(input) {\n    // IE8 will treat undefined and null as object if it wasn't for\n    // input != null\n    return (\n        input != null &&\n        Object.prototype.toString.call(input) === '[object Object]'\n    );\n}\n\nfunction hasOwnProp(a, b) {\n    return Object.prototype.hasOwnProperty.call(a, b);\n}\n\nfunction isObjectEmpty(obj) {\n    if (Object.getOwnPropertyNames) {\n        return Object.getOwnPropertyNames(obj).length === 0;\n    } else {\n        var k;\n        for (k in obj) {\n            if (hasOwnProp(obj, k)) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n\nfunction isUndefined(input) {\n    return input === void 0;\n}\n\nfunction isNumber(input) {\n    return (\n        typeof input === 'number' ||\n        Object.prototype.toString.call(input) === '[object Number]'\n    );\n}\n\nfunction isDate(input) {\n    return (\n        input instanceof Date ||\n        Object.prototype.toString.call(input) === '[object Date]'\n    );\n}\n\nfunction map(arr, fn) {\n    var res = [],\n        i,\n        arrLen = arr.length;\n    for (i = 0; i < arrLen; ++i) {\n        res.push(fn(arr[i], i));\n    }\n    return res;\n}\n\nfunction extend(a, b) {\n    for (var i in b) {\n        if (hasOwnProp(b, i)) {\n            a[i] = b[i];\n        }\n    }\n\n    if (hasOwnProp(b, 'toString')) {\n        a.toString = b.toString;\n    }\n\n    if (hasOwnProp(b, 'valueOf')) {\n        a.valueOf = b.valueOf;\n    }\n\n    return a;\n}\n\nfunction createUTC(input, format, locale, strict) {\n    return createLocalOrUTC(input, format, locale, strict, true).utc();\n}\n\nfunction defaultParsingFlags() {\n    // We need to deep clone this object.\n    return {\n        empty: false,\n        unusedTokens: [],\n        unusedInput: [],\n        overflow: -2,\n        charsLeftOver: 0,\n        nullInput: false,\n        invalidEra: null,\n        invalidMonth: null,\n        invalidFormat: false,\n        userInvalidated: false,\n        iso: false,\n        parsedDateParts: [],\n        era: null,\n        meridiem: null,\n        rfc2822: false,\n        weekdayMismatch: false,\n    };\n}\n\nfunction getParsingFlags(m) {\n    if (m._pf == null) {\n        m._pf = defaultParsingFlags();\n    }\n    return m._pf;\n}\n\nvar some;\nif (Array.prototype.some) {\n    some = Array.prototype.some;\n} else {\n    some = function (fun) {\n        var t = Object(this),\n            len = t.length >>> 0,\n            i;\n\n        for (i = 0; i < len; i++) {\n            if (i in t && fun.call(this, t[i], i, t)) {\n                return true;\n            }\n        }\n\n        return false;\n    };\n}\n\nfunction isValid(m) {\n    var flags = null,\n        parsedParts = false,\n        isNowValid = m._d && !isNaN(m._d.getTime());\n    if (isNowValid) {\n        flags = getParsingFlags(m);\n        parsedParts = some.call(flags.parsedDateParts, function (i) {\n            return i != null;\n        });\n        isNowValid =\n            flags.overflow < 0 &&\n            !flags.empty &&\n            !flags.invalidEra &&\n            !flags.invalidMonth &&\n            !flags.invalidWeekday &&\n            !flags.weekdayMismatch &&\n            !flags.nullInput &&\n            !flags.invalidFormat &&\n            !flags.userInvalidated &&\n            (!flags.meridiem || (flags.meridiem && parsedParts));\n        if (m._strict) {\n            isNowValid =\n                isNowValid &&\n                flags.charsLeftOver === 0 &&\n                flags.unusedTokens.length === 0 &&\n                flags.bigHour === undefined;\n        }\n    }\n    if (Object.isFrozen == null || !Object.isFrozen(m)) {\n        m._isValid = isNowValid;\n    } else {\n        return isNowValid;\n    }\n    return m._isValid;\n}\n\nfunction createInvalid(flags) {\n    var m = createUTC(NaN);\n    if (flags != null) {\n        extend(getParsingFlags(m), flags);\n    } else {\n        getParsingFlags(m).userInvalidated = true;\n    }\n\n    return m;\n}\n\n// Plugins that add properties should also add the key here (null value),\n// so we can properly clone ourselves.\nvar momentProperties = (hooks.momentProperties = []),\n    updateInProgress = false;\n\nfunction copyConfig(to, from) {\n    var i,\n        prop,\n        val,\n        momentPropertiesLen = momentProperties.length;\n\n    if (!isUndefined(from._isAMomentObject)) {\n        to._isAMomentObject = from._isAMomentObject;\n    }\n    if (!isUndefined(from._i)) {\n        to._i = from._i;\n    }\n    if (!isUndefined(from._f)) {\n        to._f = from._f;\n    }\n    if (!isUndefined(from._l)) {\n        to._l = from._l;\n    }\n    if (!isUndefined(from._strict)) {\n        to._strict = from._strict;\n    }\n    if (!isUndefined(from._tzm)) {\n        to._tzm = from._tzm;\n    }\n    if (!isUndefined(from._isUTC)) {\n        to._isUTC = from._isUTC;\n    }\n    if (!isUndefined(from._offset)) {\n        to._offset = from._offset;\n    }\n    if (!isUndefined(from._pf)) {\n        to._pf = getParsingFlags(from);\n    }\n    if (!isUndefined(from._locale)) {\n        to._locale = from._locale;\n    }\n\n    if (momentPropertiesLen > 0) {\n        for (i = 0; i < momentPropertiesLen; i++) {\n            prop = momentProperties[i];\n            val = from[prop];\n            if (!isUndefined(val)) {\n                to[prop] = val;\n            }\n        }\n    }\n\n    return to;\n}\n\n// Moment prototype object\nfunction Moment(config) {\n    copyConfig(this, config);\n    this._d = new Date(config._d != null ? config._d.getTime() : NaN);\n    if (!this.isValid()) {\n        this._d = new Date(NaN);\n    }\n    // Prevent infinite loop in case updateOffset creates new moment\n    // objects.\n    if (updateInProgress === false) {\n        updateInProgress = true;\n        hooks.updateOffset(this);\n        updateInProgress = false;\n    }\n}\n\nfunction isMoment(obj) {\n    return (\n        obj instanceof Moment || (obj != null && obj._isAMomentObject != null)\n    );\n}\n\nfunction warn(msg) {\n    if (\n        hooks.suppressDeprecationWarnings === false &&\n        typeof console !== 'undefined' &&\n        console.warn\n    ) {\n        console.warn('Deprecation warning: ' + msg);\n    }\n}\n\nfunction deprecate(msg, fn) {\n    var firstTime = true;\n\n    return extend(function () {\n        if (hooks.deprecationHandler != null) {\n            hooks.deprecationHandler(null, msg);\n        }\n        if (firstTime) {\n            var args = [],\n                arg,\n                i,\n                key,\n                argLen = arguments.length;\n            for (i = 0; i < argLen; i++) {\n                arg = '';\n                if (typeof arguments[i] === 'object') {\n                    arg += '\\n[' + i + '] ';\n                    for (key in arguments[0]) {\n                        if (hasOwnProp(arguments[0], key)) {\n                            arg += key + ': ' + arguments[0][key] + ', ';\n                        }\n                    }\n                    arg = arg.slice(0, -2); // Remove trailing comma and space\n                } else {\n                    arg = arguments[i];\n                }\n                args.push(arg);\n            }\n            warn(\n                msg +\n                    '\\nArguments: ' +\n                    Array.prototype.slice.call(args).join('') +\n                    '\\n' +\n                    new Error().stack\n            );\n            firstTime = false;\n        }\n        return fn.apply(this, arguments);\n    }, fn);\n}\n\nvar deprecations = {};\n\nfunction deprecateSimple(name, msg) {\n    if (hooks.deprecationHandler != null) {\n        hooks.deprecationHandler(name, msg);\n    }\n    if (!deprecations[name]) {\n        warn(msg);\n        deprecations[name] = true;\n    }\n}\n\nhooks.suppressDeprecationWarnings = false;\nhooks.deprecationHandler = null;\n\nfunction isFunction(input) {\n    return (\n        (typeof Function !== 'undefined' && input instanceof Function) ||\n        Object.prototype.toString.call(input) === '[object Function]'\n    );\n}\n\nfunction set(config) {\n    var prop, i;\n    for (i in config) {\n        if (hasOwnProp(config, i)) {\n            prop = config[i];\n            if (isFunction(prop)) {\n                this[i] = prop;\n            } else {\n                this['_' + i] = prop;\n            }\n        }\n    }\n    this._config = config;\n    // Lenient ordinal parsing accepts just a number in addition to\n    // number + (possibly) stuff coming from _dayOfMonthOrdinalParse.\n    // TODO: Remove \"ordinalParse\" fallback in next major release.\n    this._dayOfMonthOrdinalParseLenient = new RegExp(\n        (this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) +\n            '|' +\n            /\\d{1,2}/.source\n    );\n}\n\nfunction mergeConfigs(parentConfig, childConfig) {\n    var res = extend({}, parentConfig),\n        prop;\n    for (prop in childConfig) {\n        if (hasOwnProp(childConfig, prop)) {\n            if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {\n                res[prop] = {};\n                extend(res[prop], parentConfig[prop]);\n                extend(res[prop], childConfig[prop]);\n            } else if (childConfig[prop] != null) {\n                res[prop] = childConfig[prop];\n            } else {\n                delete res[prop];\n            }\n        }\n    }\n    for (prop in parentConfig) {\n        if (\n            hasOwnProp(parentConfig, prop) &&\n            !hasOwnProp(childConfig, prop) &&\n            isObject(parentConfig[prop])\n        ) {\n            // make sure changes to properties don't modify parent config\n            res[prop] = extend({}, res[prop]);\n        }\n    }\n    return res;\n}\n\nfunction Locale(config) {\n    if (config != null) {\n        this.set(config);\n    }\n}\n\nvar keys;\n\nif (Object.keys) {\n    keys = Object.keys;\n} else {\n    keys = function (obj) {\n        var i,\n            res = [];\n        for (i in obj) {\n            if (hasOwnProp(obj, i)) {\n                res.push(i);\n            }\n        }\n        return res;\n    };\n}\n\nvar defaultCalendar = {\n    sameDay: '[Today at] LT',\n    nextDay: '[Tomorrow at] LT',\n    nextWeek: 'dddd [at] LT',\n    lastDay: '[Yesterday at] LT',\n    lastWeek: '[Last] dddd [at] LT',\n    sameElse: 'L',\n};\n\nfunction calendar(key, mom, now) {\n    var output = this._calendar[key] || this._calendar['sameElse'];\n    return isFunction(output) ? output.call(mom, now) : output;\n}\n\nfunction zeroFill(number, targetLength, forceSign) {\n    var absNumber = '' + Math.abs(number),\n        zerosToFill = targetLength - absNumber.length,\n        sign = number >= 0;\n    return (\n        (sign ? (forceSign ? '+' : '') : '-') +\n        Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) +\n        absNumber\n    );\n}\n\nvar formattingTokens =\n        /(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,\n    localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g,\n    formatFunctions = {},\n    formatTokenFunctions = {};\n\n// token:    'M'\n// padded:   ['MM', 2]\n// ordinal:  'Mo'\n// callback: function () { this.month() + 1 }\nfunction addFormatToken(token, padded, ordinal, callback) {\n    var func = callback;\n    if (typeof callback === 'string') {\n        func = function () {\n            return this[callback]();\n        };\n    }\n    if (token) {\n        formatTokenFunctions[token] = func;\n    }\n    if (padded) {\n        formatTokenFunctions[padded[0]] = function () {\n            return zeroFill(func.apply(this, arguments), padded[1], padded[2]);\n        };\n    }\n    if (ordinal) {\n        formatTokenFunctions[ordinal] = function () {\n            return this.localeData().ordinal(\n                func.apply(this, arguments),\n                token\n            );\n        };\n    }\n}\n\nfunction removeFormattingTokens(input) {\n    if (input.match(/\\[[\\s\\S]/)) {\n        return input.replace(/^\\[|\\]$/g, '');\n    }\n    return input.replace(/\\\\/g, '');\n}\n\nfunction makeFormatFunction(format) {\n    var array = format.match(formattingTokens),\n        i,\n        length;\n\n    for (i = 0, length = array.length; i < length; i++) {\n        if (formatTokenFunctions[array[i]]) {\n            array[i] = formatTokenFunctions[array[i]];\n        } else {\n            array[i] = removeFormattingTokens(array[i]);\n        }\n    }\n\n    return function (mom) {\n        var output = '',\n            i;\n        for (i = 0; i < length; i++) {\n            output += isFunction(array[i])\n                ? array[i].call(mom, format)\n                : array[i];\n        }\n        return output;\n    };\n}\n\n// format date using native date object\nfunction formatMoment(m, format) {\n    if (!m.isValid()) {\n        return m.localeData().invalidDate();\n    }\n\n    format = expandFormat(format, m.localeData());\n    formatFunctions[format] =\n        formatFunctions[format] || makeFormatFunction(format);\n\n    return formatFunctions[format](m);\n}\n\nfunction expandFormat(format, locale) {\n    var i = 5;\n\n    function replaceLongDateFormatTokens(input) {\n        return locale.longDateFormat(input) || input;\n    }\n\n    localFormattingTokens.lastIndex = 0;\n    while (i >= 0 && localFormattingTokens.test(format)) {\n        format = format.replace(\n            localFormattingTokens,\n            replaceLongDateFormatTokens\n        );\n        localFormattingTokens.lastIndex = 0;\n        i -= 1;\n    }\n\n    return format;\n}\n\nvar defaultLongDateFormat = {\n    LTS: 'h:mm:ss A',\n    LT: 'h:mm A',\n    L: 'MM/DD/YYYY',\n    LL: 'MMMM D, YYYY',\n    LLL: 'MMMM D, YYYY h:mm A',\n    LLLL: 'dddd, MMMM D, YYYY h:mm A',\n};\n\nfunction longDateFormat(key) {\n    var format = this._longDateFormat[key],\n        formatUpper = this._longDateFormat[key.toUpperCase()];\n\n    if (format || !formatUpper) {\n        return format;\n    }\n\n    this._longDateFormat[key] = formatUpper\n        .match(formattingTokens)\n        .map(function (tok) {\n            if (\n                tok === 'MMMM' ||\n                tok === 'MM' ||\n                tok === 'DD' ||\n                tok === 'dddd'\n            ) {\n                return tok.slice(1);\n            }\n            return tok;\n        })\n        .join('');\n\n    return this._longDateFormat[key];\n}\n\nvar defaultInvalidDate = 'Invalid date';\n\nfunction invalidDate() {\n    return this._invalidDate;\n}\n\nvar defaultOrdinal = '%d',\n    defaultDayOfMonthOrdinalParse = /\\d{1,2}/;\n\nfunction ordinal(number) {\n    return this._ordinal.replace('%d', number);\n}\n\nvar defaultRelativeTime = {\n    future: 'in %s',\n    past: '%s ago',\n    s: 'a few seconds',\n    ss: '%d seconds',\n    m: 'a minute',\n    mm: '%d minutes',\n    h: 'an hour',\n    hh: '%d hours',\n    d: 'a day',\n    dd: '%d days',\n    w: 'a week',\n    ww: '%d weeks',\n    M: 'a month',\n    MM: '%d months',\n    y: 'a year',\n    yy: '%d years',\n};\n\nfunction relativeTime(number, withoutSuffix, string, isFuture) {\n    var output = this._relativeTime[string];\n    return isFunction(output)\n        ? output(number, withoutSuffix, string, isFuture)\n        : output.replace(/%d/i, number);\n}\n\nfunction pastFuture(diff, output) {\n    var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\n    return isFunction(format) ? format(output) : format.replace(/%s/i, output);\n}\n\nvar aliases = {\n    D: 'date',\n    dates: 'date',\n    date: 'date',\n    d: 'day',\n    days: 'day',\n    day: 'day',\n    e: 'weekday',\n    weekdays: 'weekday',\n    weekday: 'weekday',\n    E: 'isoWeekday',\n    isoweekdays: 'isoWeekday',\n    isoweekday: 'isoWeekday',\n    DDD: 'dayOfYear',\n    dayofyears: 'dayOfYear',\n    dayofyear: 'dayOfYear',\n    h: 'hour',\n    hours: 'hour',\n    hour: 'hour',\n    ms: 'millisecond',\n    milliseconds: 'millisecond',\n    millisecond: 'millisecond',\n    m: 'minute',\n    minutes: 'minute',\n    minute: 'minute',\n    M: 'month',\n    months: 'month',\n    month: 'month',\n    Q: 'quarter',\n    quarters: 'quarter',\n    quarter: 'quarter',\n    s: 'second',\n    seconds: 'second',\n    second: 'second',\n    gg: 'weekYear',\n    weekyears: 'weekYear',\n    weekyear: 'weekYear',\n    GG: 'isoWeekYear',\n    isoweekyears: 'isoWeekYear',\n    isoweekyear: 'isoWeekYear',\n    w: 'week',\n    weeks: 'week',\n    week: 'week',\n    W: 'isoWeek',\n    isoweeks: 'isoWeek',\n    isoweek: 'isoWeek',\n    y: 'year',\n    years: 'year',\n    year: 'year',\n};\n\nfunction normalizeUnits(units) {\n    return typeof units === 'string'\n        ? aliases[units] || aliases[units.toLowerCase()]\n        : undefined;\n}\n\nfunction normalizeObjectUnits(inputObject) {\n    var normalizedInput = {},\n        normalizedProp,\n        prop;\n\n    for (prop in inputObject) {\n        if (hasOwnProp(inputObject, prop)) {\n            normalizedProp = normalizeUnits(prop);\n            if (normalizedProp) {\n                normalizedInput[normalizedProp] = inputObject[prop];\n            }\n        }\n    }\n\n    return normalizedInput;\n}\n\nvar priorities = {\n    date: 9,\n    day: 11,\n    weekday: 11,\n    isoWeekday: 11,\n    dayOfYear: 4,\n    hour: 13,\n    millisecond: 16,\n    minute: 14,\n    month: 8,\n    quarter: 7,\n    second: 15,\n    weekYear: 1,\n    isoWeekYear: 1,\n    week: 5,\n    isoWeek: 5,\n    year: 1,\n};\n\nfunction getPrioritizedUnits(unitsObj) {\n    var units = [],\n        u;\n    for (u in unitsObj) {\n        if (hasOwnProp(unitsObj, u)) {\n            units.push({ unit: u, priority: priorities[u] });\n        }\n    }\n    units.sort(function (a, b) {\n        return a.priority - b.priority;\n    });\n    return units;\n}\n\nvar match1 = /\\d/, //       0 - 9\n    match2 = /\\d\\d/, //      00 - 99\n    match3 = /\\d{3}/, //     000 - 999\n    match4 = /\\d{4}/, //    0000 - 9999\n    match6 = /[+-]?\\d{6}/, // -999999 - 999999\n    match1to2 = /\\d\\d?/, //       0 - 99\n    match3to4 = /\\d\\d\\d\\d?/, //     999 - 9999\n    match5to6 = /\\d\\d\\d\\d\\d\\d?/, //   99999 - 999999\n    match1to3 = /\\d{1,3}/, //       0 - 999\n    match1to4 = /\\d{1,4}/, //       0 - 9999\n    match1to6 = /[+-]?\\d{1,6}/, // -999999 - 999999\n    matchUnsigned = /\\d+/, //       0 - inf\n    matchSigned = /[+-]?\\d+/, //    -inf - inf\n    matchOffset = /Z|[+-]\\d\\d:?\\d\\d/gi, // +00:00 -00:00 +0000 -0000 or Z\n    matchShortOffset = /Z|[+-]\\d\\d(?::?\\d\\d)?/gi, // +00 -00 +00:00 -00:00 +0000 -0000 or Z\n    matchTimestamp = /[+-]?\\d+(\\.\\d{1,3})?/, // 123456789 123456789.123\n    // any word (or two) characters or numbers including two/three word month in arabic.\n    // includes scottish gaelic two word and hyphenated months\n    matchWord =\n        /[0-9]{0,256}['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFF07\\uFF10-\\uFFEF]{1,256}|[\\u0600-\\u06FF\\/]{1,256}(\\s*?[\\u0600-\\u06FF]{1,256}){1,2}/i,\n    match1to2NoLeadingZero = /^[1-9]\\d?/, //         1-99\n    match1to2HasZero = /^([1-9]\\d|\\d)/, //           0-99\n    regexes;\n\nregexes = {};\n\nfunction addRegexToken(token, regex, strictRegex) {\n    regexes[token] = isFunction(regex)\n        ? regex\n        : function (isStrict, localeData) {\n              return isStrict && strictRegex ? strictRegex : regex;\n          };\n}\n\nfunction getParseRegexForToken(token, config) {\n    if (!hasOwnProp(regexes, token)) {\n        return new RegExp(unescapeFormat(token));\n    }\n\n    return regexes[token](config._strict, config._locale);\n}\n\n// Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\nfunction unescapeFormat(s) {\n    return regexEscape(\n        s\n            .replace('\\\\', '')\n            .replace(\n                /\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g,\n                function (matched, p1, p2, p3, p4) {\n                    return p1 || p2 || p3 || p4;\n                }\n            )\n    );\n}\n\nfunction regexEscape(s) {\n    return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\n\nfunction absFloor(number) {\n    if (number < 0) {\n        // -0 -> 0\n        return Math.ceil(number) || 0;\n    } else {\n        return Math.floor(number);\n    }\n}\n\nfunction toInt(argumentForCoercion) {\n    var coercedNumber = +argumentForCoercion,\n        value = 0;\n\n    if (coercedNumber !== 0 && isFinite(coercedNumber)) {\n        value = absFloor(coercedNumber);\n    }\n\n    return value;\n}\n\nvar tokens = {};\n\nfunction addParseToken(token, callback) {\n    var i,\n        func = callback,\n        tokenLen;\n    if (typeof token === 'string') {\n        token = [token];\n    }\n    if (isNumber(callback)) {\n        func = function (input, array) {\n            array[callback] = toInt(input);\n        };\n    }\n    tokenLen = token.length;\n    for (i = 0; i < tokenLen; i++) {\n        tokens[token[i]] = func;\n    }\n}\n\nfunction addWeekParseToken(token, callback) {\n    addParseToken(token, function (input, array, config, token) {\n        config._w = config._w || {};\n        callback(input, config._w, config, token);\n    });\n}\n\nfunction addTimeToArrayFromToken(token, input, config) {\n    if (input != null && hasOwnProp(tokens, token)) {\n        tokens[token](input, config._a, config, token);\n    }\n}\n\nfunction isLeapYear(year) {\n    return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n}\n\nvar YEAR = 0,\n    MONTH = 1,\n    DATE = 2,\n    HOUR = 3,\n    MINUTE = 4,\n    SECOND = 5,\n    MILLISECOND = 6,\n    WEEK = 7,\n    WEEKDAY = 8;\n\n// FORMATTING\n\naddFormatToken('Y', 0, 0, function () {\n    var y = this.year();\n    return y <= 9999 ? zeroFill(y, 4) : '+' + y;\n});\n\naddFormatToken(0, ['YY', 2], 0, function () {\n    return this.year() % 100;\n});\n\naddFormatToken(0, ['YYYY', 4], 0, 'year');\naddFormatToken(0, ['YYYYY', 5], 0, 'year');\naddFormatToken(0, ['YYYYYY', 6, true], 0, 'year');\n\n// PARSING\n\naddRegexToken('Y', matchSigned);\naddRegexToken('YY', match1to2, match2);\naddRegexToken('YYYY', match1to4, match4);\naddRegexToken('YYYYY', match1to6, match6);\naddRegexToken('YYYYYY', match1to6, match6);\n\naddParseToken(['YYYYY', 'YYYYYY'], YEAR);\naddParseToken('YYYY', function (input, array) {\n    array[YEAR] =\n        input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);\n});\naddParseToken('YY', function (input, array) {\n    array[YEAR] = hooks.parseTwoDigitYear(input);\n});\naddParseToken('Y', function (input, array) {\n    array[YEAR] = parseInt(input, 10);\n});\n\n// HELPERS\n\nfunction daysInYear(year) {\n    return isLeapYear(year) ? 366 : 365;\n}\n\n// HOOKS\n\nhooks.parseTwoDigitYear = function (input) {\n    return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\n};\n\n// MOMENTS\n\nvar getSetYear = makeGetSet('FullYear', true);\n\nfunction getIsLeapYear() {\n    return isLeapYear(this.year());\n}\n\nfunction makeGetSet(unit, keepTime) {\n    return function (value) {\n        if (value != null) {\n            set$1(this, unit, value);\n            hooks.updateOffset(this, keepTime);\n            return this;\n        } else {\n            return get(this, unit);\n        }\n    };\n}\n\nfunction get(mom, unit) {\n    if (!mom.isValid()) {\n        return NaN;\n    }\n\n    var d = mom._d,\n        isUTC = mom._isUTC;\n\n    switch (unit) {\n        case 'Milliseconds':\n            return isUTC ? d.getUTCMilliseconds() : d.getMilliseconds();\n        case 'Seconds':\n            return isUTC ? d.getUTCSeconds() : d.getSeconds();\n        case 'Minutes':\n            return isUTC ? d.getUTCMinutes() : d.getMinutes();\n        case 'Hours':\n            return isUTC ? d.getUTCHours() : d.getHours();\n        case 'Date':\n            return isUTC ? d.getUTCDate() : d.getDate();\n        case 'Day':\n            return isUTC ? d.getUTCDay() : d.getDay();\n        case 'Month':\n            return isUTC ? d.getUTCMonth() : d.getMonth();\n        case 'FullYear':\n            return isUTC ? d.getUTCFullYear() : d.getFullYear();\n        default:\n            return NaN; // Just in case\n    }\n}\n\nfunction set$1(mom, unit, value) {\n    var d, isUTC, year, month, date;\n\n    if (!mom.isValid() || isNaN(value)) {\n        return;\n    }\n\n    d = mom._d;\n    isUTC = mom._isUTC;\n\n    switch (unit) {\n        case 'Milliseconds':\n            return void (isUTC\n                ? d.setUTCMilliseconds(value)\n                : d.setMilliseconds(value));\n        case 'Seconds':\n            return void (isUTC ? d.setUTCSeconds(value) : d.setSeconds(value));\n        case 'Minutes':\n            return void (isUTC ? d.setUTCMinutes(value) : d.setMinutes(value));\n        case 'Hours':\n            return void (isUTC ? d.setUTCHours(value) : d.setHours(value));\n        case 'Date':\n            return void (isUTC ? d.setUTCDate(value) : d.setDate(value));\n        // case 'Day': // Not real\n        //    return void (isUTC ? d.setUTCDay(value) : d.setDay(value));\n        // case 'Month': // Not used because we need to pass two variables\n        //     return void (isUTC ? d.setUTCMonth(value) : d.setMonth(value));\n        case 'FullYear':\n            break; // See below ...\n        default:\n            return; // Just in case\n    }\n\n    year = value;\n    month = mom.month();\n    date = mom.date();\n    date = date === 29 && month === 1 && !isLeapYear(year) ? 28 : date;\n    void (isUTC\n        ? d.setUTCFullYear(year, month, date)\n        : d.setFullYear(year, month, date));\n}\n\n// MOMENTS\n\nfunction stringGet(units) {\n    units = normalizeUnits(units);\n    if (isFunction(this[units])) {\n        return this[units]();\n    }\n    return this;\n}\n\nfunction stringSet(units, value) {\n    if (typeof units === 'object') {\n        units = normalizeObjectUnits(units);\n        var prioritized = getPrioritizedUnits(units),\n            i,\n            prioritizedLen = prioritized.length;\n        for (i = 0; i < prioritizedLen; i++) {\n            this[prioritized[i].unit](units[prioritized[i].unit]);\n        }\n    } else {\n        units = normalizeUnits(units);\n        if (isFunction(this[units])) {\n            return this[units](value);\n        }\n    }\n    return this;\n}\n\nfunction mod(n, x) {\n    return ((n % x) + x) % x;\n}\n\nvar indexOf;\n\nif (Array.prototype.indexOf) {\n    indexOf = Array.prototype.indexOf;\n} else {\n    indexOf = function (o) {\n        // I know\n        var i;\n        for (i = 0; i < this.length; ++i) {\n            if (this[i] === o) {\n                return i;\n            }\n        }\n        return -1;\n    };\n}\n\nfunction daysInMonth(year, month) {\n    if (isNaN(year) || isNaN(month)) {\n        return NaN;\n    }\n    var modMonth = mod(month, 12);\n    year += (month - modMonth) / 12;\n    return modMonth === 1\n        ? isLeapYear(year)\n            ? 29\n            : 28\n        : 31 - ((modMonth % 7) % 2);\n}\n\n// FORMATTING\n\naddFormatToken('M', ['MM', 2], 'Mo', function () {\n    return this.month() + 1;\n});\n\naddFormatToken('MMM', 0, 0, function (format) {\n    return this.localeData().monthsShort(this, format);\n});\n\naddFormatToken('MMMM', 0, 0, function (format) {\n    return this.localeData().months(this, format);\n});\n\n// PARSING\n\naddRegexToken('M', match1to2, match1to2NoLeadingZero);\naddRegexToken('MM', match1to2, match2);\naddRegexToken('MMM', function (isStrict, locale) {\n    return locale.monthsShortRegex(isStrict);\n});\naddRegexToken('MMMM', function (isStrict, locale) {\n    return locale.monthsRegex(isStrict);\n});\n\naddParseToken(['M', 'MM'], function (input, array) {\n    array[MONTH] = toInt(input) - 1;\n});\n\naddParseToken(['MMM', 'MMMM'], function (input, array, config, token) {\n    var month = config._locale.monthsParse(input, token, config._strict);\n    // if we didn't find a month name, mark the date as invalid.\n    if (month != null) {\n        array[MONTH] = month;\n    } else {\n        getParsingFlags(config).invalidMonth = input;\n    }\n});\n\n// LOCALES\n\nvar defaultLocaleMonths =\n        'January_February_March_April_May_June_July_August_September_October_November_December'.split(\n            '_'\n        ),\n    defaultLocaleMonthsShort =\n        'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),\n    MONTHS_IN_FORMAT = /D[oD]?(\\[[^\\[\\]]*\\]|\\s)+MMMM?/,\n    defaultMonthsShortRegex = matchWord,\n    defaultMonthsRegex = matchWord;\n\nfunction localeMonths(m, format) {\n    if (!m) {\n        return isArray(this._months)\n            ? this._months\n            : this._months['standalone'];\n    }\n    return isArray(this._months)\n        ? this._months[m.month()]\n        : this._months[\n              (this._months.isFormat || MONTHS_IN_FORMAT).test(format)\n                  ? 'format'\n                  : 'standalone'\n          ][m.month()];\n}\n\nfunction localeMonthsShort(m, format) {\n    if (!m) {\n        return isArray(this._monthsShort)\n            ? this._monthsShort\n            : this._monthsShort['standalone'];\n    }\n    return isArray(this._monthsShort)\n        ? this._monthsShort[m.month()]\n        : this._monthsShort[\n              MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'\n          ][m.month()];\n}\n\nfunction handleStrictParse(monthName, format, strict) {\n    var i,\n        ii,\n        mom,\n        llc = monthName.toLocaleLowerCase();\n    if (!this._monthsParse) {\n        // this is not used\n        this._monthsParse = [];\n        this._longMonthsParse = [];\n        this._shortMonthsParse = [];\n        for (i = 0; i < 12; ++i) {\n            mom = createUTC([2000, i]);\n            this._shortMonthsParse[i] = this.monthsShort(\n                mom,\n                ''\n            ).toLocaleLowerCase();\n            this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();\n        }\n    }\n\n    if (strict) {\n        if (format === 'MMM') {\n            ii = indexOf.call(this._shortMonthsParse, llc);\n            return ii !== -1 ? ii : null;\n        } else {\n            ii = indexOf.call(this._longMonthsParse, llc);\n            return ii !== -1 ? ii : null;\n        }\n    } else {\n        if (format === 'MMM') {\n            ii = indexOf.call(this._shortMonthsParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf.call(this._longMonthsParse, llc);\n            return ii !== -1 ? ii : null;\n        } else {\n            ii = indexOf.call(this._longMonthsParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf.call(this._shortMonthsParse, llc);\n            return ii !== -1 ? ii : null;\n        }\n    }\n}\n\nfunction localeMonthsParse(monthName, format, strict) {\n    var i, mom, regex;\n\n    if (this._monthsParseExact) {\n        return handleStrictParse.call(this, monthName, format, strict);\n    }\n\n    if (!this._monthsParse) {\n        this._monthsParse = [];\n        this._longMonthsParse = [];\n        this._shortMonthsParse = [];\n    }\n\n    // TODO: add sorting\n    // Sorting makes sure if one month (or abbr) is a prefix of another\n    // see sorting in computeMonthsParse\n    for (i = 0; i < 12; i++) {\n        // make the regex if we don't have it already\n        mom = createUTC([2000, i]);\n        if (strict && !this._longMonthsParse[i]) {\n            this._longMonthsParse[i] = new RegExp(\n                '^' + this.months(mom, '').replace('.', '') + '$',\n                'i'\n            );\n            this._shortMonthsParse[i] = new RegExp(\n                '^' + this.monthsShort(mom, '').replace('.', '') + '$',\n                'i'\n            );\n        }\n        if (!strict && !this._monthsParse[i]) {\n            regex =\n                '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\n            this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\n        }\n        // test the regex\n        if (\n            strict &&\n            format === 'MMMM' &&\n            this._longMonthsParse[i].test(monthName)\n        ) {\n            return i;\n        } else if (\n            strict &&\n            format === 'MMM' &&\n            this._shortMonthsParse[i].test(monthName)\n        ) {\n            return i;\n        } else if (!strict && this._monthsParse[i].test(monthName)) {\n            return i;\n        }\n    }\n}\n\n// MOMENTS\n\nfunction setMonth(mom, value) {\n    if (!mom.isValid()) {\n        // No op\n        return mom;\n    }\n\n    if (typeof value === 'string') {\n        if (/^\\d+$/.test(value)) {\n            value = toInt(value);\n        } else {\n            value = mom.localeData().monthsParse(value);\n            // TODO: Another silent failure?\n            if (!isNumber(value)) {\n                return mom;\n            }\n        }\n    }\n\n    var month = value,\n        date = mom.date();\n\n    date = date < 29 ? date : Math.min(date, daysInMonth(mom.year(), month));\n    void (mom._isUTC\n        ? mom._d.setUTCMonth(month, date)\n        : mom._d.setMonth(month, date));\n    return mom;\n}\n\nfunction getSetMonth(value) {\n    if (value != null) {\n        setMonth(this, value);\n        hooks.updateOffset(this, true);\n        return this;\n    } else {\n        return get(this, 'Month');\n    }\n}\n\nfunction getDaysInMonth() {\n    return daysInMonth(this.year(), this.month());\n}\n\nfunction monthsShortRegex(isStrict) {\n    if (this._monthsParseExact) {\n        if (!hasOwnProp(this, '_monthsRegex')) {\n            computeMonthsParse.call(this);\n        }\n        if (isStrict) {\n            return this._monthsShortStrictRegex;\n        } else {\n            return this._monthsShortRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_monthsShortRegex')) {\n            this._monthsShortRegex = defaultMonthsShortRegex;\n        }\n        return this._monthsShortStrictRegex && isStrict\n            ? this._monthsShortStrictRegex\n            : this._monthsShortRegex;\n    }\n}\n\nfunction monthsRegex(isStrict) {\n    if (this._monthsParseExact) {\n        if (!hasOwnProp(this, '_monthsRegex')) {\n            computeMonthsParse.call(this);\n        }\n        if (isStrict) {\n            return this._monthsStrictRegex;\n        } else {\n            return this._monthsRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_monthsRegex')) {\n            this._monthsRegex = defaultMonthsRegex;\n        }\n        return this._monthsStrictRegex && isStrict\n            ? this._monthsStrictRegex\n            : this._monthsRegex;\n    }\n}\n\nfunction computeMonthsParse() {\n    function cmpLenRev(a, b) {\n        return b.length - a.length;\n    }\n\n    var shortPieces = [],\n        longPieces = [],\n        mixedPieces = [],\n        i,\n        mom,\n        shortP,\n        longP;\n    for (i = 0; i < 12; i++) {\n        // make the regex if we don't have it already\n        mom = createUTC([2000, i]);\n        shortP = regexEscape(this.monthsShort(mom, ''));\n        longP = regexEscape(this.months(mom, ''));\n        shortPieces.push(shortP);\n        longPieces.push(longP);\n        mixedPieces.push(longP);\n        mixedPieces.push(shortP);\n    }\n    // Sorting makes sure if one month (or abbr) is a prefix of another it\n    // will match the longer piece.\n    shortPieces.sort(cmpLenRev);\n    longPieces.sort(cmpLenRev);\n    mixedPieces.sort(cmpLenRev);\n\n    this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n    this._monthsShortRegex = this._monthsRegex;\n    this._monthsStrictRegex = new RegExp(\n        '^(' + longPieces.join('|') + ')',\n        'i'\n    );\n    this._monthsShortStrictRegex = new RegExp(\n        '^(' + shortPieces.join('|') + ')',\n        'i'\n    );\n}\n\nfunction createDate(y, m, d, h, M, s, ms) {\n    // can't just apply() to create a date:\n    // https://stackoverflow.com/q/181348\n    var date;\n    // the date constructor remaps years 0-99 to 1900-1999\n    if (y < 100 && y >= 0) {\n        // preserve leap years using a full 400 year cycle, then reset\n        date = new Date(y + 400, m, d, h, M, s, ms);\n        if (isFinite(date.getFullYear())) {\n            date.setFullYear(y);\n        }\n    } else {\n        date = new Date(y, m, d, h, M, s, ms);\n    }\n\n    return date;\n}\n\nfunction createUTCDate(y) {\n    var date, args;\n    // the Date.UTC function remaps years 0-99 to 1900-1999\n    if (y < 100 && y >= 0) {\n        args = Array.prototype.slice.call(arguments);\n        // preserve leap years using a full 400 year cycle, then reset\n        args[0] = y + 400;\n        date = new Date(Date.UTC.apply(null, args));\n        if (isFinite(date.getUTCFullYear())) {\n            date.setUTCFullYear(y);\n        }\n    } else {\n        date = new Date(Date.UTC.apply(null, arguments));\n    }\n\n    return date;\n}\n\n// start-of-first-week - start-of-year\nfunction firstWeekOffset(year, dow, doy) {\n    var // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n        fwd = 7 + dow - doy,\n        // first-week day local weekday -- which local weekday is fwd\n        fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;\n\n    return -fwdlw + fwd - 1;\n}\n\n// https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\nfunction dayOfYearFromWeeks(year, week, weekday, dow, doy) {\n    var localWeekday = (7 + weekday - dow) % 7,\n        weekOffset = firstWeekOffset(year, dow, doy),\n        dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,\n        resYear,\n        resDayOfYear;\n\n    if (dayOfYear <= 0) {\n        resYear = year - 1;\n        resDayOfYear = daysInYear(resYear) + dayOfYear;\n    } else if (dayOfYear > daysInYear(year)) {\n        resYear = year + 1;\n        resDayOfYear = dayOfYear - daysInYear(year);\n    } else {\n        resYear = year;\n        resDayOfYear = dayOfYear;\n    }\n\n    return {\n        year: resYear,\n        dayOfYear: resDayOfYear,\n    };\n}\n\nfunction weekOfYear(mom, dow, doy) {\n    var weekOffset = firstWeekOffset(mom.year(), dow, doy),\n        week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,\n        resWeek,\n        resYear;\n\n    if (week < 1) {\n        resYear = mom.year() - 1;\n        resWeek = week + weeksInYear(resYear, dow, doy);\n    } else if (week > weeksInYear(mom.year(), dow, doy)) {\n        resWeek = week - weeksInYear(mom.year(), dow, doy);\n        resYear = mom.year() + 1;\n    } else {\n        resYear = mom.year();\n        resWeek = week;\n    }\n\n    return {\n        week: resWeek,\n        year: resYear,\n    };\n}\n\nfunction weeksInYear(year, dow, doy) {\n    var weekOffset = firstWeekOffset(year, dow, doy),\n        weekOffsetNext = firstWeekOffset(year + 1, dow, doy);\n    return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;\n}\n\n// FORMATTING\n\naddFormatToken('w', ['ww', 2], 'wo', 'week');\naddFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');\n\n// PARSING\n\naddRegexToken('w', match1to2, match1to2NoLeadingZero);\naddRegexToken('ww', match1to2, match2);\naddRegexToken('W', match1to2, match1to2NoLeadingZero);\naddRegexToken('WW', match1to2, match2);\n\naddWeekParseToken(\n    ['w', 'ww', 'W', 'WW'],\n    function (input, week, config, token) {\n        week[token.substr(0, 1)] = toInt(input);\n    }\n);\n\n// HELPERS\n\n// LOCALES\n\nfunction localeWeek(mom) {\n    return weekOfYear(mom, this._week.dow, this._week.doy).week;\n}\n\nvar defaultLocaleWeek = {\n    dow: 0, // Sunday is the first day of the week.\n    doy: 6, // The week that contains Jan 6th is the first week of the year.\n};\n\nfunction localeFirstDayOfWeek() {\n    return this._week.dow;\n}\n\nfunction localeFirstDayOfYear() {\n    return this._week.doy;\n}\n\n// MOMENTS\n\nfunction getSetWeek(input) {\n    var week = this.localeData().week(this);\n    return input == null ? week : this.add((input - week) * 7, 'd');\n}\n\nfunction getSetISOWeek(input) {\n    var week = weekOfYear(this, 1, 4).week;\n    return input == null ? week : this.add((input - week) * 7, 'd');\n}\n\n// FORMATTING\n\naddFormatToken('d', 0, 'do', 'day');\n\naddFormatToken('dd', 0, 0, function (format) {\n    return this.localeData().weekdaysMin(this, format);\n});\n\naddFormatToken('ddd', 0, 0, function (format) {\n    return this.localeData().weekdaysShort(this, format);\n});\n\naddFormatToken('dddd', 0, 0, function (format) {\n    return this.localeData().weekdays(this, format);\n});\n\naddFormatToken('e', 0, 0, 'weekday');\naddFormatToken('E', 0, 0, 'isoWeekday');\n\n// PARSING\n\naddRegexToken('d', match1to2);\naddRegexToken('e', match1to2);\naddRegexToken('E', match1to2);\naddRegexToken('dd', function (isStrict, locale) {\n    return locale.weekdaysMinRegex(isStrict);\n});\naddRegexToken('ddd', function (isStrict, locale) {\n    return locale.weekdaysShortRegex(isStrict);\n});\naddRegexToken('dddd', function (isStrict, locale) {\n    return locale.weekdaysRegex(isStrict);\n});\n\naddWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {\n    var weekday = config._locale.weekdaysParse(input, token, config._strict);\n    // if we didn't get a weekday name, mark the date as invalid\n    if (weekday != null) {\n        week.d = weekday;\n    } else {\n        getParsingFlags(config).invalidWeekday = input;\n    }\n});\n\naddWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {\n    week[token] = toInt(input);\n});\n\n// HELPERS\n\nfunction parseWeekday(input, locale) {\n    if (typeof input !== 'string') {\n        return input;\n    }\n\n    if (!isNaN(input)) {\n        return parseInt(input, 10);\n    }\n\n    input = locale.weekdaysParse(input);\n    if (typeof input === 'number') {\n        return input;\n    }\n\n    return null;\n}\n\nfunction parseIsoWeekday(input, locale) {\n    if (typeof input === 'string') {\n        return locale.weekdaysParse(input) % 7 || 7;\n    }\n    return isNaN(input) ? null : input;\n}\n\n// LOCALES\nfunction shiftWeekdays(ws, n) {\n    return ws.slice(n, 7).concat(ws.slice(0, n));\n}\n\nvar defaultLocaleWeekdays =\n        'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),\n    defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),\n    defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),\n    defaultWeekdaysRegex = matchWord,\n    defaultWeekdaysShortRegex = matchWord,\n    defaultWeekdaysMinRegex = matchWord;\n\nfunction localeWeekdays(m, format) {\n    var weekdays = isArray(this._weekdays)\n        ? this._weekdays\n        : this._weekdays[\n              m && m !== true && this._weekdays.isFormat.test(format)\n                  ? 'format'\n                  : 'standalone'\n          ];\n    return m === true\n        ? shiftWeekdays(weekdays, this._week.dow)\n        : m\n          ? weekdays[m.day()]\n          : weekdays;\n}\n\nfunction localeWeekdaysShort(m) {\n    return m === true\n        ? shiftWeekdays(this._weekdaysShort, this._week.dow)\n        : m\n          ? this._weekdaysShort[m.day()]\n          : this._weekdaysShort;\n}\n\nfunction localeWeekdaysMin(m) {\n    return m === true\n        ? shiftWeekdays(this._weekdaysMin, this._week.dow)\n        : m\n          ? this._weekdaysMin[m.day()]\n          : this._weekdaysMin;\n}\n\nfunction handleStrictParse$1(weekdayName, format, strict) {\n    var i,\n        ii,\n        mom,\n        llc = weekdayName.toLocaleLowerCase();\n    if (!this._weekdaysParse) {\n        this._weekdaysParse = [];\n        this._shortWeekdaysParse = [];\n        this._minWeekdaysParse = [];\n\n        for (i = 0; i < 7; ++i) {\n            mom = createUTC([2000, 1]).day(i);\n            this._minWeekdaysParse[i] = this.weekdaysMin(\n                mom,\n                ''\n            ).toLocaleLowerCase();\n            this._shortWeekdaysParse[i] = this.weekdaysShort(\n                mom,\n                ''\n            ).toLocaleLowerCase();\n            this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();\n        }\n    }\n\n    if (strict) {\n        if (format === 'dddd') {\n            ii = indexOf.call(this._weekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        } else if (format === 'ddd') {\n            ii = indexOf.call(this._shortWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        } else {\n            ii = indexOf.call(this._minWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        }\n    } else {\n        if (format === 'dddd') {\n            ii = indexOf.call(this._weekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf.call(this._shortWeekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf.call(this._minWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        } else if (format === 'ddd') {\n            ii = indexOf.call(this._shortWeekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf.call(this._weekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf.call(this._minWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        } else {\n            ii = indexOf.call(this._minWeekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf.call(this._weekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf.call(this._shortWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        }\n    }\n}\n\nfunction localeWeekdaysParse(weekdayName, format, strict) {\n    var i, mom, regex;\n\n    if (this._weekdaysParseExact) {\n        return handleStrictParse$1.call(this, weekdayName, format, strict);\n    }\n\n    if (!this._weekdaysParse) {\n        this._weekdaysParse = [];\n        this._minWeekdaysParse = [];\n        this._shortWeekdaysParse = [];\n        this._fullWeekdaysParse = [];\n    }\n\n    for (i = 0; i < 7; i++) {\n        // make the regex if we don't have it already\n\n        mom = createUTC([2000, 1]).day(i);\n        if (strict && !this._fullWeekdaysParse[i]) {\n            this._fullWeekdaysParse[i] = new RegExp(\n                '^' + this.weekdays(mom, '').replace('.', '\\\\.?') + '$',\n                'i'\n            );\n            this._shortWeekdaysParse[i] = new RegExp(\n                '^' + this.weekdaysShort(mom, '').replace('.', '\\\\.?') + '$',\n                'i'\n            );\n            this._minWeekdaysParse[i] = new RegExp(\n                '^' + this.weekdaysMin(mom, '').replace('.', '\\\\.?') + '$',\n                'i'\n            );\n        }\n        if (!this._weekdaysParse[i]) {\n            regex =\n                '^' +\n                this.weekdays(mom, '') +\n                '|^' +\n                this.weekdaysShort(mom, '') +\n                '|^' +\n                this.weekdaysMin(mom, '');\n            this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\n        }\n        // test the regex\n        if (\n            strict &&\n            format === 'dddd' &&\n            this._fullWeekdaysParse[i].test(weekdayName)\n        ) {\n            return i;\n        } else if (\n            strict &&\n            format === 'ddd' &&\n            this._shortWeekdaysParse[i].test(weekdayName)\n        ) {\n            return i;\n        } else if (\n            strict &&\n            format === 'dd' &&\n            this._minWeekdaysParse[i].test(weekdayName)\n        ) {\n            return i;\n        } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {\n            return i;\n        }\n    }\n}\n\n// MOMENTS\n\nfunction getSetDayOfWeek(input) {\n    if (!this.isValid()) {\n        return input != null ? this : NaN;\n    }\n\n    var day = get(this, 'Day');\n    if (input != null) {\n        input = parseWeekday(input, this.localeData());\n        return this.add(input - day, 'd');\n    } else {\n        return day;\n    }\n}\n\nfunction getSetLocaleDayOfWeek(input) {\n    if (!this.isValid()) {\n        return input != null ? this : NaN;\n    }\n    var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\n    return input == null ? weekday : this.add(input - weekday, 'd');\n}\n\nfunction getSetISODayOfWeek(input) {\n    if (!this.isValid()) {\n        return input != null ? this : NaN;\n    }\n\n    // behaves the same as moment#day except\n    // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\n    // as a setter, sunday should belong to the previous week.\n\n    if (input != null) {\n        var weekday = parseIsoWeekday(input, this.localeData());\n        return this.day(this.day() % 7 ? weekday : weekday - 7);\n    } else {\n        return this.day() || 7;\n    }\n}\n\nfunction weekdaysRegex(isStrict) {\n    if (this._weekdaysParseExact) {\n        if (!hasOwnProp(this, '_weekdaysRegex')) {\n            computeWeekdaysParse.call(this);\n        }\n        if (isStrict) {\n            return this._weekdaysStrictRegex;\n        } else {\n            return this._weekdaysRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_weekdaysRegex')) {\n            this._weekdaysRegex = defaultWeekdaysRegex;\n        }\n        return this._weekdaysStrictRegex && isStrict\n            ? this._weekdaysStrictRegex\n            : this._weekdaysRegex;\n    }\n}\n\nfunction weekdaysShortRegex(isStrict) {\n    if (this._weekdaysParseExact) {\n        if (!hasOwnProp(this, '_weekdaysRegex')) {\n            computeWeekdaysParse.call(this);\n        }\n        if (isStrict) {\n            return this._weekdaysShortStrictRegex;\n        } else {\n            return this._weekdaysShortRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_weekdaysShortRegex')) {\n            this._weekdaysShortRegex = defaultWeekdaysShortRegex;\n        }\n        return this._weekdaysShortStrictRegex && isStrict\n            ? this._weekdaysShortStrictRegex\n            : this._weekdaysShortRegex;\n    }\n}\n\nfunction weekdaysMinRegex(isStrict) {\n    if (this._weekdaysParseExact) {\n        if (!hasOwnProp(this, '_weekdaysRegex')) {\n            computeWeekdaysParse.call(this);\n        }\n        if (isStrict) {\n            return this._weekdaysMinStrictRegex;\n        } else {\n            return this._weekdaysMinRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_weekdaysMinRegex')) {\n            this._weekdaysMinRegex = defaultWeekdaysMinRegex;\n        }\n        return this._weekdaysMinStrictRegex && isStrict\n            ? this._weekdaysMinStrictRegex\n            : this._weekdaysMinRegex;\n    }\n}\n\nfunction computeWeekdaysParse() {\n    function cmpLenRev(a, b) {\n        return b.length - a.length;\n    }\n\n    var minPieces = [],\n        shortPieces = [],\n        longPieces = [],\n        mixedPieces = [],\n        i,\n        mom,\n        minp,\n        shortp,\n        longp;\n    for (i = 0; i < 7; i++) {\n        // make the regex if we don't have it already\n        mom = createUTC([2000, 1]).day(i);\n        minp = regexEscape(this.weekdaysMin(mom, ''));\n        shortp = regexEscape(this.weekdaysShort(mom, ''));\n        longp = regexEscape(this.weekdays(mom, ''));\n        minPieces.push(minp);\n        shortPieces.push(shortp);\n        longPieces.push(longp);\n        mixedPieces.push(minp);\n        mixedPieces.push(shortp);\n        mixedPieces.push(longp);\n    }\n    // Sorting makes sure if one weekday (or abbr) is a prefix of another it\n    // will match the longer piece.\n    minPieces.sort(cmpLenRev);\n    shortPieces.sort(cmpLenRev);\n    longPieces.sort(cmpLenRev);\n    mixedPieces.sort(cmpLenRev);\n\n    this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n    this._weekdaysShortRegex = this._weekdaysRegex;\n    this._weekdaysMinRegex = this._weekdaysRegex;\n\n    this._weekdaysStrictRegex = new RegExp(\n        '^(' + longPieces.join('|') + ')',\n        'i'\n    );\n    this._weekdaysShortStrictRegex = new RegExp(\n        '^(' + shortPieces.join('|') + ')',\n        'i'\n    );\n    this._weekdaysMinStrictRegex = new RegExp(\n        '^(' + minPieces.join('|') + ')',\n        'i'\n    );\n}\n\n// FORMATTING\n\nfunction hFormat() {\n    return this.hours() % 12 || 12;\n}\n\nfunction kFormat() {\n    return this.hours() || 24;\n}\n\naddFormatToken('H', ['HH', 2], 0, 'hour');\naddFormatToken('h', ['hh', 2], 0, hFormat);\naddFormatToken('k', ['kk', 2], 0, kFormat);\n\naddFormatToken('hmm', 0, 0, function () {\n    return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);\n});\n\naddFormatToken('hmmss', 0, 0, function () {\n    return (\n        '' +\n        hFormat.apply(this) +\n        zeroFill(this.minutes(), 2) +\n        zeroFill(this.seconds(), 2)\n    );\n});\n\naddFormatToken('Hmm', 0, 0, function () {\n    return '' + this.hours() + zeroFill(this.minutes(), 2);\n});\n\naddFormatToken('Hmmss', 0, 0, function () {\n    return (\n        '' +\n        this.hours() +\n        zeroFill(this.minutes(), 2) +\n        zeroFill(this.seconds(), 2)\n    );\n});\n\nfunction meridiem(token, lowercase) {\n    addFormatToken(token, 0, 0, function () {\n        return this.localeData().meridiem(\n            this.hours(),\n            this.minutes(),\n            lowercase\n        );\n    });\n}\n\nmeridiem('a', true);\nmeridiem('A', false);\n\n// PARSING\n\nfunction matchMeridiem(isStrict, locale) {\n    return locale._meridiemParse;\n}\n\naddRegexToken('a', matchMeridiem);\naddRegexToken('A', matchMeridiem);\naddRegexToken('H', match1to2, match1to2HasZero);\naddRegexToken('h', match1to2, match1to2NoLeadingZero);\naddRegexToken('k', match1to2, match1to2NoLeadingZero);\naddRegexToken('HH', match1to2, match2);\naddRegexToken('hh', match1to2, match2);\naddRegexToken('kk', match1to2, match2);\n\naddRegexToken('hmm', match3to4);\naddRegexToken('hmmss', match5to6);\naddRegexToken('Hmm', match3to4);\naddRegexToken('Hmmss', match5to6);\n\naddParseToken(['H', 'HH'], HOUR);\naddParseToken(['k', 'kk'], function (input, array, config) {\n    var kInput = toInt(input);\n    array[HOUR] = kInput === 24 ? 0 : kInput;\n});\naddParseToken(['a', 'A'], function (input, array, config) {\n    config._isPm = config._locale.isPM(input);\n    config._meridiem = input;\n});\naddParseToken(['h', 'hh'], function (input, array, config) {\n    array[HOUR] = toInt(input);\n    getParsingFlags(config).bigHour = true;\n});\naddParseToken('hmm', function (input, array, config) {\n    var pos = input.length - 2;\n    array[HOUR] = toInt(input.substr(0, pos));\n    array[MINUTE] = toInt(input.substr(pos));\n    getParsingFlags(config).bigHour = true;\n});\naddParseToken('hmmss', function (input, array, config) {\n    var pos1 = input.length - 4,\n        pos2 = input.length - 2;\n    array[HOUR] = toInt(input.substr(0, pos1));\n    array[MINUTE] = toInt(input.substr(pos1, 2));\n    array[SECOND] = toInt(input.substr(pos2));\n    getParsingFlags(config).bigHour = true;\n});\naddParseToken('Hmm', function (input, array, config) {\n    var pos = input.length - 2;\n    array[HOUR] = toInt(input.substr(0, pos));\n    array[MINUTE] = toInt(input.substr(pos));\n});\naddParseToken('Hmmss', function (input, array, config) {\n    var pos1 = input.length - 4,\n        pos2 = input.length - 2;\n    array[HOUR] = toInt(input.substr(0, pos1));\n    array[MINUTE] = toInt(input.substr(pos1, 2));\n    array[SECOND] = toInt(input.substr(pos2));\n});\n\n// LOCALES\n\nfunction localeIsPM(input) {\n    // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\n    // Using charAt should be more compatible.\n    return (input + '').toLowerCase().charAt(0) === 'p';\n}\n\nvar defaultLocaleMeridiemParse = /[ap]\\.?m?\\.?/i,\n    // Setting the hour should keep the time, because the user explicitly\n    // specified which hour they want. So trying to maintain the same hour (in\n    // a new timezone) makes sense. Adding/subtracting hours does not follow\n    // this rule.\n    getSetHour = makeGetSet('Hours', true);\n\nfunction localeMeridiem(hours, minutes, isLower) {\n    if (hours > 11) {\n        return isLower ? 'pm' : 'PM';\n    } else {\n        return isLower ? 'am' : 'AM';\n    }\n}\n\nvar baseConfig = {\n    calendar: defaultCalendar,\n    longDateFormat: defaultLongDateFormat,\n    invalidDate: defaultInvalidDate,\n    ordinal: defaultOrdinal,\n    dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,\n    relativeTime: defaultRelativeTime,\n\n    months: defaultLocaleMonths,\n    monthsShort: defaultLocaleMonthsShort,\n\n    week: defaultLocaleWeek,\n\n    weekdays: defaultLocaleWeekdays,\n    weekdaysMin: defaultLocaleWeekdaysMin,\n    weekdaysShort: defaultLocaleWeekdaysShort,\n\n    meridiemParse: defaultLocaleMeridiemParse,\n};\n\n// internal storage for locale config files\nvar locales = {},\n    localeFamilies = {},\n    globalLocale;\n\nfunction commonPrefix(arr1, arr2) {\n    var i,\n        minl = Math.min(arr1.length, arr2.length);\n    for (i = 0; i < minl; i += 1) {\n        if (arr1[i] !== arr2[i]) {\n            return i;\n        }\n    }\n    return minl;\n}\n\nfunction normalizeLocale(key) {\n    return key ? key.toLowerCase().replace('_', '-') : key;\n}\n\n// pick the locale from the array\n// try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\n// substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\nfunction chooseLocale(names) {\n    var i = 0,\n        j,\n        next,\n        locale,\n        split;\n\n    while (i < names.length) {\n        split = normalizeLocale(names[i]).split('-');\n        j = split.length;\n        next = normalizeLocale(names[i + 1]);\n        next = next ? next.split('-') : null;\n        while (j > 0) {\n            locale = loadLocale(split.slice(0, j).join('-'));\n            if (locale) {\n                return locale;\n            }\n            if (\n                next &&\n                next.length >= j &&\n                commonPrefix(split, next) >= j - 1\n            ) {\n                //the next array item is better than a shallower substring of this one\n                break;\n            }\n            j--;\n        }\n        i++;\n    }\n    return globalLocale;\n}\n\nfunction isLocaleNameSane(name) {\n    // Prevent names that look like filesystem paths, i.e contain '/' or '\\'\n    // Ensure name is available and function returns boolean\n    return !!(name && name.match('^[^/\\\\\\\\]*$'));\n}\n\nfunction loadLocale(name) {\n    var oldLocale = null,\n        aliasedRequire;\n    // TODO: Find a better way to register and load all the locales in Node\n    if (\n        locales[name] === undefined &&\n        typeof module !== 'undefined' &&\n        module &&\n        module.exports &&\n        isLocaleNameSane(name)\n    ) {\n        try {\n            oldLocale = globalLocale._abbr;\n            aliasedRequire = require;\n            aliasedRequire('./locale/' + name);\n            getSetGlobalLocale(oldLocale);\n        } catch (e) {\n            // mark as not found to avoid repeating expensive file require call causing high CPU\n            // when trying to find en-US, en_US, en-us for every format call\n            locales[name] = null; // null means not found\n        }\n    }\n    return locales[name];\n}\n\n// This function will load locale and then set the global locale.  If\n// no arguments are passed in, it will simply return the current global\n// locale key.\nfunction getSetGlobalLocale(key, values) {\n    var data;\n    if (key) {\n        if (isUndefined(values)) {\n            data = getLocale(key);\n        } else {\n            data = defineLocale(key, values);\n        }\n\n        if (data) {\n            // moment.duration._locale = moment._locale = data;\n            globalLocale = data;\n        } else {\n            if (typeof console !== 'undefined' && console.warn) {\n                //warn user if arguments are passed but the locale could not be set\n                console.warn(\n                    'Locale ' + key + ' not found. Did you forget to load it?'\n                );\n            }\n        }\n    }\n\n    return globalLocale._abbr;\n}\n\nfunction defineLocale(name, config) {\n    if (config !== null) {\n        var locale,\n            parentConfig = baseConfig;\n        config.abbr = name;\n        if (locales[name] != null) {\n            deprecateSimple(\n                'defineLocaleOverride',\n                'use moment.updateLocale(localeName, config) to change ' +\n                    'an existing locale. moment.defineLocale(localeName, ' +\n                    'config) should only be used for creating a new locale ' +\n                    'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.'\n            );\n            parentConfig = locales[name]._config;\n        } else if (config.parentLocale != null) {\n            if (locales[config.parentLocale] != null) {\n                parentConfig = locales[config.parentLocale]._config;\n            } else {\n                locale = loadLocale(config.parentLocale);\n                if (locale != null) {\n                    parentConfig = locale._config;\n                } else {\n                    if (!localeFamilies[config.parentLocale]) {\n                        localeFamilies[config.parentLocale] = [];\n                    }\n                    localeFamilies[config.parentLocale].push({\n                        name: name,\n                        config: config,\n                    });\n                    return null;\n                }\n            }\n        }\n        locales[name] = new Locale(mergeConfigs(parentConfig, config));\n\n        if (localeFamilies[name]) {\n            localeFamilies[name].forEach(function (x) {\n                defineLocale(x.name, x.config);\n            });\n        }\n\n        // backwards compat for now: also set the locale\n        // make sure we set the locale AFTER all child locales have been\n        // created, so we won't end up with the child locale set.\n        getSetGlobalLocale(name);\n\n        return locales[name];\n    } else {\n        // useful for testing\n        delete locales[name];\n        return null;\n    }\n}\n\nfunction updateLocale(name, config) {\n    if (config != null) {\n        var locale,\n            tmpLocale,\n            parentConfig = baseConfig;\n\n        if (locales[name] != null && locales[name].parentLocale != null) {\n            // Update existing child locale in-place to avoid memory-leaks\n            locales[name].set(mergeConfigs(locales[name]._config, config));\n        } else {\n            // MERGE\n            tmpLocale = loadLocale(name);\n            if (tmpLocale != null) {\n                parentConfig = tmpLocale._config;\n            }\n            config = mergeConfigs(parentConfig, config);\n            if (tmpLocale == null) {\n                // updateLocale is called for creating a new locale\n                // Set abbr so it will have a name (getters return\n                // undefined otherwise).\n                config.abbr = name;\n            }\n            locale = new Locale(config);\n            locale.parentLocale = locales[name];\n            locales[name] = locale;\n        }\n\n        // backwards compat for now: also set the locale\n        getSetGlobalLocale(name);\n    } else {\n        // pass null for config to unupdate, useful for tests\n        if (locales[name] != null) {\n            if (locales[name].parentLocale != null) {\n                locales[name] = locales[name].parentLocale;\n                if (name === getSetGlobalLocale()) {\n                    getSetGlobalLocale(name);\n                }\n            } else if (locales[name] != null) {\n                delete locales[name];\n            }\n        }\n    }\n    return locales[name];\n}\n\n// returns locale data\nfunction getLocale(key) {\n    var locale;\n\n    if (key && key._locale && key._locale._abbr) {\n        key = key._locale._abbr;\n    }\n\n    if (!key) {\n        return globalLocale;\n    }\n\n    if (!isArray(key)) {\n        //short-circuit everything else\n        locale = loadLocale(key);\n        if (locale) {\n            return locale;\n        }\n        key = [key];\n    }\n\n    return chooseLocale(key);\n}\n\nfunction listLocales() {\n    return keys(locales);\n}\n\nfunction checkOverflow(m) {\n    var overflow,\n        a = m._a;\n\n    if (a && getParsingFlags(m).overflow === -2) {\n        overflow =\n            a[MONTH] < 0 || a[MONTH] > 11\n                ? MONTH\n                : a[DATE] < 1 || a[DATE] > daysInMonth(a[YEAR], a[MONTH])\n                  ? DATE\n                  : a[HOUR] < 0 ||\n                      a[HOUR] > 24 ||\n                      (a[HOUR] === 24 &&\n                          (a[MINUTE] !== 0 ||\n                              a[SECOND] !== 0 ||\n                              a[MILLISECOND] !== 0))\n                    ? HOUR\n                    : a[MINUTE] < 0 || a[MINUTE] > 59\n                      ? MINUTE\n                      : a[SECOND] < 0 || a[SECOND] > 59\n                        ? SECOND\n                        : a[MILLISECOND] < 0 || a[MILLISECOND] > 999\n                          ? MILLISECOND\n                          : -1;\n\n        if (\n            getParsingFlags(m)._overflowDayOfYear &&\n            (overflow < YEAR || overflow > DATE)\n        ) {\n            overflow = DATE;\n        }\n        if (getParsingFlags(m)._overflowWeeks && overflow === -1) {\n            overflow = WEEK;\n        }\n        if (getParsingFlags(m)._overflowWeekday && overflow === -1) {\n            overflow = WEEKDAY;\n        }\n\n        getParsingFlags(m).overflow = overflow;\n    }\n\n    return m;\n}\n\n// iso 8601 regex\n// 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\nvar extendedIsoRegex =\n        /^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([+-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,\n    basicIsoRegex =\n        /^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d|))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([+-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,\n    tzRegex = /Z|[+-]\\d\\d(?::?\\d\\d)?/,\n    isoDates = [\n        ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d\\d-\\d\\d/],\n        ['YYYY-MM-DD', /\\d{4}-\\d\\d-\\d\\d/],\n        ['GGGG-[W]WW-E', /\\d{4}-W\\d\\d-\\d/],\n        ['GGGG-[W]WW', /\\d{4}-W\\d\\d/, false],\n        ['YYYY-DDD', /\\d{4}-\\d{3}/],\n        ['YYYY-MM', /\\d{4}-\\d\\d/, false],\n        ['YYYYYYMMDD', /[+-]\\d{10}/],\n        ['YYYYMMDD', /\\d{8}/],\n        ['GGGG[W]WWE', /\\d{4}W\\d{3}/],\n        ['GGGG[W]WW', /\\d{4}W\\d{2}/, false],\n        ['YYYYDDD', /\\d{7}/],\n        ['YYYYMM', /\\d{6}/, false],\n        ['YYYY', /\\d{4}/, false],\n    ],\n    // iso time formats and regexes\n    isoTimes = [\n        ['HH:mm:ss.SSSS', /\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\n        ['HH:mm:ss,SSSS', /\\d\\d:\\d\\d:\\d\\d,\\d+/],\n        ['HH:mm:ss', /\\d\\d:\\d\\d:\\d\\d/],\n        ['HH:mm', /\\d\\d:\\d\\d/],\n        ['HHmmss.SSSS', /\\d\\d\\d\\d\\d\\d\\.\\d+/],\n        ['HHmmss,SSSS', /\\d\\d\\d\\d\\d\\d,\\d+/],\n        ['HHmmss', /\\d\\d\\d\\d\\d\\d/],\n        ['HHmm', /\\d\\d\\d\\d/],\n        ['HH', /\\d\\d/],\n    ],\n    aspNetJsonRegex = /^\\/?Date\\((-?\\d+)/i,\n    // RFC 2822 regex: For details see https://tools.ietf.org/html/rfc2822#section-3.3\n    rfc2822 =\n        /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\\s)?(\\d{1,2})\\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s(\\d{2,4})\\s(\\d\\d):(\\d\\d)(?::(\\d\\d))?\\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\\d{4}))$/,\n    obsOffsets = {\n        UT: 0,\n        GMT: 0,\n        EDT: -4 * 60,\n        EST: -5 * 60,\n        CDT: -5 * 60,\n        CST: -6 * 60,\n        MDT: -6 * 60,\n        MST: -7 * 60,\n        PDT: -7 * 60,\n        PST: -8 * 60,\n    };\n\n// date from iso format\nfunction configFromISO(config) {\n    var i,\n        l,\n        string = config._i,\n        match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),\n        allowTime,\n        dateFormat,\n        timeFormat,\n        tzFormat,\n        isoDatesLen = isoDates.length,\n        isoTimesLen = isoTimes.length;\n\n    if (match) {\n        getParsingFlags(config).iso = true;\n        for (i = 0, l = isoDatesLen; i < l; i++) {\n            if (isoDates[i][1].exec(match[1])) {\n                dateFormat = isoDates[i][0];\n                allowTime = isoDates[i][2] !== false;\n                break;\n            }\n        }\n        if (dateFormat == null) {\n            config._isValid = false;\n            return;\n        }\n        if (match[3]) {\n            for (i = 0, l = isoTimesLen; i < l; i++) {\n                if (isoTimes[i][1].exec(match[3])) {\n                    // match[2] should be 'T' or space\n                    timeFormat = (match[2] || ' ') + isoTimes[i][0];\n                    break;\n                }\n            }\n            if (timeFormat == null) {\n                config._isValid = false;\n                return;\n            }\n        }\n        if (!allowTime && timeFormat != null) {\n            config._isValid = false;\n            return;\n        }\n        if (match[4]) {\n            if (tzRegex.exec(match[4])) {\n                tzFormat = 'Z';\n            } else {\n                config._isValid = false;\n                return;\n            }\n        }\n        config._f = dateFormat + (timeFormat || '') + (tzFormat || '');\n        configFromStringAndFormat(config);\n    } else {\n        config._isValid = false;\n    }\n}\n\nfunction extractFromRFC2822Strings(\n    yearStr,\n    monthStr,\n    dayStr,\n    hourStr,\n    minuteStr,\n    secondStr\n) {\n    var result = [\n        untruncateYear(yearStr),\n        defaultLocaleMonthsShort.indexOf(monthStr),\n        parseInt(dayStr, 10),\n        parseInt(hourStr, 10),\n        parseInt(minuteStr, 10),\n    ];\n\n    if (secondStr) {\n        result.push(parseInt(secondStr, 10));\n    }\n\n    return result;\n}\n\nfunction untruncateYear(yearStr) {\n    var year = parseInt(yearStr, 10);\n    if (year <= 49) {\n        return 2000 + year;\n    } else if (year <= 999) {\n        return 1900 + year;\n    }\n    return year;\n}\n\nfunction preprocessRFC2822(s) {\n    // Remove comments and folding whitespace and replace multiple-spaces with a single space\n    return s\n        .replace(/\\([^()]*\\)|[\\n\\t]/g, ' ')\n        .replace(/(\\s\\s+)/g, ' ')\n        .replace(/^\\s\\s*/, '')\n        .replace(/\\s\\s*$/, '');\n}\n\nfunction checkWeekday(weekdayStr, parsedInput, config) {\n    if (weekdayStr) {\n        // TODO: Replace the vanilla JS Date object with an independent day-of-week check.\n        var weekdayProvided = defaultLocaleWeekdaysShort.indexOf(weekdayStr),\n            weekdayActual = new Date(\n                parsedInput[0],\n                parsedInput[1],\n                parsedInput[2]\n            ).getDay();\n        if (weekdayProvided !== weekdayActual) {\n            getParsingFlags(config).weekdayMismatch = true;\n            config._isValid = false;\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction calculateOffset(obsOffset, militaryOffset, numOffset) {\n    if (obsOffset) {\n        return obsOffsets[obsOffset];\n    } else if (militaryOffset) {\n        // the only allowed military tz is Z\n        return 0;\n    } else {\n        var hm = parseInt(numOffset, 10),\n            m = hm % 100,\n            h = (hm - m) / 100;\n        return h * 60 + m;\n    }\n}\n\n// date and time from ref 2822 format\nfunction configFromRFC2822(config) {\n    var match = rfc2822.exec(preprocessRFC2822(config._i)),\n        parsedArray;\n    if (match) {\n        parsedArray = extractFromRFC2822Strings(\n            match[4],\n            match[3],\n            match[2],\n            match[5],\n            match[6],\n            match[7]\n        );\n        if (!checkWeekday(match[1], parsedArray, config)) {\n            return;\n        }\n\n        config._a = parsedArray;\n        config._tzm = calculateOffset(match[8], match[9], match[10]);\n\n        config._d = createUTCDate.apply(null, config._a);\n        config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n\n        getParsingFlags(config).rfc2822 = true;\n    } else {\n        config._isValid = false;\n    }\n}\n\n// date from 1) ASP.NET, 2) ISO, 3) RFC 2822 formats, or 4) optional fallback if parsing isn't strict\nfunction configFromString(config) {\n    var matched = aspNetJsonRegex.exec(config._i);\n    if (matched !== null) {\n        config._d = new Date(+matched[1]);\n        return;\n    }\n\n    configFromISO(config);\n    if (config._isValid === false) {\n        delete config._isValid;\n    } else {\n        return;\n    }\n\n    configFromRFC2822(config);\n    if (config._isValid === false) {\n        delete config._isValid;\n    } else {\n        return;\n    }\n\n    if (config._strict) {\n        config._isValid = false;\n    } else {\n        // Final attempt, use Input Fallback\n        hooks.createFromInputFallback(config);\n    }\n}\n\nhooks.createFromInputFallback = deprecate(\n    'value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' +\n        'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' +\n        'discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.',\n    function (config) {\n        config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\n    }\n);\n\n// Pick the first defined of two or three arguments.\nfunction defaults(a, b, c) {\n    if (a != null) {\n        return a;\n    }\n    if (b != null) {\n        return b;\n    }\n    return c;\n}\n\nfunction currentDateArray(config) {\n    // hooks is actually the exported moment object\n    var nowValue = new Date(hooks.now());\n    if (config._useUTC) {\n        return [\n            nowValue.getUTCFullYear(),\n            nowValue.getUTCMonth(),\n            nowValue.getUTCDate(),\n        ];\n    }\n    return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];\n}\n\n// convert an array to a date.\n// the array should mirror the parameters below\n// note: all values past the year are optional and will default to the lowest possible value.\n// [year, month, day , hour, minute, second, millisecond]\nfunction configFromArray(config) {\n    var i,\n        date,\n        input = [],\n        currentDate,\n        expectedWeekday,\n        yearToUse;\n\n    if (config._d) {\n        return;\n    }\n\n    currentDate = currentDateArray(config);\n\n    //compute day of the year from weeks and weekdays\n    if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\n        dayOfYearFromWeekInfo(config);\n    }\n\n    //if the day of the year is set, figure out what it is\n    if (config._dayOfYear != null) {\n        yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);\n\n        if (\n            config._dayOfYear > daysInYear(yearToUse) ||\n            config._dayOfYear === 0\n        ) {\n            getParsingFlags(config)._overflowDayOfYear = true;\n        }\n\n        date = createUTCDate(yearToUse, 0, config._dayOfYear);\n        config._a[MONTH] = date.getUTCMonth();\n        config._a[DATE] = date.getUTCDate();\n    }\n\n    // Default to current date.\n    // * if no year, month, day of month are given, default to today\n    // * if day of month is given, default month and year\n    // * if month is given, default only year\n    // * if year is given, don't default anything\n    for (i = 0; i < 3 && config._a[i] == null; ++i) {\n        config._a[i] = input[i] = currentDate[i];\n    }\n\n    // Zero out whatever was not defaulted, including time\n    for (; i < 7; i++) {\n        config._a[i] = input[i] =\n            config._a[i] == null ? (i === 2 ? 1 : 0) : config._a[i];\n    }\n\n    // Check for 24:00:00.000\n    if (\n        config._a[HOUR] === 24 &&\n        config._a[MINUTE] === 0 &&\n        config._a[SECOND] === 0 &&\n        config._a[MILLISECOND] === 0\n    ) {\n        config._nextDay = true;\n        config._a[HOUR] = 0;\n    }\n\n    config._d = (config._useUTC ? createUTCDate : createDate).apply(\n        null,\n        input\n    );\n    expectedWeekday = config._useUTC\n        ? config._d.getUTCDay()\n        : config._d.getDay();\n\n    // Apply timezone offset from input. The actual utcOffset can be changed\n    // with parseZone.\n    if (config._tzm != null) {\n        config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n    }\n\n    if (config._nextDay) {\n        config._a[HOUR] = 24;\n    }\n\n    // check for mismatching day of week\n    if (\n        config._w &&\n        typeof config._w.d !== 'undefined' &&\n        config._w.d !== expectedWeekday\n    ) {\n        getParsingFlags(config).weekdayMismatch = true;\n    }\n}\n\nfunction dayOfYearFromWeekInfo(config) {\n    var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow, curWeek;\n\n    w = config._w;\n    if (w.GG != null || w.W != null || w.E != null) {\n        dow = 1;\n        doy = 4;\n\n        // TODO: We need to take the current isoWeekYear, but that depends on\n        // how we interpret now (local, utc, fixed offset). So create\n        // a now version of current config (take local/utc/offset flags, and\n        // create now).\n        weekYear = defaults(\n            w.GG,\n            config._a[YEAR],\n            weekOfYear(createLocal(), 1, 4).year\n        );\n        week = defaults(w.W, 1);\n        weekday = defaults(w.E, 1);\n        if (weekday < 1 || weekday > 7) {\n            weekdayOverflow = true;\n        }\n    } else {\n        dow = config._locale._week.dow;\n        doy = config._locale._week.doy;\n\n        curWeek = weekOfYear(createLocal(), dow, doy);\n\n        weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);\n\n        // Default to current week.\n        week = defaults(w.w, curWeek.week);\n\n        if (w.d != null) {\n            // weekday -- low day numbers are considered next week\n            weekday = w.d;\n            if (weekday < 0 || weekday > 6) {\n                weekdayOverflow = true;\n            }\n        } else if (w.e != null) {\n            // local weekday -- counting starts from beginning of week\n            weekday = w.e + dow;\n            if (w.e < 0 || w.e > 6) {\n                weekdayOverflow = true;\n            }\n        } else {\n            // default to beginning of week\n            weekday = dow;\n        }\n    }\n    if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {\n        getParsingFlags(config)._overflowWeeks = true;\n    } else if (weekdayOverflow != null) {\n        getParsingFlags(config)._overflowWeekday = true;\n    } else {\n        temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);\n        config._a[YEAR] = temp.year;\n        config._dayOfYear = temp.dayOfYear;\n    }\n}\n\n// constant that refers to the ISO standard\nhooks.ISO_8601 = function () {};\n\n// constant that refers to the RFC 2822 form\nhooks.RFC_2822 = function () {};\n\n// date from string and format string\nfunction configFromStringAndFormat(config) {\n    // TODO: Move this to another part of the creation flow to prevent circular deps\n    if (config._f === hooks.ISO_8601) {\n        configFromISO(config);\n        return;\n    }\n    if (config._f === hooks.RFC_2822) {\n        configFromRFC2822(config);\n        return;\n    }\n    config._a = [];\n    getParsingFlags(config).empty = true;\n\n    // This array is used to make a Date, either with `new Date` or `Date.UTC`\n    var string = '' + config._i,\n        i,\n        parsedInput,\n        tokens,\n        token,\n        skipped,\n        stringLength = string.length,\n        totalParsedInputLength = 0,\n        era,\n        tokenLen;\n\n    tokens =\n        expandFormat(config._f, config._locale).match(formattingTokens) || [];\n    tokenLen = tokens.length;\n    for (i = 0; i < tokenLen; i++) {\n        token = tokens[i];\n        parsedInput = (string.match(getParseRegexForToken(token, config)) ||\n            [])[0];\n        if (parsedInput) {\n            skipped = string.substr(0, string.indexOf(parsedInput));\n            if (skipped.length > 0) {\n                getParsingFlags(config).unusedInput.push(skipped);\n            }\n            string = string.slice(\n                string.indexOf(parsedInput) + parsedInput.length\n            );\n            totalParsedInputLength += parsedInput.length;\n        }\n        // don't parse if it's not a known token\n        if (formatTokenFunctions[token]) {\n            if (parsedInput) {\n                getParsingFlags(config).empty = false;\n            } else {\n                getParsingFlags(config).unusedTokens.push(token);\n            }\n            addTimeToArrayFromToken(token, parsedInput, config);\n        } else if (config._strict && !parsedInput) {\n            getParsingFlags(config).unusedTokens.push(token);\n        }\n    }\n\n    // add remaining unparsed input length to the string\n    getParsingFlags(config).charsLeftOver =\n        stringLength - totalParsedInputLength;\n    if (string.length > 0) {\n        getParsingFlags(config).unusedInput.push(string);\n    }\n\n    // clear _12h flag if hour is <= 12\n    if (\n        config._a[HOUR] <= 12 &&\n        getParsingFlags(config).bigHour === true &&\n        config._a[HOUR] > 0\n    ) {\n        getParsingFlags(config).bigHour = undefined;\n    }\n\n    getParsingFlags(config).parsedDateParts = config._a.slice(0);\n    getParsingFlags(config).meridiem = config._meridiem;\n    // handle meridiem\n    config._a[HOUR] = meridiemFixWrap(\n        config._locale,\n        config._a[HOUR],\n        config._meridiem\n    );\n\n    // handle era\n    era = getParsingFlags(config).era;\n    if (era !== null) {\n        config._a[YEAR] = config._locale.erasConvertYear(era, config._a[YEAR]);\n    }\n\n    configFromArray(config);\n    checkOverflow(config);\n}\n\nfunction meridiemFixWrap(locale, hour, meridiem) {\n    var isPm;\n\n    if (meridiem == null) {\n        // nothing to do\n        return hour;\n    }\n    if (locale.meridiemHour != null) {\n        return locale.meridiemHour(hour, meridiem);\n    } else if (locale.isPM != null) {\n        // Fallback\n        isPm = locale.isPM(meridiem);\n        if (isPm && hour < 12) {\n            hour += 12;\n        }\n        if (!isPm && hour === 12) {\n            hour = 0;\n        }\n        return hour;\n    } else {\n        // this is not supposed to happen\n        return hour;\n    }\n}\n\n// date from string and array of format strings\nfunction configFromStringAndArray(config) {\n    var tempConfig,\n        bestMoment,\n        scoreToBeat,\n        i,\n        currentScore,\n        validFormatFound,\n        bestFormatIsValid = false,\n        configfLen = config._f.length;\n\n    if (configfLen === 0) {\n        getParsingFlags(config).invalidFormat = true;\n        config._d = new Date(NaN);\n        return;\n    }\n\n    for (i = 0; i < configfLen; i++) {\n        currentScore = 0;\n        validFormatFound = false;\n        tempConfig = copyConfig({}, config);\n        if (config._useUTC != null) {\n            tempConfig._useUTC = config._useUTC;\n        }\n        tempConfig._f = config._f[i];\n        configFromStringAndFormat(tempConfig);\n\n        if (isValid(tempConfig)) {\n            validFormatFound = true;\n        }\n\n        // if there is any input that was not parsed add a penalty for that format\n        currentScore += getParsingFlags(tempConfig).charsLeftOver;\n\n        //or tokens\n        currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;\n\n        getParsingFlags(tempConfig).score = currentScore;\n\n        if (!bestFormatIsValid) {\n            if (\n                scoreToBeat == null ||\n                currentScore < scoreToBeat ||\n                validFormatFound\n            ) {\n                scoreToBeat = currentScore;\n                bestMoment = tempConfig;\n                if (validFormatFound) {\n                    bestFormatIsValid = true;\n                }\n            }\n        } else {\n            if (currentScore < scoreToBeat) {\n                scoreToBeat = currentScore;\n                bestMoment = tempConfig;\n            }\n        }\n    }\n\n    extend(config, bestMoment || tempConfig);\n}\n\nfunction configFromObject(config) {\n    if (config._d) {\n        return;\n    }\n\n    var i = normalizeObjectUnits(config._i),\n        dayOrDate = i.day === undefined ? i.date : i.day;\n    config._a = map(\n        [i.year, i.month, dayOrDate, i.hour, i.minute, i.second, i.millisecond],\n        function (obj) {\n            return obj && parseInt(obj, 10);\n        }\n    );\n\n    configFromArray(config);\n}\n\nfunction createFromConfig(config) {\n    var res = new Moment(checkOverflow(prepareConfig(config)));\n    if (res._nextDay) {\n        // Adding is smart enough around DST\n        res.add(1, 'd');\n        res._nextDay = undefined;\n    }\n\n    return res;\n}\n\nfunction prepareConfig(config) {\n    var input = config._i,\n        format = config._f;\n\n    config._locale = config._locale || getLocale(config._l);\n\n    if (input === null || (format === undefined && input === '')) {\n        return createInvalid({ nullInput: true });\n    }\n\n    if (typeof input === 'string') {\n        config._i = input = config._locale.preparse(input);\n    }\n\n    if (isMoment(input)) {\n        return new Moment(checkOverflow(input));\n    } else if (isDate(input)) {\n        config._d = input;\n    } else if (isArray(format)) {\n        configFromStringAndArray(config);\n    } else if (format) {\n        configFromStringAndFormat(config);\n    } else {\n        configFromInput(config);\n    }\n\n    if (!isValid(config)) {\n        config._d = null;\n    }\n\n    return config;\n}\n\nfunction configFromInput(config) {\n    var input = config._i;\n    if (isUndefined(input)) {\n        config._d = new Date(hooks.now());\n    } else if (isDate(input)) {\n        config._d = new Date(input.valueOf());\n    } else if (typeof input === 'string') {\n        configFromString(config);\n    } else if (isArray(input)) {\n        config._a = map(input.slice(0), function (obj) {\n            return parseInt(obj, 10);\n        });\n        configFromArray(config);\n    } else if (isObject(input)) {\n        configFromObject(config);\n    } else if (isNumber(input)) {\n        // from milliseconds\n        config._d = new Date(input);\n    } else {\n        hooks.createFromInputFallback(config);\n    }\n}\n\nfunction createLocalOrUTC(input, format, locale, strict, isUTC) {\n    var c = {};\n\n    if (format === true || format === false) {\n        strict = format;\n        format = undefined;\n    }\n\n    if (locale === true || locale === false) {\n        strict = locale;\n        locale = undefined;\n    }\n\n    if (\n        (isObject(input) && isObjectEmpty(input)) ||\n        (isArray(input) && input.length === 0)\n    ) {\n        input = undefined;\n    }\n    // object construction must be done this way.\n    // https://github.com/moment/moment/issues/1423\n    c._isAMomentObject = true;\n    c._useUTC = c._isUTC = isUTC;\n    c._l = locale;\n    c._i = input;\n    c._f = format;\n    c._strict = strict;\n\n    return createFromConfig(c);\n}\n\nfunction createLocal(input, format, locale, strict) {\n    return createLocalOrUTC(input, format, locale, strict, false);\n}\n\nvar prototypeMin = deprecate(\n        'moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',\n        function () {\n            var other = createLocal.apply(null, arguments);\n            if (this.isValid() && other.isValid()) {\n                return other < this ? this : other;\n            } else {\n                return createInvalid();\n            }\n        }\n    ),\n    prototypeMax = deprecate(\n        'moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',\n        function () {\n            var other = createLocal.apply(null, arguments);\n            if (this.isValid() && other.isValid()) {\n                return other > this ? this : other;\n            } else {\n                return createInvalid();\n            }\n        }\n    );\n\n// Pick a moment m from moments so that m[fn](other) is true for all\n// other. This relies on the function fn to be transitive.\n//\n// moments should either be an array of moment objects or an array, whose\n// first element is an array of moment objects.\nfunction pickBy(fn, moments) {\n    var res, i;\n    if (moments.length === 1 && isArray(moments[0])) {\n        moments = moments[0];\n    }\n    if (!moments.length) {\n        return createLocal();\n    }\n    res = moments[0];\n    for (i = 1; i < moments.length; ++i) {\n        if (!moments[i].isValid() || moments[i][fn](res)) {\n            res = moments[i];\n        }\n    }\n    return res;\n}\n\n// TODO: Use [].sort instead?\nfunction min() {\n    var args = [].slice.call(arguments, 0);\n\n    return pickBy('isBefore', args);\n}\n\nfunction max() {\n    var args = [].slice.call(arguments, 0);\n\n    return pickBy('isAfter', args);\n}\n\nvar now = function () {\n    return Date.now ? Date.now() : +new Date();\n};\n\nvar ordering = [\n    'year',\n    'quarter',\n    'month',\n    'week',\n    'day',\n    'hour',\n    'minute',\n    'second',\n    'millisecond',\n];\n\nfunction isDurationValid(m) {\n    var key,\n        unitHasDecimal = false,\n        i,\n        orderLen = ordering.length;\n    for (key in m) {\n        if (\n            hasOwnProp(m, key) &&\n            !(\n                indexOf.call(ordering, key) !== -1 &&\n                (m[key] == null || !isNaN(m[key]))\n            )\n        ) {\n            return false;\n        }\n    }\n\n    for (i = 0; i < orderLen; ++i) {\n        if (m[ordering[i]]) {\n            if (unitHasDecimal) {\n                return false; // only allow non-integers for smallest unit\n            }\n            if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {\n                unitHasDecimal = true;\n            }\n        }\n    }\n\n    return true;\n}\n\nfunction isValid$1() {\n    return this._isValid;\n}\n\nfunction createInvalid$1() {\n    return createDuration(NaN);\n}\n\nfunction Duration(duration) {\n    var normalizedInput = normalizeObjectUnits(duration),\n        years = normalizedInput.year || 0,\n        quarters = normalizedInput.quarter || 0,\n        months = normalizedInput.month || 0,\n        weeks = normalizedInput.week || normalizedInput.isoWeek || 0,\n        days = normalizedInput.day || 0,\n        hours = normalizedInput.hour || 0,\n        minutes = normalizedInput.minute || 0,\n        seconds = normalizedInput.second || 0,\n        milliseconds = normalizedInput.millisecond || 0;\n\n    this._isValid = isDurationValid(normalizedInput);\n\n    // representation for dateAddRemove\n    this._milliseconds =\n        +milliseconds +\n        seconds * 1e3 + // 1000\n        minutes * 6e4 + // 1000 * 60\n        hours * 1000 * 60 * 60; //using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978\n    // Because of dateAddRemove treats 24 hours as different from a\n    // day when working around DST, we need to store them separately\n    this._days = +days + weeks * 7;\n    // It is impossible to translate months into days without knowing\n    // which months you are are talking about, so we have to store\n    // it separately.\n    this._months = +months + quarters * 3 + years * 12;\n\n    this._data = {};\n\n    this._locale = getLocale();\n\n    this._bubble();\n}\n\nfunction isDuration(obj) {\n    return obj instanceof Duration;\n}\n\nfunction absRound(number) {\n    if (number < 0) {\n        return Math.round(-1 * number) * -1;\n    } else {\n        return Math.round(number);\n    }\n}\n\n// compare two arrays, return the number of differences\nfunction compareArrays(array1, array2, dontConvert) {\n    var len = Math.min(array1.length, array2.length),\n        lengthDiff = Math.abs(array1.length - array2.length),\n        diffs = 0,\n        i;\n    for (i = 0; i < len; i++) {\n        if (\n            (dontConvert && array1[i] !== array2[i]) ||\n            (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))\n        ) {\n            diffs++;\n        }\n    }\n    return diffs + lengthDiff;\n}\n\n// FORMATTING\n\nfunction offset(token, separator) {\n    addFormatToken(token, 0, 0, function () {\n        var offset = this.utcOffset(),\n            sign = '+';\n        if (offset < 0) {\n            offset = -offset;\n            sign = '-';\n        }\n        return (\n            sign +\n            zeroFill(~~(offset / 60), 2) +\n            separator +\n            zeroFill(~~offset % 60, 2)\n        );\n    });\n}\n\noffset('Z', ':');\noffset('ZZ', '');\n\n// PARSING\n\naddRegexToken('Z', matchShortOffset);\naddRegexToken('ZZ', matchShortOffset);\naddParseToken(['Z', 'ZZ'], function (input, array, config) {\n    config._useUTC = true;\n    config._tzm = offsetFromString(matchShortOffset, input);\n});\n\n// HELPERS\n\n// timezone chunker\n// '+10:00' > ['10',  '00']\n// '-1530'  > ['-15', '30']\nvar chunkOffset = /([\\+\\-]|\\d\\d)/gi;\n\nfunction offsetFromString(matcher, string) {\n    var matches = (string || '').match(matcher),\n        chunk,\n        parts,\n        minutes;\n\n    if (matches === null) {\n        return null;\n    }\n\n    chunk = matches[matches.length - 1] || [];\n    parts = (chunk + '').match(chunkOffset) || ['-', 0, 0];\n    minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n    return minutes === 0 ? 0 : parts[0] === '+' ? minutes : -minutes;\n}\n\n// Return a moment from input, that is local/utc/zone equivalent to model.\nfunction cloneWithOffset(input, model) {\n    var res, diff;\n    if (model._isUTC) {\n        res = model.clone();\n        diff =\n            (isMoment(input) || isDate(input)\n                ? input.valueOf()\n                : createLocal(input).valueOf()) - res.valueOf();\n        // Use low-level api, because this fn is low-level api.\n        res._d.setTime(res._d.valueOf() + diff);\n        hooks.updateOffset(res, false);\n        return res;\n    } else {\n        return createLocal(input).local();\n    }\n}\n\nfunction getDateOffset(m) {\n    // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n    // https://github.com/moment/moment/pull/1871\n    return -Math.round(m._d.getTimezoneOffset());\n}\n\n// HOOKS\n\n// This function will be called whenever a moment is mutated.\n// It is intended to keep the offset in sync with the timezone.\nhooks.updateOffset = function () {};\n\n// MOMENTS\n\n// keepLocalTime = true means only change the timezone, without\n// affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n// 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n// +0200, so we adjust the time as needed, to be valid.\n//\n// Keeping the time actually adds/subtracts (one hour)\n// from the actual represented time. That is why we call updateOffset\n// a second time. In case it wants us to change the offset again\n// _changeInProgress == true case, then we have to adjust, because\n// there is no such time in the given timezone.\nfunction getSetOffset(input, keepLocalTime, keepMinutes) {\n    var offset = this._offset || 0,\n        localAdjust;\n    if (!this.isValid()) {\n        return input != null ? this : NaN;\n    }\n    if (input != null) {\n        if (typeof input === 'string') {\n            input = offsetFromString(matchShortOffset, input);\n            if (input === null) {\n                return this;\n            }\n        } else if (Math.abs(input) < 16 && !keepMinutes) {\n            input = input * 60;\n        }\n        if (!this._isUTC && keepLocalTime) {\n            localAdjust = getDateOffset(this);\n        }\n        this._offset = input;\n        this._isUTC = true;\n        if (localAdjust != null) {\n            this.add(localAdjust, 'm');\n        }\n        if (offset !== input) {\n            if (!keepLocalTime || this._changeInProgress) {\n                addSubtract(\n                    this,\n                    createDuration(input - offset, 'm'),\n                    1,\n                    false\n                );\n            } else if (!this._changeInProgress) {\n                this._changeInProgress = true;\n                hooks.updateOffset(this, true);\n                this._changeInProgress = null;\n            }\n        }\n        return this;\n    } else {\n        return this._isUTC ? offset : getDateOffset(this);\n    }\n}\n\nfunction getSetZone(input, keepLocalTime) {\n    if (input != null) {\n        if (typeof input !== 'string') {\n            input = -input;\n        }\n\n        this.utcOffset(input, keepLocalTime);\n\n        return this;\n    } else {\n        return -this.utcOffset();\n    }\n}\n\nfunction setOffsetToUTC(keepLocalTime) {\n    return this.utcOffset(0, keepLocalTime);\n}\n\nfunction setOffsetToLocal(keepLocalTime) {\n    if (this._isUTC) {\n        this.utcOffset(0, keepLocalTime);\n        this._isUTC = false;\n\n        if (keepLocalTime) {\n            this.subtract(getDateOffset(this), 'm');\n        }\n    }\n    return this;\n}\n\nfunction setOffsetToParsedOffset() {\n    if (this._tzm != null) {\n        this.utcOffset(this._tzm, false, true);\n    } else if (typeof this._i === 'string') {\n        var tZone = offsetFromString(matchOffset, this._i);\n        if (tZone != null) {\n            this.utcOffset(tZone);\n        } else {\n            this.utcOffset(0, true);\n        }\n    }\n    return this;\n}\n\nfunction hasAlignedHourOffset(input) {\n    if (!this.isValid()) {\n        return false;\n    }\n    input = input ? createLocal(input).utcOffset() : 0;\n\n    return (this.utcOffset() - input) % 60 === 0;\n}\n\nfunction isDaylightSavingTime() {\n    return (\n        this.utcOffset() > this.clone().month(0).utcOffset() ||\n        this.utcOffset() > this.clone().month(5).utcOffset()\n    );\n}\n\nfunction isDaylightSavingTimeShifted() {\n    if (!isUndefined(this._isDSTShifted)) {\n        return this._isDSTShifted;\n    }\n\n    var c = {},\n        other;\n\n    copyConfig(c, this);\n    c = prepareConfig(c);\n\n    if (c._a) {\n        other = c._isUTC ? createUTC(c._a) : createLocal(c._a);\n        this._isDSTShifted =\n            this.isValid() && compareArrays(c._a, other.toArray()) > 0;\n    } else {\n        this._isDSTShifted = false;\n    }\n\n    return this._isDSTShifted;\n}\n\nfunction isLocal() {\n    return this.isValid() ? !this._isUTC : false;\n}\n\nfunction isUtcOffset() {\n    return this.isValid() ? this._isUTC : false;\n}\n\nfunction isUtc() {\n    return this.isValid() ? this._isUTC && this._offset === 0 : false;\n}\n\n// ASP.NET json date format regex\nvar aspNetRegex = /^(-|\\+)?(?:(\\d*)[. ])?(\\d+):(\\d+)(?::(\\d+)(\\.\\d*)?)?$/,\n    // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n    // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n    // and further modified to allow for strings containing both week and day\n    isoRegex =\n        /^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;\n\nfunction createDuration(input, key) {\n    var duration = input,\n        // matching against regexp is expensive, do it on demand\n        match = null,\n        sign,\n        ret,\n        diffRes;\n\n    if (isDuration(input)) {\n        duration = {\n            ms: input._milliseconds,\n            d: input._days,\n            M: input._months,\n        };\n    } else if (isNumber(input) || !isNaN(+input)) {\n        duration = {};\n        if (key) {\n            duration[key] = +input;\n        } else {\n            duration.milliseconds = +input;\n        }\n    } else if ((match = aspNetRegex.exec(input))) {\n        sign = match[1] === '-' ? -1 : 1;\n        duration = {\n            y: 0,\n            d: toInt(match[DATE]) * sign,\n            h: toInt(match[HOUR]) * sign,\n            m: toInt(match[MINUTE]) * sign,\n            s: toInt(match[SECOND]) * sign,\n            ms: toInt(absRound(match[MILLISECOND] * 1000)) * sign, // the millisecond decimal point is included in the match\n        };\n    } else if ((match = isoRegex.exec(input))) {\n        sign = match[1] === '-' ? -1 : 1;\n        duration = {\n            y: parseIso(match[2], sign),\n            M: parseIso(match[3], sign),\n            w: parseIso(match[4], sign),\n            d: parseIso(match[5], sign),\n            h: parseIso(match[6], sign),\n            m: parseIso(match[7], sign),\n            s: parseIso(match[8], sign),\n        };\n    } else if (duration == null) {\n        // checks for null or undefined\n        duration = {};\n    } else if (\n        typeof duration === 'object' &&\n        ('from' in duration || 'to' in duration)\n    ) {\n        diffRes = momentsDifference(\n            createLocal(duration.from),\n            createLocal(duration.to)\n        );\n\n        duration = {};\n        duration.ms = diffRes.milliseconds;\n        duration.M = diffRes.months;\n    }\n\n    ret = new Duration(duration);\n\n    if (isDuration(input) && hasOwnProp(input, '_locale')) {\n        ret._locale = input._locale;\n    }\n\n    if (isDuration(input) && hasOwnProp(input, '_isValid')) {\n        ret._isValid = input._isValid;\n    }\n\n    return ret;\n}\n\ncreateDuration.fn = Duration.prototype;\ncreateDuration.invalid = createInvalid$1;\n\nfunction parseIso(inp, sign) {\n    // We'd normally use ~~inp for this, but unfortunately it also\n    // converts floats to ints.\n    // inp may be undefined, so careful calling replace on it.\n    var res = inp && parseFloat(inp.replace(',', '.'));\n    // apply sign while we're at it\n    return (isNaN(res) ? 0 : res) * sign;\n}\n\nfunction positiveMomentsDifference(base, other) {\n    var res = {};\n\n    res.months =\n        other.month() - base.month() + (other.year() - base.year()) * 12;\n    if (base.clone().add(res.months, 'M').isAfter(other)) {\n        --res.months;\n    }\n\n    res.milliseconds = +other - +base.clone().add(res.months, 'M');\n\n    return res;\n}\n\nfunction momentsDifference(base, other) {\n    var res;\n    if (!(base.isValid() && other.isValid())) {\n        return { milliseconds: 0, months: 0 };\n    }\n\n    other = cloneWithOffset(other, base);\n    if (base.isBefore(other)) {\n        res = positiveMomentsDifference(base, other);\n    } else {\n        res = positiveMomentsDifference(other, base);\n        res.milliseconds = -res.milliseconds;\n        res.months = -res.months;\n    }\n\n    return res;\n}\n\n// TODO: remove 'name' arg after deprecation is removed\nfunction createAdder(direction, name) {\n    return function (val, period) {\n        var dur, tmp;\n        //invert the arguments, but complain about it\n        if (period !== null && !isNaN(+period)) {\n            deprecateSimple(\n                name,\n                'moment().' +\n                    name +\n                    '(period, number) is deprecated. Please use moment().' +\n                    name +\n                    '(number, period). ' +\n                    'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.'\n            );\n            tmp = val;\n            val = period;\n            period = tmp;\n        }\n\n        dur = createDuration(val, period);\n        addSubtract(this, dur, direction);\n        return this;\n    };\n}\n\nfunction addSubtract(mom, duration, isAdding, updateOffset) {\n    var milliseconds = duration._milliseconds,\n        days = absRound(duration._days),\n        months = absRound(duration._months);\n\n    if (!mom.isValid()) {\n        // No op\n        return;\n    }\n\n    updateOffset = updateOffset == null ? true : updateOffset;\n\n    if (months) {\n        setMonth(mom, get(mom, 'Month') + months * isAdding);\n    }\n    if (days) {\n        set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);\n    }\n    if (milliseconds) {\n        mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);\n    }\n    if (updateOffset) {\n        hooks.updateOffset(mom, days || months);\n    }\n}\n\nvar add = createAdder(1, 'add'),\n    subtract = createAdder(-1, 'subtract');\n\nfunction isString(input) {\n    return typeof input === 'string' || input instanceof String;\n}\n\n// type MomentInput = Moment | Date | string | number | (number | string)[] | MomentInputObject | void; // null | undefined\nfunction isMomentInput(input) {\n    return (\n        isMoment(input) ||\n        isDate(input) ||\n        isString(input) ||\n        isNumber(input) ||\n        isNumberOrStringArray(input) ||\n        isMomentInputObject(input) ||\n        input === null ||\n        input === undefined\n    );\n}\n\nfunction isMomentInputObject(input) {\n    var objectTest = isObject(input) && !isObjectEmpty(input),\n        propertyTest = false,\n        properties = [\n            'years',\n            'year',\n            'y',\n            'months',\n            'month',\n            'M',\n            'days',\n            'day',\n            'd',\n            'dates',\n            'date',\n            'D',\n            'hours',\n            'hour',\n            'h',\n            'minutes',\n            'minute',\n            'm',\n            'seconds',\n            'second',\n            's',\n            'milliseconds',\n            'millisecond',\n            'ms',\n        ],\n        i,\n        property,\n        propertyLen = properties.length;\n\n    for (i = 0; i < propertyLen; i += 1) {\n        property = properties[i];\n        propertyTest = propertyTest || hasOwnProp(input, property);\n    }\n\n    return objectTest && propertyTest;\n}\n\nfunction isNumberOrStringArray(input) {\n    var arrayTest = isArray(input),\n        dataTypeTest = false;\n    if (arrayTest) {\n        dataTypeTest =\n            input.filter(function (item) {\n                return !isNumber(item) && isString(input);\n            }).length === 0;\n    }\n    return arrayTest && dataTypeTest;\n}\n\nfunction isCalendarSpec(input) {\n    var objectTest = isObject(input) && !isObjectEmpty(input),\n        propertyTest = false,\n        properties = [\n            'sameDay',\n            'nextDay',\n            'lastDay',\n            'nextWeek',\n            'lastWeek',\n            'sameElse',\n        ],\n        i,\n        property;\n\n    for (i = 0; i < properties.length; i += 1) {\n        property = properties[i];\n        propertyTest = propertyTest || hasOwnProp(input, property);\n    }\n\n    return objectTest && propertyTest;\n}\n\nfunction getCalendarFormat(myMoment, now) {\n    var diff = myMoment.diff(now, 'days', true);\n    return diff < -6\n        ? 'sameElse'\n        : diff < -1\n          ? 'lastWeek'\n          : diff < 0\n            ? 'lastDay'\n            : diff < 1\n              ? 'sameDay'\n              : diff < 2\n                ? 'nextDay'\n                : diff < 7\n                  ? 'nextWeek'\n                  : 'sameElse';\n}\n\nfunction calendar$1(time, formats) {\n    // Support for single parameter, formats only overload to the calendar function\n    if (arguments.length === 1) {\n        if (!arguments[0]) {\n            time = undefined;\n            formats = undefined;\n        } else if (isMomentInput(arguments[0])) {\n            time = arguments[0];\n            formats = undefined;\n        } else if (isCalendarSpec(arguments[0])) {\n            formats = arguments[0];\n            time = undefined;\n        }\n    }\n    // We want to compare the start of today, vs this.\n    // Getting start-of-today depends on whether we're local/utc/offset or not.\n    var now = time || createLocal(),\n        sod = cloneWithOffset(now, this).startOf('day'),\n        format = hooks.calendarFormat(this, sod) || 'sameElse',\n        output =\n            formats &&\n            (isFunction(formats[format])\n                ? formats[format].call(this, now)\n                : formats[format]);\n\n    return this.format(\n        output || this.localeData().calendar(format, this, createLocal(now))\n    );\n}\n\nfunction clone() {\n    return new Moment(this);\n}\n\nfunction isAfter(input, units) {\n    var localInput = isMoment(input) ? input : createLocal(input);\n    if (!(this.isValid() && localInput.isValid())) {\n        return false;\n    }\n    units = normalizeUnits(units) || 'millisecond';\n    if (units === 'millisecond') {\n        return this.valueOf() > localInput.valueOf();\n    } else {\n        return localInput.valueOf() < this.clone().startOf(units).valueOf();\n    }\n}\n\nfunction isBefore(input, units) {\n    var localInput = isMoment(input) ? input : createLocal(input);\n    if (!(this.isValid() && localInput.isValid())) {\n        return false;\n    }\n    units = normalizeUnits(units) || 'millisecond';\n    if (units === 'millisecond') {\n        return this.valueOf() < localInput.valueOf();\n    } else {\n        return this.clone().endOf(units).valueOf() < localInput.valueOf();\n    }\n}\n\nfunction isBetween(from, to, units, inclusivity) {\n    var localFrom = isMoment(from) ? from : createLocal(from),\n        localTo = isMoment(to) ? to : createLocal(to);\n    if (!(this.isValid() && localFrom.isValid() && localTo.isValid())) {\n        return false;\n    }\n    inclusivity = inclusivity || '()';\n    return (\n        (inclusivity[0] === '('\n            ? this.isAfter(localFrom, units)\n            : !this.isBefore(localFrom, units)) &&\n        (inclusivity[1] === ')'\n            ? this.isBefore(localTo, units)\n            : !this.isAfter(localTo, units))\n    );\n}\n\nfunction isSame(input, units) {\n    var localInput = isMoment(input) ? input : createLocal(input),\n        inputMs;\n    if (!(this.isValid() && localInput.isValid())) {\n        return false;\n    }\n    units = normalizeUnits(units) || 'millisecond';\n    if (units === 'millisecond') {\n        return this.valueOf() === localInput.valueOf();\n    } else {\n        inputMs = localInput.valueOf();\n        return (\n            this.clone().startOf(units).valueOf() <= inputMs &&\n            inputMs <= this.clone().endOf(units).valueOf()\n        );\n    }\n}\n\nfunction isSameOrAfter(input, units) {\n    return this.isSame(input, units) || this.isAfter(input, units);\n}\n\nfunction isSameOrBefore(input, units) {\n    return this.isSame(input, units) || this.isBefore(input, units);\n}\n\nfunction diff(input, units, asFloat) {\n    var that, zoneDelta, output;\n\n    if (!this.isValid()) {\n        return NaN;\n    }\n\n    that = cloneWithOffset(input, this);\n\n    if (!that.isValid()) {\n        return NaN;\n    }\n\n    zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;\n\n    units = normalizeUnits(units);\n\n    switch (units) {\n        case 'year':\n            output = monthDiff(this, that) / 12;\n            break;\n        case 'month':\n            output = monthDiff(this, that);\n            break;\n        case 'quarter':\n            output = monthDiff(this, that) / 3;\n            break;\n        case 'second':\n            output = (this - that) / 1e3;\n            break; // 1000\n        case 'minute':\n            output = (this - that) / 6e4;\n            break; // 1000 * 60\n        case 'hour':\n            output = (this - that) / 36e5;\n            break; // 1000 * 60 * 60\n        case 'day':\n            output = (this - that - zoneDelta) / 864e5;\n            break; // 1000 * 60 * 60 * 24, negate dst\n        case 'week':\n            output = (this - that - zoneDelta) / 6048e5;\n            break; // 1000 * 60 * 60 * 24 * 7, negate dst\n        default:\n            output = this - that;\n    }\n\n    return asFloat ? output : absFloor(output);\n}\n\nfunction monthDiff(a, b) {\n    if (a.date() < b.date()) {\n        // end-of-month calculations work correct when the start month has more\n        // days than the end month.\n        return -monthDiff(b, a);\n    }\n    // difference in months\n    var wholeMonthDiff = (b.year() - a.year()) * 12 + (b.month() - a.month()),\n        // b is in (anchor - 1 month, anchor + 1 month)\n        anchor = a.clone().add(wholeMonthDiff, 'months'),\n        anchor2,\n        adjust;\n\n    if (b - anchor < 0) {\n        anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');\n        // linear across the month\n        adjust = (b - anchor) / (anchor - anchor2);\n    } else {\n        anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');\n        // linear across the month\n        adjust = (b - anchor) / (anchor2 - anchor);\n    }\n\n    //check for negative zero, return zero if negative zero\n    return -(wholeMonthDiff + adjust) || 0;\n}\n\nhooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';\nhooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';\n\nfunction toString() {\n    return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\n}\n\nfunction toISOString(keepOffset) {\n    if (!this.isValid()) {\n        return null;\n    }\n    var utc = keepOffset !== true,\n        m = utc ? this.clone().utc() : this;\n    if (m.year() < 0 || m.year() > 9999) {\n        return formatMoment(\n            m,\n            utc\n                ? 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]'\n                : 'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ'\n        );\n    }\n    if (isFunction(Date.prototype.toISOString)) {\n        // native implementation is ~50x faster, use it when we can\n        if (utc) {\n            return this.toDate().toISOString();\n        } else {\n            return new Date(this.valueOf() + this.utcOffset() * 60 * 1000)\n                .toISOString()\n                .replace('Z', formatMoment(m, 'Z'));\n        }\n    }\n    return formatMoment(\n        m,\n        utc ? 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYY-MM-DD[T]HH:mm:ss.SSSZ'\n    );\n}\n\n/**\n * Return a human readable representation of a moment that can\n * also be evaluated to get a new moment which is the same\n *\n * @link https://nodejs.org/dist/latest/docs/api/util.html#util_custom_inspect_function_on_objects\n */\nfunction inspect() {\n    if (!this.isValid()) {\n        return 'moment.invalid(/* ' + this._i + ' */)';\n    }\n    var func = 'moment',\n        zone = '',\n        prefix,\n        year,\n        datetime,\n        suffix;\n    if (!this.isLocal()) {\n        func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';\n        zone = 'Z';\n    }\n    prefix = '[' + func + '(\"]';\n    year = 0 <= this.year() && this.year() <= 9999 ? 'YYYY' : 'YYYYYY';\n    datetime = '-MM-DD[T]HH:mm:ss.SSS';\n    suffix = zone + '[\")]';\n\n    return this.format(prefix + year + datetime + suffix);\n}\n\nfunction format(inputString) {\n    if (!inputString) {\n        inputString = this.isUtc()\n            ? hooks.defaultFormatUtc\n            : hooks.defaultFormat;\n    }\n    var output = formatMoment(this, inputString);\n    return this.localeData().postformat(output);\n}\n\nfunction from(time, withoutSuffix) {\n    if (\n        this.isValid() &&\n        ((isMoment(time) && time.isValid()) || createLocal(time).isValid())\n    ) {\n        return createDuration({ to: this, from: time })\n            .locale(this.locale())\n            .humanize(!withoutSuffix);\n    } else {\n        return this.localeData().invalidDate();\n    }\n}\n\nfunction fromNow(withoutSuffix) {\n    return this.from(createLocal(), withoutSuffix);\n}\n\nfunction to(time, withoutSuffix) {\n    if (\n        this.isValid() &&\n        ((isMoment(time) && time.isValid()) || createLocal(time).isValid())\n    ) {\n        return createDuration({ from: this, to: time })\n            .locale(this.locale())\n            .humanize(!withoutSuffix);\n    } else {\n        return this.localeData().invalidDate();\n    }\n}\n\nfunction toNow(withoutSuffix) {\n    return this.to(createLocal(), withoutSuffix);\n}\n\n// If passed a locale key, it will set the locale for this\n// instance.  Otherwise, it will return the locale configuration\n// variables for this instance.\nfunction locale(key) {\n    var newLocaleData;\n\n    if (key === undefined) {\n        return this._locale._abbr;\n    } else {\n        newLocaleData = getLocale(key);\n        if (newLocaleData != null) {\n            this._locale = newLocaleData;\n        }\n        return this;\n    }\n}\n\nvar lang = deprecate(\n    'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\n    function (key) {\n        if (key === undefined) {\n            return this.localeData();\n        } else {\n            return this.locale(key);\n        }\n    }\n);\n\nfunction localeData() {\n    return this._locale;\n}\n\nvar MS_PER_SECOND = 1000,\n    MS_PER_MINUTE = 60 * MS_PER_SECOND,\n    MS_PER_HOUR = 60 * MS_PER_MINUTE,\n    MS_PER_400_YEARS = (365 * 400 + 97) * 24 * MS_PER_HOUR;\n\n// actual modulo - handles negative numbers (for dates before 1970):\nfunction mod$1(dividend, divisor) {\n    return ((dividend % divisor) + divisor) % divisor;\n}\n\nfunction localStartOfDate(y, m, d) {\n    // the date constructor remaps years 0-99 to 1900-1999\n    if (y < 100 && y >= 0) {\n        // preserve leap years using a full 400 year cycle, then reset\n        return new Date(y + 400, m, d) - MS_PER_400_YEARS;\n    } else {\n        return new Date(y, m, d).valueOf();\n    }\n}\n\nfunction utcStartOfDate(y, m, d) {\n    // Date.UTC remaps years 0-99 to 1900-1999\n    if (y < 100 && y >= 0) {\n        // preserve leap years using a full 400 year cycle, then reset\n        return Date.UTC(y + 400, m, d) - MS_PER_400_YEARS;\n    } else {\n        return Date.UTC(y, m, d);\n    }\n}\n\nfunction startOf(units) {\n    var time, startOfDate;\n    units = normalizeUnits(units);\n    if (units === undefined || units === 'millisecond' || !this.isValid()) {\n        return this;\n    }\n\n    startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;\n\n    switch (units) {\n        case 'year':\n            time = startOfDate(this.year(), 0, 1);\n            break;\n        case 'quarter':\n            time = startOfDate(\n                this.year(),\n                this.month() - (this.month() % 3),\n                1\n            );\n            break;\n        case 'month':\n            time = startOfDate(this.year(), this.month(), 1);\n            break;\n        case 'week':\n            time = startOfDate(\n                this.year(),\n                this.month(),\n                this.date() - this.weekday()\n            );\n            break;\n        case 'isoWeek':\n            time = startOfDate(\n                this.year(),\n                this.month(),\n                this.date() - (this.isoWeekday() - 1)\n            );\n            break;\n        case 'day':\n        case 'date':\n            time = startOfDate(this.year(), this.month(), this.date());\n            break;\n        case 'hour':\n            time = this._d.valueOf();\n            time -= mod$1(\n                time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE),\n                MS_PER_HOUR\n            );\n            break;\n        case 'minute':\n            time = this._d.valueOf();\n            time -= mod$1(time, MS_PER_MINUTE);\n            break;\n        case 'second':\n            time = this._d.valueOf();\n            time -= mod$1(time, MS_PER_SECOND);\n            break;\n    }\n\n    this._d.setTime(time);\n    hooks.updateOffset(this, true);\n    return this;\n}\n\nfunction endOf(units) {\n    var time, startOfDate;\n    units = normalizeUnits(units);\n    if (units === undefined || units === 'millisecond' || !this.isValid()) {\n        return this;\n    }\n\n    startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;\n\n    switch (units) {\n        case 'year':\n            time = startOfDate(this.year() + 1, 0, 1) - 1;\n            break;\n        case 'quarter':\n            time =\n                startOfDate(\n                    this.year(),\n                    this.month() - (this.month() % 3) + 3,\n                    1\n                ) - 1;\n            break;\n        case 'month':\n            time = startOfDate(this.year(), this.month() + 1, 1) - 1;\n            break;\n        case 'week':\n            time =\n                startOfDate(\n                    this.year(),\n                    this.month(),\n                    this.date() - this.weekday() + 7\n                ) - 1;\n            break;\n        case 'isoWeek':\n            time =\n                startOfDate(\n                    this.year(),\n                    this.month(),\n                    this.date() - (this.isoWeekday() - 1) + 7\n                ) - 1;\n            break;\n        case 'day':\n        case 'date':\n            time = startOfDate(this.year(), this.month(), this.date() + 1) - 1;\n            break;\n        case 'hour':\n            time = this._d.valueOf();\n            time +=\n                MS_PER_HOUR -\n                mod$1(\n                    time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE),\n                    MS_PER_HOUR\n                ) -\n                1;\n            break;\n        case 'minute':\n            time = this._d.valueOf();\n            time += MS_PER_MINUTE - mod$1(time, MS_PER_MINUTE) - 1;\n            break;\n        case 'second':\n            time = this._d.valueOf();\n            time += MS_PER_SECOND - mod$1(time, MS_PER_SECOND) - 1;\n            break;\n    }\n\n    this._d.setTime(time);\n    hooks.updateOffset(this, true);\n    return this;\n}\n\nfunction valueOf() {\n    return this._d.valueOf() - (this._offset || 0) * 60000;\n}\n\nfunction unix() {\n    return Math.floor(this.valueOf() / 1000);\n}\n\nfunction toDate() {\n    return new Date(this.valueOf());\n}\n\nfunction toArray() {\n    var m = this;\n    return [\n        m.year(),\n        m.month(),\n        m.date(),\n        m.hour(),\n        m.minute(),\n        m.second(),\n        m.millisecond(),\n    ];\n}\n\nfunction toObject() {\n    var m = this;\n    return {\n        years: m.year(),\n        months: m.month(),\n        date: m.date(),\n        hours: m.hours(),\n        minutes: m.minutes(),\n        seconds: m.seconds(),\n        milliseconds: m.milliseconds(),\n    };\n}\n\nfunction toJSON() {\n    // new Date(NaN).toJSON() === null\n    return this.isValid() ? this.toISOString() : null;\n}\n\nfunction isValid$2() {\n    return isValid(this);\n}\n\nfunction parsingFlags() {\n    return extend({}, getParsingFlags(this));\n}\n\nfunction invalidAt() {\n    return getParsingFlags(this).overflow;\n}\n\nfunction creationData() {\n    return {\n        input: this._i,\n        format: this._f,\n        locale: this._locale,\n        isUTC: this._isUTC,\n        strict: this._strict,\n    };\n}\n\naddFormatToken('N', 0, 0, 'eraAbbr');\naddFormatToken('NN', 0, 0, 'eraAbbr');\naddFormatToken('NNN', 0, 0, 'eraAbbr');\naddFormatToken('NNNN', 0, 0, 'eraName');\naddFormatToken('NNNNN', 0, 0, 'eraNarrow');\n\naddFormatToken('y', ['y', 1], 'yo', 'eraYear');\naddFormatToken('y', ['yy', 2], 0, 'eraYear');\naddFormatToken('y', ['yyy', 3], 0, 'eraYear');\naddFormatToken('y', ['yyyy', 4], 0, 'eraYear');\n\naddRegexToken('N', matchEraAbbr);\naddRegexToken('NN', matchEraAbbr);\naddRegexToken('NNN', matchEraAbbr);\naddRegexToken('NNNN', matchEraName);\naddRegexToken('NNNNN', matchEraNarrow);\n\naddParseToken(\n    ['N', 'NN', 'NNN', 'NNNN', 'NNNNN'],\n    function (input, array, config, token) {\n        var era = config._locale.erasParse(input, token, config._strict);\n        if (era) {\n            getParsingFlags(config).era = era;\n        } else {\n            getParsingFlags(config).invalidEra = input;\n        }\n    }\n);\n\naddRegexToken('y', matchUnsigned);\naddRegexToken('yy', matchUnsigned);\naddRegexToken('yyy', matchUnsigned);\naddRegexToken('yyyy', matchUnsigned);\naddRegexToken('yo', matchEraYearOrdinal);\n\naddParseToken(['y', 'yy', 'yyy', 'yyyy'], YEAR);\naddParseToken(['yo'], function (input, array, config, token) {\n    var match;\n    if (config._locale._eraYearOrdinalRegex) {\n        match = input.match(config._locale._eraYearOrdinalRegex);\n    }\n\n    if (config._locale.eraYearOrdinalParse) {\n        array[YEAR] = config._locale.eraYearOrdinalParse(input, match);\n    } else {\n        array[YEAR] = parseInt(input, 10);\n    }\n});\n\nfunction localeEras(m, format) {\n    var i,\n        l,\n        date,\n        eras = this._eras || getLocale('en')._eras;\n    for (i = 0, l = eras.length; i < l; ++i) {\n        switch (typeof eras[i].since) {\n            case 'string':\n                // truncate time\n                date = hooks(eras[i].since).startOf('day');\n                eras[i].since = date.valueOf();\n                break;\n        }\n\n        switch (typeof eras[i].until) {\n            case 'undefined':\n                eras[i].until = +Infinity;\n                break;\n            case 'string':\n                // truncate time\n                date = hooks(eras[i].until).startOf('day').valueOf();\n                eras[i].until = date.valueOf();\n                break;\n        }\n    }\n    return eras;\n}\n\nfunction localeErasParse(eraName, format, strict) {\n    var i,\n        l,\n        eras = this.eras(),\n        name,\n        abbr,\n        narrow;\n    eraName = eraName.toUpperCase();\n\n    for (i = 0, l = eras.length; i < l; ++i) {\n        name = eras[i].name.toUpperCase();\n        abbr = eras[i].abbr.toUpperCase();\n        narrow = eras[i].narrow.toUpperCase();\n\n        if (strict) {\n            switch (format) {\n                case 'N':\n                case 'NN':\n                case 'NNN':\n                    if (abbr === eraName) {\n                        return eras[i];\n                    }\n                    break;\n\n                case 'NNNN':\n                    if (name === eraName) {\n                        return eras[i];\n                    }\n                    break;\n\n                case 'NNNNN':\n                    if (narrow === eraName) {\n                        return eras[i];\n                    }\n                    break;\n            }\n        } else if ([name, abbr, narrow].indexOf(eraName) >= 0) {\n            return eras[i];\n        }\n    }\n}\n\nfunction localeErasConvertYear(era, year) {\n    var dir = era.since <= era.until ? +1 : -1;\n    if (year === undefined) {\n        return hooks(era.since).year();\n    } else {\n        return hooks(era.since).year() + (year - era.offset) * dir;\n    }\n}\n\nfunction getEraName() {\n    var i,\n        l,\n        val,\n        eras = this.localeData().eras();\n    for (i = 0, l = eras.length; i < l; ++i) {\n        // truncate time\n        val = this.clone().startOf('day').valueOf();\n\n        if (eras[i].since <= val && val <= eras[i].until) {\n            return eras[i].name;\n        }\n        if (eras[i].until <= val && val <= eras[i].since) {\n            return eras[i].name;\n        }\n    }\n\n    return '';\n}\n\nfunction getEraNarrow() {\n    var i,\n        l,\n        val,\n        eras = this.localeData().eras();\n    for (i = 0, l = eras.length; i < l; ++i) {\n        // truncate time\n        val = this.clone().startOf('day').valueOf();\n\n        if (eras[i].since <= val && val <= eras[i].until) {\n            return eras[i].narrow;\n        }\n        if (eras[i].until <= val && val <= eras[i].since) {\n            return eras[i].narrow;\n        }\n    }\n\n    return '';\n}\n\nfunction getEraAbbr() {\n    var i,\n        l,\n        val,\n        eras = this.localeData().eras();\n    for (i = 0, l = eras.length; i < l; ++i) {\n        // truncate time\n        val = this.clone().startOf('day').valueOf();\n\n        if (eras[i].since <= val && val <= eras[i].until) {\n            return eras[i].abbr;\n        }\n        if (eras[i].until <= val && val <= eras[i].since) {\n            return eras[i].abbr;\n        }\n    }\n\n    return '';\n}\n\nfunction getEraYear() {\n    var i,\n        l,\n        dir,\n        val,\n        eras = this.localeData().eras();\n    for (i = 0, l = eras.length; i < l; ++i) {\n        dir = eras[i].since <= eras[i].until ? +1 : -1;\n\n        // truncate time\n        val = this.clone().startOf('day').valueOf();\n\n        if (\n            (eras[i].since <= val && val <= eras[i].until) ||\n            (eras[i].until <= val && val <= eras[i].since)\n        ) {\n            return (\n                (this.year() - hooks(eras[i].since).year()) * dir +\n                eras[i].offset\n            );\n        }\n    }\n\n    return this.year();\n}\n\nfunction erasNameRegex(isStrict) {\n    if (!hasOwnProp(this, '_erasNameRegex')) {\n        computeErasParse.call(this);\n    }\n    return isStrict ? this._erasNameRegex : this._erasRegex;\n}\n\nfunction erasAbbrRegex(isStrict) {\n    if (!hasOwnProp(this, '_erasAbbrRegex')) {\n        computeErasParse.call(this);\n    }\n    return isStrict ? this._erasAbbrRegex : this._erasRegex;\n}\n\nfunction erasNarrowRegex(isStrict) {\n    if (!hasOwnProp(this, '_erasNarrowRegex')) {\n        computeErasParse.call(this);\n    }\n    return isStrict ? this._erasNarrowRegex : this._erasRegex;\n}\n\nfunction matchEraAbbr(isStrict, locale) {\n    return locale.erasAbbrRegex(isStrict);\n}\n\nfunction matchEraName(isStrict, locale) {\n    return locale.erasNameRegex(isStrict);\n}\n\nfunction matchEraNarrow(isStrict, locale) {\n    return locale.erasNarrowRegex(isStrict);\n}\n\nfunction matchEraYearOrdinal(isStrict, locale) {\n    return locale._eraYearOrdinalRegex || matchUnsigned;\n}\n\nfunction computeErasParse() {\n    var abbrPieces = [],\n        namePieces = [],\n        narrowPieces = [],\n        mixedPieces = [],\n        i,\n        l,\n        erasName,\n        erasAbbr,\n        erasNarrow,\n        eras = this.eras();\n\n    for (i = 0, l = eras.length; i < l; ++i) {\n        erasName = regexEscape(eras[i].name);\n        erasAbbr = regexEscape(eras[i].abbr);\n        erasNarrow = regexEscape(eras[i].narrow);\n\n        namePieces.push(erasName);\n        abbrPieces.push(erasAbbr);\n        narrowPieces.push(erasNarrow);\n        mixedPieces.push(erasName);\n        mixedPieces.push(erasAbbr);\n        mixedPieces.push(erasNarrow);\n    }\n\n    this._erasRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n    this._erasNameRegex = new RegExp('^(' + namePieces.join('|') + ')', 'i');\n    this._erasAbbrRegex = new RegExp('^(' + abbrPieces.join('|') + ')', 'i');\n    this._erasNarrowRegex = new RegExp(\n        '^(' + narrowPieces.join('|') + ')',\n        'i'\n    );\n}\n\n// FORMATTING\n\naddFormatToken(0, ['gg', 2], 0, function () {\n    return this.weekYear() % 100;\n});\n\naddFormatToken(0, ['GG', 2], 0, function () {\n    return this.isoWeekYear() % 100;\n});\n\nfunction addWeekYearFormatToken(token, getter) {\n    addFormatToken(0, [token, token.length], 0, getter);\n}\n\naddWeekYearFormatToken('gggg', 'weekYear');\naddWeekYearFormatToken('ggggg', 'weekYear');\naddWeekYearFormatToken('GGGG', 'isoWeekYear');\naddWeekYearFormatToken('GGGGG', 'isoWeekYear');\n\n// ALIASES\n\n// PARSING\n\naddRegexToken('G', matchSigned);\naddRegexToken('g', matchSigned);\naddRegexToken('GG', match1to2, match2);\naddRegexToken('gg', match1to2, match2);\naddRegexToken('GGGG', match1to4, match4);\naddRegexToken('gggg', match1to4, match4);\naddRegexToken('GGGGG', match1to6, match6);\naddRegexToken('ggggg', match1to6, match6);\n\naddWeekParseToken(\n    ['gggg', 'ggggg', 'GGGG', 'GGGGG'],\n    function (input, week, config, token) {\n        week[token.substr(0, 2)] = toInt(input);\n    }\n);\n\naddWeekParseToken(['gg', 'GG'], function (input, week, config, token) {\n    week[token] = hooks.parseTwoDigitYear(input);\n});\n\n// MOMENTS\n\nfunction getSetWeekYear(input) {\n    return getSetWeekYearHelper.call(\n        this,\n        input,\n        this.week(),\n        this.weekday() + this.localeData()._week.dow,\n        this.localeData()._week.dow,\n        this.localeData()._week.doy\n    );\n}\n\nfunction getSetISOWeekYear(input) {\n    return getSetWeekYearHelper.call(\n        this,\n        input,\n        this.isoWeek(),\n        this.isoWeekday(),\n        1,\n        4\n    );\n}\n\nfunction getISOWeeksInYear() {\n    return weeksInYear(this.year(), 1, 4);\n}\n\nfunction getISOWeeksInISOWeekYear() {\n    return weeksInYear(this.isoWeekYear(), 1, 4);\n}\n\nfunction getWeeksInYear() {\n    var weekInfo = this.localeData()._week;\n    return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\n}\n\nfunction getWeeksInWeekYear() {\n    var weekInfo = this.localeData()._week;\n    return weeksInYear(this.weekYear(), weekInfo.dow, weekInfo.doy);\n}\n\nfunction getSetWeekYearHelper(input, week, weekday, dow, doy) {\n    var weeksTarget;\n    if (input == null) {\n        return weekOfYear(this, dow, doy).year;\n    } else {\n        weeksTarget = weeksInYear(input, dow, doy);\n        if (week > weeksTarget) {\n            week = weeksTarget;\n        }\n        return setWeekAll.call(this, input, week, weekday, dow, doy);\n    }\n}\n\nfunction setWeekAll(weekYear, week, weekday, dow, doy) {\n    var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),\n        date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);\n\n    this.year(date.getUTCFullYear());\n    this.month(date.getUTCMonth());\n    this.date(date.getUTCDate());\n    return this;\n}\n\n// FORMATTING\n\naddFormatToken('Q', 0, 'Qo', 'quarter');\n\n// PARSING\n\naddRegexToken('Q', match1);\naddParseToken('Q', function (input, array) {\n    array[MONTH] = (toInt(input) - 1) * 3;\n});\n\n// MOMENTS\n\nfunction getSetQuarter(input) {\n    return input == null\n        ? Math.ceil((this.month() + 1) / 3)\n        : this.month((input - 1) * 3 + (this.month() % 3));\n}\n\n// FORMATTING\n\naddFormatToken('D', ['DD', 2], 'Do', 'date');\n\n// PARSING\n\naddRegexToken('D', match1to2, match1to2NoLeadingZero);\naddRegexToken('DD', match1to2, match2);\naddRegexToken('Do', function (isStrict, locale) {\n    // TODO: Remove \"ordinalParse\" fallback in next major release.\n    return isStrict\n        ? locale._dayOfMonthOrdinalParse || locale._ordinalParse\n        : locale._dayOfMonthOrdinalParseLenient;\n});\n\naddParseToken(['D', 'DD'], DATE);\naddParseToken('Do', function (input, array) {\n    array[DATE] = toInt(input.match(match1to2)[0]);\n});\n\n// MOMENTS\n\nvar getSetDayOfMonth = makeGetSet('Date', true);\n\n// FORMATTING\n\naddFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');\n\n// PARSING\n\naddRegexToken('DDD', match1to3);\naddRegexToken('DDDD', match3);\naddParseToken(['DDD', 'DDDD'], function (input, array, config) {\n    config._dayOfYear = toInt(input);\n});\n\n// HELPERS\n\n// MOMENTS\n\nfunction getSetDayOfYear(input) {\n    var dayOfYear =\n        Math.round(\n            (this.clone().startOf('day') - this.clone().startOf('year')) / 864e5\n        ) + 1;\n    return input == null ? dayOfYear : this.add(input - dayOfYear, 'd');\n}\n\n// FORMATTING\n\naddFormatToken('m', ['mm', 2], 0, 'minute');\n\n// PARSING\n\naddRegexToken('m', match1to2, match1to2HasZero);\naddRegexToken('mm', match1to2, match2);\naddParseToken(['m', 'mm'], MINUTE);\n\n// MOMENTS\n\nvar getSetMinute = makeGetSet('Minutes', false);\n\n// FORMATTING\n\naddFormatToken('s', ['ss', 2], 0, 'second');\n\n// PARSING\n\naddRegexToken('s', match1to2, match1to2HasZero);\naddRegexToken('ss', match1to2, match2);\naddParseToken(['s', 'ss'], SECOND);\n\n// MOMENTS\n\nvar getSetSecond = makeGetSet('Seconds', false);\n\n// FORMATTING\n\naddFormatToken('S', 0, 0, function () {\n    return ~~(this.millisecond() / 100);\n});\n\naddFormatToken(0, ['SS', 2], 0, function () {\n    return ~~(this.millisecond() / 10);\n});\n\naddFormatToken(0, ['SSS', 3], 0, 'millisecond');\naddFormatToken(0, ['SSSS', 4], 0, function () {\n    return this.millisecond() * 10;\n});\naddFormatToken(0, ['SSSSS', 5], 0, function () {\n    return this.millisecond() * 100;\n});\naddFormatToken(0, ['SSSSSS', 6], 0, function () {\n    return this.millisecond() * 1000;\n});\naddFormatToken(0, ['SSSSSSS', 7], 0, function () {\n    return this.millisecond() * 10000;\n});\naddFormatToken(0, ['SSSSSSSS', 8], 0, function () {\n    return this.millisecond() * 100000;\n});\naddFormatToken(0, ['SSSSSSSSS', 9], 0, function () {\n    return this.millisecond() * 1000000;\n});\n\n// PARSING\n\naddRegexToken('S', match1to3, match1);\naddRegexToken('SS', match1to3, match2);\naddRegexToken('SSS', match1to3, match3);\n\nvar token, getSetMillisecond;\nfor (token = 'SSSS'; token.length <= 9; token += 'S') {\n    addRegexToken(token, matchUnsigned);\n}\n\nfunction parseMs(input, array) {\n    array[MILLISECOND] = toInt(('0.' + input) * 1000);\n}\n\nfor (token = 'S'; token.length <= 9; token += 'S') {\n    addParseToken(token, parseMs);\n}\n\ngetSetMillisecond = makeGetSet('Milliseconds', false);\n\n// FORMATTING\n\naddFormatToken('z', 0, 0, 'zoneAbbr');\naddFormatToken('zz', 0, 0, 'zoneName');\n\n// MOMENTS\n\nfunction getZoneAbbr() {\n    return this._isUTC ? 'UTC' : '';\n}\n\nfunction getZoneName() {\n    return this._isUTC ? 'Coordinated Universal Time' : '';\n}\n\nvar proto = Moment.prototype;\n\nproto.add = add;\nproto.calendar = calendar$1;\nproto.clone = clone;\nproto.diff = diff;\nproto.endOf = endOf;\nproto.format = format;\nproto.from = from;\nproto.fromNow = fromNow;\nproto.to = to;\nproto.toNow = toNow;\nproto.get = stringGet;\nproto.invalidAt = invalidAt;\nproto.isAfter = isAfter;\nproto.isBefore = isBefore;\nproto.isBetween = isBetween;\nproto.isSame = isSame;\nproto.isSameOrAfter = isSameOrAfter;\nproto.isSameOrBefore = isSameOrBefore;\nproto.isValid = isValid$2;\nproto.lang = lang;\nproto.locale = locale;\nproto.localeData = localeData;\nproto.max = prototypeMax;\nproto.min = prototypeMin;\nproto.parsingFlags = parsingFlags;\nproto.set = stringSet;\nproto.startOf = startOf;\nproto.subtract = subtract;\nproto.toArray = toArray;\nproto.toObject = toObject;\nproto.toDate = toDate;\nproto.toISOString = toISOString;\nproto.inspect = inspect;\nif (typeof Symbol !== 'undefined' && Symbol.for != null) {\n    proto[Symbol.for('nodejs.util.inspect.custom')] = function () {\n        return 'Moment<' + this.format() + '>';\n    };\n}\nproto.toJSON = toJSON;\nproto.toString = toString;\nproto.unix = unix;\nproto.valueOf = valueOf;\nproto.creationData = creationData;\nproto.eraName = getEraName;\nproto.eraNarrow = getEraNarrow;\nproto.eraAbbr = getEraAbbr;\nproto.eraYear = getEraYear;\nproto.year = getSetYear;\nproto.isLeapYear = getIsLeapYear;\nproto.weekYear = getSetWeekYear;\nproto.isoWeekYear = getSetISOWeekYear;\nproto.quarter = proto.quarters = getSetQuarter;\nproto.month = getSetMonth;\nproto.daysInMonth = getDaysInMonth;\nproto.week = proto.weeks = getSetWeek;\nproto.isoWeek = proto.isoWeeks = getSetISOWeek;\nproto.weeksInYear = getWeeksInYear;\nproto.weeksInWeekYear = getWeeksInWeekYear;\nproto.isoWeeksInYear = getISOWeeksInYear;\nproto.isoWeeksInISOWeekYear = getISOWeeksInISOWeekYear;\nproto.date = getSetDayOfMonth;\nproto.day = proto.days = getSetDayOfWeek;\nproto.weekday = getSetLocaleDayOfWeek;\nproto.isoWeekday = getSetISODayOfWeek;\nproto.dayOfYear = getSetDayOfYear;\nproto.hour = proto.hours = getSetHour;\nproto.minute = proto.minutes = getSetMinute;\nproto.second = proto.seconds = getSetSecond;\nproto.millisecond = proto.milliseconds = getSetMillisecond;\nproto.utcOffset = getSetOffset;\nproto.utc = setOffsetToUTC;\nproto.local = setOffsetToLocal;\nproto.parseZone = setOffsetToParsedOffset;\nproto.hasAlignedHourOffset = hasAlignedHourOffset;\nproto.isDST = isDaylightSavingTime;\nproto.isLocal = isLocal;\nproto.isUtcOffset = isUtcOffset;\nproto.isUtc = isUtc;\nproto.isUTC = isUtc;\nproto.zoneAbbr = getZoneAbbr;\nproto.zoneName = getZoneName;\nproto.dates = deprecate(\n    'dates accessor is deprecated. Use date instead.',\n    getSetDayOfMonth\n);\nproto.months = deprecate(\n    'months accessor is deprecated. Use month instead',\n    getSetMonth\n);\nproto.years = deprecate(\n    'years accessor is deprecated. Use year instead',\n    getSetYear\n);\nproto.zone = deprecate(\n    'moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/',\n    getSetZone\n);\nproto.isDSTShifted = deprecate(\n    'isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information',\n    isDaylightSavingTimeShifted\n);\n\nfunction createUnix(input) {\n    return createLocal(input * 1000);\n}\n\nfunction createInZone() {\n    return createLocal.apply(null, arguments).parseZone();\n}\n\nfunction preParsePostFormat(string) {\n    return string;\n}\n\nvar proto$1 = Locale.prototype;\n\nproto$1.calendar = calendar;\nproto$1.longDateFormat = longDateFormat;\nproto$1.invalidDate = invalidDate;\nproto$1.ordinal = ordinal;\nproto$1.preparse = preParsePostFormat;\nproto$1.postformat = preParsePostFormat;\nproto$1.relativeTime = relativeTime;\nproto$1.pastFuture = pastFuture;\nproto$1.set = set;\nproto$1.eras = localeEras;\nproto$1.erasParse = localeErasParse;\nproto$1.erasConvertYear = localeErasConvertYear;\nproto$1.erasAbbrRegex = erasAbbrRegex;\nproto$1.erasNameRegex = erasNameRegex;\nproto$1.erasNarrowRegex = erasNarrowRegex;\n\nproto$1.months = localeMonths;\nproto$1.monthsShort = localeMonthsShort;\nproto$1.monthsParse = localeMonthsParse;\nproto$1.monthsRegex = monthsRegex;\nproto$1.monthsShortRegex = monthsShortRegex;\nproto$1.week = localeWeek;\nproto$1.firstDayOfYear = localeFirstDayOfYear;\nproto$1.firstDayOfWeek = localeFirstDayOfWeek;\n\nproto$1.weekdays = localeWeekdays;\nproto$1.weekdaysMin = localeWeekdaysMin;\nproto$1.weekdaysShort = localeWeekdaysShort;\nproto$1.weekdaysParse = localeWeekdaysParse;\n\nproto$1.weekdaysRegex = weekdaysRegex;\nproto$1.weekdaysShortRegex = weekdaysShortRegex;\nproto$1.weekdaysMinRegex = weekdaysMinRegex;\n\nproto$1.isPM = localeIsPM;\nproto$1.meridiem = localeMeridiem;\n\nfunction get$1(format, index, field, setter) {\n    var locale = getLocale(),\n        utc = createUTC().set(setter, index);\n    return locale[field](utc, format);\n}\n\nfunction listMonthsImpl(format, index, field) {\n    if (isNumber(format)) {\n        index = format;\n        format = undefined;\n    }\n\n    format = format || '';\n\n    if (index != null) {\n        return get$1(format, index, field, 'month');\n    }\n\n    var i,\n        out = [];\n    for (i = 0; i < 12; i++) {\n        out[i] = get$1(format, i, field, 'month');\n    }\n    return out;\n}\n\n// ()\n// (5)\n// (fmt, 5)\n// (fmt)\n// (true)\n// (true, 5)\n// (true, fmt, 5)\n// (true, fmt)\nfunction listWeekdaysImpl(localeSorted, format, index, field) {\n    if (typeof localeSorted === 'boolean') {\n        if (isNumber(format)) {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n    } else {\n        format = localeSorted;\n        index = format;\n        localeSorted = false;\n\n        if (isNumber(format)) {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n    }\n\n    var locale = getLocale(),\n        shift = localeSorted ? locale._week.dow : 0,\n        i,\n        out = [];\n\n    if (index != null) {\n        return get$1(format, (index + shift) % 7, field, 'day');\n    }\n\n    for (i = 0; i < 7; i++) {\n        out[i] = get$1(format, (i + shift) % 7, field, 'day');\n    }\n    return out;\n}\n\nfunction listMonths(format, index) {\n    return listMonthsImpl(format, index, 'months');\n}\n\nfunction listMonthsShort(format, index) {\n    return listMonthsImpl(format, index, 'monthsShort');\n}\n\nfunction listWeekdays(localeSorted, format, index) {\n    return listWeekdaysImpl(localeSorted, format, index, 'weekdays');\n}\n\nfunction listWeekdaysShort(localeSorted, format, index) {\n    return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');\n}\n\nfunction listWeekdaysMin(localeSorted, format, index) {\n    return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');\n}\n\ngetSetGlobalLocale('en', {\n    eras: [\n        {\n            since: '0001-01-01',\n            until: +Infinity,\n            offset: 1,\n            name: 'Anno Domini',\n            narrow: 'AD',\n            abbr: 'AD',\n        },\n        {\n            since: '0000-12-31',\n            until: -Infinity,\n            offset: 1,\n            name: 'Before Christ',\n            narrow: 'BC',\n            abbr: 'BC',\n        },\n    ],\n    dayOfMonthOrdinalParse: /\\d{1,2}(th|st|nd|rd)/,\n    ordinal: function (number) {\n        var b = number % 10,\n            output =\n                toInt((number % 100) / 10) === 1\n                    ? 'th'\n                    : b === 1\n                      ? 'st'\n                      : b === 2\n                        ? 'nd'\n                        : b === 3\n                          ? 'rd'\n                          : 'th';\n        return number + output;\n    },\n});\n\n// Side effect imports\n\nhooks.lang = deprecate(\n    'moment.lang is deprecated. Use moment.locale instead.',\n    getSetGlobalLocale\n);\nhooks.langData = deprecate(\n    'moment.langData is deprecated. Use moment.localeData instead.',\n    getLocale\n);\n\nvar mathAbs = Math.abs;\n\nfunction abs() {\n    var data = this._data;\n\n    this._milliseconds = mathAbs(this._milliseconds);\n    this._days = mathAbs(this._days);\n    this._months = mathAbs(this._months);\n\n    data.milliseconds = mathAbs(data.milliseconds);\n    data.seconds = mathAbs(data.seconds);\n    data.minutes = mathAbs(data.minutes);\n    data.hours = mathAbs(data.hours);\n    data.months = mathAbs(data.months);\n    data.years = mathAbs(data.years);\n\n    return this;\n}\n\nfunction addSubtract$1(duration, input, value, direction) {\n    var other = createDuration(input, value);\n\n    duration._milliseconds += direction * other._milliseconds;\n    duration._days += direction * other._days;\n    duration._months += direction * other._months;\n\n    return duration._bubble();\n}\n\n// supports only 2.0-style add(1, 's') or add(duration)\nfunction add$1(input, value) {\n    return addSubtract$1(this, input, value, 1);\n}\n\n// supports only 2.0-style subtract(1, 's') or subtract(duration)\nfunction subtract$1(input, value) {\n    return addSubtract$1(this, input, value, -1);\n}\n\nfunction absCeil(number) {\n    if (number < 0) {\n        return Math.floor(number);\n    } else {\n        return Math.ceil(number);\n    }\n}\n\nfunction bubble() {\n    var milliseconds = this._milliseconds,\n        days = this._days,\n        months = this._months,\n        data = this._data,\n        seconds,\n        minutes,\n        hours,\n        years,\n        monthsFromDays;\n\n    // if we have a mix of positive and negative values, bubble down first\n    // check: https://github.com/moment/moment/issues/2166\n    if (\n        !(\n            (milliseconds >= 0 && days >= 0 && months >= 0) ||\n            (milliseconds <= 0 && days <= 0 && months <= 0)\n        )\n    ) {\n        milliseconds += absCeil(monthsToDays(months) + days) * 864e5;\n        days = 0;\n        months = 0;\n    }\n\n    // The following code bubbles up values, see the tests for\n    // examples of what that means.\n    data.milliseconds = milliseconds % 1000;\n\n    seconds = absFloor(milliseconds / 1000);\n    data.seconds = seconds % 60;\n\n    minutes = absFloor(seconds / 60);\n    data.minutes = minutes % 60;\n\n    hours = absFloor(minutes / 60);\n    data.hours = hours % 24;\n\n    days += absFloor(hours / 24);\n\n    // convert days to months\n    monthsFromDays = absFloor(daysToMonths(days));\n    months += monthsFromDays;\n    days -= absCeil(monthsToDays(monthsFromDays));\n\n    // 12 months -> 1 year\n    years = absFloor(months / 12);\n    months %= 12;\n\n    data.days = days;\n    data.months = months;\n    data.years = years;\n\n    return this;\n}\n\nfunction daysToMonths(days) {\n    // 400 years have 146097 days (taking into account leap year rules)\n    // 400 years have 12 months === 4800\n    return (days * 4800) / 146097;\n}\n\nfunction monthsToDays(months) {\n    // the reverse of daysToMonths\n    return (months * 146097) / 4800;\n}\n\nfunction as(units) {\n    if (!this.isValid()) {\n        return NaN;\n    }\n    var days,\n        months,\n        milliseconds = this._milliseconds;\n\n    units = normalizeUnits(units);\n\n    if (units === 'month' || units === 'quarter' || units === 'year') {\n        days = this._days + milliseconds / 864e5;\n        months = this._months + daysToMonths(days);\n        switch (units) {\n            case 'month':\n                return months;\n            case 'quarter':\n                return months / 3;\n            case 'year':\n                return months / 12;\n        }\n    } else {\n        // handle milliseconds separately because of floating point math errors (issue #1867)\n        days = this._days + Math.round(monthsToDays(this._months));\n        switch (units) {\n            case 'week':\n                return days / 7 + milliseconds / 6048e5;\n            case 'day':\n                return days + milliseconds / 864e5;\n            case 'hour':\n                return days * 24 + milliseconds / 36e5;\n            case 'minute':\n                return days * 1440 + milliseconds / 6e4;\n            case 'second':\n                return days * 86400 + milliseconds / 1000;\n            // Math.floor prevents floating point math errors here\n            case 'millisecond':\n                return Math.floor(days * 864e5) + milliseconds;\n            default:\n                throw new Error('Unknown unit ' + units);\n        }\n    }\n}\n\nfunction makeAs(alias) {\n    return function () {\n        return this.as(alias);\n    };\n}\n\nvar asMilliseconds = makeAs('ms'),\n    asSeconds = makeAs('s'),\n    asMinutes = makeAs('m'),\n    asHours = makeAs('h'),\n    asDays = makeAs('d'),\n    asWeeks = makeAs('w'),\n    asMonths = makeAs('M'),\n    asQuarters = makeAs('Q'),\n    asYears = makeAs('y'),\n    valueOf$1 = asMilliseconds;\n\nfunction clone$1() {\n    return createDuration(this);\n}\n\nfunction get$2(units) {\n    units = normalizeUnits(units);\n    return this.isValid() ? this[units + 's']() : NaN;\n}\n\nfunction makeGetter(name) {\n    return function () {\n        return this.isValid() ? this._data[name] : NaN;\n    };\n}\n\nvar milliseconds = makeGetter('milliseconds'),\n    seconds = makeGetter('seconds'),\n    minutes = makeGetter('minutes'),\n    hours = makeGetter('hours'),\n    days = makeGetter('days'),\n    months = makeGetter('months'),\n    years = makeGetter('years');\n\nfunction weeks() {\n    return absFloor(this.days() / 7);\n}\n\nvar round = Math.round,\n    thresholds = {\n        ss: 44, // a few seconds to seconds\n        s: 45, // seconds to minute\n        m: 45, // minutes to hour\n        h: 22, // hours to day\n        d: 26, // days to month/week\n        w: null, // weeks to month\n        M: 11, // months to year\n    };\n\n// helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\nfunction substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\n    return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\n}\n\nfunction relativeTime$1(posNegDuration, withoutSuffix, thresholds, locale) {\n    var duration = createDuration(posNegDuration).abs(),\n        seconds = round(duration.as('s')),\n        minutes = round(duration.as('m')),\n        hours = round(duration.as('h')),\n        days = round(duration.as('d')),\n        months = round(duration.as('M')),\n        weeks = round(duration.as('w')),\n        years = round(duration.as('y')),\n        a =\n            (seconds <= thresholds.ss && ['s', seconds]) ||\n            (seconds < thresholds.s && ['ss', seconds]) ||\n            (minutes <= 1 && ['m']) ||\n            (minutes < thresholds.m && ['mm', minutes]) ||\n            (hours <= 1 && ['h']) ||\n            (hours < thresholds.h && ['hh', hours]) ||\n            (days <= 1 && ['d']) ||\n            (days < thresholds.d && ['dd', days]);\n\n    if (thresholds.w != null) {\n        a =\n            a ||\n            (weeks <= 1 && ['w']) ||\n            (weeks < thresholds.w && ['ww', weeks]);\n    }\n    a = a ||\n        (months <= 1 && ['M']) ||\n        (months < thresholds.M && ['MM', months]) ||\n        (years <= 1 && ['y']) || ['yy', years];\n\n    a[2] = withoutSuffix;\n    a[3] = +posNegDuration > 0;\n    a[4] = locale;\n    return substituteTimeAgo.apply(null, a);\n}\n\n// This function allows you to set the rounding function for relative time strings\nfunction getSetRelativeTimeRounding(roundingFunction) {\n    if (roundingFunction === undefined) {\n        return round;\n    }\n    if (typeof roundingFunction === 'function') {\n        round = roundingFunction;\n        return true;\n    }\n    return false;\n}\n\n// This function allows you to set a threshold for relative time strings\nfunction getSetRelativeTimeThreshold(threshold, limit) {\n    if (thresholds[threshold] === undefined) {\n        return false;\n    }\n    if (limit === undefined) {\n        return thresholds[threshold];\n    }\n    thresholds[threshold] = limit;\n    if (threshold === 's') {\n        thresholds.ss = limit - 1;\n    }\n    return true;\n}\n\nfunction humanize(argWithSuffix, argThresholds) {\n    if (!this.isValid()) {\n        return this.localeData().invalidDate();\n    }\n\n    var withSuffix = false,\n        th = thresholds,\n        locale,\n        output;\n\n    if (typeof argWithSuffix === 'object') {\n        argThresholds = argWithSuffix;\n        argWithSuffix = false;\n    }\n    if (typeof argWithSuffix === 'boolean') {\n        withSuffix = argWithSuffix;\n    }\n    if (typeof argThresholds === 'object') {\n        th = Object.assign({}, thresholds, argThresholds);\n        if (argThresholds.s != null && argThresholds.ss == null) {\n            th.ss = argThresholds.s - 1;\n        }\n    }\n\n    locale = this.localeData();\n    output = relativeTime$1(this, !withSuffix, th, locale);\n\n    if (withSuffix) {\n        output = locale.pastFuture(+this, output);\n    }\n\n    return locale.postformat(output);\n}\n\nvar abs$1 = Math.abs;\n\nfunction sign(x) {\n    return (x > 0) - (x < 0) || +x;\n}\n\nfunction toISOString$1() {\n    // for ISO strings we do not use the normal bubbling rules:\n    //  * milliseconds bubble up until they become hours\n    //  * days do not bubble at all\n    //  * months bubble up until they become years\n    // This is because there is no context-free conversion between hours and days\n    // (think of clock changes)\n    // and also not between days and months (28-31 days per month)\n    if (!this.isValid()) {\n        return this.localeData().invalidDate();\n    }\n\n    var seconds = abs$1(this._milliseconds) / 1000,\n        days = abs$1(this._days),\n        months = abs$1(this._months),\n        minutes,\n        hours,\n        years,\n        s,\n        total = this.asSeconds(),\n        totalSign,\n        ymSign,\n        daysSign,\n        hmsSign;\n\n    if (!total) {\n        // this is the same as C#'s (Noda) and python (isodate)...\n        // but not other JS (goog.date)\n        return 'P0D';\n    }\n\n    // 3600 seconds -> 60 minutes -> 1 hour\n    minutes = absFloor(seconds / 60);\n    hours = absFloor(minutes / 60);\n    seconds %= 60;\n    minutes %= 60;\n\n    // 12 months -> 1 year\n    years = absFloor(months / 12);\n    months %= 12;\n\n    // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n    s = seconds ? seconds.toFixed(3).replace(/\\.?0+$/, '') : '';\n\n    totalSign = total < 0 ? '-' : '';\n    ymSign = sign(this._months) !== sign(total) ? '-' : '';\n    daysSign = sign(this._days) !== sign(total) ? '-' : '';\n    hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';\n\n    return (\n        totalSign +\n        'P' +\n        (years ? ymSign + years + 'Y' : '') +\n        (months ? ymSign + months + 'M' : '') +\n        (days ? daysSign + days + 'D' : '') +\n        (hours || minutes || seconds ? 'T' : '') +\n        (hours ? hmsSign + hours + 'H' : '') +\n        (minutes ? hmsSign + minutes + 'M' : '') +\n        (seconds ? hmsSign + s + 'S' : '')\n    );\n}\n\nvar proto$2 = Duration.prototype;\n\nproto$2.isValid = isValid$1;\nproto$2.abs = abs;\nproto$2.add = add$1;\nproto$2.subtract = subtract$1;\nproto$2.as = as;\nproto$2.asMilliseconds = asMilliseconds;\nproto$2.asSeconds = asSeconds;\nproto$2.asMinutes = asMinutes;\nproto$2.asHours = asHours;\nproto$2.asDays = asDays;\nproto$2.asWeeks = asWeeks;\nproto$2.asMonths = asMonths;\nproto$2.asQuarters = asQuarters;\nproto$2.asYears = asYears;\nproto$2.valueOf = valueOf$1;\nproto$2._bubble = bubble;\nproto$2.clone = clone$1;\nproto$2.get = get$2;\nproto$2.milliseconds = milliseconds;\nproto$2.seconds = seconds;\nproto$2.minutes = minutes;\nproto$2.hours = hours;\nproto$2.days = days;\nproto$2.weeks = weeks;\nproto$2.months = months;\nproto$2.years = years;\nproto$2.humanize = humanize;\nproto$2.toISOString = toISOString$1;\nproto$2.toString = toISOString$1;\nproto$2.toJSON = toISOString$1;\nproto$2.locale = locale;\nproto$2.localeData = localeData;\n\nproto$2.toIsoString = deprecate(\n    'toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',\n    toISOString$1\n);\nproto$2.lang = lang;\n\n// FORMATTING\n\naddFormatToken('X', 0, 0, 'unix');\naddFormatToken('x', 0, 0, 'valueOf');\n\n// PARSING\n\naddRegexToken('x', matchSigned);\naddRegexToken('X', matchTimestamp);\naddParseToken('X', function (input, array, config) {\n    config._d = new Date(parseFloat(input) * 1000);\n});\naddParseToken('x', function (input, array, config) {\n    config._d = new Date(toInt(input));\n});\n\n//! moment.js\n\nhooks.version = '2.30.1';\n\nsetHookCallback(createLocal);\n\nhooks.fn = proto;\nhooks.min = min;\nhooks.max = max;\nhooks.now = now;\nhooks.utc = createUTC;\nhooks.unix = createUnix;\nhooks.months = listMonths;\nhooks.isDate = isDate;\nhooks.locale = getSetGlobalLocale;\nhooks.invalid = createInvalid;\nhooks.duration = createDuration;\nhooks.isMoment = isMoment;\nhooks.weekdays = listWeekdays;\nhooks.parseZone = createInZone;\nhooks.localeData = getLocale;\nhooks.isDuration = isDuration;\nhooks.monthsShort = listMonthsShort;\nhooks.weekdaysMin = listWeekdaysMin;\nhooks.defineLocale = defineLocale;\nhooks.updateLocale = updateLocale;\nhooks.locales = listLocales;\nhooks.weekdaysShort = listWeekdaysShort;\nhooks.normalizeUnits = normalizeUnits;\nhooks.relativeTimeRounding = getSetRelativeTimeRounding;\nhooks.relativeTimeThreshold = getSetRelativeTimeThreshold;\nhooks.calendarFormat = getCalendarFormat;\nhooks.prototype = proto;\n\n// currently HTML5 input type only supports 24-hour formats\nhooks.HTML5_FMT = {\n    DATETIME_LOCAL: 'YYYY-MM-DDTHH:mm', // <input type=\"datetime-local\" />\n    DATETIME_LOCAL_SECONDS: 'YYYY-MM-DDTHH:mm:ss', // <input type=\"datetime-local\" step=\"1\" />\n    DATETIME_LOCAL_MS: 'YYYY-MM-DDTHH:mm:ss.SSS', // <input type=\"datetime-local\" step=\"0.001\" />\n    DATE: 'YYYY-MM-DD', // <input type=\"date\" />\n    TIME: 'HH:mm', // <input type=\"time\" />\n    TIME_SECONDS: 'HH:mm:ss', // <input type=\"time\" step=\"1\" />\n    TIME_MS: 'HH:mm:ss.SSS', // <input type=\"time\" step=\"0.001\" />\n    WEEK: 'GGGG-[W]WW', // <input type=\"week\" />\n    MONTH: 'YYYY-MM', // <input type=\"month\" />\n};\n\nexport default hooks;\n","/**\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport axios from '@nextcloud/axios'\n\n/**\n * Append a group to a contact\n *\n * @param {Contact} contact the contact model\n * @param {string} oldGroupName name that gets removed\n * @param {string} newGroupName name that gets added\n */\nconst renameContactFromGroup = async function(contact, oldGroupName, newGroupName) {\n\tconst foundGroups = contact.groups\n\tfoundGroups.push(newGroupName)\n\n\tlet currentGroups = foundGroups.map(groupName => encodeURIComponent(groupName))\n\n\tcurrentGroups = currentGroups.filter(e => e !== encodeURIComponent(oldGroupName))\n\n\treturn axios.patch(contact.url, {}, {\n\t\theaders: {\n\t\t\t'X-PROPERTY': 'CATEGORIES',\n\t\t\t'X-PROPERTY-REPLACE': currentGroups.join(','),\n\t\t},\n\t})\n}\n\nexport default renameContactFromGroup\n","/**\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nimport axios from '@nextcloud/axios'\n\n/**\n * Append a group to a contact\n *\n * @param {Contact} contact the contact model\n * @param {string} groupName the group name\n */\nconst removeContactFromGroup = async function(contact, groupName) {\n\tconst foundGroups = contact.groups\n\n\tlet currentGroups = foundGroups.map(groupName => encodeURIComponent(groupName))\n\n\tcurrentGroups = currentGroups.filter(e => e !== encodeURIComponent(groupName))\n\n\treturn axios.patch(contact.url, {}, {\n\t\theaders: {\n\t\t\t'X-PROPERTY': 'CATEGORIES',\n\t\t\t'X-PROPERTY-REPLACE': currentGroups.join(','),\n\t\t},\n\t})\n}\n\nexport default removeContactFromGroup\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon folder-edit-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M19.39 10.74L11 19.13V20H4C2.9 20 2 19.11 2 18V6C2 4.89 2.89 4 4 4H10L12 6H20C21.1 6 22 6.89 22 8V10.15C21.74 10.06 21.46 10 21.17 10C20.5 10 19.87 10.26 19.39 10.74M13 19.96V22H15.04L21.17 15.88L19.13 13.83L13 19.96M22.85 13.47L21.53 12.15C21.33 11.95 21 11.95 20.81 12.15L19.83 13.13L21.87 15.17L22.85 14.19C23.05 14 23.05 13.67 22.85 13.47Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"FolderEditIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<div v-if=\"!isEmpty\"\n\t\tclass=\"group-drop-area\"\n\t\tdata-testid=\"group-drop-area\"\n\t\t@drop=\"onDrop($event, group)\"\n\t\t@dragenter.prevent\n\t\t@dragover=\"onDragOver($event)\"\n\t\t@dragleave=\"onDragLeave($event)\">\n\t\t<AppNavigationItem :key=\"group.key\"\n\t\t\t:to=\"group.router\"\n\t\t\t:name=\"group.name\">\n\t\t\t<template #icon>\n\t\t\t\t<IconContact :size=\"20\" />\n\t\t\t</template>\n\t\t\t<template #actions>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click=\"addContactsToGroup(group)\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconAdd :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Add contacts') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionInput :value.sync=\"newGroupName\"\n\t\t\t\t\t:disabled=\"renaming\"\n\t\t\t\t\t@submit=\"renameGroup\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconLoading v-if=\"renaming\" :size=\"20\" />\n\t\t\t\t\t\t<IconRename v-else :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Rename') }}\n\t\t\t\t</ActionInput>\n\t\t\t\t<ActionButton :close-after-click=\"true\"\n\t\t\t\t\t@click=\"downloadGroup(group)\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconDownload :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Export') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton @click=\"emailGroup(group)\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconEmail :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Send email') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton @click=\"emailGroup(group, 'bcc')\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconEmail :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Send email as BCC') }}\n\t\t\t\t</ActionButton>\n\t\t\t\t<ActionButton :disabled=\"deleting\" @click=\"deleteGroup\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconLoading v-if=\"deleting\" :size=\"20\" />\n\t\t\t\t\t\t<IconDelete v-else :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts', 'Delete') }}\n\t\t\t\t</ActionButton>\n\t\t\t</template>\n\n\t\t\t<template #counter>\n\t\t\t\t<NcCounterBubble v-if=\"group.contacts.length > 0\">\n\t\t\t\t\t{{ group.contacts.length }}\n\t\t\t\t</NcCounterBubble>\n\t\t\t</template>\n\t\t</AppNavigationItem>\n\t</div>\n</template>\n\n<script>\nimport { emit } from '@nextcloud/event-bus'\nimport download from 'downloadjs'\nimport moment from 'moment'\nimport renameContactFromGroup from '../../services/renameContactFromGroup.js'\nimport removeContactFromGroup from '../../services/removeContactFromGroup.js'\n\nimport {\n\tNcActionButton as ActionButton,\n\tNcCounterBubble,\n\tNcAppNavigationItem as AppNavigationItem,\n\tNcActionInput as ActionInput,\n\tNcLoadingIcon as IconLoading,\n} from '@nextcloud/vue'\nimport IconContact from 'vue-material-design-icons/AccountMultiple.vue'\nimport IconAdd from 'vue-material-design-icons/Plus.vue'\nimport IconDownload from 'vue-material-design-icons/Download.vue'\nimport IconEmail from 'vue-material-design-icons/Email.vue'\nimport IconRename from 'vue-material-design-icons/FolderEdit.vue'\nimport IconDelete from 'vue-material-design-icons/Delete.vue'\nimport { showError } from '@nextcloud/dialogs'\n\nexport default {\n\tname: 'GroupNavigationItem',\n\n\tcomponents: {\n\t\tActionButton,\n\t\tNcCounterBubble,\n\t\tAppNavigationItem,\n\t\tActionInput,\n\t\tIconContact,\n\t\tIconAdd,\n\t\tIconDownload,\n\t\tIconEmail,\n\t\tIconRename,\n\t\tIconDelete,\n\t\tIconLoading,\n\t},\n\n\tprops: {\n\t\tgroup: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tnewGroupName: '',\n\t\t\trenaming: false,\n\t\t\tdeleting: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tcontacts() {\n\t\t\treturn this.$store.getters.getContacts\n\t\t},\n\n\t\tisEmpty() {\n\t\t\treturn this.group.contacts.length === 0\n\t\t},\n\t},\n\n\tmethods: {\n\t\t/**\n\t\t * @param groups\n\t\t * @param groupId\n\t\t */\n\t\tisInGroup(groups, groupId) {\n\t\t\treturn groups.includes(groupId)\n\t\t},\n\t\t/**\n\t\t * Drop contact on group handler.\n\t\t *\n\t\t * @param {object} event drop event\n\t\t * @param {object} group to add to dropped contact\n\t\t * @return {Promise<void>}\n\t\t */\n\t\tasync onDrop(event, group) {\n\t\t\ttry {\n\t\t\t\tconst contactFromDropData = JSON.parse(event.dataTransfer.getData('item'))\n\t\t\t\tconst contactFromStore = this.$store.getters.getContact(`${contactFromDropData.uid}~${contactFromDropData.addressbookId}`)\n\t\t\t\tif (contactFromStore && !this.isInGroup(contactFromStore.groups, group.id)) {\n\t\t\t\t\tconst contact = this.$store.getters.getContact(`${contactFromDropData.uid}~${contactFromDropData.addressbookId}`)\n\t\t\t\t\tawait this.$store.dispatch('updateContactGroups', {\n\t\t\t\t\t\tgroupNames: [...contactFromStore.groups, group.id],\n\t\t\t\t\t\tcontact,\n\t\t\t\t\t})\n\t\t\t\t\tconst localContact = Object.assign(\n\t\t\t\t\t\tObject.create(Object.getPrototypeOf(contact)),\n\t\t\t\t\t\tcontact,\n\t\t\t\t\t)\n\t\t\t\t\tlocalContact.groups = [...contactFromStore.groups, group.id]\n\t\t\t\t\tawait this.$store.dispatch('updateContact', localContact)\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e)\n\t\t\t\tshowError('Tried to drop an invalid contact!')\n\t\t\t} finally {\n\t\t\t\tevent.target.closest('.group-drop-area').removeAttribute('drop-active')\n\t\t\t}\n\t\t},\n\t\t// Add marker for drop area\n\t\tonDragOver(event) {\n\t\t\tevent.preventDefault()\n\t\t\tevent.target.closest('.group-drop-area').setAttribute('drop-active', true)\n\t\t},\n\t\t// Remove marker from drop area\n\t\tonDragLeave(event) {\n\t\t\tevent.target.closest('.group-drop-area').removeAttribute('drop-active')\n\t\t},\n\t\t// Trigger the entity picker view\n\t\taddContactsToGroup() {\n\t\t\temit('contacts:group:append', this.group.name)\n\t\t},\n\n\t\t/**\n\t\t * Download group of contacts\n\t\t *\n\t\t * @param {object} group of contacts to be downloaded\n\t\t */\n\t\tdownloadGroup(group) {\n\t\t\t// get grouped contacts\n\t\t\tlet groupedContacts = {}\n\t\t\tgroup.contacts.forEach(key => {\n\t\t\t\tconst id = this.contacts[key].addressbook.id\n\t\t\t\tgroupedContacts = Object.assign({\n\t\t\t\t\t[id]: {\n\t\t\t\t\t\taddressbook: this.contacts[key].addressbook,\n\t\t\t\t\t\tcontacts: [],\n\t\t\t\t\t},\n\t\t\t\t}, groupedContacts)\n\t\t\t\tgroupedContacts[id].contacts.push(this.contacts[key].url)\n\t\t\t})\n\n\t\t\t// create vcard promise with the requested contacts\n\t\t\tconst vcardPromise = Promise.all(\n\t\t\t\tObject.keys(groupedContacts).map(key =>\n\t\t\t\t\tgroupedContacts[key].addressbook.dav.addressbookMultigetExport(groupedContacts[key].contacts)))\n\t\t\t\t.then(response => ({\n\t\t\t\t\tgroupName: group.name,\n\t\t\t\t\tdata: response.map(data => data.body).join(''),\n\t\t\t\t}))\n\n\t\t\t// download vcard\n\t\t\tthis.downloadVcardPromise(vcardPromise)\n\t\t},\n\n\t\t/**\n\t\t * Download vcard promise as vcard file\n\t\t *\n\t\t * @param {Promise} vcardPromise the full vcf file promise\n\t\t */\n\t\tasync downloadVcardPromise(vcardPromise) {\n\t\t\tvcardPromise.then(response => {\n\t\t\t\tconst filename = moment().format('YYYY-MM-DD_HH-mm') + '_' + response.groupName + '.vcf'\n\t\t\t\tconst content = 'data:text/plain;charset=utf-8,' + window.encodeURIComponent(response.data)\n\t\t\t\tdownload(content, filename, 'text/vcard')\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * Open mailto: for contacts in a group\n\t\t *\n\t\t * @param {object} group of contacts to be emailed\n\t\t * @param {string} mode\n\t\t */\n\t\temailGroup(group, mode = 'to') {\n\t\t\tconst emails = []\n\t\t\tgroup.contacts.filter(key => this.contacts[key].email !== null).forEach(key => {\n\t\t\t\t// The email property could contain \"John Doe <john.doe@example.com>\", but vcard spec only\n\t\t\t\t// allows addr-spec, not name-addr, so to stay compliant, replace everything outside of <>\n\t\t\t\tconst email = this.contacts[key].email.replace(/(.*<)([^>]*)(>)/g, '$2').trim()\n\t\t\t\tconst name = this.contacts[key].fullName.replace(/[,<>]/g, '').trim()\n\t\t\t\tif (email === '') {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (name === null || name === '') {\n\t\t\t\t\temails.push(email)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\temails.push(`${name} <${email}>`)\n\t\t\t})\n\t\t\t// We could just do mailto:${emails}, but if we want to use name-addr, not addr-spec, then we\n\t\t\t// have to explicitly set the \"to:\" or \"bcc:\" header.\n\t\t\twindow.location.href = `mailto:?${mode}=${emails.map(encodeURIComponent).join(',')}`\n\t\t},\n\n\t\t/**\n\t\t * Rename group in store and on server\n\t\t */\n\t\tasync renameGroup() {\n\t\t\tif (this.newGroupName === '') {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.renaming = true\n\t\t\tfor (const key of this.group.contacts) {\n\t\t\t\tconst contact = this.$store.getters.getContact(key)\n\n\t\t\t\tif (contact === undefined) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tawait renameContactFromGroup(contact, this.group.name, this.newGroupName)\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error('Error renaming group', e)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.$store.commit('renameGroup', {\n\t\t\t\toldGroupName: this.group.name,\n\t\t\t\tnewGroupName: this.newGroupName,\n\t\t\t})\n\t\t\tthis.renaming = false\n\t\t},\n\n\t\t/**\n\t\t * Delete group from store and on server\n\t\t */\n\t\tasync deleteGroup() {\n\t\t\tthis.deleting = true\n\t\t\tfor (const key of this.group.contacts) {\n\t\t\t\tconst contact = this.$store.getters.getContact(key)\n\n\t\t\t\tif (contact === undefined) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tawait removeContactFromGroup(contact, this.group.name)\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error('Error deleting group', e)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.$store.commit('removeGroup', this.group.name)\n\t\t\tthis.deleting = false\n\t\t},\n\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.group-drop-area[drop-active=true] {\n\tbackground-color: var(--color-primary-light);\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<Modal size=\"normal\"\n\t\t@close=\"onCancel\">\n\t\t<!-- Wrapper for content & navigation -->\n\t\t<div class=\"entity-picker\">\n\t\t\t<!-- Search -->\n\t\t\t<div class=\"entity-picker__new\">\n\t\t\t\t<input ref=\"input\"\n\t\t\t\t\tv-model=\"circleName\"\n\t\t\t\t\t:placeholder=\"t('contacts', 'New team name')\"\n\t\t\t\t\tclass=\"entity-picker__new-input\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t@keypress.enter=\"onSubmit\">\n\t\t\t</div>\n\n\t\t\t<div class=\"entity-picker__content\">\n\t\t\t\t<p> {{ CIRCLE_DESC }}</p>\n\t\t\t\t<br>\n\n\t\t\t\t<!-- Personal circle, TODO: IMPLEMENT -->\n\t\t\t\t<template v-if=\"false\">\n\t\t\t\t\t<CheckboxRadioSwitch :checked.sync=\"isPersonal\"\n\t\t\t\t\t\t:disabled=\"loading !== false\">\n\t\t\t\t\t\t{{ t('contacts', 'Personal team') }}\n\t\t\t\t\t</CheckboxRadioSwitch>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{{ t('contacts', 'This team will only be visible to you. Other members will not be able to see or use it.') }}\n\t\t\t\t\t</p>\n\t\t\t\t</template>\n\n\t\t\t\t<!-- Local circle -->\n\t\t\t\t<template v-if=\"isGlobalScale\">\n\t\t\t\t\t<CheckboxRadioSwitch :checked.sync=\"isLocal\"\n\t\t\t\t\t\t:disabled=\"loading !== false\">\n\t\t\t\t\t\t{{ t('contacts', 'Local team') }}\n\t\t\t\t\t</CheckboxRadioSwitch>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{{ t('contacts', 'This team will not be shared with the other instances of the global scale') }}\n\t\t\t\t\t</p>\n\t\t\t\t</template>\n\t\t\t</div>\n\n\t\t\t<div class=\"entity-picker__navigation\">\n\t\t\t\t<button :disabled=\"loading\"\n\t\t\t\t\tclass=\"navigation__button-left\"\n\t\t\t\t\t@click=\"onCancel\">\n\t\t\t\t\t{{ t('contacts', 'Cancel') }}\n\t\t\t\t</button>\n\t\t\t\t<button :disabled=\"isEmptyName || loading\"\n\t\t\t\t\tclass=\"navigation__button-right primary\"\n\t\t\t\t\t@click=\"onSubmit\">\n\t\t\t\t\t{{ t('contacts', 'Create team') }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</Modal>\n</template>\n\n<script>\nimport { getCapabilities } from '@nextcloud/capabilities'\nimport {\n\tNcCheckboxRadioSwitch as CheckboxRadioSwitch,\n\tNcModal as Modal,\n} from '@nextcloud/vue'\n\nimport { CIRCLE_DESC } from '../../models/constants.ts'\n\nexport default {\n\tname: 'NewCircleIntro',\n\n\tcomponents: {\n\t\tCheckboxRadioSwitch,\n\t\tModal,\n\t},\n\n\tprops: {\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tcircleName: '',\n\t\t\tisPersonal: false,\n\t\t\tisLocal: false,\n\n\t\t\tCIRCLE_DESC,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tisEmptyName() {\n\t\t\treturn this.circleName.trim() === ''\n\t\t},\n\n\t\tisGlobalScale() {\n\t\t\treturn getCapabilities().circles?.status?.globalScale !== false\n\t\t},\n\t},\n\n\tmounted() {\n\t\tthis.$nextTick(() => {\n\t\t\tthis.$refs.input.focus()\n\t\t\tthis.$refs.input.select()\n\t\t})\n\t},\n\n\tmethods: {\n\t\tonCancel() {\n\t\t\t/**\n\t\t\t * Emitted when the user closed or cancelled\n\t\t\t */\n\t\t\tthis.$emit('close')\n\t\t},\n\t\tonSubmit() {\n\t\t\t/**\n\t\t\t * Emitted when user submit the form\n\t\t\t *\n\t\t\t * @type {Array} the selected entities\n\t\t\t */\n\t\t\tthis.$emit('submit', this.circleName, this.isPersonal, this.isLocal)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@use 'sass:math';\n\n// Dialog variables\n$dialog-padding: 20px;\n$dialog-height: 480px;\n$entity-spacing: 4px;\n\n// https://uxplanet.org/7-rules-for-mobile-ui-button-design-e9cf2ea54556\n// recommended is 48px\n// 44px is what we choose and have very good visual-to-usability ratio\n$clickable-area: 44px;\n\n// background icon size\n// also used for the scss icon font\n$icon-size: 16px;\n\n// icon padding for a $clickable-area width and a $icon-size icon\n// ( 44px - 16px ) / 2\n$icon-margin: math.div($clickable-area - $icon-size, 2);\n\n.entity-picker {\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\tmin-height: $dialog-height;\n\theight: 100%;\n\tpadding: $dialog-padding;\n\tbox-sizing: border-box;\n\n\t&__new {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\t&-input {\n\t\t\twidth: 100%;\n\t\t\theight: $clickable-area - $entity-spacing !important;\n\t\t\tmargin: $entity-spacing 0;\n\t\t\tfont-size: 16px;\n\t\t\tline-height: $clickable-area - $entity-spacing;\n\t\t}\n\t}\n\n\t&__content {\n\t\tflex: 1 1 100%;\n\t\tpadding: 20px 0;\n\t}\n\n\t&__navigation {\n\t\tz-index: 1;\n\t\tdisplay: flex;\n\t\t// define our base width, no shrinkage\n\t\tflex: 0 0;\n\t\tjustify-content: space-between;\n\t\t// Same as above\n\t\twidth: 100%;\n\t\tbox-shadow: 0 -10px 5px var(--color-main-background);\n\t\t&__button-right {\n\t\t\tmargin-left: auto;\n\t\t}\n\t}\n}\n\n// Make the checkboxes span full width\n:deep(.checkbox-radio-switch__label) {\n\twidth: 100%;\n}\n\n// Properly center Entity Picker empty content\n.empty-content {\n\tmargin: 0;\n}\n\n/** Size full in the modal component doesn't have border radius, this adds\nit back */\n:deep(.modal-container) {\n\tborder-radius: var(--border-radius-large) !important;\n}\n\n</style>\n","/**\n * SPDX-FileCopyrightText: 2020 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { loadState } from '@nextcloud/initial-state'\n\nconst isContactsInteractionEnabled = loadState('contacts', 'isContactsInteractionEnabled', false)\nexport default isContactsInteractionEnabled\n","<!--\n  - SPDX-FileCopyrightText: 2022 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template functional>\n\t<span :aria-hidden=\"!props.title\"\n\t\t:aria-label=\"props.title\"\n\t\t:class=\"[data.class, data.staticClass]\"\n\t\tclass=\"material-design-icon icon-recently-contacted\"\n\t\trole=\"img\"\n\t\tv-bind=\"data.attrs\"\n\t\tv-on=\"listeners\">\n\t\t<svg :fill=\"props.fillColor\"\n\t\t\tclass=\"material-design-icon__svg\"\n\t\t\t:width=\"props.size\"\n\t\t\t:height=\"props.size\"\n\t\t\tviewBox=\"0 0 16 16\">\n\t\t\t<path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n\t\t\t<path d=\"M14 3v10h1V3zM12 13h1V3h-1zM1.7 3a.7.7 0 00-.7.7v8.6c0 .4.3.7.7.7h8.6c.4 0 .7-.3.7-.7V3.7a.7.7 0 00-.7-.7zM6 5a1.6 1.6 0 010 3.2A1.6 1.6 0 016 5zm0 4.4c1 0 3.2.6 3.2 1.6v.6H2.8V11c0-1 2.1-1.6 3.2-1.6z\" />\n\t\t</svg>\n\t</span>\n</template>\n\n<script>\nexport default {\n\tname: 'IconRecentlyContacted',\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 20,\n\t\t},\n\t\tfillColor: {\n\t\t\ttype: String,\n\t\t\tdefault: 'currentColor',\n\t\t},\n\t},\n}\n</script>\n","<!--\n  - SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<AppNavigation>\n\t\t<template #icon>\n\t\t\t<IconLoading v-if=\"loading\" :size=\"20\" />\n\t\t</template>\n\n\t\t<template #search>\n\t\t\t<header class=\"header\">\n\t\t\t\t<slot />\n\t\t\t</header>\n\t\t</template>\n\n\t\t<!-- groups list -->\n\t\t<template #list>\n\t\t\t<!-- All contacts group -->\n\t\t\t<AppNavigationItem id=\"everyone\"\n\t\t\t\t:name=\"GROUP_ALL_CONTACTS\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'group',\n\t\t\t\t\tparams: { selectedGroup: GROUP_ALL_CONTACTS },\n\t\t\t\t}\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconContact :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t<template #counter>\n\t\t\t\t\t<NcCounterBubble v-if=\"sortedContacts.length\">\n\t\t\t\t\t\t{{ sortedContacts.length }}\n\t\t\t\t\t</NcCounterBubble>\n\t\t\t\t</template>\n\t\t\t</AppNavigationItem>\n\n\t\t\t<!-- Organization chart -->\n\t\t\t<AppNavigationItem v-if=\"existChart\"\n\t\t\t\tid=\"chart\"\n\t\t\t\t:name=\"CHART_ALL_CONTACTS\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'chart',\n\t\t\t\t\tparams: { selectedChart: GROUP_ALL_CONTACTS },\n\t\t\t\t}\"\n\t\t\t\ticon=\"icon-category-monitoring\" />\n\n\t\t\t<!-- Not grouped group -->\n\t\t\t<AppNavigationItem v-if=\"ungroupedContacts.length > 0\"\n\t\t\t\tid=\"notgrouped\"\n\t\t\t\t:name=\"GROUP_NO_GROUP_CONTACTS\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'group',\n\t\t\t\t\tparams: { selectedGroup: GROUP_NO_GROUP_CONTACTS },\n\t\t\t\t}\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconUser :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t<template #counter>\n\t\t\t\t\t<NcCounterBubble v-if=\"ungroupedContacts.length\">\n\t\t\t\t\t\t{{ ungroupedContacts.length }}\n\t\t\t\t\t</NcCounterBubble>\n\t\t\t\t</template>\n\t\t\t</AppNavigationItem>\n\n\t\t\t<!-- Recently contacted group -->\n\t\t\t<AppNavigationItem v-if=\"isContactsInteractionEnabled && recentlyContactedContacts && recentlyContactedContacts.contacts.length > 0\"\n\t\t\t\tid=\"recentlycontacted\"\n\t\t\t\t:name=\"GROUP_RECENTLY_CONTACTED\"\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'group',\n\t\t\t\t\tparams: { selectedGroup: GROUP_RECENTLY_CONTACTED },\n\t\t\t\t}\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconRecentlyContacted :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t<template #counter>\n\t\t\t\t\t<NcCounterBubble v-if=\"recentlyContactedContacts.contacts.length\">\n\t\t\t\t\t\t{{ recentlyContactedContacts.contacts.length }}\n\t\t\t\t\t</NcCounterBubble>\n\t\t\t\t</template>\n\t\t\t</AppNavigationItem>\n\n\t\t\t<AppNavigationCaption id=\"newgroup\"\n\t\t\t\t:force-menu=\"true\"\n\t\t\t\t:menu-open.sync=\"isNewGroupMenuOpen\"\n\t\t\t\t:name=\"t('contacts', 'Contact groups')\"\n\t\t\t\t@click.prevent.stop=\"toggleNewGroupMenu\">\n\t\t\t\t<template #actionsTriggerIcon>\n\t\t\t\t\t<IconAdd :size=\"20\" />\n\t\t\t\t</template>\n\t\t\t\t<template #actions>\n\t\t\t\t\t<ActionText v-show=\"isNewGroupMenuOpen\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconError v-if=\"createGroupError\" :size=\"20\" />\n\t\t\t\t\t\t\t<IconContact v-else-if=\"!createGroupError\" :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ createGroupError ? createGroupError : t('contacts', 'Create a new contact group') }}\n\t\t\t\t\t</ActionText>\n\t\t\t\t\t<ActionInput v-show=\"isNewGroupMenuOpen\"\n\t\t\t\t\t\ticon=\"\"\n\t\t\t\t\t\t:placeholder=\"t('contacts','Contact group name')\"\n\t\t\t\t\t\t@submit.prevent.stop=\"createNewGroup\" />\n\t\t\t\t</template>\n\t\t\t</AppNavigationCaption>\n\n\t\t\t<!-- Custom groups -->\n\t\t\t<GroupNavigationItem v-for=\"group in ellipsisGroupsMenu\"\n\t\t\t\t:key=\"group.key\"\n\t\t\t\t:group=\"group\" />\n\n\t\t\t<template v-if=\"isCirclesEnabled\">\n\t\t\t\t<!-- Toggle groups ellipsis -->\n\t\t\t\t<AppNavigationItem v-if=\"groupsMenu.length > ELLIPSIS_COUNT\"\n\t\t\t\t\t:name=\"collapseGroupsTitle\"\n\t\t\t\t\tclass=\"app-navigation__collapse\"\n\t\t\t\t\ticon=\"\"\n\t\t\t\t\t@click=\"onToggleGroups\" />\n\n\t\t\t\t<!-- New circle button caption and modal -->\n\t\t\t\t<AppNavigationCaption id=\"newcircle\"\n\t\t\t\t\t:name=\"t('contacts', 'Teams')\">\n\t\t\t\t\t<template #actions>\n\t\t\t\t\t\t<NcActionButton @click=\"toggleNewCircleModal\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconAdd :size=\"20\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t('contacts', 'Create a new team') }}\n\t\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t</template>\n\t\t\t\t</AppNavigationCaption>\n\t\t\t\t<NewCircleIntro v-if=\"isNewCircleModalOpen\"\n\t\t\t\t\t:loading=\"createCircleLoading\"\n\t\t\t\t\t@close=\"closeNewCircleIntro\"\n\t\t\t\t\t@submit=\"createNewCircle\" />\n\n\t\t\t\t<template v-if=\"circlesMenu.length > 0\">\n\t\t\t\t\t<!-- Circles -->\n\t\t\t\t\t<CircleNavigationItem v-for=\"circle in ellipsisCirclesMenu\"\n\t\t\t\t\t\t:key=\"circle.key\"\n\t\t\t\t\t\t:circle=\"circle\" />\n\n\t\t\t\t\t<!-- Toggle circles ellipsis -->\n\t\t\t\t\t<AppNavigationItem v-if=\"circlesMenu.length > ELLIPSIS_COUNT\"\n\t\t\t\t\t\t:name=\"collapseCirclesTitle\"\n\t\t\t\t\t\tclass=\"app-navigation__collapse\"\n\t\t\t\t\t\ticon=\"\"\n\t\t\t\t\t\t@click=\"onToggleCircles\" />\n\t\t\t\t</template>\n\n\t\t\t\t<p class=\"app-navigation__circle-desc\">\n\t\t\t\t\t{{ CIRCLE_DESC }}\n\t\t\t\t</p>\n\t\t\t</template>\n\t\t</template>\n\n\t\t<!-- settings -->\n\n\t\t<template #footer>\n\t\t\t<div class=\"contacts-settings\">\n\t\t\t\t<AppNavigationItem :aria-label=\"t('contacts', 'Open the contacts app settings')\"\n\t\t\t\t\t:name=\"CONTACTS_SETTINGS\"\n\t\t\t\t\t@click=\"showContactsSettings\">\n\t\t\t\t\t<Cog slot=\"icon\" :size=\"20\" />\n\t\t\t\t</AppNavigationItem>\n\t\t\t</div>\n\t\t</template>\n\t\t<ContactsSettings :open.sync=\"showSettings\" />\n\t</AppNavigation>\n</template>\n\n<script>\nimport { GROUP_ALL_CONTACTS, CHART_ALL_CONTACTS, GROUP_NO_GROUP_CONTACTS, GROUP_RECENTLY_CONTACTED, ELLIPSIS_COUNT, CIRCLE_DESC, CONTACTS_SETTINGS } from '../../models/constants.ts'\n\nimport {\n\tNcActionInput as ActionInput,\n\tNcActionText as ActionText,\n\tNcActionButton,\n\tNcAppNavigation as AppNavigation,\n\tNcCounterBubble,\n\tNcAppNavigationItem as AppNavigationItem,\n\tNcAppNavigationCaption as AppNavigationCaption,\n\tNcLoadingIcon as IconLoading,\n} from '@nextcloud/vue'\n\nimport naturalCompare from 'string-natural-compare'\n\nimport CircleNavigationItem from './CircleNavigationItem.vue'\nimport Cog from 'vue-material-design-icons/Cog.vue'\nimport ContactsSettings from './ContactsSettings.vue'\nimport GroupNavigationItem from './GroupNavigationItem.vue'\nimport NewCircleIntro from '../EntityPicker/NewCircleIntro.vue'\n\nimport isCirclesEnabled from '../../services/isCirclesEnabled.js'\nimport isContactsInteractionEnabled from '../../services/isContactsInteractionEnabled.js'\nimport IconContact from 'vue-material-design-icons/AccountMultiple.vue'\nimport IconUser from 'vue-material-design-icons/Account.vue'\nimport IconRecentlyContacted from '../Icons/IconRecentlyContacted.vue'\nimport IconAdd from 'vue-material-design-icons/Plus.vue'\nimport IconError from 'vue-material-design-icons/AlertCircle.vue'\n\nimport RouterMixin from '../../mixins/RouterMixin.js'\nimport { showError } from '@nextcloud/dialogs'\nimport { emit } from '@nextcloud/event-bus'\n\nexport default {\n\tname: 'RootNavigation',\n\n\tcomponents: {\n\t\tActionInput,\n\t\tActionText,\n\t\tNcActionButton,\n\t\tAppNavigation,\n\t\tNcCounterBubble,\n\t\tAppNavigationItem,\n\t\tAppNavigationCaption,\n\t\tCircleNavigationItem,\n\t\tCog,\n\t\tContactsSettings,\n\t\tGroupNavigationItem,\n\t\tIconContact,\n\t\tIconUser,\n\t\tIconAdd,\n\t\tIconError,\n\t\tIconLoading,\n\t\tIconRecentlyContacted,\n\t\tNewCircleIntro,\n\t},\n\n\tmixins: [RouterMixin],\n\n\tprops: {\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\n\t\tcontactsList: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tCIRCLE_DESC,\n\t\t\tCONTACTS_SETTINGS,\n\t\t\tELLIPSIS_COUNT,\n\t\t\tGROUP_ALL_CONTACTS,\n\t\t\tCHART_ALL_CONTACTS,\n\t\t\tGROUP_NO_GROUP_CONTACTS,\n\t\t\tGROUP_RECENTLY_CONTACTED,\n\n\t\t\t// create group\n\t\t\tisNewGroupMenuOpen: false,\n\t\t\tcreateGroupError: null,\n\n\t\t\t// create circle\n\t\t\tisNewCircleModalOpen: false,\n\t\t\tcreateCircleLoading: false,\n\t\t\tcreateCircleError: null,\n\n\t\t\tisCirclesEnabled,\n\t\t\tisContactsInteractionEnabled,\n\n\t\t\tcollapsedGroups: true,\n\t\t\tcollapsedCircles: true,\n\n\t\t\tshowSettings: false,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t// store variables\n\t\tcircles() {\n\t\t\treturn this.$store.getters.getCircles\n\t\t},\n\t\tcontacts() {\n\t\t\treturn this.$store.getters.getContacts\n\t\t},\n\t\tgroups() {\n\t\t\treturn this.$store.getters.getGroups\n\t\t},\n\t\tsortedContacts() {\n\t\t\treturn this.$store.getters.getSortedContacts\n\t\t},\n\n\t\t// list all the contacts that doesn't have a group\n\t\tungroupedContacts() {\n\t\t\treturn this.sortedContacts.filter(contact => this.contacts[contact.key].groups && this.contacts[contact.key].groups.length === 0)\n\t\t},\n\n\t\t// check if any contact has manager, if not then is no need for organization chart menu\n\t\texistChart() {\n\t\t\treturn !!Object.keys(this.contacts).filter(key => this.contacts[key].managersName).length\n\t\t},\n\n\t\t// generate groups menu from the groups store\n\t\tgroupsMenu() {\n\t\t\tconst menu = this.groups.map(group => {\n\t\t\t\treturn Object.assign({}, group, {\n\t\t\t\t\tid: group.name.replace(' ', '_'),\n\t\t\t\t\tkey: group.name.replace(' ', '_'),\n\t\t\t\t\trouter: {\n\t\t\t\t\t\tname: 'group',\n\t\t\t\t\t\tparams: { selectedGroup: group.name },\n\t\t\t\t\t},\n\t\t\t\t\ttoString: () => group.name,\n\t\t\t\t})\n\t\t\t})\n\t\t\tmenu.sort((a, b) => naturalCompare(a.toString(), b.toString(), { caseInsensitive: true }))\n\n\t\t\t// Find the Recently Contacted group, delete it from array\n\t\t\tconst recentlyIndex = menu.findIndex(group => group.name === GROUP_RECENTLY_CONTACTED)\n\t\t\tif (recentlyIndex >= 0) {\n\t\t\t\tmenu.splice(recentlyIndex, 1)\n\t\t\t}\n\n\t\t\treturn menu\n\t\t},\n\t\tellipsisGroupsMenu() {\n\t\t\t// If circles is not enabled, we show everything\n\t\t\tif (this.isCirclesEnabled && this.collapsedGroups) {\n\t\t\t\treturn this.groupsMenu.slice(0, ELLIPSIS_COUNT)\n\t\t\t}\n\t\t\treturn this.groupsMenu\n\t\t},\n\n\t\t// generate circles menu from the circles store\n\t\tcirclesMenu() {\n\t\t\tconst menu = this.circles || []\n\t\t\tmenu.sort((a, b) => {\n\t\t\t\t// If user is member of a and b, sort by level\n\t\t\t\tif (a?.initiator?.level !== b?.initiator?.level && a?.initiator?.level && b?.initiator?.level) {\n\t\t\t\t\treturn b.initiator.level - a.initiator.level\n\t\t\t\t}\n\n\t\t\t\t// If user is member of a and not b, sort a first\n\t\t\t\tif (a.initiator && !b.initiator) {\n\t\t\t\t\treturn -1\n\t\t\t\t}\n\n\t\t\t\t// If user is member of b and not a, sort b first\n\t\t\t\tif (!a.initiator && b.initiator) {\n\t\t\t\t\treturn 1\n\t\t\t\t}\n\n\t\t\t\t// Else we sort by name\n\t\t\t\treturn naturalCompare(a.toString(), b.toString(), { caseInsensitive: true })\n\t\t\t})\n\n\t\t\treturn menu\n\t\t},\n\t\tellipsisCirclesMenu() {\n\t\t\tif (this.collapsedCircles) {\n\t\t\t\treturn this.circlesMenu.slice(0, ELLIPSIS_COUNT)\n\t\t\t}\n\t\t\treturn this.circlesMenu\n\t\t},\n\n\t\t// Recently contacted data\n\t\trecentlyContactedContacts() {\n\t\t\treturn this.groups.find(group => group.name === GROUP_RECENTLY_CONTACTED)\n\t\t},\n\n\t\t// Titles for the ellipsis toggle buttons\n\t\tcollapseGroupsTitle() {\n\t\t\treturn this.collapsedGroups\n\t\t\t\t? t('contacts', 'Show all groups')\n\t\t\t\t: t('contacts', 'Collapse groups')\n\t\t},\n\t\tcollapseCirclesTitle() {\n\t\t\treturn this.collapsedCircles\n\t\t\t\t? t('contacts', 'Show all teams')\n\t\t\t\t: t('contacts', 'Collapse teams')\n\t\t},\n\t},\n\n\tmethods: {\n\t\ttoggleNewGroupMenu() {\n\t\t\tthis.isNewGroupMenuOpen = !this.isNewGroupMenuOpen\n\t\t},\n\t\tcreateNewGroup(e) {\n\t\t\tconst input = e.target.querySelector('input[type=text]')\n\t\t\tconst groupName = input.value.trim()\n\t\t\tif (groupName.length === 0) {\n\t\t\t\tshowError(t('contacts', 'Group name cannot be empty'))\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.logger.debug('Creating new group', { groupName })\n\n\t\t\t// Check if already exists\n\t\t\tif (this.groups.find(group => group.name === groupName)) {\n\t\t\t\tthis.createGroupError = t('contacts', 'This group already exists')\n\t\t\t\temit('contacts:group:append', this.groups.find(group => group.name === groupName).name)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.createGroupError = null\n\t\t\tthis.logger.debug('Created new local group', { groupName })\n\n\t\t\ttry {\n\t\t\t\tthis.$store.dispatch('addGroup', groupName)\n\t\t\t\tthis.isNewGroupMenuOpen = false\n\t\t\t\temit('contacts:group:append', groupName)\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('contacts', 'An error occurred while creating the group'))\n\t\t\t}\n\t\t},\n\n\t\t// Ellipsis item toggles\n\t\tonToggleGroups() {\n\t\t\tthis.collapsedGroups = !this.collapsedGroups\n\t\t},\n\t\tonToggleCircles() {\n\t\t\tthis.collapsedCircles = !this.collapsedCircles\n\t\t},\n\n\t\ttoggleNewCircleModal() {\n\t\t\tthis.isNewCircleModalOpen = true\n\t\t},\n\t\tasync createNewCircle(circleName, isPersonal, isLocal) {\n\t\t\tthis.logger.debug('Creating new team', { circleName })\n\n\t\t\tthis.createCircleLoading = true\n\n\t\t\t// Check if already exists\n\t\t\tif (this.circles.find(circle => circle.name === circleName)) {\n\t\t\t\tthis.createCircleError = t('contacts', 'This team already exists')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.createCircleError = null\n\n\t\t\ttry {\n\t\t\t\tconst circle = await this.$store.dispatch('createCircle', { circleName, isPersonal, isLocal })\n\t\t\t\tthis.closeNewCircleIntro()\n\n\t\t\t\t// Select group\n\t\t\t\tthis.$router.push({\n\t\t\t\t\tname: 'circle',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tselectedCircle: circle.id,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('contacts', 'An error happened during the creation of the team'))\n\t\t\t} finally {\n\t\t\t\tthis.createCircleLoading = false\n\t\t\t}\n\t\t},\n\t\tcloseNewCircleIntro() {\n\t\t\tthis.isNewCircleModalOpen = false\n\t\t},\n\n\t\t/**\n\t\t * Shows the contacts settings\n\t\t */\n\t\tshowContactsSettings() {\n\t\t\tthis.showSettings = true\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n$caption-padding: 22px;\n\n.header {\n\tpadding: calc(var(--default-grid-baseline, 4px) * 2);\n}\n\n#newgroup,\n#newcircle {\n\tmargin-top: $caption-padding;\n\n\t:deep(a) {\n\t\tcolor: var(--color-text-maxcontrast)\n\t}\n}\n\n.app-navigation__circle-desc {\n\tmargin: 0 $caption-padding;\n}\n\n.app-navigation__collapse :deep(a) {\n\tcolor: var(--color-text-maxcontrast)\n}\n\n:deep(.settings-button__label) {\n\topacity: .7;\n\tfont-weight: bold;\n}\n\n.contacts-settings {\n\tpadding: calc(var(--default-grid-baseline, 4px) * 2);\n}\n\n.contacts-settings-button {\n\twidth: 100%;\n\tjustify-content: start !important;\n}\n</style>\n","<!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<Content :app-name=\"appName\">\n\t\t<!-- new-contact-button + navigation + settings -->\n\t\t<RootNavigation :contacts-list=\"contactsList\"\n\t\t\t:loading=\"loadingContacts || loadingCircles\"\n\t\t\t:selected-group=\"selectedGroup\"\n\t\t\t:selected-contact=\"selectedContact\">\n\t\t\t<div class=\"import-and-new-contact-buttons\">\n\t\t\t\t<SettingsImportContacts v-if=\"!loadingContacts && isEmptyGroup && !isChartView && !isCirclesView\" />\n\t\t\t\t<!-- new-contact-button -->\n\t\t\t\t<Button v-if=\"!loadingContacts\"\n\t\t\t\t\ttype=\"secondary\"\n\t\t\t\t\t:wide=\"true\"\n\t\t\t\t\t:disabled=\"!defaultAddressbook\"\n\t\t\t\t\t@click=\"newContact\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconAdd :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('contacts','New contact') }}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</RootNavigation>\n\n\t\t<!-- Main content: circle, chart or contacts -->\n\t\t<CircleContent v-if=\"selectedCircle\"\n\t\t\t:loading=\"loadingCircles\" />\n\t\t<ChartContent v-else-if=\"selectedChart\"\n\t\t\t:contacts-list=\"contacts\" />\n\t\t<ContactsContent v-else\n\t\t\t:contacts-list=\"contactsList\"\n\t\t\t:loading=\"loadingContacts\"\n\t\t\t@new-contact=\"newContact\" />\n\n\t\t<!-- Import modal -->\n\t\t<Modal v-if=\"isImporting\"\n\t\t\t:clear-view-delay=\"-1\"\n\t\t\t:can-close=\"isImportDone\"\n\t\t\t@close=\"closeImport\">\n\t\t\t<ImportView @close=\"closeImport\" />\n\t\t</Modal>\n\n\t\t<!-- Select contacts group modal -->\n\t\t<ContactsPicker />\n\t</Content>\n</template>\n\n<script>\nimport { GROUP_ALL_CONTACTS, GROUP_NO_GROUP_CONTACTS, ROUTE_CIRCLE } from '../models/constants.ts'\n\nimport {\n\tisMobile,\n\tNcButton as Button,\n\tNcContent as Content,\n\tNcModal as Modal,\n} from '@nextcloud/vue'\n\nimport { showError } from '@nextcloud/dialogs'\nimport ICAL from 'ical.js'\n\nimport CircleContent from '../components/AppContent/CircleContent.vue'\nimport ChartContent from '../components/AppContent/ChartContent.vue'\nimport ContactsContent from '../components/AppContent/ContactsContent.vue'\nimport ContactsPicker from '../components/EntityPicker/ContactsPicker.vue'\nimport ImportView from './Processing/ImportView.vue'\nimport RootNavigation from '../components/AppNavigation/RootNavigation.vue'\nimport SettingsImportContacts from '../components/AppNavigation/Settings/SettingsImportContacts.vue'\nimport IconAdd from 'vue-material-design-icons/Plus.vue'\n\nimport Contact from '../models/contact.js'\nimport rfcProps from '../models/rfcProps.js'\n\nimport client from '../services/cdav.js'\nimport isCirclesEnabled from '../services/isCirclesEnabled.js'\n\nimport usePrincipalsStore from '../store/principals.js'\n\nexport default {\n\tname: 'Contacts',\n\n\tcomponents: {\n\t\tButton,\n\t\tCircleContent,\n\t\tChartContent,\n\t\tContactsContent,\n\t\tContactsPicker,\n\t\tContent,\n\t\tImportView,\n\t\tIconAdd,\n\t\tModal,\n\t\tRootNavigation,\n\t\tSettingsImportContacts,\n\t},\n\n\tmixins: [\n\t\tisMobile,\n\t],\n\n\t// passed by the router\n\tprops: {\n\t\tselectedCircle: {\n\t\t\ttype: String,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tselectedGroup: {\n\t\t\ttype: String,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tselectedContact: {\n\t\t\ttype: String,\n\t\t\tdefault: undefined,\n\t\t},\n\t\tselectedChart: {\n\t\t\ttype: String,\n\t\t\tdefault: undefined,\n\t\t},\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\t// The object shorthand syntax is breaking builds (bug in @babel/preset-env)\n\t\t\t/* eslint-disable object-shorthand */\n\t\t\tappName: appName,\n\n\t\t\t// Let's but the loading state to true if circles is enabled\n\t\t\tloadingCircles: isCirclesEnabled,\n\t\t\tloadingContacts: true,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t// store getters\n\t\taddressbooks() {\n\t\t\treturn this.$store.getters.getAddressbooks\n\t\t},\n\t\tcontacts() {\n\t\t\treturn this.$store.getters.getContacts\n\t\t},\n\t\tsortedContacts() {\n\t\t\treturn this.$store.getters.getSortedContacts\n\t\t},\n\t\tgroups() {\n\t\t\treturn this.$store.getters.getGroups\n\t\t},\n\t\tcircles() {\n\t\t\treturn this.$store.getters.getCircles\n\t\t},\n\t\torderKey() {\n\t\t\treturn this.$store.getters.getOrderKey\n\t\t},\n\t\timportState() {\n\t\t\treturn this.$store.getters.getImportState\n\t\t},\n\t\tisEmptyGroup() {\n\t\t\treturn this.contactsList.length === 0\n\t\t},\n\t\tisChartView() {\n\t\t\treturn !!this.selectedChart\n\t\t},\n\t\t/**\n\t\t * Are we importing contacts ?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisImporting() {\n\t\t\treturn this.importState.stage !== 'default'\n\t\t},\n\t\t/**\n\t\t * Are we done importing contacts ?\n\t\t *\n\t\t * @return {boolean}\n\t\t */\n\t\tisImportDone() {\n\t\t\treturn this.importState.stage === 'done'\n\t\t},\n\n\t\t// first enabled addressbook of the list\n\t\tdefaultAddressbook() {\n\t\t\treturn this.addressbooks.find(addressbook => !addressbook.readOnly && addressbook.enabled)\n\t\t},\n\n\t\t/**\n\t\t * Contacts list based on the selected group.\n\t\t * Those filters are pretty fast, so let's only\n\t\t * intersect the groups contacts and the full\n\t\t * sorted contacts List.\n\t\t *\n\t\t * @return {Array}\n\t\t */\n\t\tcontactsList() {\n\t\t\tif (this.selectedGroup === GROUP_ALL_CONTACTS) {\n\t\t\t\treturn this.sortedContacts\n\t\t\t} else if (this.selectedGroup === GROUP_NO_GROUP_CONTACTS) {\n\t\t\t\treturn this.ungroupedContacts.map(contact => this.sortedContacts.find(item => item.key === contact.key))\n\t\t\t} else if (this.selectedGroup === ROUTE_CIRCLE) {\n\t\t\t\treturn []\n\t\t\t}\n\t\t\tconst group = this.groups.filter(group => group.name === this.selectedGroup)[0]\n\t\t\tif (group) {\n\t\t\t\treturn this.sortedContacts.filter(contact => group.contacts.indexOf(contact.key) >= 0)\n\t\t\t}\n\t\t\treturn []\n\t\t},\n\n\t\tisCirclesView() {\n\t\t\treturn this.selectedGroup === ROUTE_CIRCLE\n\t\t},\n\n\t\tungroupedContacts() {\n\t\t\treturn this.sortedContacts.filter(contact => this.contacts[contact.key].groups && this.contacts[contact.key].groups.length === 0)\n\t\t},\n\t},\n\n\twatch: {\n\t\t// watch url change and group select\n\t\tselectedGroup() {\n\t\t\tif (!this.isMobile && !this.selectedChart) {\n\t\t\t\tthis.selectFirstContactIfNone()\n\t\t\t}\n\t\t},\n\t\t// watch url change and contact select\n\t\tselectedContact() {\n\t\t\tif (!this.isMobile && !this.selectedChart) {\n\t\t\t\tthis.selectFirstContactIfNone()\n\t\t\t}\n\t\t},\n\t},\n\n\tmounted() {\n\t\tif (this.isCirclesEnabled) {\n\t\t\tthis.logger.info('Circles frontend enabled')\n\t\t} else {\n\t\t\tthis.logger.info('No compatible version of circles found')\n\t\t}\n\t},\n\n\tasync beforeMount() {\n\t\t// get addressbooks then get contacts\n\t\tclient.connect({ enableCardDAV: true }).then(() => {\n\t\t\tthis.logger.debug('Connected to dav!', { client })\n\t\t\tconst principalsStore = usePrincipalsStore()\n\t\t\tprincipalsStore.setCurrentUserPrincipal(client)\n\t\t\tthis.$store.dispatch('getAddressbooks')\n\t\t\t\t.then((addressbooks) => {\n\t\t\t\t\tconst writeableAddressBooks = addressbooks.filter(addressbook => !addressbook.readOnly)\n\n\t\t\t\t\t// No writeable addressbooks? Create a new one!\n\t\t\t\t\tif (writeableAddressBooks.length === 0) {\n\t\t\t\t\t\tthis.$store.dispatch('appendAddressbook', { displayName: t('contacts', 'Contacts') })\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tthis.fetchContacts()\n\t\t\t\t\t\t\t})\n\t\t\t\t\t// else, let's get those contacts!\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.fetchContacts()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t// check local storage for orderKey\n\t\t\tif (localStorage.getItem('orderKey')) {\n\t\t\t\t// run setOrder mutation with local storage key\n\t\t\t\tthis.$store.commit('setOrder', localStorage.getItem('orderKey'))\n\t\t\t}\n\t\t})\n\n\t\t// Get circles if enabled\n\t\tif (isCirclesEnabled) {\n\t\t\tthis.$store.dispatch('getCircles').then(() => {\n\t\t\t\tthis.loadingCircles = false\n\t\t\t})\n\t\t}\n\t},\n\n\tmethods: {\n\t\tasync newContact() {\n\t\t\tconst rev = new ICAL.VCardTime()\n\t\t\tconst contact = new Contact(`\n\t\t\t\tBEGIN:VCARD\n\t\t\t\tVERSION:4.0\n\t\t\t\tPRODID:-//Nextcloud Contacts v${appVersion}\n\t\t\t\tEND:VCARD\n\t\t\t`.trim().replace(/\\t/gm, ''),\n\t\t\tthis.defaultAddressbook)\n\n\t\t\tcontact.fullName = t('contacts', 'Name')\n\t\t\trev.fromUnixTime(Date.now() / 1000)\n\t\t\tcontact.rev = rev\n\n\t\t\t// itterate over all properties (filter is not usable on objects and we need the key of the property)\n\t\t\tconst properties = rfcProps.properties\n\t\t\tfor (const name in properties) {\n\t\t\t\tif (properties[name].default) {\n\t\t\t\t\tconst defaultData = properties[name].defaultValue\n\t\t\t\t\tlet defaultValue = defaultData.value\n\t\t\t\t\tif (Array.isArray(defaultValue)) {\n\t\t\t\t\t\tdefaultValue = [...defaultValue]\n\t\t\t\t\t}\n\t\t\t\t\t// add default field\n\t\t\t\t\tconst property = contact.vCard.addPropertyWithValue(name, defaultValue)\n\t\t\t\t\t// add default type\n\t\t\t\t\tif (defaultData.type) {\n\t\t\t\t\t\tproperty.setParameter('type', defaultData.type)\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// set group if it's selected already\n\t\t\t// BUT NOT if it's the _fake_ groups like all contacts and not grouped\n\t\t\tif ([GROUP_ALL_CONTACTS, GROUP_NO_GROUP_CONTACTS].indexOf(this.selectedGroup) === -1) {\n\t\t\t\tcontact.groups = [this.selectedGroup]\n\t\t\t}\n\t\t\ttry {\n\t\t\t\t// this will trigger the proper commits to groups, contacts and addressbook\n\t\t\t\tawait this.$store.dispatch('addContact', contact)\n\t\t\t\tawait this.$router.push({\n\t\t\t\t\tname: 'contact',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tselectedGroup: this.selectedGroup,\n\t\t\t\t\t\tselectedContact: contact.key,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tshowError(t('contacts', 'Unable to create the contact.'))\n\t\t\t\tconsole.error(error)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Dispatch sorting update request to the store\n\t\t *\n\t\t * @param {string} orderKey the object key to order by\n\t\t */\n\t\tupdateSorting(orderKey = 'displayName') {\n\t\t\tthis.$store.commit('setOrder', orderKey)\n\t\t\tthis.$store.commit('sortContacts')\n\t\t},\n\n\t\t/**\n\t\t * Fetch the contacts of each addressbooks\n\t\t */\n\t\tfetchContacts() {\n\t\t\t// wait for all addressbooks to have fetch their contacts\n\t\t\t// don't filter disabled at this point, because sum of contacts per address book is shown\n\t\t\tPromise.all(this.addressbooks\n\t\t\t\t.map(addressbook => {\n\t\t\t\t\tif (!addressbook.enabled) {\n\t\t\t\t\t\treturn Promise.resolve()\n\t\t\t\t\t}\n\t\t\t\t\treturn this.$store.dispatch('getContactsFromAddressBook', { addressbook })\n\t\t\t\t}),\n\t\t\t).then(() => {\n\t\t\t\tthis.loadingContacts = false\n\t\t\t\tif (!this.isMobile && !this.selectedChart) {\n\t\t\t\t\tthis.selectFirstContactIfNone()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t/**\n\t\t * Select the first contact of the list\n\t\t * if none are selected already\n\t\t */\n\t\tselectFirstContactIfNone() {\n\t\t\t// Do not redirect if pending import\n\t\t\tif (this.$route.name === 'import') {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst inList = this.contactsList.findIndex(contact => contact.key === this.selectedContact) > -1\n\t\t\tif (this.selectedContact === undefined || !inList) {\n\t\t\t\t// Unknown contact\n\t\t\t\tif (this.selectedContact && !inList) {\n\t\t\t\t\tshowError(t('contacts', 'Contact not found'))\n\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\tname: 'group',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tselectedGroup: this.selectedGroup,\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\t// Unknown group\n\t\t\t\tif (!this.selectedCircle\n\t\t\t\t\t&& !this.groups.find(group => group.name === this.selectedGroup)\n\t\t\t\t\t&& GROUP_ALL_CONTACTS !== this.selectedGroup\n\t\t\t\t\t&& GROUP_NO_GROUP_CONTACTS !== this.selectedGroup\n\t\t\t\t\t&& ROUTE_CIRCLE !== this.selectedGroup) {\n\t\t\t\t\tshowError(t('contacts', 'Group {group} not found', { group: this.selectedGroup }))\n\t\t\t\t\tconsole.error('Group not found', this.selectedGroup)\n\n\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\tname: 'root',\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tif (Object.keys(this.contactsList).length) {\n\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\tname: 'contact',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tselectedGroup: this.selectedGroup,\n\t\t\t\t\t\t\tselectedContact: Object.values(this.contactsList)[0].key,\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Done importing, the user closed the import status screen\n\t\t */\n\t\tcloseImport() {\n\t\t\tthis.$store.dispatch('changeStage', 'default')\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.import-and-new-contact-buttons {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 4px;\n}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport Vue from 'vue'\nimport Router from 'vue-router'\nimport { generateUrl } from '@nextcloud/router'\n\nimport { ROUTE_CIRCLE, ROUTE_CHART } from '../models/constants.ts'\nimport Contacts from '../views/Contacts.vue'\n\nVue.use(Router)\n\nexport default new Router({\n\tmode: 'history',\n\t// if index.php is in the url AND we got this far, then it's working:\n\t// let's keep using index.php in the url\n\tbase: generateUrl('/apps/contacts', ''),\n\tlinkActiveClass: 'active',\n\troutes: [\n\t\t{\n\t\t\tpath: '/',\n\t\t\tcomponent: Contacts,\n\t\t\tprops: true,\n\t\t\tname: 'root',\n\t\t\t// always load default group\n\t\t\tredirect: {\n\t\t\t\tname: 'group',\n\t\t\t\tparams: { selectedGroup: t('contacts', 'All contacts') },\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tpath: `/${ROUTE_CHART}/:selectedChart`,\n\t\t\t\t\tname: 'chart',\n\t\t\t\t\tcomponent: Contacts,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpath: 'import',\n\t\t\t\t\tname: 'import',\n\t\t\t\t\tcomponent: Contacts,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpath: `${ROUTE_CIRCLE}/:selectedCircle`,\n\t\t\t\t\tname: 'circle',\n\t\t\t\t\tcomponent: Contacts,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpath: ':selectedGroup',\n\t\t\t\t\tname: 'group',\n\t\t\t\t\tcomponent: Contacts,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpath: ':selectedGroup/:selectedContact',\n\t\t\t\t\tname: 'contact',\n\t\t\t\t\tcomponent: Contacts,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n})\n","/**\n * SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n// eslint-disable-next-line import/no-unresolved, n/no-missing-import\nimport 'vite/modulepreload-polyfill'\n\nimport { sync } from 'vuex-router-sync'\nimport Vue from 'vue'\n\nimport App from './ContactsRoot.vue'\nimport router from './router/index.js'\nimport store from './store/index.js'\nimport logger from './services/logger.js'\n\n/** GLOBAL COMPONENTS AND DIRECTIVE */\nimport ClickOutside from 'vue-click-outside'\nimport { Tooltip as VTooltip } from '@nextcloud/vue'\n\n// Global scss sheets\nimport './css/contacts.scss'\n\n// Dialogs css\nimport '@nextcloud/dialogs/style.css'\n\nimport { createPinia, PiniaVuePlugin } from 'pinia'\n\nVue.use(PiniaVuePlugin)\nconst pinia = createPinia()\n\n// Register global directives\nVue.directive('ClickOutside', ClickOutside)\nVue.directive('Tooltip', VTooltip)\n\nsync(store, router)\n\nVue.prototype.t = t\nVue.prototype.n = n\n\nVue.prototype.appName = appName\nVue.prototype.appVersion = appVersion\nVue.prototype.logger = logger\nVue.prototype.OC = window.OC\nVue.prototype.OCA = window.OCA\n\n// enable devtools in development mode\nif (import.meta.env.MODE === 'development') {\n\tVue.config.devtools = true\n}\n\n// Force redirect if rewrite enabled but accessed through index.php\nif (window.location.pathname.split('/')[1] === 'index.php'\n\t&& window.OC.config.modRewriteWorking) {\n\trouter.push({\n\t\tname: 'group',\n\t\tparams: { selectedGroup: t('contacts', 'All contacts') },\n\t})\n}\n\nexport default new Vue({\n\tel: '#content',\n\tname: 'ContactsApp',\n\trouter,\n\tstore,\n\trender: h => h(App),\n\tpinia,\n})\n"],"file":"js/contacts-main.mjs"}